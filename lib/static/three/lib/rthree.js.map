{"version":3,"file":"rthree.js","sources":["../../../../../node_modules/three/src/math/Vector2.js","../../../../../node_modules/three/src/math/Matrix4.js","../../../../../node_modules/three/src/math/Vector3.js","../../../../../node_modules/three/src/constants.js","../../../../../node_modules/three/src/math/Math.js","../../../../../node_modules/three/src/core/EventDispatcher.js","../../../../../node_modules/three/src/math/Quaternion.js","../../../../../node_modules/three/src/math/Matrix3.js","../../../../../node_modules/three/src/textures/Texture.js","../../../../../node_modules/three/src/math/Box3.js","../../../../../node_modules/three/src/math/Sphere.js","../../../../../node_modules/three/src/math/Frustum.js","../../../../../node_modules/three/src/textures/DataTexture.js","../../../../../node_modules/three/src/math/Plane.js","../../../../../node_modules/three/src/math/Color.js","../../../../../node_modules/three/src/renderers/shaders/ShaderChunk.js","../../../../../node_modules/three/src/renderers/shaders/UniformsUtils.js","../../../../../node_modules/three/src/math/Euler.js","../../../../../node_modules/three/src/renderers/shaders/UniformsLib.js","../../../../../node_modules/three/src/renderers/shaders/ShaderLib.js","../../../../../node_modules/three/src/math/Vector4.js","../../../../../node_modules/three/src/renderers/webgl/WebGLAttributes.js","../../../../../node_modules/three/src/core/Layers.js","../../../../../node_modules/three/src/core/Object3D.js","../../../../../node_modules/three/src/cameras/Camera.js","../../../../../node_modules/three/src/cameras/OrthographicCamera.js","../../../../../node_modules/three/src/core/Face3.js","../../../../../node_modules/three/src/core/Geometry.js","../../../../../node_modules/three/src/core/BufferAttribute.js","../../../../../node_modules/three/src/core/DirectGeometry.js","../../../../../node_modules/three/src/utils.js","../../../../../node_modules/three/src/core/BufferGeometry.js","../../../../../node_modules/three/src/geometries/BoxGeometry.js","../../../../../node_modules/three/src/geometries/PlaneGeometry.js","../../../../../node_modules/three/src/materials/Material.js","../../../../../node_modules/three/src/math/Ray.js","../../../../../node_modules/three/src/math/Line3.js","../../../../../node_modules/three/src/math/Triangle.js","../../../../../node_modules/three/src/materials/MeshBasicMaterial.js","../../../../../node_modules/three/src/materials/ShaderMaterial.js","../../../../../node_modules/three/src/objects/Mesh.js","../../../../../node_modules/three/src/renderers/webgl/WebGLBackground.js","../../../../../node_modules/three/src/renderers/webgl/WebGLBufferRenderer.js","../../../../../node_modules/three/src/renderers/webgl/WebGLCapabilities.js","../../../../../node_modules/three/src/renderers/webgl/WebGLClipping.js","../../../../../node_modules/three/src/renderers/webgl/WebGLExtensions.js","../../../../../node_modules/three/src/renderers/webgl/WebGLGeometries.js","../../../../../node_modules/three/src/renderers/webgl/WebGLIndexedBufferRenderer.js","../../../../../node_modules/three/src/renderers/webgl/WebGLInfo.js","../../../../../node_modules/three/src/renderers/webgl/WebGLMorphtargets.js","../../../../../node_modules/three/src/renderers/webgl/WebGLObjects.js","../../../../../node_modules/three/src/textures/CubeTexture.js","../../../../../node_modules/three/src/renderers/webgl/WebGLUniforms.js","../../../../../node_modules/three/src/renderers/webgl/WebGLShader.js","../../../../../node_modules/three/src/renderers/webgl/WebGLProgram.js","../../../../../node_modules/three/src/renderers/webgl/WebGLPrograms.js","../../../../../node_modules/three/src/renderers/webgl/WebGLProperties.js","../../../../../node_modules/three/src/renderers/webgl/WebGLRenderLists.js","../../../../../node_modules/three/src/renderers/webgl/WebGLLights.js","../../../../../node_modules/three/src/objects/Line.js","../../../../../node_modules/three/src/helpers/ArrowHelper.js","../../../../../node_modules/three/src/renderers/webgl/WebGLRenderStates.js","../../../../../node_modules/three/src/renderers/WebGLRenderTarget.js","../../../../../node_modules/three/src/materials/MeshDepthMaterial.js","../../../../../node_modules/three/src/materials/MeshDistanceMaterial.js","../../../../../node_modules/three/src/renderers/webgl/WebGLShadowMap.js","../../../../../node_modules/three/src/textures/CanvasTexture.js","../../../../../node_modules/three/src/renderers/webgl/WebGLSpriteRenderer.js","../../../../../node_modules/three/src/renderers/webgl/WebGLState.js","../../../../../node_modules/three/src/renderers/webgl/WebGLTextures.js","../../../../../node_modules/three/src/renderers/webgl/WebGLUtils.js","../../../../../node_modules/three/src/cameras/PerspectiveCamera.js","../../../../../node_modules/three/src/cameras/ArrayCamera.js","../../../../../node_modules/three/src/renderers/webvr/WebVRManager.js","../../../../../node_modules/three/src/scenes/Scene.js","../../../../../node_modules/three/src/geometries/CylinderGeometry.js","../../../../../node_modules/three/src/core/Clock.js","../../../../../node_modules/three/src/core/Raycaster.js","../../../../../node_modules/three/src/materials/LineBasicMaterial.js","../../../../../node_modules/three/src/objects/LineSegments.js","../../../../../node_modules/three/src/materials/MeshStandardMaterial.js","../../../../../node_modules/three/src/materials/MeshPhysicalMaterial.js","../../../../../node_modules/three/src/materials/ShadowMaterial.js","../../../../../node_modules/three/src/materials/LineDashedMaterial.js","../../../../../node_modules/three/src/lights/Light.js","../../../../../node_modules/three/src/lights/LightShadow.js","../../../../../node_modules/three/src/lights/DirectionalLightShadow.js","../../../../../node_modules/three/src/lights/DirectionalLight.js","../../../../../node_modules/three/src/lights/AmbientLight.js","../../../../../node_modules/three/src/lights/HemisphereLight.js","../../../../../node_modules/three/src/loaders/Cache.js","../../../../../node_modules/three/src/loaders/LoadingManager.js","../../../../../node_modules/three/src/loaders/ImageLoader.js","../../../../../node_modules/three/src/loaders/TextureLoader.js","../../../../../node_modules/three/src/loaders/CubeTextureLoader.js","../../../../../node_modules/three/src/extras/core/Curve.js","../../../../../node_modules/three/src/extras/curves/EllipseCurve.js","../../../../../node_modules/three/src/extras/curves/ArcCurve.js","../../../../../node_modules/three/src/extras/curves/CatmullRomCurve3.js","../../../../../node_modules/three/src/extras/core/Interpolations.js","../../../../../node_modules/three/src/extras/curves/CubicBezierCurve.js","../../../../../node_modules/three/src/extras/curves/CubicBezierCurve3.js","../../../../../node_modules/three/src/extras/curves/LineCurve.js","../../../../../node_modules/three/src/extras/curves/LineCurve3.js","../../../../../node_modules/three/src/extras/curves/QuadraticBezierCurve.js","../../../../../node_modules/three/src/extras/curves/QuadraticBezierCurve3.js","../../../../../node_modules/three/src/extras/curves/SplineCurve.js","../../../../../node_modules/three/src/extras/core/CurvePath.js","../../../../../node_modules/three/src/extras/core/Path.js","../../../../../node_modules/three/src/extras/core/Shape.js","../../../../../node_modules/three/src/extras/Earcut.js","../../../../../node_modules/three/src/extras/ShapeUtils.js","../../../../../node_modules/three/src/extras/core/ShapePath.js","../../../../../node_modules/three/src/extras/core/Font.js","../../../../../node_modules/three/src/loaders/FileLoader.js","../../../../../node_modules/three/src/loaders/FontLoader.js","../../../../../node_modules/three/src/geometries/ExtrudeGeometry.js","../../../../../node_modules/three/src/geometries/TextGeometry.js","../../../../../node_modules/three/src/materials/MeshPhongMaterial.js","../../../../../node_modules/three/src/core/Uniform.js","../../../../../node_modules/three/src/geometries/SphereGeometry.js","../../../../../node_modules/three/src/lights/SpotLightShadow.js","../../../../../node_modules/three/src/lights/SpotLight.js","../../../../../node_modules/three/src/materials/SpriteMaterial.js","../../../../../node_modules/three/src/materials/RawShaderMaterial.js","../../../../../node_modules/three/src/materials/PointsMaterial.js","../../../../../node_modules/three/src/materials/MeshToonMaterial.js","../../../../../node_modules/three/src/materials/MeshNormalMaterial.js","../../../../../node_modules/three/src/materials/MeshLambertMaterial.js","../../../../../node_modules/three/src/loaders/Loader.js","../../../../../node_modules/three/src/loaders/MaterialLoader.js","../../../../../node_modules/three/src/loaders/LoaderUtils.js","../../../../../node_modules/three/src/objects/Group.js","../../../../../node_modules/three/src/animation/AnimationUtils.js","../../../../../node_modules/three/src/animation/tracks/StringKeyframeTrack.js","../../../../../node_modules/three/src/animation/tracks/BooleanKeyframeTrack.js","../../../../../node_modules/three/src/math/Interpolant.js","../../../../../node_modules/three/src/math/interpolants/QuaternionLinearInterpolant.js","../../../../../node_modules/three/src/animation/tracks/QuaternionKeyframeTrack.js","../../../../../node_modules/three/src/animation/tracks/ColorKeyframeTrack.js","../../../../../node_modules/three/src/animation/tracks/NumberKeyframeTrack.js","../../../../../node_modules/three/src/math/interpolants/CubicInterpolant.js","../../../../../node_modules/three/src/math/interpolants/LinearInterpolant.js","../../../../../node_modules/three/src/math/interpolants/DiscreteInterpolant.js","../../../../../node_modules/three/src/animation/KeyframeTrack.js","../../../../../node_modules/three/src/renderers/WebGLRenderer.js"],"sourcesContent":["/**\n * @author mrdoob / http://mrdoob.com/\n * @author philogb / http://blog.thejit.org/\n * @author egraether / http://egraether.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nfunction Vector2( x, y ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\n}\n\nObject.defineProperties( Vector2.prototype, {\n\n\t\"width\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.x = value;\n\n\t\t}\n\n\t},\n\n\t\"height\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.y = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Vector2.prototype, {\n\n\tisVector2: true,\n\n\tset: function ( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min = new Vector2();\n\t\tvar max = new Vector2();\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tmin.set( minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tangle: function () {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tvar angle = Math.atan2( this.y, this.x );\n\n\t\tif ( angle < 0 ) angle += 2 * Math.PI;\n\n\t\treturn angle;\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t},\n\n\trotateAround: function ( center, angle ) {\n\n\t\tvar c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tvar x = this.x - center.x;\n\t\tvar y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector2 };\n","import { Vector3 } from './Vector3.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Matrix4() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix4.prototype, {\n\n\tisMatrix4: true,\n\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t},\n\n\tcopyPosition: function ( m ) {\n\n\t\tvar te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\textractRotation: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function extractRotation( m ) {\n\n\t\t\tvar te = this.elements;\n\t\t\tvar me = m.elements;\n\n\t\t\tvar scaleX = 1 / v1.setFromMatrixColumn( m, 0 ).length();\n\t\t\tvar scaleY = 1 / v1.setFromMatrixColumn( m, 1 ).length();\n\t\t\tvar scaleZ = 1 / v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakeRotationFromEuler: function ( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromQuaternion: function ( q ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar x = q._x, y = q._y, z = q._z, w = q._w;\n\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tte[ 0 ] = 1 - ( yy + zz );\n\t\tte[ 4 ] = xy - wz;\n\t\tte[ 8 ] = xz + wy;\n\n\t\tte[ 1 ] = xy + wz;\n\t\tte[ 5 ] = 1 - ( xx + zz );\n\t\tte[ 9 ] = yz - wx;\n\n\t\tte[ 2 ] = xz - wy;\n\t\tte[ 6 ] = yz + wx;\n\t\tte[ 10 ] = 1 - ( xx + yy );\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function () {\n\n\t\tvar x = new Vector3();\n\t\tvar y = new Vector3();\n\t\tvar z = new Vector3();\n\n\t\treturn function lookAt( eye, target, up ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tz.subVectors( eye, target );\n\n\t\t\tif ( z.lengthSq() === 0 ) {\n\n\t\t\t\t// eye and target are in the same position\n\n\t\t\t\tz.z = 1;\n\n\t\t\t}\n\n\t\t\tz.normalize();\n\t\t\tx.crossVectors( up, z );\n\n\t\t\tif ( x.lengthSq() === 0 ) {\n\n\t\t\t\t// up and z are parallel\n\n\t\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t\tz.x += 0.0001;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz.z += 0.0001;\n\n\t\t\t\t}\n\n\t\t\t\tz.normalize();\n\t\t\t\tx.crossVectors( up, z );\n\n\t\t\t}\n\n\t\t\tx.normalize();\n\t\t\ty.crossVectors( z, x );\n\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmultiply: function ( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tapplyToBufferAttribute: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function applyToBufferAttribute( attribute ) {\n\n\t\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\tv1.x = attribute.getX( i );\n\t\t\t\tv1.y = attribute.getY( i );\n\t\t\t\tv1.z = attribute.getZ( i );\n\n\t\t\t\tv1.applyMatrix4( this );\n\n\t\t\t\tattribute.setXYZ( i, v1.x, v1.y, v1.z );\n\n\t\t\t}\n\n\t\t\treturn attribute;\n\n\t\t};\n\n\t}(),\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar te = this.elements;\n\t\tvar tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tsetPosition: function ( v ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 12 ] = v.x;\n\t\tte[ 13 ] = v.y;\n\t\tte[ 14 ] = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tgetInverse: function ( m, throwOnDegenerate ) {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tvar te = this.elements,\n\t\t\tme = m.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( v ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxScaleOnAxis: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t},\n\n\tmakeTranslation: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationX: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationY: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationZ: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tvar c = Math.cos( angle );\n\t\tvar s = Math.sin( angle );\n\t\tvar t = 1 - c;\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\n\t\tvar tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\t return this;\n\n\t},\n\n\tmakeScale: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeShear: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcompose: function ( position, quaternion, scale ) {\n\n\t\tthis.makeRotationFromQuaternion( quaternion );\n\t\tthis.scale( scale );\n\t\tthis.setPosition( position );\n\n\t\treturn this;\n\n\t},\n\n\tdecompose: function () {\n\n\t\tvar vector = new Vector3();\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function decompose( position, quaternion, scale ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t\t// if determine is negative, we need to invert one scale\n\t\t\tvar det = this.determinant();\n\t\t\tif ( det < 0 ) sx = - sx;\n\n\t\t\tposition.x = te[ 12 ];\n\t\t\tposition.y = te[ 13 ];\n\t\t\tposition.z = te[ 14 ];\n\n\t\t\t// scale the rotation part\n\t\t\tmatrix.copy( this );\n\n\t\t\tvar invSX = 1 / sx;\n\t\t\tvar invSY = 1 / sy;\n\t\t\tvar invSZ = 1 / sz;\n\n\t\t\tmatrix.elements[ 0 ] *= invSX;\n\t\t\tmatrix.elements[ 1 ] *= invSX;\n\t\t\tmatrix.elements[ 2 ] *= invSX;\n\n\t\t\tmatrix.elements[ 4 ] *= invSY;\n\t\t\tmatrix.elements[ 5 ] *= invSY;\n\t\t\tmatrix.elements[ 6 ] *= invSY;\n\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\n\n\t\t\tquaternion.setFromRotationMatrix( matrix );\n\n\t\t\tscale.x = sx;\n\t\t\tscale.y = sy;\n\t\t\tscale.z = sz;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakePerspective: function ( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\t\tvar x = 2 * near / ( right - left );\n\t\tvar y = 2 * near / ( top - bottom );\n\n\t\tvar a = ( right + left ) / ( right - left );\n\t\tvar b = ( top + bottom ) / ( top - bottom );\n\t\tvar c = - ( far + near ) / ( far - near );\n\t\tvar d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t},\n\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar w = 1.0 / ( right - left );\n\t\tvar h = 1.0 / ( top - bottom );\n\t\tvar p = 1.0 / ( far - near );\n\n\t\tvar x = ( right + left ) * w;\n\t\tvar y = ( top + bottom ) * h;\n\t\tvar z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n\nexport { Matrix4 };\n","import { _Math } from './Math.js';\nimport { Matrix4 } from './Matrix4.js';\nimport { Quaternion } from './Quaternion.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector3( x, y, z ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\n}\n\nObject.assign( Vector3.prototype, {\n\n\tisVector3: true,\n\n\tset: function ( x, y, z ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVectors: function ( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyEuler: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function applyEuler( euler ) {\n\n\t\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t\t}\n\n\t\t\treturn this.applyQuaternion( quaternion.setFromEuler( euler ) );\n\n\t\t};\n\n\t}(),\n\n\tapplyAxisAngle: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function applyAxisAngle( axis, angle ) {\n\n\t\t\treturn this.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tvar w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tvar ix = qw * x + qy * z - qz * y;\n\t\tvar iy = qw * y + qz * x - qx * z;\n\t\tvar iz = qw * z + qx * y - qy * x;\n\t\tvar iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t},\n\n\tproject: function () {\n\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function project( camera ) {\n\n\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\n\t\t\treturn this.applyMatrix4( matrix );\n\n\t\t};\n\n\t}(),\n\n\tunproject: function () {\n\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function unproject( camera ) {\n\n\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\n\t\t\treturn this.applyMatrix4( matrix );\n\n\t\t};\n\n\t}(),\n\n\ttransformDirection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min = new Vector3();\n\t\tvar max = new Vector3();\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tmin.set( minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t},\n\n\t// TODO lengthSquared?\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tcross: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t},\n\n\tcrossVectors: function ( a, b ) {\n\n\t\tvar ax = a.x, ay = a.y, az = a.z;\n\t\tvar bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t},\n\n\tprojectOnVector: function ( vector ) {\n\n\t\tvar scalar = vector.dot( this ) / vector.lengthSq();\n\n\t\treturn this.copy( vector ).multiplyScalar( scalar );\n\n\t},\n\n\tprojectOnPlane: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function projectOnPlane( planeNormal ) {\n\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\n\n\t\t\treturn this.sub( v1 );\n\n\t\t};\n\n\t}(),\n\n\treflect: function () {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function reflect( normal ) {\n\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t\t};\n\n\t}(),\n\n\tangleTo: function ( v ) {\n\n\t\tvar theta = this.dot( v ) / ( Math.sqrt( this.lengthSq() * v.lengthSq() ) );\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( _Math.clamp( theta, - 1, 1 ) );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t},\n\n\tsetFromSpherical: function ( s ) {\n\n\t\tvar sinPhiRadius = Math.sin( s.phi ) * s.radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( s.theta );\n\t\tthis.y = Math.cos( s.phi ) * s.radius;\n\t\tthis.z = sinPhiRadius * Math.cos( s.theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCylindrical: function ( c ) {\n\n\t\tthis.x = c.radius * Math.sin( c.theta );\n\t\tthis.y = c.y;\n\t\tthis.z = c.radius * Math.cos( c.theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixPosition: function ( m ) {\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixScale: function ( m ) {\n\n\t\tvar sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tvar sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tvar sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixColumn: function ( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector3 };\n","export var REVISION = '92';\nexport var MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\nexport var CullFaceNone = 0;\nexport var CullFaceBack = 1;\nexport var CullFaceFront = 2;\nexport var CullFaceFrontBack = 3;\nexport var FrontFaceDirectionCW = 0;\nexport var FrontFaceDirectionCCW = 1;\nexport var BasicShadowMap = 0;\nexport var PCFShadowMap = 1;\nexport var PCFSoftShadowMap = 2;\nexport var FrontSide = 0;\nexport var BackSide = 1;\nexport var DoubleSide = 2;\nexport var FlatShading = 1;\nexport var SmoothShading = 2;\nexport var NoColors = 0;\nexport var FaceColors = 1;\nexport var VertexColors = 2;\nexport var NoBlending = 0;\nexport var NormalBlending = 1;\nexport var AdditiveBlending = 2;\nexport var SubtractiveBlending = 3;\nexport var MultiplyBlending = 4;\nexport var CustomBlending = 5;\nexport var AddEquation = 100;\nexport var SubtractEquation = 101;\nexport var ReverseSubtractEquation = 102;\nexport var MinEquation = 103;\nexport var MaxEquation = 104;\nexport var ZeroFactor = 200;\nexport var OneFactor = 201;\nexport var SrcColorFactor = 202;\nexport var OneMinusSrcColorFactor = 203;\nexport var SrcAlphaFactor = 204;\nexport var OneMinusSrcAlphaFactor = 205;\nexport var DstAlphaFactor = 206;\nexport var OneMinusDstAlphaFactor = 207;\nexport var DstColorFactor = 208;\nexport var OneMinusDstColorFactor = 209;\nexport var SrcAlphaSaturateFactor = 210;\nexport var NeverDepth = 0;\nexport var AlwaysDepth = 1;\nexport var LessDepth = 2;\nexport var LessEqualDepth = 3;\nexport var EqualDepth = 4;\nexport var GreaterEqualDepth = 5;\nexport var GreaterDepth = 6;\nexport var NotEqualDepth = 7;\nexport var MultiplyOperation = 0;\nexport var MixOperation = 1;\nexport var AddOperation = 2;\nexport var NoToneMapping = 0;\nexport var LinearToneMapping = 1;\nexport var ReinhardToneMapping = 2;\nexport var Uncharted2ToneMapping = 3;\nexport var CineonToneMapping = 4;\nexport var UVMapping = 300;\nexport var CubeReflectionMapping = 301;\nexport var CubeRefractionMapping = 302;\nexport var EquirectangularReflectionMapping = 303;\nexport var EquirectangularRefractionMapping = 304;\nexport var SphericalReflectionMapping = 305;\nexport var CubeUVReflectionMapping = 306;\nexport var CubeUVRefractionMapping = 307;\nexport var RepeatWrapping = 1000;\nexport var ClampToEdgeWrapping = 1001;\nexport var MirroredRepeatWrapping = 1002;\nexport var NearestFilter = 1003;\nexport var NearestMipMapNearestFilter = 1004;\nexport var NearestMipMapLinearFilter = 1005;\nexport var LinearFilter = 1006;\nexport var LinearMipMapNearestFilter = 1007;\nexport var LinearMipMapLinearFilter = 1008;\nexport var UnsignedByteType = 1009;\nexport var ByteType = 1010;\nexport var ShortType = 1011;\nexport var UnsignedShortType = 1012;\nexport var IntType = 1013;\nexport var UnsignedIntType = 1014;\nexport var FloatType = 1015;\nexport var HalfFloatType = 1016;\nexport var UnsignedShort4444Type = 1017;\nexport var UnsignedShort5551Type = 1018;\nexport var UnsignedShort565Type = 1019;\nexport var UnsignedInt248Type = 1020;\nexport var AlphaFormat = 1021;\nexport var RGBFormat = 1022;\nexport var RGBAFormat = 1023;\nexport var LuminanceFormat = 1024;\nexport var LuminanceAlphaFormat = 1025;\nexport var RGBEFormat = RGBAFormat;\nexport var DepthFormat = 1026;\nexport var DepthStencilFormat = 1027;\nexport var RGB_S3TC_DXT1_Format = 33776;\nexport var RGBA_S3TC_DXT1_Format = 33777;\nexport var RGBA_S3TC_DXT3_Format = 33778;\nexport var RGBA_S3TC_DXT5_Format = 33779;\nexport var RGB_PVRTC_4BPPV1_Format = 35840;\nexport var RGB_PVRTC_2BPPV1_Format = 35841;\nexport var RGBA_PVRTC_4BPPV1_Format = 35842;\nexport var RGBA_PVRTC_2BPPV1_Format = 35843;\nexport var RGB_ETC1_Format = 36196;\nexport var RGBA_ASTC_4x4_Format = 37808;\nexport var RGBA_ASTC_5x4_Format = 37809;\nexport var RGBA_ASTC_5x5_Format = 37810;\nexport var RGBA_ASTC_6x5_Format = 37811;\nexport var RGBA_ASTC_6x6_Format = 37812;\nexport var RGBA_ASTC_8x5_Format = 37813;\nexport var RGBA_ASTC_8x6_Format = 37814;\nexport var RGBA_ASTC_8x8_Format = 37815;\nexport var RGBA_ASTC_10x5_Format = 37816;\nexport var RGBA_ASTC_10x6_Format = 37817;\nexport var RGBA_ASTC_10x8_Format = 37818;\nexport var RGBA_ASTC_10x10_Format = 37819;\nexport var RGBA_ASTC_12x10_Format = 37820;\nexport var RGBA_ASTC_12x12_Format = 37821;\nexport var LoopOnce = 2200;\nexport var LoopRepeat = 2201;\nexport var LoopPingPong = 2202;\nexport var InterpolateDiscrete = 2300;\nexport var InterpolateLinear = 2301;\nexport var InterpolateSmooth = 2302;\nexport var ZeroCurvatureEnding = 2400;\nexport var ZeroSlopeEnding = 2401;\nexport var WrapAroundEnding = 2402;\nexport var TrianglesDrawMode = 0;\nexport var TriangleStripDrawMode = 1;\nexport var TriangleFanDrawMode = 2;\nexport var LinearEncoding = 3000;\nexport var sRGBEncoding = 3001;\nexport var GammaEncoding = 3007;\nexport var RGBEEncoding = 3002;\nexport var LogLuvEncoding = 3003;\nexport var RGBM7Encoding = 3004;\nexport var RGBM16Encoding = 3005;\nexport var RGBDEncoding = 3006;\nexport var BasicDepthPacking = 3200;\nexport var RGBADepthPacking = 3201;\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _Math = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: ( function () {\n\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n\n\t\tvar lut = [];\n\n\t\tfor ( var i = 0; i < 256; i ++ ) {\n\n\t\t\tlut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n\t\t}\n\n\t\treturn function generateUUID() {\n\n\t\t\tvar d0 = Math.random() * 0xffffffff | 0;\n\t\t\tvar d1 = Math.random() * 0xffffffff | 0;\n\t\t\tvar d2 = Math.random() * 0xffffffff | 0;\n\t\t\tvar d3 = Math.random() * 0xffffffff | 0;\n\t\t\tvar uuid = lut[ d0 & 0xff ] + lut[ d0 >> 8 & 0xff ] + lut[ d0 >> 16 & 0xff ] + lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t\tlut[ d1 & 0xff ] + lut[ d1 >> 8 & 0xff ] + '-' + lut[ d1 >> 16 & 0x0f | 0x40 ] + lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t\tlut[ d2 & 0x3f | 0x80 ] + lut[ d2 >> 8 & 0xff ] + '-' + lut[ d2 >> 16 & 0xff ] + lut[ d2 >> 24 & 0xff ] +\n\t\t\t\tlut[ d3 & 0xff ] + lut[ d3 >> 8 & 0xff ] + lut[ d3 >> 16 & 0xff ] + lut[ d3 >> 24 & 0xff ];\n\n\t\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\t\t\treturn uuid.toUpperCase();\n\n\t\t};\n\n\t} )(),\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\tlerp: function ( x, y, t ) {\n\n\t\treturn ( 1 - t ) * x + t * y;\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * _Math.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * _Math.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tceilPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tfloorPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n\t}\n\n};\n\n\nexport { _Math };\n","/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nfunction EventDispatcher() {}\n\nObject.assign( EventDispatcher.prototype, {\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tvar listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tvar index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\tvar array = listenerArray.slice( 0 );\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { EventDispatcher };\n","import { Vector3 } from './Vector3.js';\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nfunction Quaternion( x, y, z, w ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.assign( Quaternion, {\n\n\tslerp: function ( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t},\n\n\tslerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tvar x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ],\n\n\t\t\tx1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tvar s = 1 - t,\n\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tvar sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tvar tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n} );\n\nObject.defineProperties( Quaternion.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tw: {\n\n\t\tget: function () {\n\n\t\t\treturn this._w;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._w = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Quaternion.prototype, {\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t},\n\n\tcopy: function ( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromEuler: function ( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar x = euler._x, y = euler._y, z = euler._z, order = euler.order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tvar cos = Math.cos;\n\t\tvar sin = Math.sin;\n\n\t\tvar c1 = cos( x / 2 );\n\t\tvar c2 = cos( y / 2 );\n\t\tvar c3 = cos( z / 2 );\n\n\t\tvar s1 = sin( x / 2 );\n\t\tvar s2 = sin( y / 2 );\n\t\tvar s3 = sin( z / 2 );\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t}\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromAxisAngle: function ( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33,\n\t\t\ts;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromUnitVectors: function () {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tvar v1 = new Vector3();\n\t\tvar r;\n\n\t\tvar EPS = 0.000001;\n\n\t\treturn function setFromUnitVectors( vFrom, vTo ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new Vector3();\n\n\t\t\tr = vFrom.dot( vTo ) + 1;\n\n\t\t\tif ( r < EPS ) {\n\n\t\t\t\tr = 0;\n\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tv1.crossVectors( vFrom, vTo );\n\n\t\t\t}\n\n\t\t\tthis._x = v1.x;\n\t\t\tthis._y = v1.y;\n\t\t\tthis._z = v1.z;\n\t\t\tthis._w = r;\n\n\t\t\treturn this.normalize();\n\n\t\t};\n\n\t}(),\n\n\tinverse: function () {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t},\n\n\tconjugate: function () {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\tvar l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t},\n\n\tpremultiply: function ( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t},\n\n\tmultiplyQuaternions: function ( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tslerp: function ( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\n\n\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\n\n\t\t\tthis._w = 0.5 * ( w + this._w );\n\t\t\tthis._x = 0.5 * ( x + this._x );\n\t\t\tthis._y = 0.5 * ( y + this._y );\n\t\t\tthis._z = 0.5 * ( z + this._z );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {}\n\n} );\n\n\nexport { Quaternion };\n","import { Vector3 } from './Vector3.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n * @author tschw\n */\n\nfunction Matrix3() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0,\n\t\t0, 1, 0,\n\t\t0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix3.prototype, {\n\n\tisMatrix3: true,\n\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix4: function ( m ) {\n\n\t\tvar me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tapplyToBufferAttribute: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function applyToBufferAttribute( attribute ) {\n\n\t\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\tv1.x = attribute.getX( i );\n\t\t\t\tv1.y = attribute.getY( i );\n\t\t\t\tv1.z = attribute.getZ( i );\n\n\t\t\t\tv1.applyMatrix3( this );\n\n\t\t\t\tattribute.setXYZ( i, v1.x, v1.y, v1.z );\n\n\t\t\t}\n\n\t\t\treturn attribute;\n\n\t\t};\n\n\t}(),\n\n\tmultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t},\n\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\n\n\t\tif ( matrix && matrix.isMatrix4 ) {\n\n\t\t\tconsole.error( \"THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.\" );\n\n\t\t}\n\n\t\tvar me = matrix.elements,\n\t\t\tte = this.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar tmp, m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tgetNormalMatrix: function ( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\n\n\t},\n\n\ttransposeIntoArray: function ( r ) {\n\n\t\tvar m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetUvTransform: function ( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tvar c = Math.cos( rotation );\n\t\tvar s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t},\n\n\tscale: function ( sx, sy ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t},\n\n\trotate: function ( theta ) {\n\n\t\tvar c = Math.cos( theta );\n\t\tvar s = Math.sin( theta );\n\n\t\tvar te = this.elements;\n\n\t\tvar a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tvar a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( tx, ty ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n\nexport { Matrix3 };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nimport { EventDispatcher } from '../core/EventDispatcher.js';\nimport { UVMapping } from '../constants.js';\nimport { MirroredRepeatWrapping, ClampToEdgeWrapping, RepeatWrapping, LinearEncoding, UnsignedByteType, RGBAFormat, LinearMipMapLinearFilter, LinearFilter } from '../constants.js';\nimport { _Math } from '../math/Math.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Matrix3 } from '../math/Matrix3.js';\n\nvar textureId = 0;\n\nfunction Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\n\tthis.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\n\n\tthis.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\n\tthis.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearMipMapLinearFilter;\n\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\tthis.format = format !== undefined ? format : RGBAFormat;\n\tthis.type = type !== undefined ? type : UnsignedByteType;\n\n\tthis.offset = new Vector2( 0, 0 );\n\tthis.repeat = new Vector2( 1, 1 );\n\tthis.center = new Vector2( 0, 0 );\n\tthis.rotation = 0;\n\n\tthis.matrixAutoUpdate = true;\n\tthis.matrix = new Matrix3();\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t//\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t// update.  You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\tthis.encoding = encoding !== undefined ? encoding : LinearEncoding;\n\n\tthis.version = 0;\n\tthis.onUpdate = null;\n\n}\n\nTexture.DEFAULT_IMAGE = undefined;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nTexture.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Texture,\n\n\tisTexture: true,\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.image = source.image;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tfunction getDataURL( image ) {\n\n\t\t\tvar canvas;\n\n\t\t\tif ( image instanceof HTMLCanvasElement ) {\n\n\t\t\t\tcanvas = image;\n\n\t\t\t} else {\n\n\t\t\t\tcanvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\t\tcanvas.width = image.width;\n\t\t\t\tcanvas.height = image.height;\n\n\t\t\t\tvar context = canvas.getContext( '2d' );\n\n\t\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t\t} else {\n\n\t\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY\n\n\t\t};\n\n\t\tif ( this.image !== undefined ) {\n\n\t\t\t// TODO: Move to THREE.Image\n\n\t\t\tvar image = this.image;\n\n\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\timage.uuid = _Math.generateUUID(); // UGH\n\n\t\t\t}\n\n\t\t\tif ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\turl: getDataURL( image )\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\toutput.image = image.uuid;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t},\n\n\ttransformUv: function ( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.defineProperty( Texture.prototype, \"needsUpdate\", {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\n\nexport { Texture };\n","import { Vector3 } from './Vector3.js';\nimport { Sphere } from './Sphere.js';\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Box3( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\n\tthis.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\n\n}\n\nObject.assign( Box3.prototype, {\n\n\tisBox3: true,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromArray: function ( array ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tvar x = array[ i ];\n\t\t\tvar y = array[ i + 1 ];\n\t\t\tvar z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromBufferAttribute: function ( attribute ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tvar x = attribute.getX( i );\n\t\t\tvar y = attribute.getY( i );\n\t\t\tvar z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function setFromCenterAndSize( center, size ) {\n\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\n\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetFromObject: function ( object ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t},\n\n\tgetCenter: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getCenter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tgetSize: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getSize() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\texpandByObject: function () {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tvar scope, i, l;\n\n\t\tvar v1 = new Vector3();\n\n\t\tfunction traverse( node ) {\n\n\t\t\tvar geometry = node.geometry;\n\n\t\t\tif ( geometry !== undefined ) {\n\n\t\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\t\tvar vertices = geometry.vertices;\n\n\t\t\t\t\tfor ( i = 0, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tv1.copy( vertices[ i ] );\n\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( geometry.isBufferGeometry ) {\n\n\t\t\t\t\tvar attribute = geometry.attributes.position;\n\n\t\t\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\t\t\tfor ( i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tv1.fromBufferAttribute( attribute, i ).applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn function expandByObject( object ) {\n\n\t\t\tscope = this;\n\n\t\t\tobject.updateMatrixWorld( true );\n\n\t\t\tobject.traverse( traverse );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t},\n\n\tgetParameter: function ( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getParameter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t},\n\n\tintersectsSphere: ( function () {\n\n\t\tvar closestPoint = new Vector3();\n\n\t\treturn function intersectsSphere( sphere ) {\n\n\t\t\t// Find the point on the AABB closest to the sphere center.\n\t\t\tthis.clampPoint( sphere.center, closestPoint );\n\n\t\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\t\treturn closestPoint.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t\t};\n\n\t} )(),\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tvar min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= plane.constant && max >= plane.constant );\n\n\t},\n\n\tintersectsTriangle: ( function () {\n\n\t\t// triangle centered vertices\n\t\tvar v0 = new Vector3();\n\t\tvar v1 = new Vector3();\n\t\tvar v2 = new Vector3();\n\n\t\t// triangle edge vectors\n\t\tvar f0 = new Vector3();\n\t\tvar f1 = new Vector3();\n\t\tvar f2 = new Vector3();\n\n\t\tvar testAxis = new Vector3();\n\n\t\tvar center = new Vector3();\n\t\tvar extents = new Vector3();\n\n\t\tvar triangleNormal = new Vector3();\n\n\t\tfunction satForAxes( axes ) {\n\n\t\t\tvar i, j;\n\n\t\t\tfor ( i = 0, j = axes.length - 3; i <= j; i += 3 ) {\n\n\t\t\t\ttestAxis.fromArray( axes, i );\n\t\t\t\t// project the aabb onto the seperating axis\n\t\t\t\tvar r = extents.x * Math.abs( testAxis.x ) + extents.y * Math.abs( testAxis.y ) + extents.z * Math.abs( testAxis.z );\n\t\t\t\t// project all 3 vertices of the triangle onto the seperating axis\n\t\t\t\tvar p0 = v0.dot( testAxis );\n\t\t\t\tvar p1 = v1.dot( testAxis );\n\t\t\t\tvar p2 = v2.dot( testAxis );\n\t\t\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\n\t\t\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n\t\t\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\n\t\t\t\t\t// the axis is seperating and we can exit\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn function intersectsTriangle( triangle ) {\n\n\t\t\tif ( this.isEmpty() ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t\t// compute box center and extents\n\t\t\tthis.getCenter( center );\n\t\t\textents.subVectors( this.max, center );\n\n\t\t\t// translate triangle to aabb origin\n\t\t\tv0.subVectors( triangle.a, center );\n\t\t\tv1.subVectors( triangle.b, center );\n\t\t\tv2.subVectors( triangle.c, center );\n\n\t\t\t// compute edge vectors for triangle\n\t\t\tf0.subVectors( v1, v0 );\n\t\t\tf1.subVectors( v2, v1 );\n\t\t\tf2.subVectors( v0, v2 );\n\n\t\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n\t\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n\t\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\t\t\tvar axes = [\n\t\t\t\t0, - f0.z, f0.y, 0, - f1.z, f1.y, 0, - f2.z, f2.y,\n\t\t\t\tf0.z, 0, - f0.x, f1.z, 0, - f1.x, f2.z, 0, - f2.x,\n\t\t\t\t- f0.y, f0.x, 0, - f1.y, f1.x, 0, - f2.y, f2.x, 0\n\t\t\t];\n\t\t\tif ( ! satForAxes( axes ) ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t\t// test 3 face normals from the aabb\n\t\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\n\t\t\tif ( ! satForAxes( axes ) ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t\t// finally testing the face normal of the triangle\n\t\t\t// use already existing triangle edge vectors here\n\t\t\ttriangleNormal.crossVectors( f0, f1 );\n\t\t\taxes = [ triangleNormal.x, triangleNormal.y, triangleNormal.z ];\n\t\t\treturn satForAxes( axes );\n\n\t\t};\n\n\t} )(),\n\n\tclampPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function distanceToPoint( point ) {\n\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t};\n\n\t}(),\n\n\tgetBoundingSphere: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function getBoundingSphere( target ) {\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Box3: .getBoundingSphere() target is now required' );\n\t\t\t\ttarget = new Sphere();\n\n\t\t\t}\n\n\t\t\tthis.getCenter( target.center );\n\n\t\t\ttarget.radius = this.getSize( v1 ).length() * 0.5;\n\n\t\t\treturn target;\n\n\t\t};\n\n\t}(),\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar points = [\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3()\n\t\t];\n\n\t\treturn function applyMatrix4( matrix ) {\n\n\t\t\t// transform of empty box is an empty box.\n\t\t\tif ( this.isEmpty() ) return this;\n\n\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );\t// 111\n\n\t\t\tthis.setFromPoints( points );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n} );\n\n\nexport { Box3 };\n","import { Box3 } from './Box3.js';\nimport { Vector3 } from './Vector3.js';\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Sphere( center, radius ) {\n\n\tthis.center = ( center !== undefined ) ? center : new Vector3();\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\n\n}\n\nObject.assign( Sphere.prototype, {\n\n\tset: function ( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function () {\n\n\t\tvar box = new Box3();\n\n\t\treturn function setFromPoints( points, optionalCenter ) {\n\n\t\t\tvar center = this.center;\n\n\t\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\t\tcenter.copy( optionalCenter );\n\n\t\t\t} else {\n\n\t\t\t\tbox.setFromPoints( points ).getCenter( center );\n\n\t\t\t}\n\n\t\t\tvar maxRadiusSq = 0;\n\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t\t}\n\n\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\treturn ( this.radius <= 0 );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t},\n\n\tclampPoint: function ( point, target ) {\n\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\ttarget.sub( this.center ).normalize();\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn target;\n\n\t},\n\n\tgetBoundingBox: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .getBoundingBox() target is now required' );\n\t\t\ttarget = new Box3();\n\n\t\t}\n\n\t\ttarget.set( this.center, this.center );\n\t\ttarget.expandByScalar( this.radius );\n\n\t\treturn target;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n} );\n\n\nexport { Sphere };\n","import { Vector3 } from './Vector3.js';\nimport { Sphere } from './Sphere.js';\nimport { Plane } from './Plane.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / http://clara.io\n */\n\nfunction Frustum( p0, p1, p2, p3, p4, p5 ) {\n\n\tthis.planes = [\n\n\t\t( p0 !== undefined ) ? p0 : new Plane(),\n\t\t( p1 !== undefined ) ? p1 : new Plane(),\n\t\t( p2 !== undefined ) ? p2 : new Plane(),\n\t\t( p3 !== undefined ) ? p3 : new Plane(),\n\t\t( p4 !== undefined ) ? p4 : new Plane(),\n\t\t( p5 !== undefined ) ? p5 : new Plane()\n\n\t];\n\n}\n\nObject.assign( Frustum.prototype, {\n\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tvar planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( frustum ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix: function ( m ) {\n\n\t\tvar planes = this.planes;\n\t\tvar me = m.elements;\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\tintersectsObject: function () {\n\n\t\tvar sphere = new Sphere();\n\n\t\treturn function intersectsObject( object ) {\n\n\t\t\tvar geometry = object.geometry;\n\n\t\t\tif ( geometry.boundingSphere === null )\n\t\t\t\tgeometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere )\n\t\t\t\t.applyMatrix4( object.matrixWorld );\n\n\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSprite: function () {\n\n\t\tvar sphere = new Sphere();\n\n\t\treturn function intersectsSprite( sprite ) {\n\n\t\t\tsphere.center.set( 0, 0, 0 );\n\t\t\tsphere.radius = 0.7071067811865476;\n\t\t\tsphere.applyMatrix4( sprite.matrixWorld );\n\n\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar planes = this.planes;\n\t\tvar center = sphere.center;\n\t\tvar negRadius = - sphere.radius;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tintersectsBox: function () {\n\n\t\tvar p1 = new Vector3(),\n\t\t\tp2 = new Vector3();\n\n\t\treturn function intersectsBox( box ) {\n\n\t\t\tvar planes = this.planes;\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tvar plane = planes[ i ];\n\n\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\n\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\n\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\n\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\n\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\n\n\t\t\t\t// if both outside plane, no intersection\n\n\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t};\n\n\t}(),\n\n\tcontainsPoint: function ( point ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n} );\n\n\nexport { Frustum };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport { Texture } from './Texture.js';\nimport { NearestFilter } from '../constants.js';\n\nfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { data: data, width: width, height: height };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\tthis.unpackAlignment = 1;\n\n}\n\nDataTexture.prototype = Object.create( Texture.prototype );\nDataTexture.prototype.constructor = DataTexture;\n\nDataTexture.prototype.isDataTexture = true;\n\n\nexport { DataTexture };\n","import { Matrix3 } from './Matrix3.js';\nimport { Vector3 } from './Vector3.js';\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Plane( normal, constant ) {\n\n\t// normal is assumed to be normalized\n\n\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n}\n\nObject.assign( Plane.prototype, {\n\n\tset: function ( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponents: function ( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCoplanarPoints: function () {\n\n\t\tvar v1 = new Vector3();\n\t\tvar v2 = new Vector3();\n\n\t\treturn function setFromCoplanarPoints( a, b, c ) {\n\n\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\n\n\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t},\n\n\tdistanceToSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t},\n\n\tprojectPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .projectPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\n\n\t},\n\n\tintersectLine: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function intersectLine( line, target ) {\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Plane: .intersectLine() target is now required' );\n\t\t\t\ttarget = new Vector3();\n\n\t\t\t}\n\n\t\t\tvar direction = line.delta( v1 );\n\n\t\t\tvar denominator = this.normal.dot( direction );\n\n\t\t\tif ( denominator === 0 ) {\n\n\t\t\t\t// line is coplanar, return origin\n\t\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\t\treturn target.copy( line.start );\n\n\t\t\t\t}\n\n\t\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t\t};\n\n\t}(),\n\n\tintersectsLine: function ( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tvar startSign = this.distanceToPoint( line.start );\n\t\tvar endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t},\n\n\tcoplanarPoint: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar v1 = new Vector3();\n\t\tvar m1 = new Matrix3();\n\n\t\treturn function applyMatrix4( matrix, optionalNormalMatrix ) {\n\n\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\n\n\t\t\tvar referencePoint = this.coplanarPoint( v1 ).applyMatrix4( matrix );\n\n\t\t\tvar normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n} );\n\n\nexport { Plane };\n","import { _Math } from './Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nfunction Color( r, g, b ) {\n\n\tif ( g === undefined && b === undefined ) {\n\n\t\t// r is THREE.Color, hex or string\n\t\treturn this.set( r );\n\n\t}\n\n\treturn this.setRGB( r, g, b );\n\n}\n\nObject.assign( Color.prototype, {\n\n\tisColor: true,\n\n\tr: 1, g: 1, b: 1,\n\n\tset: function ( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetHex: function ( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t},\n\n\tsetRGB: function ( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t},\n\n\tsetHSL: function () {\n\n\t\tfunction hue2rgb( p, q, t ) {\n\n\t\t\tif ( t < 0 ) t += 1;\n\t\t\tif ( t > 1 ) t -= 1;\n\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\t\t\tif ( t < 1 / 2 ) return q;\n\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\t\t\treturn p;\n\n\t\t}\n\n\t\treturn function setHSL( h, s, l ) {\n\n\t\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\t\th = _Math.euclideanModulo( h, 1 );\n\t\t\ts = _Math.clamp( s, 0, 1 );\n\t\t\tl = _Math.clamp( l, 0, 1 );\n\n\t\t\tif ( s === 0 ) {\n\n\t\t\t\tthis.r = this.g = this.b = l;\n\n\t\t\t} else {\n\n\t\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\t\tvar q = ( 2 * l ) - p;\n\n\t\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetStyle: function ( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tvar color;\n\t\t\tvar name = m[ 1 ];\n\t\t\tvar components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tvar hex = m[ 1 ];\n\t\t\tvar size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\t// color keywords\n\t\t\tvar hex = ColorKeywords[ style ];\n\n\t\t\tif ( hex !== undefined ) {\n\n\t\t\t\t// red\n\t\t\t\tthis.setHex( hex );\n\n\t\t\t} else {\n\n\t\t\t\t// unknown color\n\t\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t},\n\n\tcopy: function ( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t},\n\n\tconvertGammaToLinear: function () {\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tthis.r = r * r;\n\t\tthis.g = g * g;\n\t\tthis.b = b * b;\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToGamma: function () {\n\n\t\tthis.r = Math.sqrt( this.r );\n\t\tthis.g = Math.sqrt( this.g );\n\t\tthis.b = Math.sqrt( this.b );\n\n\t\treturn this;\n\n\t},\n\n\tgetHex: function () {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t},\n\n\tgetHexString: function () {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t},\n\n\tgetHSL: function ( target ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Color: .getHSL() target is now required' );\n\t\t\ttarget = { h: 0, s: 0, l: 0 };\n\n\t\t}\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tvar max = Math.max( r, g, b );\n\t\tvar min = Math.min( r, g, b );\n\n\t\tvar hue, saturation;\n\t\tvar lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tvar delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t},\n\n\tgetStyle: function () {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t},\n\n\toffsetHSL: function () {\n\n\t\tvar hsl = {};\n\n\t\treturn function ( h, s, l ) {\n\n\t\t\tthis.getHSL( hsl );\n\n\t\t\thsl.h += h; hsl.s += s; hsl.l += l;\n\n\t\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tadd: function ( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t},\n\n\taddColors: function ( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn this.getHex();\n\n\t}\n\n} );\n\n\nexport { Color };\n","import alphamap_fragment from './ShaderChunk/alphamap_fragment.glsl';\nimport alphamap_pars_fragment from './ShaderChunk/alphamap_pars_fragment.glsl';\nimport alphatest_fragment from './ShaderChunk/alphatest_fragment.glsl';\nimport aomap_fragment from './ShaderChunk/aomap_fragment.glsl';\nimport aomap_pars_fragment from './ShaderChunk/aomap_pars_fragment.glsl';\nimport apply_accumulative_buffers_fragment from './ShaderChunk/apply_accumulative_buffers_fragment.glsl';\nimport apply_accumulative_buffers_pars_fragment from './ShaderChunk/apply_accumulative_buffers_pars_fragment.glsl';\nimport begin_vertex from './ShaderChunk/begin_vertex.glsl';\nimport beginnormal_vertex from './ShaderChunk/beginnormal_vertex.glsl';\nimport bsdfs from './ShaderChunk/bsdfs.glsl';\nimport bumpmap_pars_fragment from './ShaderChunk/bumpmap_pars_fragment.glsl';\nimport clipping_planes_fragment from './ShaderChunk/clipping_planes_fragment.glsl';\nimport clipping_planes_pars_fragment from './ShaderChunk/clipping_planes_pars_fragment.glsl';\nimport clipping_planes_pars_vertex from './ShaderChunk/clipping_planes_pars_vertex.glsl';\nimport clipping_planes_vertex from './ShaderChunk/clipping_planes_vertex.glsl';\nimport color_fragment from './ShaderChunk/color_fragment.glsl';\nimport color_pars_fragment from './ShaderChunk/color_pars_fragment.glsl';\nimport color_pars_vertex from './ShaderChunk/color_pars_vertex.glsl';\nimport color_vertex from './ShaderChunk/color_vertex.glsl';\nimport common from './ShaderChunk/common.glsl';\nimport cube_uv_reflection_fragment from './ShaderChunk/cube_uv_reflection_fragment.glsl';\nimport defaultnormal_vertex from './ShaderChunk/defaultnormal_vertex.glsl';\nimport displacementmap_pars_vertex from './ShaderChunk/displacementmap_pars_vertex.glsl';\nimport displacementmap_vertex from './ShaderChunk/displacementmap_vertex.glsl';\nimport emissivemap_fragment from './ShaderChunk/emissivemap_fragment.glsl';\nimport emissivemap_pars_fragment from './ShaderChunk/emissivemap_pars_fragment.glsl';\nimport encodings_fragment from './ShaderChunk/encodings_fragment.glsl';\nimport encodings_pars_fragment from './ShaderChunk/encodings_pars_fragment.glsl';\nimport envmap_fragment from './ShaderChunk/envmap_fragment.glsl';\nimport envmap_pars_fragment from './ShaderChunk/envmap_pars_fragment.glsl';\nimport envmap_pars_vertex from './ShaderChunk/envmap_pars_vertex.glsl';\nimport envmap_vertex from './ShaderChunk/envmap_vertex.glsl';\nimport fog_vertex from './ShaderChunk/fog_vertex.glsl';\nimport fog_pars_vertex from './ShaderChunk/fog_pars_vertex.glsl';\nimport fog_fragment from './ShaderChunk/fog_fragment.glsl';\nimport fog_pars_fragment from './ShaderChunk/fog_pars_fragment.glsl';\nimport gradientmap_pars_fragment from './ShaderChunk/gradientmap_pars_fragment.glsl';\nimport lightmap_fragment from './ShaderChunk/lightmap_fragment.glsl';\nimport lightmap_pars_fragment from './ShaderChunk/lightmap_pars_fragment.glsl';\nimport lights_lambert_vertex from './ShaderChunk/lights_lambert_vertex.glsl';\nimport lights_pars_begin from './ShaderChunk/lights_pars_begin.glsl';\nimport lights_pars_maps from './ShaderChunk/lights_pars_maps.glsl';\nimport lights_phong_fragment from './ShaderChunk/lights_phong_fragment.glsl';\nimport lights_phong_pars_fragment from './ShaderChunk/lights_phong_pars_fragment.glsl';\nimport lights_physical_fragment from './ShaderChunk/lights_physical_fragment.glsl';\nimport lights_physical_pars_fragment from './ShaderChunk/lights_physical_pars_fragment.glsl';\nimport lights_fragment_begin from './ShaderChunk/lights_fragment_begin.glsl';\nimport lights_fragment_maps from './ShaderChunk/lights_fragment_maps.glsl';\nimport lights_fragment_end from './ShaderChunk/lights_fragment_end.glsl';\nimport logdepthbuf_fragment from './ShaderChunk/logdepthbuf_fragment.glsl';\nimport logdepthbuf_pars_fragment from './ShaderChunk/logdepthbuf_pars_fragment.glsl';\nimport logdepthbuf_pars_vertex from './ShaderChunk/logdepthbuf_pars_vertex.glsl';\nimport logdepthbuf_vertex from './ShaderChunk/logdepthbuf_vertex.glsl';\nimport map_fragment from './ShaderChunk/map_fragment.glsl';\nimport map_pars_fragment from './ShaderChunk/map_pars_fragment.glsl';\nimport map_particle_fragment from './ShaderChunk/map_particle_fragment.glsl';\nimport map_particle_pars_fragment from './ShaderChunk/map_particle_pars_fragment.glsl';\nimport metalnessmap_fragment from './ShaderChunk/metalnessmap_fragment.glsl';\nimport metalnessmap_pars_fragment from './ShaderChunk/metalnessmap_pars_fragment.glsl';\nimport morphnormal_vertex from './ShaderChunk/morphnormal_vertex.glsl';\nimport morphtarget_pars_vertex from './ShaderChunk/morphtarget_pars_vertex.glsl';\nimport morphtarget_vertex from './ShaderChunk/morphtarget_vertex.glsl';\nimport normal_fragment_begin from './ShaderChunk/normal_fragment_begin.glsl';\nimport normal_fragment_maps from './ShaderChunk/normal_fragment_maps.glsl';\nimport normalmap_pars_fragment from './ShaderChunk/normalmap_pars_fragment.glsl';\nimport packing from './ShaderChunk/packing.glsl';\nimport premultiplied_alpha_fragment from './ShaderChunk/premultiplied_alpha_fragment.glsl';\nimport project_vertex from './ShaderChunk/project_vertex.glsl';\nimport dithering_fragment from './ShaderChunk/dithering_fragment.glsl';\nimport dithering_pars_fragment from './ShaderChunk/dithering_pars_fragment.glsl';\nimport roughnessmap_fragment from './ShaderChunk/roughnessmap_fragment.glsl';\nimport roughnessmap_pars_fragment from './ShaderChunk/roughnessmap_pars_fragment.glsl';\nimport shadowmap_pars_fragment from './ShaderChunk/shadowmap_pars_fragment.glsl';\nimport shadowmap_pars_vertex from './ShaderChunk/shadowmap_pars_vertex.glsl';\nimport shadowmap_vertex from './ShaderChunk/shadowmap_vertex.glsl';\nimport shadowmask_pars_fragment from './ShaderChunk/shadowmask_pars_fragment.glsl';\nimport skinbase_vertex from './ShaderChunk/skinbase_vertex.glsl';\nimport skinning_pars_vertex from './ShaderChunk/skinning_pars_vertex.glsl';\nimport skinning_vertex from './ShaderChunk/skinning_vertex.glsl';\nimport skinnormal_vertex from './ShaderChunk/skinnormal_vertex.glsl';\nimport specularmap_fragment from './ShaderChunk/specularmap_fragment.glsl';\nimport specularmap_pars_fragment from './ShaderChunk/specularmap_pars_fragment.glsl';\nimport tonemapping_fragment from './ShaderChunk/tonemapping_fragment.glsl';\nimport tonemapping_pars_fragment from './ShaderChunk/tonemapping_pars_fragment.glsl';\nimport uv_pars_fragment from './ShaderChunk/uv_pars_fragment.glsl';\nimport uv_pars_vertex from './ShaderChunk/uv_pars_vertex.glsl';\nimport uv_vertex from './ShaderChunk/uv_vertex.glsl';\nimport uv2_pars_fragment from './ShaderChunk/uv2_pars_fragment.glsl';\nimport uv2_pars_vertex from './ShaderChunk/uv2_pars_vertex.glsl';\nimport uv2_vertex from './ShaderChunk/uv2_vertex.glsl';\nimport worldpos_vertex from './ShaderChunk/worldpos_vertex.glsl';\n\nimport cube_frag from './ShaderLib/cube_frag.glsl';\nimport cube_vert from './ShaderLib/cube_vert.glsl';\nimport depth_frag from './ShaderLib/depth_frag.glsl';\nimport depth_vert from './ShaderLib/depth_vert.glsl';\nimport distanceRGBA_frag from './ShaderLib/distanceRGBA_frag.glsl';\nimport distanceRGBA_vert from './ShaderLib/distanceRGBA_vert.glsl';\nimport equirect_frag from './ShaderLib/equirect_frag.glsl';\nimport equirect_vert from './ShaderLib/equirect_vert.glsl';\nimport linedashed_frag from './ShaderLib/linedashed_frag.glsl';\nimport linedashed_vert from './ShaderLib/linedashed_vert.glsl';\nimport meshbasic_frag from './ShaderLib/meshbasic_frag.glsl';\nimport meshbasic_vert from './ShaderLib/meshbasic_vert.glsl';\nimport meshlambert_frag from './ShaderLib/meshlambert_frag.glsl';\nimport meshlambert_vert from './ShaderLib/meshlambert_vert.glsl';\nimport meshphong_frag from './ShaderLib/meshphong_frag.glsl';\nimport meshphong_vert from './ShaderLib/meshphong_vert.glsl';\nimport meshphysical_frag from './ShaderLib/meshphysical_frag.glsl';\nimport meshphysical_vert from './ShaderLib/meshphysical_vert.glsl';\nimport normal_frag from './ShaderLib/normal_frag.glsl';\nimport normal_vert from './ShaderLib/normal_vert.glsl';\nimport points_frag from './ShaderLib/points_frag.glsl';\nimport points_vert from './ShaderLib/points_vert.glsl';\nimport shadow_frag from './ShaderLib/shadow_frag.glsl';\nimport shadow_vert from './ShaderLib/shadow_vert.glsl';\n\nexport var ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tapply_accumulative_buffers_fragment: apply_accumulative_buffers_fragment,\n\tapply_accumulative_buffers_pars_fragment: apply_accumulative_buffers_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_vertex: lights_lambert_vertex,\n\tlights_pars_begin: lights_pars_begin,\n\tlights_pars_maps: lights_pars_maps,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_fragment_begin: lights_fragment_begin,\n\tlights_fragment_maps: lights_fragment_maps,\n\tlights_fragment_end: lights_fragment_end,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment_begin: normal_fragment_begin,\n\tnormal_fragment_maps: normal_fragment_maps,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tcube_frag: cube_frag,\n\tcube_vert: cube_vert,\n\tdepth_frag: depth_frag,\n\tdepth_vert: depth_vert,\n\tdistanceRGBA_frag: distanceRGBA_frag,\n\tdistanceRGBA_vert: distanceRGBA_vert,\n\tequirect_frag: equirect_frag,\n\tequirect_vert: equirect_vert,\n\tlinedashed_frag: linedashed_frag,\n\tlinedashed_vert: linedashed_vert,\n\tmeshbasic_frag: meshbasic_frag,\n\tmeshbasic_vert: meshbasic_vert,\n\tmeshlambert_frag: meshlambert_frag,\n\tmeshlambert_vert: meshlambert_vert,\n\tmeshphong_frag: meshphong_frag,\n\tmeshphong_vert: meshphong_vert,\n\tmeshphysical_frag: meshphysical_frag,\n\tmeshphysical_vert: meshphysical_vert,\n\tnormal_frag: normal_frag,\n\tnormal_vert: normal_vert,\n\tpoints_frag: points_frag,\n\tpoints_vert: points_vert,\n\tshadow_frag: shadow_frag,\n\tshadow_vert: shadow_vert\n};\n","/**\n * Uniform Utilities\n */\n\nvar UniformsUtils = {\n\n\tmerge: function ( uniforms ) {\n\n\t\tvar merged = {};\n\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\n\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\n\n\t\t\tfor ( var p in tmp ) {\n\n\t\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn merged;\n\n\t},\n\n\tclone: function ( uniforms_src ) {\n\n\t\tvar uniforms_dst = {};\n\n\t\tfor ( var u in uniforms_src ) {\n\n\t\t\tuniforms_dst[ u ] = {};\n\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\n\n\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\n\n\t\t\t\tif ( parameter_src && ( parameter_src.isColor ||\n\t\t\t\t\tparameter_src.isMatrix3 || parameter_src.isMatrix4 ||\n\t\t\t\t\tparameter_src.isVector2 || parameter_src.isVector3 || parameter_src.isVector4 ||\n\t\t\t\t\tparameter_src.isTexture ) ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\n\n\t\t\t\t} else if ( Array.isArray( parameter_src ) ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn uniforms_dst;\n\n\t}\n\n};\n\n\nexport { UniformsUtils };\n","import { Quaternion } from './Quaternion.js';\nimport { Vector3 } from './Vector3.js';\nimport { Matrix4 } from './Matrix4.js';\nimport { _Math } from './Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nfunction Euler( x, y, z, order ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._order = order || Euler.DefaultOrder;\n\n}\n\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nEuler.DefaultOrder = 'XYZ';\n\nObject.defineProperties( Euler.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\torder: {\n\n\t\tget: function () {\n\n\t\t\treturn this._order;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._order = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Euler.prototype, {\n\n\tisEuler: true,\n\n\tset: function ( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t},\n\n\tcopy: function ( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m, order, update ) {\n\n\t\tvar clamp = _Math.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements;\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = 0;\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._y = 0;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromQuaternion: function () {\n\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function setFromQuaternion( q, order, update ) {\n\n\t\t\tmatrix.makeRotationFromQuaternion( q );\n\n\t\t\treturn this.setFromRotationMatrix( matrix, order, update );\n\n\t\t};\n\n\t}(),\n\n\tsetFromVector3: function ( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t},\n\n\treorder: function () {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\tvar q = new Quaternion();\n\n\t\treturn function reorder( newOrder ) {\n\n\t\t\tq.setFromEuler( this );\n\n\t\t\treturn this.setFromQuaternion( q, newOrder );\n\n\t\t};\n\n\t}(),\n\n\tequals: function ( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t},\n\n\ttoVector3: function ( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {}\n\n} );\n\n\nexport { Euler };\n","import { Color } from '../../math/Color.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Matrix3 } from '../../math/Matrix3.js';\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nvar UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() },\n\n\t\talphaMap: { value: null },\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 },\n\t\trefractionRatio: { value: 0.98 },\n\t\tmaxMipLevel: { value: 0 }\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\t\tlightDirection: { value: [] },\n\t\tdirectionalNormalOffset: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotShadowMap: { value: [] },\n\t\tspotShadowMatrix: { value: [] },\n\t\tspotPosition: { value: [] },\n\t\tspotNormalOffset: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {},\n\t\t\tshadow: {},\n\t\t\tuseAreaTexture: {},\n\t\t} },\n\n\t\trectAreaTexture: { value: [] },\n\t\trectShadowMap: { value: [] },\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t}\n\n};\n\nexport { UniformsLib };\n","import { ShaderChunk } from './ShaderChunk.js';\nimport { UniformsUtils } from './UniformsUtils.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { UniformsLib } from './UniformsLib.js';\nimport { Color } from '../../math/Color.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n */\n\nvar ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 0.5 },\n\t\t\t\tmetalness: { value: 0.5 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.normal_vert,\n\t\tfragmentShader: ShaderChunk.normal_frag\n\n\t},\n\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\tcube: {\n\n\t\tuniforms: {\n\t\t\ttCube: { value: null },\n\t\t\ttFlip: { value: - 1 },\n\t\t\topacity: { value: 1.0 }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: UniformsUtils.merge( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\tclearCoat: { value: 0 },\n\t\t\tclearCoatRoughness: { value: 0 }\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\n\nexport { ShaderLib };\n","/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector4( x, y, z, w ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\tthis.w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.assign( Vector4.prototype, {\n\n\tisVector4: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tsetAxisAngleFromQuaternion: function ( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar angle, x, y, z,\t\t// variables for result\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tvar xx = ( m11 + 1 ) / 2;\n\t\t\tvar yy = ( m22 + 1 ) / 2;\n\t\t\tvar zz = ( m33 + 1 ) / 2;\n\t\t\tvar xy = ( m12 + m21 ) / 4;\n\t\t\tvar xz = ( m13 + m31 ) / 4;\n\t\t\tvar yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t                   ( m13 - m31 ) * ( m13 - m31 ) +\n\t\t                   ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min, max;\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new Vector4();\n\t\t\t\tmax = new Vector4();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector4 };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLAttributes( gl ) {\n\n\tvar buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar usage = attribute.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\n\n\t\tvar buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tvar type = gl.FLOAT;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = gl.FLOAT;\n\n\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\ttype = gl.UNSIGNED_SHORT;\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = gl.SHORT;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = gl.UNSIGNED_INT;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = gl.INT;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = gl.BYTE;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = gl.UNSIGNED_BYTE;\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( attribute.dynamic === false ) {\n\n\t\t\tgl.bufferData( bufferType, array, gl.STATIC_DRAW );\n\n\t\t} else if ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else if ( updateRange.count === 0 ) {\n\n\t\t\tconsole.error( 'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.' );\n\n\t\t} else {\n\n\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tvar data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tvar data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\n\nexport { WebGLAttributes };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Layers() {\n\n\tthis.mask = 1 | 0;\n\n}\n\nObject.assign( Layers.prototype, {\n\n\tset: function ( channel ) {\n\n\t\tthis.mask = 1 << channel | 0;\n\n\t},\n\n\tenable: function ( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t},\n\n\ttoggle: function ( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t},\n\n\tdisable: function ( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t},\n\n\ttest: function ( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n} );\n\n\nexport { Layers };\n","import { Quaternion } from '../math/Quaternion.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { EventDispatcher } from './EventDispatcher.js';\nimport { Euler } from '../math/Euler.js';\nimport { Layers } from './Layers.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { _Math } from '../math/Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author elephantatwork / www.elephantatwork.ch\n */\n\nvar object3DId = 0;\n\nfunction Object3D() {\n\n\tObject.defineProperty( this, 'id', { value: object3DId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = null;\n\tthis.children = [];\n\n\tthis.up = Object3D.DefaultUp.clone();\n\n\tvar position = new Vector3();\n\tvar rotation = new Euler();\n\tvar quaternion = new Quaternion();\n\tvar scale = new Vector3( 1, 1, 1 );\n\n\tfunction onRotationChange() {\n\n\t\tquaternion.setFromEuler( rotation, false );\n\n\t}\n\n\tfunction onQuaternionChange() {\n\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t}\n\n\trotation.onChange( onRotationChange );\n\tquaternion.onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t\tmodelViewMatrix: {\n\t\t\tvalue: new Matrix4()\n\t\t},\n\t\tnormalMatrix: {\n\t\t\tvalue: new Matrix3()\n\t\t}\n\t} );\n\n\tthis.matrix = new Matrix4();\n\tthis.matrixWorld = new Matrix4();\n\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.layers = new Layers();\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\tthis.renderOrder = 0;\n\n\tthis.userData = {};\n\n}\n\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\n\nObject3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Object3D,\n\n\tisObject3D: true,\n\n\tonBeforeRender: function () {},\n\tonAfterRender: function () {},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function () {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar q1 = new Quaternion();\n\n\t\treturn function rotateOnAxis( axis, angle ) {\n\n\t\t\tq1.setFromAxisAngle( axis, angle );\n\n\t\t\tthis.quaternion.multiply( q1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateOnWorldAxis: function () {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\tvar q1 = new Quaternion();\n\n\t\treturn function rotateOnWorldAxis( axis, angle ) {\n\n\t\t\tq1.setFromAxisAngle( axis, angle );\n\n\t\t\tthis.quaternion.premultiply( q1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateX: function () {\n\n\t\tvar v1 = new Vector3( 1, 0, 0 );\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\tvar v1 = new Vector3( 0, 1, 0 );\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\tvar v1 = new Vector3( 0, 0, 1 );\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\ttranslateOnAxis: function () {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function translateOnAxis( axis, distance ) {\n\n\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslateX: function () {\n\n\t\tvar v1 = new Vector3( 1, 0, 0 );\n\n\t\treturn function translateX( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateY: function () {\n\n\t\tvar v1 = new Vector3( 0, 1, 0 );\n\n\t\treturn function translateY( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateZ: function () {\n\n\t\tvar v1 = new Vector3( 0, 0, 1 );\n\n\t\treturn function translateZ( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function () {\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function worldToLocal( vector ) {\n\n\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\t// This method does not support objects with rotated and/or translated parent(s)\n\n\t\tvar m1 = new Matrix4();\n\t\tvar vector = new Vector3();\n\n\t\treturn function lookAt( x, y, z ) {\n\n\t\t\tif ( x.isVector3 ) {\n\n\t\t\t\tvector.copy( x );\n\n\t\t\t} else {\n\n\t\t\t\tvector.set( x, y, z );\n\n\t\t\t}\n\n\t\t\tif ( this.isCamera ) {\n\n\t\t\t\tm1.lookAt( this.position, vector, this.up );\n\n\t\t\t} else {\n\n\t\t\t\tm1.lookAt( vector, this.position, this.up );\n\n\t\t\t}\n\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\n\n\t\t};\n\n\t}(),\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( ( object && object.isObject3D ) ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tobject.dispatchEvent( { type: 'added' } );\n\n\t\t\tthis.children.push( object );\n\n\t\t} else {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\n\t\t\tobject.dispatchEvent( { type: 'removed' } );\n\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetObjectById: function ( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t},\n\n\tgetObjectByName: function ( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tvar child = this.children[ i ];\n\t\t\tvar object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function () {\n\n\t\tvar position = new Vector3();\n\t\tvar scale = new Vector3();\n\n\t\treturn function getWorldQuaternion( target ) {\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\n\t\t\t\ttarget = new Quaternion();\n\n\t\t\t}\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, target, scale );\n\n\t\t\treturn target;\n\n\t\t};\n\n\t}(),\n\n\tgetWorldScale: function () {\n\n\t\tvar position = new Vector3();\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function getWorldScale( target ) {\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\n\t\t\t\ttarget = new Vector3();\n\n\t\t\t}\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, quaternion, target );\n\n\t\t\treturn target;\n\n\t\t};\n\n\t}(),\n\n\tgetWorldDirection: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function getWorldDirection( target ) {\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\n\t\t\t\ttarget = new Vector3();\n\n\t\t\t}\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn target.set( 0, 0, 1 ).applyQuaternion( quaternion );\n\n\t\t};\n\n\t}(),\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tvar parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tvar output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tvar object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.geometry !== undefined ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tvar parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tvar shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tvar shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tvar uuids = [];\n\n\t\t\t\tfor ( var i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tvar geometries = extractFromCache( meta.geometries );\n\t\t\tvar materials = extractFromCache( meta.materials );\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\t\t\tvar shapes = extractFromCache( meta.shapes );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\t\t\treturn values;\n\n\t\t}\n\n\t},\n\n\tclone: function ( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t},\n\n\tcopy: function ( source, recursive ) {\n\n\t\tif ( recursive === undefined ) recursive = true;\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tvar child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Object3D };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Quaternion } from '../math/Quaternion.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\n\nfunction Camera() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new Matrix4();\n\tthis.projectionMatrix = new Matrix4();\n\n}\n\nCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Camera,\n\n\tisCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\n\t\treturn this;\n\n\t},\n\n\tgetWorldDirection: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function getWorldDirection( target ) {\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Camera: .getWorldDirection() target is now required' );\n\t\t\t\ttarget = new Vector3();\n\n\t\t\t}\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn target.set( 0, 0, - 1 ).applyQuaternion( quaternion );\n\n\t\t};\n\n\t}(),\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n} );\n\nexport { Camera };\n","import { Camera } from './Camera.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author arose / http://github.com/arose\n */\n\nfunction OrthographicCamera( left, right, top, bottom, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'OrthographicCamera';\n\n\tthis.zoom = 1;\n\tthis.view = null;\n\n\tthis.left = left;\n\tthis.right = right;\n\tthis.top = top;\n\tthis.bottom = bottom;\n\n\tthis.near = ( near !== undefined ) ? near : 0.1;\n\tthis.far = ( far !== undefined ) ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n}\n\nOrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: OrthographicCamera,\n\n\tisOrthographicCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t},\n\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tvar cx = ( this.right + this.left ) / 2;\n\t\tvar cy = ( this.top + this.bottom ) / 2;\n\n\t\tvar left = cx - dx;\n\t\tvar right = cx + dx;\n\t\tvar top = cy + dy;\n\t\tvar bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tvar zoomW = this.zoom / ( this.view.width / this.view.fullWidth );\n\t\t\tvar zoomH = this.zoom / ( this.view.height / this.view.fullHeight );\n\t\t\tvar scaleW = ( this.right - this.left ) / this.view.width;\n\t\t\tvar scaleH = ( this.top - this.bottom ) / this.view.height;\n\n\t\t\tleft += scaleW * ( this.view.offsetX / zoomW );\n\t\t\tright = left + scaleW * ( this.view.width / zoomW );\n\t\t\ttop -= scaleH * ( this.view.offsetY / zoomH );\n\t\t\tbottom = top - scaleH * ( this.view.height / zoomH );\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { OrthographicCamera };\n","import { Color } from '../math/Color.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Face3( a, b, c, normal, color, materialIndex ) {\n\n\tthis.a = a;\n\tthis.b = b;\n\tthis.c = c;\n\n\tthis.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\n\n\tthis.color = ( color && color.isColor ) ? color : new Color();\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\n\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n\n}\n\nObject.assign( Face3.prototype, {\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.a = source.a;\n\t\tthis.b = source.b;\n\t\tthis.c = source.c;\n\n\t\tthis.normal.copy( source.normal );\n\t\tthis.color.copy( source.color );\n\n\t\tthis.materialIndex = source.materialIndex;\n\n\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Face3 };\n","import { EventDispatcher } from './EventDispatcher.js';\nimport { Face3 } from './Face3.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { Box3 } from '../math/Box3.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\nimport { Object3D } from './Object3D.js';\nimport { _Math } from '../math/Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author bhouston / http://clara.io\n */\n\nvar geometryId = 0; // Geometry uses even numbers as Id\n\nfunction Geometry() {\n\n\tObject.defineProperty( this, 'id', { value: geometryId += 2 } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Geometry';\n\n\tthis.vertices = [];\n\tthis.colors = [];\n\tthis.faces = [];\n\tthis.faceVertexUvs = [[]];\n\n\tthis.morphTargets = [];\n\tthis.morphNormals = [];\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\tthis.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.elementsNeedUpdate = false;\n\tthis.verticesNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.lineDistancesNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Geometry,\n\n\tisGeometry: true,\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\tthis.verticesNeedUpdate = true;\n\t\tthis.normalsNeedUpdate = true;\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function () {\n\n\t\t// rotate geometry around world x-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\tm1.makeRotationX( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\t// rotate geometry around world y-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\tm1.makeRotationY( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\t// rotate geometry around world z-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\tm1.makeRotationZ( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function () {\n\n\t\t// translate geometry\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function translate( x, y, z ) {\n\n\t\t\tm1.makeTranslation( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tscale: function () {\n\n\t\t// scale geometry\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function scale( x, y, z ) {\n\n\t\t\tm1.makeScale( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\tvar obj = new Object3D();\n\n\t\treturn function lookAt( vector ) {\n\n\t\t\tobj.lookAt( vector );\n\n\t\t\tobj.updateMatrix();\n\n\t\t\tthis.applyMatrix( obj.matrix );\n\n\t\t};\n\n\t}(),\n\n\tfromBufferGeometry: function ( geometry ) {\n\n\t\tvar scope = this;\n\n\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\n\t\tvar attributes = geometry.attributes;\n\n\t\tvar positions = attributes.position.array;\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\n\n\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\n\n\t\tvar tempNormals = [];\n\t\tvar tempUVs = [];\n\t\tvar tempUVs2 = [];\n\n\t\tfor ( var i = 0, j = 0; i < positions.length; i += 3, j += 2 ) {\n\n\t\t\tscope.vertices.push( new Vector3( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] ) );\n\n\t\t\tif ( normals !== undefined ) {\n\n\t\t\t\ttempNormals.push( new Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( colors !== undefined ) {\n\n\t\t\t\tscope.colors.push( new Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\ttempUVs.push( new Vector2( uvs[ j ], uvs[ j + 1 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\ttempUVs2.push( new Vector2( uvs2[ j ], uvs2[ j + 1 ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addFace( a, b, c, materialIndex ) {\n\n\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\n\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\n\n\t\t\tvar face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\n\n\t\t\tscope.faces.push( face );\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\n\n\t\t\t}\n\n\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [ tempUVs2[ a ].clone(), tempUVs2[ b ].clone(), tempUVs2[ c ].clone() ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar groups = geometry.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\n\n\t\t\t\tvar group = groups[ i ];\n\n\t\t\t\tvar start = group.start;\n\t\t\t\tvar count = group.count;\n\n\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ], group.materialIndex );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\taddFace( j, j + 1, j + 2, group.materialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( var i = 0; i < positions.length / 3; i += 3 ) {\n\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tvar offset = new Vector3();\n\n\t\treturn function center() {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t\tthis.boundingBox.getCenter( offset ).negate();\n\n\t\t\tthis.translate( offset.x, offset.y, offset.z );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tnormalize: function () {\n\n\t\tthis.computeBoundingSphere();\n\n\t\tvar center = this.boundingSphere.center;\n\t\tvar radius = this.boundingSphere.radius;\n\n\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\n\n\t\tvar matrix = new Matrix4();\n\t\tmatrix.set(\n\t\t\ts, 0, 0, - s * center.x,\n\t\t\t0, s, 0, - s * center.y,\n\t\t\t0, 0, s, - s * center.z,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\tthis.applyMatrix( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = this.faces[ f ];\n\n\t\t\tvar vA = this.vertices[ face.a ];\n\t\t\tvar vB = this.vertices[ face.b ];\n\t\t\tvar vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function ( areaWeighted ) {\n\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\n\n\t\tvar v, vl, f, fl, face, vertices;\n\n\t\tvertices = new Array( this.vertices.length );\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvA = this.vertices[ face.a ];\n\t\t\t\tvB = this.vertices[ face.b ];\n\t\t\t\tvC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.computeFaceNormals();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeFlatVertexNormals: function () {\n\n\t\tvar f, fl, face;\n\n\t\tthis.computeFaceNormals();\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeMorphNormals: function () {\n\n\t\tvar i, il, f, fl, face;\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tvar tmpGeo = new Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tfaceNormal = new Vector3();\n\t\t\t\t\tvertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t},\n\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\n\n\t\tif ( ! ( geometry && geometry.isGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar normalMatrix,\n\t\t\tvertexOffset = this.vertices.length,\n\t\t\tvertices1 = this.vertices,\n\t\t\tvertices2 = geometry.vertices,\n\t\t\tfaces1 = this.faces,\n\t\t\tfaces2 = geometry.faces,\n\t\t\tuvs1 = this.faceVertexUvs[ 0 ],\n\t\t\tuvs2 = geometry.faceVertexUvs[ 0 ],\n\t\t\tcolors1 = this.colors,\n\t\t\tcolors2 = geometry.colors;\n\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = vertices2[ i ];\n\n\t\t\tvar vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// colors\n\n\t\tfor ( var i = 0, il = colors2.length; i < il; i ++ ) {\n\n\t\t\tcolors1.push( colors2[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\n\t\t\t\tfaceVertexNormals = face.vertexNormals,\n\t\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tfaceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\n\n\t\t\tvar uv = uvs2[ i ], uvCopy = [];\n\n\t\t\tif ( uv === undefined ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\n\n\t\t\t\tuvCopy.push( uv[ j ].clone() );\n\n\t\t\t}\n\n\t\t\tuvs1.push( uvCopy );\n\n\t\t}\n\n\t},\n\n\tmergeMesh: function ( mesh ) {\n\n\t\tif ( ! ( mesh && mesh.isMesh ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( mesh.matrixAutoUpdate ) mesh.updateMatrix();\n\n\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t},\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices: function () {\n\n\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n\t\tvar unique = [], changes = [];\n\n\t\tvar v, key;\n\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n\t\tvar precision = Math.pow( 10, precisionPoints );\n\t\tvar i, il, face;\n\t\tvar indices, j, jl;\n\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tv = this.vertices[ i ];\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tvar faceIndicesToRemove = [];\n\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tface = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tindices = [ face.a, face.b, face.c ];\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\n\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\n\t\t\tvar idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tvar diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.vertices = [];\n\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tvar point = points[ i ];\n\t\t\tthis.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsortFacesByMaterialIndex: function () {\n\n\t\tvar faces = this.faces;\n\t\tvar length = faces.length;\n\n\t\t// tag faces\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tfaces[ i ]._id = i;\n\n\t\t}\n\n\t\t// sort faces\n\n\t\tfunction materialIndexSort( a, b ) {\n\n\t\t\treturn a.materialIndex - b.materialIndex;\n\n\t\t}\n\n\t\tfaces.sort( materialIndexSort );\n\n\t\t// sort uvs\n\n\t\tvar uvs1 = this.faceVertexUvs[ 0 ];\n\t\tvar uvs2 = this.faceVertexUvs[ 1 ];\n\n\t\tvar newUvs1, newUvs2;\n\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar id = faces[ i ]._id;\n\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\n\n\t\t}\n\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Geometry',\n\t\t\t\tgenerator: 'Geometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Geometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tvar vertices = [];\n\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tvar faces = [];\n\t\tvar normals = [];\n\t\tvar normalsHash = {};\n\t\tvar colors = [];\n\t\tvar colorsHash = {};\n\t\tvar uvs = [];\n\t\tvar uvsHash = {};\n\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\n\t\t\tvar hasMaterial = true;\n\t\t\tvar hasFaceUv = false; // deprecated\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tvar faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\t\t\tfaces.push( face.materialIndex );\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\tdata.data = {};\n\n\t\tdata.data.vertices = vertices;\n\t\tdata.data.normals = normals;\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\tdata.data.faces = faces;\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t var parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t var values = [];\n\n\t\t for ( var key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new Geometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar i, il, j, jl, k, kl;\n\n\t\t// reset\n\n\t\tthis.vertices = [];\n\t\tthis.colors = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [[]];\n\t\tthis.morphTargets = [];\n\t\tthis.morphNormals = [];\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\t\tthis.lineDistances = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// vertices\n\n\t\tvar vertices = source.vertices;\n\n\t\tfor ( i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\t// colors\n\n\t\tvar colors = source.colors;\n\n\t\tfor ( i = 0, il = colors.length; i < il; i ++ ) {\n\n\t\t\tthis.colors.push( colors[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tvar faces = source.faces;\n\n\t\tfor ( i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\t// face vertex uvs\n\n\t\tfor ( i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\tvar uv = uvs[ k ];\n\n\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphTargets = source.morphTargets;\n\n\t\tfor ( i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tvar morphTarget = {};\n\t\t\tmorphTarget.name = morphTargets[ i ].name;\n\n\t\t\t// vertices\n\n\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\n\n\t\t\t\tmorphTarget.vertices = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normals\n\n\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\n\n\t\t\t\tmorphTarget.normals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.push( morphTarget );\n\n\t\t}\n\n\t\t// morph normals\n\n\t\tvar morphNormals = source.morphNormals;\n\n\t\tfor ( i = 0, il = morphNormals.length; i < il; i ++ ) {\n\n\t\t\tvar morphNormal = {};\n\n\t\t\t// vertex normals\n\n\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.vertexNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\n\t\t\t\t\tvar destVertexNormal = {};\n\n\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\n\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\n\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\n\n\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// face normals\n\n\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.faceNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphNormals.push( morphNormal );\n\n\t\t}\n\n\t\t// skin weights\n\n\t\tvar skinWeights = source.skinWeights;\n\n\t\tfor ( i = 0, il = skinWeights.length; i < il; i ++ ) {\n\n\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\n\n\t\t}\n\n\t\t// skin indices\n\n\t\tvar skinIndices = source.skinIndices;\n\n\t\tfor ( i = 0, il = skinIndices.length; i < il; i ++ ) {\n\n\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\n\n\t\t}\n\n\t\t// line distances\n\n\t\tvar lineDistances = source.lineDistances;\n\n\t\tfor ( i = 0, il = lineDistances.length; i < il; i ++ ) {\n\n\t\t\tthis.lineDistances.push( lineDistances[ i ] );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// update flags\n\n\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\n\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\n\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\n\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\n\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { Geometry };\n","import { Vector4 } from '../math/Vector4.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction BufferAttribute( array, itemSize, normalized ) {\n\n\tif ( Array.isArray( array ) ) {\n\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t}\n\n\tthis.name = '';\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\tthis.normalized = normalized === true;\n\n\tthis.dynamic = false;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\n\tisBufferAttribute: true,\n\n\tonUploadCallback: function () {},\n\n\tsetArray: function ( array ) {\n\n\t\tif ( Array.isArray( array ) ) {\n\n\t\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t\t}\n\n\t\tthis.count = array !== undefined ? array.length / this.itemSize : 0;\n\t\tthis.array = array;\n\n\t\treturn this;\n\n\t},\n\n\tsetDynamic: function ( value ) {\n\n\t\tthis.dynamic = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.dynamic = source.dynamic;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyArray: function ( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t},\n\n\tcopyColorsArray: function ( colors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tvar color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector2sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector3sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector4sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t}\n\n} );\n\n//\n\nfunction Int8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\n\n}\n\nInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\n\n\nfunction Uint8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\n\n}\n\nUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\n\n\nfunction Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\n\n}\n\nUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\n\n\nfunction Int16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\n\n}\n\nInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\n\n\nfunction Uint16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\n\n}\n\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\n\n\nfunction Int32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\n\n}\n\nInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\n\n\nfunction Uint32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\n\n}\n\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\n\n\nfunction Float32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\n\n}\n\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\n\n\nfunction Float64BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\n\n}\n\nFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\n\n//\n\nexport {\n\tFloat64BufferAttribute,\n\tFloat32BufferAttribute,\n\tUint32BufferAttribute,\n\tInt32BufferAttribute,\n\tUint16BufferAttribute,\n\tInt16BufferAttribute,\n\tUint8ClampedBufferAttribute,\n\tUint8BufferAttribute,\n\tInt8BufferAttribute,\n\tBufferAttribute\n};\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Vector2 } from '../math/Vector2.js';\n\nfunction DirectGeometry() {\n\n\tthis.vertices = [];\n\tthis.normals = [];\n\tthis.colors = [];\n\tthis.uvs = [];\n\tthis.uvs2 = [];\n\n\tthis.groups = [];\n\n\tthis.morphTargets = {};\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\t// this.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.verticesNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nObject.assign( DirectGeometry.prototype, {\n\n\tcomputeGroups: function ( geometry ) {\n\n\t\tvar group;\n\t\tvar groups = [];\n\t\tvar materialIndex = undefined;\n\n\t\tvar faces = geometry.faces;\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\t// materials\n\n\t\t\tif ( face.materialIndex !== materialIndex ) {\n\n\t\t\t\tmaterialIndex = face.materialIndex;\n\n\t\t\t\tif ( group !== undefined ) {\n\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\t\tgroups.push( group );\n\n\t\t\t\t}\n\n\t\t\t\tgroup = {\n\t\t\t\t\tstart: i * 3,\n\t\t\t\t\tmaterialIndex: materialIndex\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( group !== undefined ) {\n\n\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\tgroups.push( group );\n\n\t\t}\n\n\t\tthis.groups = groups;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tvar faces = geometry.faces;\n\t\tvar vertices = geometry.vertices;\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\n\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\n\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\n\n\t\t// morphs\n\n\t\tvar morphTargets = geometry.morphTargets;\n\t\tvar morphTargetsLength = morphTargets.length;\n\n\t\tvar morphTargetsPosition;\n\n\t\tif ( morphTargetsLength > 0 ) {\n\n\t\t\tmorphTargetsPosition = [];\n\n\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsPosition[ i ] = [];\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\n\n\t\t}\n\n\t\tvar morphNormals = geometry.morphNormals;\n\t\tvar morphNormalsLength = morphNormals.length;\n\n\t\tvar morphTargetsNormal;\n\n\t\tif ( morphNormalsLength > 0 ) {\n\n\t\t\tmorphTargetsNormal = [];\n\n\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsNormal[ i ] = [];\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\n\n\t\t}\n\n\t\t// skins\n\n\t\tvar skinIndices = geometry.skinIndices;\n\t\tvar skinWeights = geometry.skinWeights;\n\n\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\n\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\n\n\t\t//\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar normal = face.normal;\n\n\t\t\t\tthis.normals.push( normal, normal, normal );\n\n\t\t\t}\n\n\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\tif ( vertexColors.length === 3 ) {\n\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar color = face.color;\n\n\t\t\t\tthis.colors.push( color, color, color );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\n\n\t\t\t\t\tthis.uvs.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv2 === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\n\n\t\t\t\t\tthis.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// morphs\n\n\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\n\n\t\t\t\tmorphTargetsPosition[ j ].push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\n\n\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\n\n\t\t\t\tmorphTargetsNormal[ j ].push( morphNormal.a, morphNormal.b, morphNormal.c );\n\n\t\t\t}\n\n\t\t\t// skins\n\n\t\t\tif ( hasSkinIndices ) {\n\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\n\n\t\t\t}\n\n\t\t\tif ( hasSkinWeights ) {\n\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeGroups( geometry );\n\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { DirectGeometry };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction arrayMin( array ) {\n\n\tif ( array.length === 0 ) return Infinity;\n\n\tvar min = array[ 0 ];\n\n\tfor ( var i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] < min ) min = array[ i ];\n\n\t}\n\n\treturn min;\n\n}\n\nfunction arrayMax( array ) {\n\n\tif ( array.length === 0 ) return - Infinity;\n\n\tvar max = array[ 0 ];\n\n\tfor ( var i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] > max ) max = array[ i ];\n\n\t}\n\n\treturn max;\n\n}\n\nexport { arrayMin, arrayMax };\n","import { Vector3 } from '../math/Vector3.js';\nimport { Box3 } from '../math/Box3.js';\nimport { EventDispatcher } from './EventDispatcher.js';\nimport { BufferAttribute, Float32BufferAttribute, Uint16BufferAttribute, Uint32BufferAttribute } from './BufferAttribute.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { DirectGeometry } from './DirectGeometry.js';\nimport { Object3D } from './Object3D.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { _Math } from '../math/Math.js';\nimport { arrayMax } from '../utils.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar bufferGeometryId = 1; // BufferGeometry uses odd numbers as Id\n\nfunction BufferGeometry() {\n\n\tObject.defineProperty( this, 'id', { value: bufferGeometryId += 2 } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.index = null;\n\tthis.attributes = {};\n\n\tthis.morphAttributes = {};\n\n\tthis.groups = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.drawRange = { start: 0, count: Infinity };\n\n}\n\nBufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: BufferGeometry,\n\n\tisBufferGeometry: true,\n\n\tgetIndex: function () {\n\n\t\treturn this.index;\n\n\t},\n\n\tsetIndex: function ( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t},\n\n\taddAttribute: function ( name, attribute ) {\n\n\t\tif ( ! ( attribute && attribute.isBufferAttribute ) && ! ( attribute && attribute.isInterleavedBufferAttribute ) ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\n\n\t\t\tthis.addAttribute( name, new BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( name === 'index' ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\n\t\t\tthis.setIndex( attribute );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\tremoveAttribute: function ( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t},\n\n\taddGroup: function ( start, count, materialIndex ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\n\n\t\t} );\n\n\t},\n\n\tclearGroups: function () {\n\n\t\tthis.groups = [];\n\n\t},\n\n\tsetDrawRange: function ( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tmatrix.applyToBufferAttribute( position );\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tvar normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormalMatrix.applyToBufferAttribute( normal );\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function () {\n\n\t\t// rotate geometry around world x-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\tm1.makeRotationX( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\t// rotate geometry around world y-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\tm1.makeRotationY( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\t// rotate geometry around world z-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\tm1.makeRotationZ( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function () {\n\n\t\t// translate geometry\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function translate( x, y, z ) {\n\n\t\t\tm1.makeTranslation( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tscale: function () {\n\n\t\t// scale geometry\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function scale( x, y, z ) {\n\n\t\t\tm1.makeScale( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\tvar obj = new Object3D();\n\n\t\treturn function lookAt( vector ) {\n\n\t\t\tobj.lookAt( vector );\n\n\t\t\tobj.updateMatrix();\n\n\t\t\tthis.applyMatrix( obj.matrix );\n\n\t\t};\n\n\t}(),\n\n\tcenter: function () {\n\n\t\tvar offset = new Vector3();\n\n\t\treturn function center() {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t\tthis.boundingBox.getCenter( offset ).negate();\n\n\t\t\tthis.translate( offset.x, offset.y, offset.z );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetFromObject: function ( object ) {\n\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isPoints || object.isLine ) {\n\n\t\t\tvar positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\n\t\t\tvar colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\n\n\t\t\tthis.addAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\n\t\t\tthis.addAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\n\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\n\n\t\t\t\tvar lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\n\n\t\t\t\tthis.addAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t\t}\n\n\t\t} else if ( object.isMesh ) {\n\n\t\t\tif ( geometry && geometry.isGeometry ) {\n\n\t\t\t\tthis.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tvar position = [];\n\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tvar point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t},\n\n\tupdateFromObject: function ( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tvar direct = geometry.__directGeometry;\n\n\t\t\tif ( geometry.elementsNeedUpdate === true ) {\n\n\t\t\t\tdirect = undefined;\n\t\t\t\tgeometry.elementsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( direct === undefined ) {\n\n\t\t\t\treturn this.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.normalsNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.uvsNeedUpdate = false;\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t\tgeometry = direct;\n\n\t\t}\n\n\t\tvar attribute;\n\n\t\tif ( geometry.verticesNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.position;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.normalsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.normal;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.normalsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.colorsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.color;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.colorsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.uvsNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.uv;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.uvsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.lineDistance;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.groupsNeedUpdate ) {\n\n\t\t\tgeometry.computeGroups( object.geometry );\n\t\t\tthis.groups = geometry.groups;\n\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tgeometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\n\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\n\n\t},\n\n\tfromDirectGeometry: function ( geometry ) {\n\n\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\n\t\tthis.addAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\n\n\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\n\t\t\tthis.addAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\n\n\t\t}\n\n\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\n\t\t\tthis.addAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\n\t\t\tthis.addAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs2.length > 0 ) {\n\n\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\n\t\t\tthis.addAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\n\n\t\t}\n\n\t\t// groups\n\n\t\tthis.groups = geometry.groups;\n\n\t\t// morphs\n\n\t\tfor ( var name in geometry.morphTargets ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphTargets = geometry.morphTargets[ name ];\n\n\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ i ];\n\n\t\t\t\tvar attribute = new Float32BufferAttribute( morphTarget.length * 3, 3 );\n\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// skinning\n\n\t\tif ( geometry.skinIndices.length > 0 ) {\n\n\t\t\tvar skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\n\t\t\tthis.addAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\n\n\t\t}\n\n\t\tif ( geometry.skinWeights.length > 0 ) {\n\n\t\t\tvar skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\n\t\t\tthis.addAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tvar box = new Box3();\n\t\tvar vector = new Vector3();\n\n\t\treturn function computeBoundingSphere() {\n\n\t\t\tif ( this.boundingSphere === null ) {\n\n\t\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t\t}\n\n\t\t\tvar position = this.attributes.position;\n\n\t\t\tif ( position ) {\n\n\t\t\t\tvar center = this.boundingSphere.center;\n\n\t\t\t\tbox.setFromBufferAttribute( position );\n\t\t\t\tbox.getCenter( center );\n\n\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\n\t\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\t\tvar maxRadiusSq = 0;\n\n\t\t\t\tfor ( var i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t\tvector.x = position.getX( i );\n\t\t\t\t\tvector.y = position.getY( i );\n\t\t\t\t\tvector.z = position.getZ( i );\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\n\n\t\t\t\t}\n\n\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}(),\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tvar index = this.index;\n\t\tvar attributes = this.attributes;\n\t\tvar groups = this.groups;\n\n\t\tif ( attributes.position ) {\n\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( attributes.normal === undefined ) {\n\n\t\t\t\tthis.addAttribute( 'normal', new BufferAttribute( new Float32Array( positions.length ), 3 ) );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tvar array = attributes.normal.array;\n\n\t\t\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t\t\tarray[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar normals = attributes.normal.array;\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tvar indices = index.array;\n\n\t\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\t\tthis.addGroup( 0, indices.length );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = groups.length; j < jl; ++ j ) {\n\n\t\t\t\t\tvar group = groups[ j ];\n\n\t\t\t\t\tvar start = group.start;\n\t\t\t\t\tvar count = group.count;\n\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\t\t\tvA = indices[ i + 0 ] * 3;\n\t\t\t\t\t\tvB = indices[ i + 1 ] * 3;\n\t\t\t\t\t\tvC = indices[ i + 2 ] * 3;\n\n\t\t\t\t\t\tpA.fromArray( positions, vA );\n\t\t\t\t\t\tpB.fromArray( positions, vB );\n\t\t\t\t\t\tpC.fromArray( positions, vC );\n\n\t\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\t\tnormals[ vA ] += cb.x;\n\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vB ] += cb.x;\n\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vC ] += cb.x;\n\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\n\n\t\t\t\t\tpA.fromArray( positions, i );\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormals[ i ] = cb.x;\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tattributes.normal.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) {\n\n\t\t\toffset = 0;\n\n\t\t\tconsole.warn(\n\t\t\t\t'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\n\t\t\t\t+ 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\n\t\t\t);\n\n\t\t}\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tvar attribute1 = attributes[ key ];\n\t\t\tvar attributeArray1 = attribute1.array;\n\n\t\t\tvar attribute2 = geometry.attributes[ key ];\n\t\t\tvar attributeArray2 = attribute2.array;\n\n\t\t\tvar attributeSize = attribute2.itemSize;\n\n\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tvar vector = new Vector3();\n\n\t\treturn function normalizeNormals() {\n\n\t\t\tvar normals = this.attributes.normal;\n\n\t\t\tfor ( var i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t\tvector.x = normals.getX( i );\n\t\t\t\tvector.y = normals.getY( i );\n\t\t\t\tvector.z = normals.getZ( i );\n\n\t\t\t\tvector.normalize();\n\n\t\t\t\tnormals.setXYZ( i, vector.x, vector.y, vector.z );\n\n\t\t\t}\n\n\t\t};\n\n\t}(),\n\n\ttoNonIndexed: function () {\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar geometry2 = new BufferGeometry();\n\n\t\tvar indices = this.index.array;\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\n\t\t\tvar array = attribute.array;\n\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\tvar array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tvar index = 0, index2 = 0;\n\n\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\tfor ( var j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry2.addAttribute( name, new BufferAttribute( array2, itemSize ) );\n\n\t\t}\n\n\t\tvar groups = this.groups;\n\n\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tvar group = groups[ i ];\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tdata.data = { attributes: {} };\n\n\t\tvar index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tvar array = Array.prototype.slice.call( index.array );\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: array\n\t\t\t};\n\n\t\t}\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\n\t\t\tvar array = Array.prototype.slice.call( attribute.array );\n\n\t\t\tdata.data.attributes[ key ] = {\n\t\t\t\titemSize: attribute.itemSize,\n\t\t\t\ttype: attribute.array.constructor.name,\n\t\t\t\tarray: array,\n\t\t\t\tnormalized: attribute.normalized\n\t\t\t};\n\n\t\t}\n\n\t\tvar groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tvar boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t var parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t var values = [];\n\n\t\t for ( var key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new BufferGeometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar name, i, l;\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tvar index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone() );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tvar attributes = source.attributes;\n\n\t\tfor ( name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\t\t\tthis.addAttribute( name, attribute.clone() );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tvar morphAttributes = source.morphAttributes;\n\n\t\tfor ( name in morphAttributes ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone() );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// groups\n\n\t\tvar groups = source.groups;\n\n\t\tfor ( i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tvar group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { BufferGeometry };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// BoxGeometry\n\nfunction BoxGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'BoxGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\tdepth: depth,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tdepthSegments: depthSegments\n\t};\n\n\tthis.fromBufferGeometry( new BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\n\tthis.mergeVertices();\n\n}\n\nBoxGeometry.prototype = Object.create( Geometry.prototype );\nBoxGeometry.prototype.constructor = BoxGeometry;\n\n// BoxBufferGeometry\n\nfunction BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'BoxBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\tdepth: depth,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tdepthSegments: depthSegments\n\t};\n\n\tvar scope = this;\n\n\twidth = width || 1;\n\theight = height || 1;\n\tdepth = depth || 1;\n\n\t// segments\n\n\twidthSegments = Math.floor( widthSegments ) || 1;\n\theightSegments = Math.floor( heightSegments ) || 1;\n\tdepthSegments = Math.floor( depthSegments ) || 1;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar numberOfVertices = 0;\n\tvar groupStart = 0;\n\n\t// build each side of the box geometry\n\n\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\tvar segmentWidth = width / gridX;\n\t\tvar segmentHeight = height / gridY;\n\n\t\tvar widthHalf = width / 2;\n\t\tvar heightHalf = height / 2;\n\t\tvar depthHalf = depth / 2;\n\n\t\tvar gridX1 = gridX + 1;\n\t\tvar gridY1 = gridY + 1;\n\n\t\tvar vertexCounter = 0;\n\t\tvar groupCount = 0;\n\n\t\tvar ix, iy;\n\n\t\tvar vector = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tvar y = iy * segmentHeight - heightHalf;\n\n\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tvar x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t// set values to correct vector component\n\n\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t// set values to correct vector component\n\n\t\t\t\tvector[ u ] = 0;\n\t\t\t\tvector[ v ] = 0;\n\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t// uvs\n\n\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t// counters\n\n\t\t\t\tvertexCounter += 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// indices\n\n\t\t// 1. you need three indices to draw a single face\n\t\t// 2. a single segment consists of two faces\n\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tvar a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\tvar b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\tvar c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tvar d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t// increase counter\n\n\t\t\t\tgroupCount += 6;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t// calculate new start value for groups\n\n\t\tgroupStart += groupCount;\n\n\t\t// update total number of vertices\n\n\t\tnumberOfVertices += vertexCounter;\n\n\t}\n\n}\n\nBoxBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nBoxBufferGeometry.prototype.constructor = BoxBufferGeometry;\n\n\nexport { BoxGeometry, BoxBufferGeometry };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\n\n// PlaneGeometry\n\nfunction PlaneGeometry( width, height, widthSegments, heightSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'PlaneGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tthis.fromBufferGeometry( new PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\n\tthis.mergeVertices();\n\n}\n\nPlaneGeometry.prototype = Object.create( Geometry.prototype );\nPlaneGeometry.prototype.constructor = PlaneGeometry;\n\n// PlaneBufferGeometry\n\nfunction PlaneBufferGeometry( width, height, widthSegments, heightSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'PlaneBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\twidth = width || 1;\n\theight = height || 1;\n\n\tvar width_half = width / 2;\n\tvar height_half = height / 2;\n\n\tvar gridX = Math.floor( widthSegments ) || 1;\n\tvar gridY = Math.floor( heightSegments ) || 1;\n\n\tvar gridX1 = gridX + 1;\n\tvar gridY1 = gridY + 1;\n\n\tvar segment_width = width / gridX;\n\tvar segment_height = height / gridY;\n\n\tvar ix, iy;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// generate vertices, normals and uvs\n\n\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\tvar y = iy * segment_height - height_half;\n\n\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\tvar x = ix * segment_width - width_half;\n\n\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\tuvs.push( ix / gridX );\n\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\tvar a = ix + gridX1 * iy;\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nPlaneBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nPlaneBufferGeometry.prototype.constructor = PlaneBufferGeometry;\n\n\nexport { PlaneGeometry, PlaneBufferGeometry };\n","import { EventDispatcher } from '../core/EventDispatcher.js';\nimport { NoColors, FrontSide, FlatShading, NormalBlending, LessEqualDepth, AddEquation, OneMinusSrcAlphaFactor, SrcAlphaFactor } from '../constants.js';\nimport { _Math } from '../math/Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar materialId = 0;\n\nfunction Material() {\n\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.fog = true;\n\tthis.lights = true;\n\n\tthis.blending = NormalBlending;\n\tthis.side = FrontSide;\n\tthis.flatShading = false;\n\tthis.vertexColors = NoColors; // THREE.NoColors, THREE.VertexColors, THREE.FaceColors\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blendSrc = SrcAlphaFactor;\n\tthis.blendDst = OneMinusSrcAlphaFactor;\n\tthis.blendEquation = AddEquation;\n\tthis.blendSrcAlpha = null;\n\tthis.blendDstAlpha = null;\n\tthis.blendEquationAlpha = null;\n\n\tthis.depthFunc = LessEqualDepth;\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.clippingPlanes = null;\n\tthis.clipIntersection = false;\n\tthis.clipShadows = false;\n\n\tthis.shadowSide = null;\n\n\tthis.colorWrite = true;\n\n\tthis.precision = null; // override the renderer's default precision for this material\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.dithering = false;\n\n\tthis.alphaTest = 0;\n\tthis.premultipliedAlpha = false;\n\n\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\n\n\tthis.visible = true;\n\n\tthis.userData = {};\n\n\tthis.needsUpdate = true;\n\n}\n\nMaterial.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Material,\n\n\tisMaterial: true,\n\n\tonBeforeCompile: function () {},\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( var key in values ) {\n\n\t\t\tvar newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// for backward compatability if shading is set in the constructor\n\t\t\tif ( key === 'shading' ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\t\tthis.flatShading = ( newValue === FlatShading ) ? true : false;\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else if ( key === 'overdraw' ) {\n\n\t\t\t\t// ensure overdraw is backwards-compatible with legacy boolean type\n\t\t\t\tthis[ key ] = Number( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRoot = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRoot ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearCoat !== undefined ) data.clearCoat = this.clearCoat;\n\t\tif ( this.clearCoatRoughness !== undefined ) data.clearCoatRoughness = this.clearCoatRoughness;\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\t\tif ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\n\n\t\t}\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors !== NoColors ) data.vertexColors = this.vertexColors;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.morphTargets === true ) data.morphTargets = true;\n\t\tif ( this.skinning === true ) data.skinning = true;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRoot ) {\n\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.fog = source.fog;\n\t\tthis.lights = source.lights;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.flatShading = source.flatShading;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.overdraw = source.overdraw;\n\n\t\tthis.visible = source.visible;\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tthis.clipShadows = source.clipShadows;\n\t\tthis.clipIntersection = source.clipIntersection;\n\n\t\tvar srcPlanes = source.clippingPlanes,\n\t\t\tdstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tvar n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( var i = 0; i !== n; ++ i )\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\n\t\tthis.shadowSide = source.shadowSide;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { Material };\n","import { Vector3 } from './Vector3.js';\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Ray( origin, direction ) {\n\n\tthis.origin = ( origin !== undefined ) ? origin : new Vector3();\n\tthis.direction = ( direction !== undefined ) ? direction : new Vector3();\n\n}\n\nObject.assign( Ray.prototype, {\n\n\tset: function ( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t},\n\n\tat: function ( t, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .at() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t},\n\n\tlookAt: function ( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\trecast: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function recast( t ) {\n\n\t\t\tthis.origin.copy( this.at( t, v1 ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( point, this.origin );\n\n\t\tvar directionDistance = target.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn target.copy( this.origin );\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t},\n\n\tdistanceSqToPoint: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function distanceSqToPoint( point ) {\n\n\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t\t// point behind the ray\n\n\t\t\tif ( directionDistance < 0 ) {\n\n\t\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t\t}\n\n\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\t\treturn v1.distanceToSquared( point );\n\n\t\t};\n\n\t}(),\n\n\tdistanceSqToSegment: function () {\n\n\t\tvar segCenter = new Vector3();\n\t\tvar segDir = new Vector3();\n\t\tvar diff = new Vector3();\n\n\t\treturn function distanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t\t// It returns the min distance between the ray and the segment\n\t\t\t// defined by v0 and v1\n\t\t\t// It can also set two optional targets :\n\t\t\t// - The closest point on the ray\n\t\t\t// - The closest point on the segment\n\n\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\n\t\t\tdiff.copy( this.origin ).sub( segCenter );\n\n\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\t\tvar a01 = - this.direction.dot( segDir );\n\t\t\tvar b0 = diff.dot( this.direction );\n\t\t\tvar b1 = - diff.dot( segDir );\n\t\t\tvar c = diff.lengthSq();\n\t\t\tvar det = Math.abs( 1 - a01 * a01 );\n\t\t\tvar s0, s1, sqrDist, extDet;\n\n\t\t\tif ( det > 0 ) {\n\n\t\t\t\t// The ray and segment are not parallel.\n\n\t\t\t\ts0 = a01 * b1 - b0;\n\t\t\t\ts1 = a01 * b0 - b1;\n\t\t\t\textDet = segExtent * det;\n\n\t\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\t\tvar invDet = 1 / det;\n\t\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 5\n\n\t\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t\t// region 4\n\n\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 3\n\n\t\t\t\t\t\ts0 = 0;\n\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 2\n\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Ray and segment are parallel.\n\n\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t}\n\n\t\t\tif ( optionalPointOnRay ) {\n\n\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t\t}\n\n\t\t\tif ( optionalPointOnSegment ) {\n\n\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\n\n\t\t\t}\n\n\t\t\treturn sqrDist;\n\n\t\t};\n\n\t}(),\n\n\tintersectSphere: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function intersectSphere( sphere, target ) {\n\n\t\t\tv1.subVectors( sphere.center, this.origin );\n\t\t\tvar tca = v1.dot( this.direction );\n\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\n\t\t\tvar radius2 = sphere.radius * sphere.radius;\n\n\t\t\tif ( d2 > radius2 ) return null;\n\n\t\t\tvar thc = Math.sqrt( radius2 - d2 );\n\n\t\t\t// t0 = first intersect point - entrance on front of sphere\n\t\t\tvar t0 = tca - thc;\n\n\t\t\t// t1 = second intersect point - exit point on back of sphere\n\t\t\tvar t1 = tca + thc;\n\n\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t\t// test to see if t0 is behind the ray:\n\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t\t// in order to always return an intersect point that is in front of the ray.\n\t\t\tif ( t0 < 0 ) return this.at( t1, target );\n\n\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\t\treturn this.at( t0, target );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\n\n\t},\n\n\tdistanceToPlane: function ( plane ) {\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t : null;\n\n\t},\n\n\tintersectPlane: function ( plane, target ) {\n\n\t\tvar t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, target );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t},\n\n\tintersectBox: function ( box, target ) {\n\n\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tvar invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tvar origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\n\n\t},\n\n\tintersectsBox: ( function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function intersectsBox( box ) {\n\n\t\t\treturn this.intersectBox( box, v ) !== null;\n\n\t\t};\n\n\t} )(),\n\n\tintersectTriangle: function () {\n\n\t\t// Compute the offset origin, edges, and normal.\n\t\tvar diff = new Vector3();\n\t\tvar edge1 = new Vector3();\n\t\tvar edge2 = new Vector3();\n\t\tvar normal = new Vector3();\n\n\t\treturn function intersectTriangle( a, b, c, backfaceCulling, target ) {\n\n\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t\tedge1.subVectors( b, a );\n\t\t\tedge2.subVectors( c, a );\n\t\t\tnormal.crossVectors( edge1, edge2 );\n\n\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\t\tvar DdN = this.direction.dot( normal );\n\t\t\tvar sign;\n\n\t\t\tif ( DdN > 0 ) {\n\n\t\t\t\tif ( backfaceCulling ) return null;\n\t\t\t\tsign = 1;\n\n\t\t\t} else if ( DdN < 0 ) {\n\n\t\t\t\tsign = - 1;\n\t\t\t\tDdN = - DdN;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tdiff.subVectors( this.origin, a );\n\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\n\n\t\t\t// b1 < 0, no intersection\n\t\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\n\n\t\t\t// b2 < 0, no intersection\n\t\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// b1+b2 > 1, no intersection\n\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Line intersects triangle, check if ray does.\n\t\t\tvar QdN = - sign * diff.dot( normal );\n\n\t\t\t// t < 0, no intersection\n\t\t\tif ( QdN < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Ray intersects triangle.\n\t\t\treturn this.at( QdN / DdN, target );\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix4: function ( matrix4 ) {\n\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.transformDirection( matrix4 );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n} );\n\n\nexport { Ray };\n","import { Vector3 } from './Vector3.js';\nimport { _Math } from './Math.js';\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Line3( start, end ) {\n\n\tthis.start = ( start !== undefined ) ? start : new Vector3();\n\tthis.end = ( end !== undefined ) ? end : new Vector3();\n\n}\n\nObject.assign( Line3.prototype, {\n\n\tset: function ( start, end ) {\n\n\t\tthis.start.copy( start );\n\t\tthis.end.copy( end );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( line ) {\n\n\t\tthis.start.copy( line.start );\n\t\tthis.end.copy( line.end );\n\n\t\treturn this;\n\n\t},\n\n\tgetCenter: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Line3: .getCenter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\n\n\t},\n\n\tdelta: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Line3: .delta() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.subVectors( this.end, this.start );\n\n\t},\n\n\tdistanceSq: function () {\n\n\t\treturn this.start.distanceToSquared( this.end );\n\n\t},\n\n\tdistance: function () {\n\n\t\treturn this.start.distanceTo( this.end );\n\n\t},\n\n\tat: function ( t, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Line3: .at() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tclosestPointToPointParameter: function () {\n\n\t\tvar startP = new Vector3();\n\t\tvar startEnd = new Vector3();\n\n\t\treturn function closestPointToPointParameter( point, clampToLine ) {\n\n\t\t\tstartP.subVectors( point, this.start );\n\t\t\tstartEnd.subVectors( this.end, this.start );\n\n\t\t\tvar startEnd2 = startEnd.dot( startEnd );\n\t\t\tvar startEnd_startP = startEnd.dot( startP );\n\n\t\t\tvar t = startEnd_startP / startEnd2;\n\n\t\t\tif ( clampToLine ) {\n\n\t\t\t\tt = _Math.clamp( t, 0, 1 );\n\n\t\t\t}\n\n\t\t\treturn t;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, clampToLine, target ) {\n\n\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Line3: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.start.applyMatrix4( matrix );\n\t\tthis.end.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( line ) {\n\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\n\n\t}\n\n} );\n\n\nexport { Line3 };\n","import { Vector3 } from './Vector3.js';\nimport { Line3 } from './Line3.js';\nimport { Plane } from './Plane.js';\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Triangle( a, b, c ) {\n\n\tthis.a = ( a !== undefined ) ? a : new Vector3();\n\tthis.b = ( b !== undefined ) ? b : new Vector3();\n\tthis.c = ( c !== undefined ) ? c : new Vector3();\n\n}\n\nObject.assign( Triangle, {\n\n\tgetNormal: function () {\n\n\t\tvar v0 = new Vector3();\n\n\t\treturn function getNormal( a, b, c, target ) {\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Triangle: .getNormal() target is now required' );\n\t\t\t\ttarget = new Vector3();\n\n\t\t\t}\n\n\t\t\ttarget.subVectors( c, b );\n\t\t\tv0.subVectors( a, b );\n\t\t\ttarget.cross( v0 );\n\n\t\t\tvar targetLengthSq = target.lengthSq();\n\t\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t\t}\n\n\t\t\treturn target.set( 0, 0, 0 );\n\n\t\t};\n\n\t}(),\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tgetBarycoord: function () {\n\n\t\tvar v0 = new Vector3();\n\t\tvar v1 = new Vector3();\n\t\tvar v2 = new Vector3();\n\n\t\treturn function getBarycoord( point, a, b, c, target ) {\n\n\t\t\tv0.subVectors( c, a );\n\t\t\tv1.subVectors( b, a );\n\t\t\tv2.subVectors( point, a );\n\n\t\t\tvar dot00 = v0.dot( v0 );\n\t\t\tvar dot01 = v0.dot( v1 );\n\t\t\tvar dot02 = v0.dot( v2 );\n\t\t\tvar dot11 = v1.dot( v1 );\n\t\t\tvar dot12 = v1.dot( v2 );\n\n\t\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\n\t\t\t\ttarget = new Vector3();\n\n\t\t\t}\n\n\t\t\t// collinear or singular triangle\n\t\t\tif ( denom === 0 ) {\n\n\t\t\t\t// arbitrary location outside of triangle?\n\t\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\t\treturn target.set( - 2, - 1, - 1 );\n\n\t\t\t}\n\n\t\t\tvar invDenom = 1 / denom;\n\t\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t\t// barycentric coordinates must always sum to 1\n\t\t\treturn target.set( 1 - u - v, v, u );\n\n\t\t};\n\n\t}(),\n\n\tcontainsPoint: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function containsPoint( point, a, b, c ) {\n\n\t\t\tTriangle.getBarycoord( point, a, b, c, v1 );\n\n\t\t\treturn ( v1.x >= 0 ) && ( v1.y >= 0 ) && ( ( v1.x + v1.y ) <= 1 );\n\n\t\t};\n\n\t}()\n\n} );\n\nObject.assign( Triangle.prototype, {\n\n\tset: function ( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t},\n\n\tgetArea: function () {\n\n\t\tvar v0 = new Vector3();\n\t\tvar v1 = new Vector3();\n\n\t\treturn function getArea() {\n\n\t\t\tv0.subVectors( this.c, this.b );\n\t\t\tv1.subVectors( this.a, this.b );\n\n\t\t\treturn v0.cross( v1 ).length() * 0.5;\n\n\t\t};\n\n\t}(),\n\n\tgetMidpoint: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t},\n\n\tgetNormal: function ( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t},\n\n\tgetPlane: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getPlane() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t},\n\n\tgetBarycoord: function ( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t},\n\n\tclosestPointToPoint: function () {\n\n\t\tvar plane = new Plane();\n\t\tvar edgeList = [ new Line3(), new Line3(), new Line3() ];\n\t\tvar projectedPoint = new Vector3();\n\t\tvar closestPoint = new Vector3();\n\n\t\treturn function closestPointToPoint( point, target ) {\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\n\t\t\t\ttarget = new Vector3();\n\n\t\t\t}\n\n\t\t\tvar minDistance = Infinity;\n\n\t\t\t// project the point onto the plane of the triangle\n\n\t\t\tplane.setFromCoplanarPoints( this.a, this.b, this.c );\n\t\t\tplane.projectPoint( point, projectedPoint );\n\n\t\t\t// check if the projection lies within the triangle\n\n\t\t\tif ( this.containsPoint( projectedPoint ) === true ) {\n\n\t\t\t\t// if so, this is the closest point\n\n\t\t\t\ttarget.copy( projectedPoint );\n\n\t\t\t} else {\n\n\t\t\t\t// if not, the point falls outside the triangle. the target is the closest point to the triangle's edges or vertices\n\n\t\t\t\tedgeList[ 0 ].set( this.a, this.b );\n\t\t\t\tedgeList[ 1 ].set( this.b, this.c );\n\t\t\t\tedgeList[ 2 ].set( this.c, this.a );\n\n\t\t\t\tfor ( var i = 0; i < edgeList.length; i ++ ) {\n\n\t\t\t\t\tedgeList[ i ].closestPointToPoint( projectedPoint, true, closestPoint );\n\n\t\t\t\t\tvar distance = projectedPoint.distanceToSquared( closestPoint );\n\n\t\t\t\t\tif ( distance < minDistance ) {\n\n\t\t\t\t\t\tminDistance = distance;\n\n\t\t\t\t\t\ttarget.copy( closestPoint );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn target;\n\n\t\t};\n\n\t}(),\n\n\tequals: function ( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n} );\n\n\nexport { Triangle };\n","import { Material } from './Material.js';\nimport { MultiplyOperation } from '../constants.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>\n * }\n */\n\nfunction MeshBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshBasicMaterial';\n\n\tthis.color = new Color( 0xffffff ); // emissive\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshBasicMaterial.prototype = Object.create( Material.prototype );\nMeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\n\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\n\nMeshBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\n\nexport { MeshBasicMaterial };\n","import { Material } from './Material.js';\nimport { UniformsUtils } from '../renderers/shaders/UniformsUtils.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction ShaderMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\n\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\n\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\tthis.lights = false; // set to use scene lights\n\tthis.clipping = false; // set to use user-defined clipping planes\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\tthis.extensions = {\n\t\tderivatives: false, // set to use derivatives\n\t\tfragDepth: false, // set to use fragment depth values\n\t\tdrawBuffers: false, // set to use draw buffers\n\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t};\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\tthis.uniformsNeedUpdate = false;\n\n\tif ( parameters !== undefined ) {\n\n\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n}\n\nShaderMaterial.prototype = Object.create( Material.prototype );\nShaderMaterial.prototype.constructor = ShaderMaterial;\n\nShaderMaterial.prototype.isShaderMaterial = true;\n\nShaderMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.fragmentShader = source.fragmentShader;\n\tthis.vertexShader = source.vertexShader;\n\n\tthis.uniforms = UniformsUtils.clone( source.uniforms );\n\n\tthis.defines = Object.assign( {}, source.defines );\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.lights = source.lights;\n\tthis.clipping = source.clipping;\n\n\tthis.skinning = source.skinning;\n\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.extensions = source.extensions;\n\n\treturn this;\n\n};\n\nShaderMaterial.prototype.toJSON = function ( meta ) {\n\n\tvar data = Material.prototype.toJSON.call( this, meta );\n\n\tdata.uniforms = this.uniforms;\n\tdata.vertexShader = this.vertexShader;\n\tdata.fragmentShader = this.fragmentShader;\n\n\treturn data;\n\n};\n\n\nexport { ShaderMaterial };\n","import { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { Ray } from '../math/Ray.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Triangle } from '../math/Triangle.js';\nimport { Face3 } from '../core/Face3.js';\nimport { DoubleSide, BackSide, TrianglesDrawMode } from '../constants.js';\nimport { MeshBasicMaterial } from '../materials/MeshBasicMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author jonobr1 / http://jonobr1.com/\n */\n\nfunction Mesh( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Mesh';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new MeshBasicMaterial( { color: Math.random() * 0xffffff } );\n\n\tthis.drawMode = TrianglesDrawMode;\n\n\tthis.updateMorphTargets();\n\n}\n\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Mesh,\n\n\tisMesh: true,\n\n\tsetDrawMode: function ( value ) {\n\n\t\tthis.drawMode = value;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.drawMode = source.drawMode;\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tvar geometry = this.geometry;\n\t\tvar m, ml, name;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tvar morphAttributes = geometry.morphAttributes;\n\t\t\tvar keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tvar morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tname = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( m = 0, ml = morphTargets.length; m < ml; m ++ ) {\n\n\t\t\t\t\tname = morphTargets[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\traycast: ( function () {\n\n\t\tvar inverseMatrix = new Matrix4();\n\t\tvar ray = new Ray();\n\t\tvar sphere = new Sphere();\n\n\t\tvar vA = new Vector3();\n\t\tvar vB = new Vector3();\n\t\tvar vC = new Vector3();\n\n\t\tvar tempA = new Vector3();\n\t\tvar tempB = new Vector3();\n\t\tvar tempC = new Vector3();\n\n\t\tvar uvA = new Vector2();\n\t\tvar uvB = new Vector2();\n\t\tvar uvC = new Vector2();\n\n\t\tvar barycoord = new Vector3();\n\n\t\tvar intersectionPoint = new Vector3();\n\t\tvar intersectionPointWorld = new Vector3();\n\n\t\tfunction uvIntersection( point, p1, p2, p3, uv1, uv2, uv3 ) {\n\n\t\t\tTriangle.getBarycoord( point, p1, p2, p3, barycoord );\n\n\t\t\tuv1.multiplyScalar( barycoord.x );\n\t\t\tuv2.multiplyScalar( barycoord.y );\n\t\t\tuv3.multiplyScalar( barycoord.z );\n\n\t\t\tuv1.add( uv2 ).add( uv3 );\n\n\t\t\treturn uv1.clone();\n\n\t\t}\n\n\t\tfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\t\t\tvar intersect;\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t\t\t} else {\n\n\t\t\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t\t\t}\n\n\t\t\tif ( intersect === null ) return null;\n\n\t\t\tintersectionPointWorld.copy( point );\n\t\t\tintersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\n\n\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\t\t\treturn {\n\t\t\t\tdistance: distance,\n\t\t\t\tpoint: intersectionPointWorld.clone(),\n\t\t\t\tobject: object\n\t\t\t};\n\n\t\t}\n\n\t\tfunction checkBufferGeometryIntersection( object, raycaster, ray, position, uv, a, b, c ) {\n\n\t\t\tvA.fromBufferAttribute( position, a );\n\t\t\tvB.fromBufferAttribute( position, b );\n\t\t\tvC.fromBufferAttribute( position, c );\n\n\t\t\tvar intersection = checkIntersection( object, object.material, raycaster, ray, vA, vB, vC, intersectionPoint );\n\n\t\t\tif ( intersection ) {\n\n\t\t\t\tif ( uv ) {\n\n\t\t\t\t\tuvA.fromBufferAttribute( uv, a );\n\t\t\t\t\tuvB.fromBufferAttribute( uv, b );\n\t\t\t\t\tuvC.fromBufferAttribute( uv, c );\n\n\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint, vA, vB, vC, uvA, uvB, uvC );\n\n\t\t\t\t}\n\n\t\t\t\tvar face = new Face3( a, b, c );\n\t\t\t\tTriangle.getNormal( vA, vB, vC, face.normal );\n\n\t\t\t\tintersection.face = face;\n\t\t\t\tintersection.faceIndex = a;\n\n\t\t\t}\n\n\t\t\treturn intersection;\n\n\t\t}\n\n\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\tvar geometry = this.geometry;\n\t\t\tvar material = this.material;\n\t\t\tvar matrixWorld = this.matrixWorld;\n\n\t\t\tif ( material === undefined ) return;\n\n\t\t\t// Checking boundingSphere distance to ray\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\tsphere.applyMatrix4( matrixWorld );\n\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\n\n\t\t\t//\n\n\t\t\tinverseMatrix.getInverse( matrixWorld );\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\t\t// Check boundingBox before continuing\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tif ( ray.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t\t}\n\n\t\t\tvar intersection;\n\n\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\tvar a, b, c;\n\t\t\t\tvar index = geometry.index;\n\t\t\t\tvar position = geometry.attributes.position;\n\t\t\t\tvar uv = geometry.attributes.uv;\n\t\t\t\tvar i, l;\n\n\t\t\t\tif ( index !== null ) {\n\n\t\t\t\t\t// indexed buffer geometry\n\n\t\t\t\t\tfor ( i = 0, l = index.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\ta = index.getX( i );\n\t\t\t\t\t\tb = index.getX( i + 1 );\n\t\t\t\t\t\tc = index.getX( i + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, position, uv, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indices buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( position !== undefined ) {\n\n\t\t\t\t\t// non-indexed buffer geometry\n\n\t\t\t\t\tfor ( i = 0, l = position.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\ta = i;\n\t\t\t\t\t\tb = i + 1;\n\t\t\t\t\t\tc = i + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, position, uv, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) intersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\t\tvar fvA, fvB, fvC;\n\t\t\t\tvar isMultiMaterial = Array.isArray( material );\n\n\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\tvar faces = geometry.faces;\n\t\t\t\tvar uvs;\n\n\t\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\t\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\n\n\t\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tvar face = faces[ f ];\n\t\t\t\t\tvar faceMaterial = isMultiMaterial ? material[ face.materialIndex ] : material;\n\n\t\t\t\t\tif ( faceMaterial === undefined ) continue;\n\n\t\t\t\t\tfvA = vertices[ face.a ];\n\t\t\t\t\tfvB = vertices[ face.b ];\n\t\t\t\t\tfvC = vertices[ face.c ];\n\n\t\t\t\t\tif ( faceMaterial.morphTargets === true ) {\n\n\t\t\t\t\t\tvar morphTargets = geometry.morphTargets;\n\t\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\n\n\t\t\t\t\t\tvA.set( 0, 0, 0 );\n\t\t\t\t\t\tvB.set( 0, 0, 0 );\n\t\t\t\t\t\tvC.set( 0, 0, 0 );\n\n\t\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\n\n\t\t\t\t\t\t\tvar influence = morphInfluences[ t ];\n\n\t\t\t\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\n\n\t\t\t\t\t\t\tvA.addScaledVector( tempA.subVectors( targets[ face.a ], fvA ), influence );\n\t\t\t\t\t\t\tvB.addScaledVector( tempB.subVectors( targets[ face.b ], fvB ), influence );\n\t\t\t\t\t\t\tvC.addScaledVector( tempC.subVectors( targets[ face.c ], fvC ), influence );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvA.add( fvA );\n\t\t\t\t\t\tvB.add( fvB );\n\t\t\t\t\t\tvC.add( fvC );\n\n\t\t\t\t\t\tfvA = vA;\n\t\t\t\t\t\tfvB = vB;\n\t\t\t\t\t\tfvC = vC;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tintersection = checkIntersection( this, faceMaterial, raycaster, ray, fvA, fvB, fvC, intersectionPoint );\n\n\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\tif ( uvs && uvs[ f ] ) {\n\n\t\t\t\t\t\t\tvar uvs_f = uvs[ f ];\n\t\t\t\t\t\t\tuvA.copy( uvs_f[ 0 ] );\n\t\t\t\t\t\t\tuvB.copy( uvs_f[ 1 ] );\n\t\t\t\t\t\t\tuvC.copy( uvs_f[ 2 ] );\n\n\t\t\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint, fvA, fvB, fvC, uvA, uvB, uvC );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tintersection.face = face;\n\t\t\t\t\t\tintersection.faceIndex = f;\n\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() ),\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\n\nexport { Mesh };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { BackSide } from '../../constants.js';\nimport { OrthographicCamera } from '../../cameras/OrthographicCamera.js';\nimport { BoxBufferGeometry } from '../../geometries/BoxGeometry.js';\nimport { PlaneBufferGeometry } from '../../geometries/PlaneGeometry.js';\nimport { MeshBasicMaterial } from '../../materials/MeshBasicMaterial.js';\nimport { ShaderMaterial } from '../../materials/ShaderMaterial.js';\nimport { Color } from '../../math/Color.js';\nimport { Mesh } from '../../objects/Mesh.js';\nimport { ShaderLib } from '../shaders/ShaderLib.js';\n\nfunction WebGLBackground( renderer, state, geometries, premultipliedAlpha ) {\n\n\tvar clearColor = new Color( 0x000000 );\n\tvar clearAlpha = 0;\n\n\tvar planeCamera, planeMesh;\n\tvar boxMesh;\n\n\tfunction render( renderList, scene, camera, forceClear ) {\n\n\t\tvar background = scene.background;\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && background.isCubeTexture ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxBufferGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tuniforms: ShaderLib.cube.uniforms,\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: true,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.removeAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.removeAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\tgeometries.update( boxMesh.geometry );\n\n\t\t\t}\n\n\t\t\tboxMesh.material.uniforms.tCube.value = background;\n\n\t\t\trenderList.push( boxMesh, boxMesh.geometry, boxMesh.material, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeCamera === undefined ) {\n\n\t\t\t\tplaneCamera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneBufferGeometry( 2, 2 ),\n\t\t\t\t\tnew MeshBasicMaterial( { depthTest: false, depthWrite: false, fog: false } )\n\t\t\t\t);\n\n\t\t\t\tgeometries.update( planeMesh.geometry );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.map = background;\n\n\t\t\t// TODO Push this to renderList\n\n\t\t\trenderer.renderBufferDirect( planeCamera, null, planeMesh.geometry, planeMesh.material, planeMesh, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha !== undefined ? alpha : 1;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\n\nexport { WebGLBackground };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLBufferRenderer( gl, extensions, info ) {\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfo.update( count, mode );\n\n\t}\n\n\tfunction renderInstances( geometry, start, count ) {\n\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\tif ( extension === null ) {\n\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar position = geometry.attributes.position;\n\n\t\tif ( position.isInterleavedBufferAttribute ) {\n\n\t\t\tcount = position.data.count;\n\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, count, geometry.maxInstancedCount );\n\n\t\t} else {\n\n\t\t\textension.drawArraysInstancedANGLE( mode, start, count, geometry.maxInstancedCount );\n\n\t\t}\n\n\t\tinfo.update( count, mode, geometry.maxInstancedCount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n\nexport { WebGLBufferRenderer };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tvar maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\tvar precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tvar maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tvar logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\n\tvar maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n\tvar maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\n\tvar maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\n\n\tvar maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tvar maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\n\tvar maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\n\tvar maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\n\n\tvar vertexTextures = maxVertexTextures > 0;\n\tvar floatFragmentTextures = !! extensions.get( 'OES_texture_float' );\n\tvar floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\treturn {\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures\n\n\t};\n\n}\n\n\nexport { WebGLCapabilities };\n","/**\n * @author tschw\n */\n\nimport { Matrix3 } from '../../math/Matrix3.js';\nimport { Plane } from '../../math/Plane.js';\n\nfunction WebGLClipping() {\n\n\tvar scope = this,\n\n\t\tglobalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false,\n\n\t\tplane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\n\n\t\tvar enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function ( planes, clipIntersection, clipShadows, camera, cache, fromCache ) {\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4,\n\n\t\t\t\tdstArray = cache.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, fromCache );\n\n\t\t\tfor ( var i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tcache.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tvar nPlanes = planes !== null ? planes.length : 0,\n\t\t\tdstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tvar flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\n\nexport { WebGLClipping };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLExtensions( gl ) {\n\n\tvar extensions = {};\n\n\treturn {\n\n\t\tget: function ( name ) {\n\n\t\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\t\treturn extensions[ name ];\n\n\t\t\t}\n\n\t\t\tvar extension;\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\textension = gl.getExtension( name );\n\n\t\t\t}\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\textensions[ name ] = extension;\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\n\nexport { WebGLExtensions };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Uint16BufferAttribute, Uint32BufferAttribute } from '../../core/BufferAttribute.js';\nimport { BufferGeometry } from '../../core/BufferGeometry.js';\nimport { arrayMax } from '../../utils.js';\n\nfunction WebGLGeometries( gl, attributes, info ) {\n\n\tvar geometries = {};\n\tvar wireframeAttributes = {};\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tvar geometry = event.target;\n\t\tvar buffergeometry = geometries[ geometry.id ];\n\n\t\tif ( buffergeometry.index !== null ) {\n\n\t\t\tattributes.remove( buffergeometry.index );\n\n\t\t}\n\n\t\tfor ( var name in buffergeometry.attributes ) {\n\n\t\t\tattributes.remove( buffergeometry.attributes[ name ] );\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tdelete geometries[ geometry.id ];\n\n\t\t// TODO Remove duplicate code\n\n\t\tvar attribute = wireframeAttributes[ geometry.id ];\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\tdelete wireframeAttributes[ geometry.id ];\n\n\t\t}\n\n\t\tattribute = wireframeAttributes[ buffergeometry.id ];\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\tdelete wireframeAttributes[ buffergeometry.id ];\n\n\t\t}\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tvar buffergeometry = geometries[ geometry.id ];\n\n\t\tif ( buffergeometry ) return buffergeometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tbuffergeometry = geometry;\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\n\n\t\t\t\tgeometry._bufferGeometry = new BufferGeometry().setFromObject( object );\n\n\t\t\t}\n\n\t\t\tbuffergeometry = geometry._bufferGeometry;\n\n\t\t}\n\n\t\tgeometries[ geometry.id ] = buffergeometry;\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tvar index = geometry.index;\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t}\n\n\t\tfor ( var name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], gl.ARRAY_BUFFER );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( var name in morphAttributes ) {\n\n\t\t\tvar array = morphAttributes[ name ];\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tvar attribute = wireframeAttributes[ geometry.id ];\n\n\t\tif ( attribute ) return attribute;\n\n\t\tvar indices = [];\n\n\t\tvar geometryIndex = geometry.index;\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\t// console.time( 'wireframe' );\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tvar array = geometryIndex.array;\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tvar a = array[ i + 0 ];\n\t\t\t\tvar b = array[ i + 1 ];\n\t\t\t\tvar c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar array = geometryAttributes.position.array;\n\n\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tvar a = i + 0;\n\t\t\t\tvar b = i + 1;\n\t\t\t\tvar c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// console.timeEnd( 'wireframe' );\n\n\t\tattribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\n\t\tattributes.update( attribute, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\twireframeAttributes[ geometry.id ] = attribute;\n\n\t\treturn attribute;\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\n\nexport { WebGLGeometries };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, info ) {\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tvar type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfo.update( count, mode );\n\n\t}\n\n\tfunction renderInstances( geometry, start, count ) {\n\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\tif ( extension === null ) {\n\n\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\textension.drawElementsInstancedANGLE( mode, count, type, start * bytesPerElement, geometry.maxInstancedCount );\n\n\t\tinfo.update( count, mode, geometry.maxInstancedCount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n\nexport { WebGLIndexedBufferRenderer };\n","/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction WebGLInfo( gl ) {\n\n\tvar memory = {\n\t\tgeometries: 0,\n\t\ttextures: 0\n\t};\n\n\tvar render = {\n\t\tframe: 0,\n\t\tcalls: 0,\n\t\ttriangles: 0,\n\t\tpoints: 0,\n\t\tlines: 0\n\t};\n\n\tfunction update( count, mode, instanceCount ) {\n\n\t\tinstanceCount = instanceCount || 1;\n\n\t\trender.calls ++;\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase gl.TRIANGLES:\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.TRIANGLE_STRIP:\n\t\t\tcase gl.TRIANGLE_FAN:\n\t\t\t\trender.triangles += instanceCount * ( count - 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINES:\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_STRIP:\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_LOOP:\n\t\t\t\trender.lines += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tcase gl.POINTS:\n\t\t\t\trender.points += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\trender.frame ++;\n\t\trender.calls = 0;\n\t\trender.triangles = 0;\n\t\trender.points = 0;\n\t\trender.lines = 0;\n\n\t}\n\n\treturn {\n\t\tmemory: memory,\n\t\trender: render,\n\t\tprograms: null,\n\t\tautoReset: true,\n\t\treset: reset,\n\t\tupdate: update\n\t};\n\n}\n\n\nexport { WebGLInfo };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction WebGLMorphtargets( gl ) {\n\n\tvar influencesList = {};\n\tvar morphInfluences = new Float32Array( 8 );\n\n\tfunction update( object, geometry, material, program ) {\n\n\t\tvar objectInfluences = object.morphTargetInfluences;\n\n\t\tvar length = objectInfluences.length;\n\n\t\tvar influences = influencesList[ geometry.id ];\n\n\t\tif ( influences === undefined ) {\n\n\t\t\t// initialise list\n\n\t\t\tinfluences = [];\n\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t}\n\n\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t}\n\n\t\tvar morphTargets = material.morphTargets && geometry.morphAttributes.position;\n\t\tvar morphNormals = material.morphNormals && geometry.morphAttributes.normal;\n\n\t\t// Remove current morphAttributes\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tif ( influence[ 1 ] !== 0 ) {\n\n\t\t\t\tif ( morphTargets ) geometry.removeAttribute( 'morphTarget' + i );\n\t\t\t\tif ( morphNormals ) geometry.removeAttribute( 'morphNormal' + i );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Collect influences\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tinfluence[ 0 ] = i;\n\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t}\n\n\t\tinfluences.sort( absNumericalSort );\n\n\t\t// Add morphAttributes\n\n\t\tfor ( var i = 0; i < 8; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tif ( influence ) {\n\n\t\t\t\tvar index = influence[ 0 ];\n\t\t\t\tvar value = influence[ 1 ];\n\n\t\t\t\tif ( value ) {\n\n\t\t\t\t\tif ( morphTargets ) geometry.addAttribute( 'morphTarget' + i, morphTargets[ index ] );\n\t\t\t\t\tif ( morphNormals ) geometry.addAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t}\n\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\n\nexport { WebGLMorphtargets };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLObjects( geometries, info ) {\n\n\tvar updateList = {};\n\n\tfunction update( object ) {\n\n\t\tvar frame = info.render.frame;\n\n\t\tvar geometry = object.geometry;\n\t\tvar buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateList[ buffergeometry.id ] !== frame ) {\n\n\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\tbuffergeometry.updateFromObject( object );\n\n\t\t\t}\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateList[ buffergeometry.id ] = frame;\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateList = {};\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\n\nexport { WebGLObjects };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Texture } from './Texture.js';\nimport { CubeReflectionMapping } from '../constants.js';\n\nfunction CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\timages = images !== undefined ? images : [];\n\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\n\tTexture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.flipY = false;\n\n}\n\nCubeTexture.prototype = Object.create( Texture.prototype );\nCubeTexture.prototype.constructor = CubeTexture;\n\nCubeTexture.prototype.isCubeTexture = true;\n\nObject.defineProperty( CubeTexture.prototype, 'images', {\n\n\tget: function () {\n\n\t\treturn this.image;\n\n\t},\n\n\tset: function ( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n} );\n\n\nexport { CubeTexture };\n","/**\n * @author tschw\n *\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program, renderer )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [renderer] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'renderer' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (renderer factorizations):\n *\n * .upload( gl, seq, values, renderer )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (renderer factorizations):\n *\n * .setValue( gl, name, value )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .set( gl, obj, prop )\n *\n * \t\tsets uniform from object and property with same name than uniform\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nimport { CubeTexture } from '../../textures/CubeTexture.js';\nimport { Texture } from '../../textures/Texture.js';\n\nvar emptyTexture = new Texture();\nvar emptyCubeTexture = new CubeTexture();\n\n// --- Base for inner nodes (including the root) ---\n\nfunction UniformContainer() {\n\n\tthis.seq = [];\n\tthis.map = {};\n\n}\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nvar arrayCacheF32 = [];\nvar arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nvar mat4array = new Float32Array( 16 );\nvar mat3array = new Float32Array( 9 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tvar firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tvar n = nBlocks * blockSize,\n\t\tr = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( var i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( renderer, n ) {\n\n\tvar r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( var i = 0; i !== n; ++ i )\n\t\tr[ i ] = renderer.allocTextureUnit();\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValue1f( gl, v ) {\n\n\tgl.uniform1f( this.addr, v );\n\n}\n\nfunction setValue1i( gl, v ) {\n\n\tgl.uniform1i( this.addr, v );\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValue2fv( gl, v ) {\n\n\tif ( v.x === undefined ) {\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t} else {\n\n\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t}\n\n}\n\nfunction setValue3fv( gl, v ) {\n\n\tif ( v.x !== undefined ) {\n\n\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t} else {\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t}\n\n}\n\nfunction setValue4fv( gl, v ) {\n\n\tif ( v.x === undefined ) {\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t} else {\n\n\t\t gl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t}\n\n}\n\n// Single matrix (from flat array or MatrixN)\n\nfunction setValue2fm( gl, v ) {\n\n\tgl.uniformMatrix2fv( this.addr, false, v.elements || v );\n\n}\n\nfunction setValue3fm( gl, v ) {\n\n\tif ( v.elements === undefined ) {\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t} else {\n\n\t\tmat3array.set( v.elements );\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t}\n\n}\n\nfunction setValue4fm( gl, v ) {\n\n\tif ( v.elements === undefined ) {\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t} else {\n\n\t\tmat4array.set( v.elements );\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t}\n\n}\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, renderer ) {\n\n\tvar unit = renderer.allocTextureUnit();\n\tgl.uniform1i( this.addr, unit );\n\trenderer.setTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT6( gl, v, renderer ) {\n\n\tvar unit = renderer.allocTextureUnit();\n\tgl.uniform1i( this.addr, unit );\n\trenderer.setTextureCube( v || emptyCubeTexture, unit );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\nfunction setValue2iv( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValue3iv( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValue4iv( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValue1f; // FLOAT\n\t\tcase 0x8b50: return setValue2fv; // _VEC2\n\t\tcase 0x8b51: return setValue3fv; // _VEC3\n\t\tcase 0x8b52: return setValue4fv; // _VEC4\n\n\t\tcase 0x8b5a: return setValue2fm; // _MAT2\n\t\tcase 0x8b5b: return setValue3fm; // _MAT3\n\t\tcase 0x8b5c: return setValue4fm; // _MAT4\n\n\t\tcase 0x8b5e: case 0x8d66: return setValueT1; // SAMPLER_2D, SAMPLER_EXTERNAL_OES\n\t\tcase 0x8b60: return setValueT6; // SAMPLER_CUBE\n\n\t\tcase 0x1404: case 0x8b56: return setValue1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n\n\t}\n\n}\n\n// Array of scalars\n\nfunction setValue1fv( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\nfunction setValue1iv( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\n// Array of vectors (flat or from THREE classes)\n\nfunction setValueV2a( gl, v ) {\n\n\tgl.uniform2fv( this.addr, flatten( v, this.size, 2 ) );\n\n}\n\nfunction setValueV3a( gl, v ) {\n\n\tgl.uniform3fv( this.addr, flatten( v, this.size, 3 ) );\n\n}\n\nfunction setValueV4a( gl, v ) {\n\n\tgl.uniform4fv( this.addr, flatten( v, this.size, 4 ) );\n\n}\n\n// Array of matrices (flat or from THREE clases)\n\nfunction setValueM2a( gl, v ) {\n\n\tgl.uniformMatrix2fv( this.addr, false, flatten( v, this.size, 4 ) );\n\n}\n\nfunction setValueM3a( gl, v ) {\n\n\tgl.uniformMatrix3fv( this.addr, false, flatten( v, this.size, 9 ) );\n\n}\n\nfunction setValueM4a( gl, v ) {\n\n\tgl.uniformMatrix4fv( this.addr, false, flatten( v, this.size, 16 ) );\n\n}\n\n// Array of textures (2D / Cube)\n\nfunction setValueT1a( gl, v, renderer ) {\n\n\tvar n = v.length,\n\t\tunits = allocTexUnits( renderer, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\trenderer.setTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6a( gl, v, renderer ) {\n\n\tvar n = v.length,\n\t\tunits = allocTexUnits( renderer, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\trenderer.setTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValue1fv; // FLOAT\n\t\tcase 0x8b50: return setValueV2a; // _VEC2\n\t\tcase 0x8b51: return setValueV3a; // _VEC3\n\t\tcase 0x8b52: return setValueV4a; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2a; // _MAT2\n\t\tcase 0x8b5b: return setValueM3a; // _MAT3\n\t\tcase 0x8b5c: return setValueM4a; // _MAT4\n\n\t\tcase 0x8b5e: return setValueT1a; // SAMPLER_2D\n\t\tcase 0x8b60: return setValueT6a; // SAMPLER_CUBE\n\n\t\tcase 0x1404: case 0x8b56: return setValue1iv; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nfunction SingleUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction PureArrayUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.size = activeInfo.size;\n\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction StructuredUniform( id ) {\n\n\tthis.id = id;\n\n\tUniformContainer.call( this ); // mix-in\n\n}\n\nStructuredUniform.prototype.setValue = function ( gl, value ) {\n\n\t// Note: Don't need an extra 'renderer' parameter, since samplers\n\t// are not allowed in structured uniforms.\n\n\tvar seq = this.seq;\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tu.setValue( gl, value[ u.id ] );\n\n\t}\n\n};\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nvar RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tvar path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\tfor ( ; ; ) {\n\n\t\tvar match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex,\n\n\t\t\tid = match[ 1 ],\n\t\t\tidIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tvar map = container.map, next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nfunction WebGLUniforms( gl, program, renderer ) {\n\n\tUniformContainer.call( this );\n\n\tthis.renderer = renderer;\n\n\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\n\n\tfor ( var i = 0; i < n; ++ i ) {\n\n\t\tvar info = gl.getActiveUniform( program, i ),\n\t\t\taddr = gl.getUniformLocation( program, info.name );\n\n\t\tparseUniform( info, addr, this );\n\n\t}\n\n}\n\nWebGLUniforms.prototype.setValue = function ( gl, name, value ) {\n\n\tvar u = this.map[ name ];\n\n\tif ( u !== undefined ) u.setValue( gl, value, this.renderer );\n\n};\n\nWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\n\n\tvar v = object[ name ];\n\n\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n};\n\n\n// Static interface\n\nWebGLUniforms.upload = function ( gl, seq, values, renderer ) {\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ],\n\t\t\tv = values[ u.id ];\n\n\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\tu.setValue( gl, v.value, renderer );\n\n\t\t}\n\n\t}\n\n};\n\nWebGLUniforms.seqWithValue = function ( seq, values ) {\n\n\tvar r = [];\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tif ( u.id in values ) r.push( u );\n\n\t}\n\n\treturn r;\n\n};\n\nexport { WebGLUniforms };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction addLineNumbers( string ) {\n\n\tvar lines = string.split( '\\n' );\n\n\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t}\n\n\treturn lines.join( '\\n' );\n\n}\n\nfunction WebGLShader( gl, type, string ) {\n\n\tvar shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\n\n\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\n\n\t}\n\n\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\n\n\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\n\n\t}\n\n\t// --enable-privileged-webgl-extension\n\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\treturn shader;\n\n}\n\n\nexport { WebGLShader };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { WebGLUniforms } from './WebGLUniforms.js';\nimport { WebGLShader } from './WebGLShader.js';\nimport { ShaderChunk } from '../shaders/ShaderChunk.js';\nimport { NoToneMapping, AddOperation, MixOperation, MultiplyOperation, EquirectangularRefractionMapping, CubeRefractionMapping, SphericalReflectionMapping, EquirectangularReflectionMapping, CubeUVRefractionMapping, CubeUVReflectionMapping, CubeReflectionMapping, PCFSoftShadowMap, PCFShadowMap, CineonToneMapping, Uncharted2ToneMapping, ReinhardToneMapping, LinearToneMapping, GammaEncoding, RGBDEncoding, RGBM16Encoding, RGBM7Encoding, RGBEEncoding, sRGBEncoding, LinearEncoding } from '../../constants.js';\n\nvar programIdCount = 0;\n\nfunction getEncodingComponents( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear', '( value )' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB', '( value )' ];\n\t\tcase RGBEEncoding:\n\t\t\treturn [ 'RGBE', '( value )' ];\n\t\tcase RGBM7Encoding:\n\t\t\treturn [ 'RGBM', '( value, 7.0 )' ];\n\t\tcase RGBM16Encoding:\n\t\t\treturn [ 'RGBM', '( value, 16.0 )' ];\n\t\tcase RGBDEncoding:\n\t\t\treturn [ 'RGBD', '( value, 256.0 )' ];\n\t\tcase GammaEncoding:\n\t\t\treturn [ 'Gamma', '( value, float( GAMMA_FACTOR ) )' ];\n\t\tdefault:\n\t\t\tthrow new Error( 'unsupported encoding: ' + encoding );\n\n\t}\n\n}\n\nfunction getTexelDecodingFunction( functionName, encoding ) {\n\n\tvar components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return ' + components[ 0 ] + 'ToLinear' + components[ 1 ] + '; }';\n\n}\n\nfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\tvar components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tvar toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase Uncharted2ToneMapping:\n\t\t\ttoneMappingName = 'Uncharted2';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'unsupported toneMapping: ' + toneMapping );\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions( extensions, parameters, rendererExtensions ) {\n\n\textensions = extensions || {};\n\n\tvar chunks = [\n\t\t( extensions.derivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.normalMap || parameters.flatShading ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( extensions.fragDepth || parameters.logarithmicDepthBuffer ) && rendererExtensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( extensions.drawBuffers ) && rendererExtensions.get( 'WEBGL_draw_buffers' ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( extensions.shaderTextureLOD || parameters.envMap ) && rendererExtensions.get( 'EXT_shader_texture_lod' ) ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tvar chunks = [];\n\n\tfor ( var name in defines ) {\n\n\t\tvar value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tvar attributes = {};\n\n\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\n\n\tfor ( var i = 0; i < n; i ++ ) {\n\n\t\tvar info = gl.getActiveAttrib( program, i );\n\t\tvar name = info.name;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights );\n\n}\n\nfunction replaceClippingPlaneNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\n\n}\n\nfunction parseIncludes( string ) {\n\n\tvar pattern = /^[ \\t]*#include +<([\\w\\d.]+)>/gm;\n\n\tfunction replace( match, include ) {\n\n\t\tvar replace = ShaderChunk[ include ];\n\n\t\tif ( replace === undefined ) {\n\n\t\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t\t}\n\n\t\treturn parseIncludes( replace );\n\n\t}\n\n\treturn string.replace( pattern, replace );\n\n}\n\nfunction unrollLoops( string ) {\n\n\tvar pattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\n\n\tfunction replace( match, start, end, snippet ) {\n\n\t\tvar unroll = '';\n\n\t\tfor ( var i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\t\tunroll += snippet.replace( /\\[ i \\]/g, '[ ' + i + ' ]' );\n\n\t\t}\n\n\t\treturn unroll;\n\n\t}\n\n\treturn string.replace( pattern, replace );\n\n}\n\nfunction WebGLProgram( renderer, extensions, code, material, shader, parameters ) {\n\n\tvar gl = renderer.context;\n\n\tvar defines = material.defines;\n\n\tvar vertexShader = shader.vertexShader;\n\tvar fragmentShader = shader.fragmentShader;\n\n\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t}\n\n\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t\tcase EquirectangularReflectionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\n\t\t\t\tbreak;\n\n\t\t\tcase SphericalReflectionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\tcase CubeRefractionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tswitch ( material.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\n\n\t// console.log( 'building new program ' );\n\n\t//\n\n\tvar customExtensions = generateExtensions( material.extensions, parameters, extensions );\n\n\tvar customDefines = generateDefines( defines );\n\n\tvar shaderTextureLODExtEnabled = material.extensions && material.extensions.shaderTextureLOD ? true : false;\n\t//\n\n\tvar program = gl.createProgram();\n\n\tvar prefixVertex, prefixFragment;\n\n\tif ( material.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t'#define SHADER_NAME ' + shader.name,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\tparameters.logarithmicDepthBuffer && extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t'#define SHADER_NAME ' + shader.name,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\tparameters.logarithmicDepthBuffer && extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t(shaderTextureLODExtEnabled && extensions.get( 'EXT_shader_texture_lod' )) || (parameters.envMap && extensions.get( 'EXT_shader_texture_lod' )) ? '#define TEXTURE_LOD_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\n\t\t\t( parameters.outputEncoding || parameters.mapEncoding || parameters.envMapEncoding || parameters.emissiveMapEncoding ) ? ShaderChunk[ 'encodings_pars_fragment' ] : '', // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tparameters.mapEncoding ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\n\t\t\tparameters.envMapEncoding ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\n\t\t\tparameters.emissiveMapEncoding ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\n\t\t\tparameters.outputEncoding ? getTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ) : '',\n\n\t\t\tparameters.depthPacking ? '#define DEPTH_PACKING ' + material.depthPacking : '',\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = parseIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\n\n\tfragmentShader = parseIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\n\n\tvertexShader = unrollLoops( vertexShader );\n\tfragmentShader = unrollLoops( fragmentShader );\n\n\tvar vertexGlsl = prefixVertex + vertexShader;\n\tvar fragmentGlsl = prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tvar glVertexShader = WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\n\tvar glFragmentShader = WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( material.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, material.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\tvar programLog = gl.getProgramInfoLog( program ).trim();\n\tvar vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\n\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\n\n\tvar runnable = true;\n\tvar haveDiagnostics = true;\n\n\t// console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\n\t// console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\n\n\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\n\n\t\trunnable = false;\n\n\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog );\n\n\t} else if ( programLog !== '' ) {\n\n\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\n\n\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\thaveDiagnostics = false;\n\n\t}\n\n\tif ( haveDiagnostics ) {\n\n\t\tthis.diagnostics = {\n\n\t\t\trunnable: runnable,\n\t\t\tmaterial: material,\n\n\t\t\tprogramLog: programLog,\n\n\t\t\tvertexShader: {\n\n\t\t\t\tlog: vertexLog,\n\t\t\t\tprefix: prefixVertex\n\n\t\t\t},\n\n\t\t\tfragmentShader: {\n\n\t\t\t\tlog: fragmentLog,\n\t\t\t\tprefix: prefixFragment\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t// clean up\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tvar cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program, renderer );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tvar cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t// DEPRECATED\n\n\tObject.defineProperties( this, {\n\n\t\tuniforms: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .uniforms is now .getUniforms().' );\n\t\t\t\treturn this.getUniforms();\n\n\t\t\t}\n\t\t},\n\n\t\tattributes: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .attributes is now .getAttributes().' );\n\t\t\t\treturn this.getAttributes();\n\n\t\t\t}\n\t\t}\n\n\t} );\n\n\n\t//\n\n\tthis.name = shader.name;\n\tthis.id = programIdCount ++;\n\tthis.code = code;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\nexport { WebGLProgram };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { BackSide, DoubleSide, CubeUVRefractionMapping, CubeUVReflectionMapping, GammaEncoding, LinearEncoding } from '../../constants.js';\nimport { WebGLProgram } from './WebGLProgram.js';\n\nfunction WebGLPrograms( renderer, extensions, capabilities ) {\n\n\tvar programs = [];\n\n\tvar shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'phong',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow'\n\t};\n\n\tvar parameterNames = [\n\t\t\"precision\", \"supportsVertexTextures\", \"map\", \"mapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\",\n\t\t\"lightMap\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"displacementMap\", \"specularMap\",\n\t\t\"roughnessMap\", \"metalnessMap\", \"gradientMap\",\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\"\n\t];\n\n\n\tfunction allocateBones( object ) {\n\n\t\tvar skeleton = object.skeleton;\n\t\tvar bones = skeleton.bones;\n\n\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tvar nVertexUniforms = capabilities.maxVertexUniforms;\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tvar maxBones = Math.min( nVertexMatrices, bones.length );\n\n\t\t\tif ( maxBones < bones.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction getTextureEncodingFromMap( map, gammaOverrideLinear ) {\n\n\t\tvar encoding;\n\n\t\tif ( ! map ) {\n\n\t\t\tencoding = LinearEncoding;\n\n\t\t} else if ( map.isTexture ) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if ( map.isWebGLRenderTarget ) {\n\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\tencoding = map.texture.encoding;\n\n\t\t}\n\n\t\t// add backwards compatibility for WebGLRenderer.gammaInput/gammaOutput parameter, should probably be removed at some point.\n\t\tif ( encoding === LinearEncoding && gammaOverrideLinear ) {\n\n\t\t\tencoding = GammaEncoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n\tthis.getParameters = function ( material, lights, shadows, fog, nClipPlanes, nClipIntersection, object ) {\n\n\t\tvar shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tvar maxBones = object.isSkinnedMesh ? allocateBones( object ) : 0;\n\t\tvar precision = capabilities.precision;\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar currentRenderTarget = renderer.getRenderTarget();\n\n\t\tvar parameters = {\n\n\t\t\tshaderID: shaderID,\n\n\t\t\tprecision: precision,\n\t\t\tsupportsVertexTextures: capabilities.vertexTextures,\n\t\t\toutputEncoding: getTextureEncodingFromMap( ( ! currentRenderTarget ) ? null : currentRenderTarget.texture, renderer.gammaOutput ),\n\t\t\tmap: !! material.map,\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map, renderer.gammaInput ),\n\t\t\tenvMap: !! material.envMap,\n\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( material.envMap, renderer.gammaInput ),\n\t\t\tenvMapCubeUV: ( !! material.envMap ) && ( ( material.envMap.mapping === CubeUVReflectionMapping ) || ( material.envMap.mapping === CubeUVRefractionMapping ) ),\n\t\t\tlightMap: !! material.lightMap,\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap, renderer.gammaInput ),\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexColors: material.vertexColors,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: material.flatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning && maxBones > 0,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: capabilities.floatVertexTextures,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumClippingPlanes: nClipPlanes,\n\t\t\tnumClipIntersection: nClipIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: renderer.toneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false,\n\t\t};\n\n\t\treturn parameters;\n\n\t};\n\n\tthis.getProgramCode = function ( material, parameters ) {\n\n\t\tvar array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( material.fragmentShader );\n\t\t\tarray.push( material.vertexShader );\n\n\t\t}\n\n\t\tif ( material.defines !== undefined ) {\n\n\t\t\tfor ( var name in material.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( material.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\n\n\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\n\n\t\t}\n\n\t\tarray.push( material.onBeforeCompile.toString() );\n\n\t\tarray.push( renderer.gammaOutput );\n\n\t\treturn array.join();\n\n\t};\n\n\tthis.acquireProgram = function ( material, shader, parameters, code ) {\n\n\t\tvar program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tvar programInfo = programs[ p ];\n\n\t\t\tif ( programInfo.code === code ) {\n\n\t\t\t\tprogram = programInfo;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, extensions, code, material, shader, parameters );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t};\n\n\tthis.releaseProgram = function ( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tvar i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t};\n\n\t// Exposed for resource monitoring & error feedback via renderer.info:\n\tthis.programs = programs;\n\n}\n\n\nexport { WebGLPrograms };\n","/**\n * @author fordacious / fordacious.github.io\n */\n\nfunction WebGLProperties() {\n\n\tvar properties = new WeakMap();\n\n\tfunction get( object ) {\n\n\t\tvar map = properties.get( object );\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties.set( object, map );\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tproperties.delete( object );\n\n\t}\n\n\tfunction update( object, key, value ) {\n\n\t\tproperties.get( object )[ key ] = value;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tproperties = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLProperties };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction painterSortStable( a, b ) {\n\n\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.program && b.program && a.program !== b.program ) {\n\n\t\treturn a.program.id - b.program.id;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction WebGLRenderList() {\n\n\tvar renderItems = [];\n\tvar renderItemsIndex = 0;\n\n\tvar opaque = [];\n\tvar transparent = [];\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction push( object, geometry, material, z, group ) {\n\n\t\tvar renderItem = renderItems[ renderItemsIndex ];\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tprogram: material.program,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.program = material.program;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\t( material.transparent === true ? transparent : opaque ).push( renderItem );\n\n\t\trenderItemsIndex ++;\n\n\t}\n\n\tfunction sort() {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( painterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( reversePainterSortStable );\n\n\t}\n\n\treturn {\n\t\topaque: opaque,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists() {\n\n\tvar lists = {};\n\n\tfunction get( scene, camera ) {\n\n\t\tvar hash = scene.id + ',' + camera.id;\n\t\tvar list = lists[ hash ];\n\n\t\tif ( list === undefined ) {\n\n\t\t\t// console.log( 'THREE.WebGLRenderLists:', hash );\n\n\t\t\tlist = new WebGLRenderList();\n\t\t\tlists[ hash ] = list;\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = {};\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderLists };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Color } from '../../math/Color.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Vector3 } from '../../math/Vector3.js';\n\nfunction UniformsCache() {\n\n\tvar lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tvar uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\n\t\t\t\t\t\tshadowCameraNear: 1,\n\t\t\t\t\t\tshadowCameraFar: 1000\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\nvar count = 0;\n\nfunction WebGLLights() {\n\n\tvar cache = new UniformsCache();\n\n\tvar state = {\n\n\t\tid: count ++,\n\n\t\thash: '',\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tdirectional: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tlightDirection: [],\n\t\tspot: [],\n\t\tspotShadowMap: [],\n\t\tspotShadowMatrix: [],\n\t\tspotPosition: [],\n\t\tspotNormalOffset: [],\n\t\tdirectionalNormalOffset: [],\n\t\trectArea: [],\n\t\trectAreaTexture: [],\n\t\trectShadowMap: [],\n\t\tpoint: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: []\n\n\t};\n\n\tvar vector3 = new Vector3();\n\tvar matrix4 = new Matrix4();\n\tvar matrix42 = new Matrix4();\n\n\tfunction setup( lights, shadows, camera ) {\n\n\t\tvar r = 0, g = 0, b = 0;\n\n\t\tvar directionalLength = 0;\n\t\tvar pointLength = 0;\n\t\tvar spotLength = 0;\n\t\tvar rectAreaLength = 0;\n\t\tvar hemiLength = 0;\n\n\t\tvar viewMatrix = camera.matrixWorldInverse;\n\n\t\tfor ( var i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tvar light = lights[ i ];\n\n\t\t\tvar color = light.color;\n\t\t\tvar intensity = light.intensity;\n\t\t\tvar distance = light.distance;\n\n\t\t\tvar shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity;\n\t\t\t\tg += color.g * intensity;\n\t\t\t\tb += color.b * intensity;\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t}\n\n\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\t\t\t\tstate.lightDirection[ directionalLength ] = uniforms.direction;\n\t\t\t\tstate.directionalNormalOffset[ directionalLength ] = light.castShadow ? light.shadow.normalOffset : 0;\n\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t}\n\n\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\n\t\t\t\tstate.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\n\t\t\t\tstate.spotPosition[ spotLength ] = uniforms.position;\n\t\t\t\tstate.spotNormalOffset[ spotLength ] = light.castShadow ? light.shadow.normalOffset : 0;\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\t// (a) intensity is the total visible light emitted\n\t\t\t\t//uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\n\n\t\t\t\t// (b) intensity is the brightness of the light\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\tmatrix42.identity();\n\t\t\t\tmatrix4.copy( light.matrixWorld );\n\t\t\t\tmatrix4.premultiply( viewMatrix );\n\t\t\t\tmatrix42.extractRotation( matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\n\n\t\t\t\t// TODO (abelnation): RectAreaLight distance?\n\t\t\t\t// uniforms.distance = distance;\n\t\t\t\tuniforms.shadow = light.castShadow;\n\t\t\t\tif ( light.castShadow ) {\n\t\t\t\t\tstate.rectShadowMap[ rectAreaLength ] = shadowMap;\n\t\t\t\t}\n\t\t\t\tuniforms.useAreaTexture = false;\n\t\t\t\tif(light.areaTexture) {\n\t\t\t\t\tuniforms.useAreaTexture = true;\n\t\t\t\t}\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\t\t\t\tstate.rectAreaTexture[ rectAreaLength ] = light.areaTexture;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\t\t\t\t\tuniforms.shadowCameraNear = shadow.camera.near;\n\t\t\t\t\tuniforms.shadowCameraFar = shadow.camera.far;\n\n\t\t\t\t}\n\n\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\t\t\t\tstate.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\t\t\t\tuniforms.direction.normalize();\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\n\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tstate.directional.length = directionalLength;\n\t\tstate.spot.length = spotLength;\n\t\tstate.rectArea.length = rectAreaLength;\n\t\tstate.point.length = pointLength;\n\t\tstate.hemi.length = hemiLength;\n\n\t\tstate.hash = state.id + ',' + directionalLength + ',' + pointLength + ',' + spotLength + ',' + rectAreaLength + ',' + hemiLength + ',' + shadows.length;\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tstate: state\n\t};\n\n}\n\n\nexport { WebGLLights };\n","import { Sphere } from '../math/Sphere.js';\nimport { Ray } from '../math/Ray.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { LineSegments } from './LineSegments.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Line( geometry, material, mode ) {\n\n\tif ( mode === 1 ) {\n\n\t\tconsole.warn( 'THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.' );\n\t\treturn new LineSegments( geometry, material );\n\n\t}\n\n\tObject3D.call( this );\n\n\tthis.type = 'Line';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new LineBasicMaterial( { color: Math.random() * 0xffffff } );\n\n}\n\nLine.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Line,\n\n\tisLine: true,\n\n\tcomputeLineDistances: ( function () {\n\n\t\tvar start = new Vector3();\n\t\tvar end = new Vector3();\n\n\t\treturn function computeLineDistances() {\n\n\t\t\tvar geometry = this.geometry;\n\n\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\t// we assume non-indexed geometry\n\n\t\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\t\tvar positionAttribute = geometry.attributes.position;\n\t\t\t\t\tvar lineDistances = [ 0 ];\n\n\t\t\t\t\tfor ( var i = 1, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t\tstart.fromBufferAttribute( positionAttribute, i - 1 );\n\t\t\t\t\t\tend.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\t\t\tlineDistances[ i ] += start.distanceTo( end );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgeometry.addAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t\t}\n\n\t\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\tvar lineDistances = geometry.lineDistances;\n\n\t\t\t\tlineDistances[ 0 ] = 0;\n\n\t\t\t\tfor ( var i = 1, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i ] += vertices[ i - 1 ].distanceTo( vertices[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}() ),\n\n\traycast: ( function () {\n\n\t\tvar inverseMatrix = new Matrix4();\n\t\tvar ray = new Ray();\n\t\tvar sphere = new Sphere();\n\n\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\tvar precision = raycaster.linePrecision;\n\t\t\tvar precisionSq = precision * precision;\n\n\t\t\tvar geometry = this.geometry;\n\t\t\tvar matrixWorld = this.matrixWorld;\n\n\t\t\t// Checking boundingSphere distance to ray\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\tsphere.applyMatrix4( matrixWorld );\n\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\n\n\t\t\t//\n\n\t\t\tinverseMatrix.getInverse( matrixWorld );\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\t\tvar vStart = new Vector3();\n\t\t\tvar vEnd = new Vector3();\n\t\t\tvar interSegment = new Vector3();\n\t\t\tvar interRay = new Vector3();\n\t\t\tvar step = ( this && this.isLineSegments ) ? 2 : 1;\n\n\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\tvar index = geometry.index;\n\t\t\t\tvar attributes = geometry.attributes;\n\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\tif ( index !== null ) {\n\n\t\t\t\t\tvar indices = index.array;\n\n\t\t\t\t\tfor ( var i = 0, l = indices.length - 1; i < l; i += step ) {\n\n\t\t\t\t\t\tvar a = indices[ i ];\n\t\t\t\t\t\tvar b = indices[ i + 1 ];\n\n\t\t\t\t\t\tvStart.fromArray( positions, a * 3 );\n\t\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\n\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\tface: null,\n\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\n\n\t\t\t\t\t\tvStart.fromArray( positions, 3 * i );\n\t\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\n\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\tface: null,\n\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\tvar nbVertices = vertices.length;\n\n\t\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\n\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() ),\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\n\nexport { Line };\n","/**\n * @author WestLangley / http://github.com/WestLangley\n * @author zz85 / http://github.com/zz85\n * @author bhouston / http://clara.io\n *\n * Creates an arrow for visualizing directions\n *\n * Parameters:\n *  dir - Vector3\n *  origin - Vector3\n *  length - Number\n *  color - color in hex value\n *  headLength - Number\n *  headWidth - Number\n */\n\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { CylinderBufferGeometry } from '../geometries/CylinderGeometry.js';\nimport { MeshBasicMaterial } from '../materials/MeshBasicMaterial.js';\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial.js';\nimport { Mesh } from '../objects/Mesh.js';\nimport { Line } from '../objects/Line.js';\nimport { Vector3 } from '../math/Vector3.js';\n\nvar lineGeometry, coneGeometry;\n\nfunction ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\n\n\t// dir is assumed to be normalized\n\n\tObject3D.call( this );\n\n\tif ( color === undefined ) color = 0xffff00;\n\tif ( length === undefined ) length = 1;\n\tif ( headLength === undefined ) headLength = 0.2 * length;\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\tif ( lineGeometry === undefined ) {\n\n\t\tlineGeometry = new BufferGeometry();\n\t\tlineGeometry.addAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\n\n\t\tconeGeometry = new CylinderBufferGeometry( 0, 0.5, 1, 5, 1 );\n\t\tconeGeometry.translate( 0, - 0.5, 0 );\n\n\t}\n\n\tthis.position.copy( origin );\n\n\tthis.line = new Line( lineGeometry, new LineBasicMaterial( { color: color } ) );\n\tthis.line.matrixAutoUpdate = false;\n\tthis.add( this.line );\n\n\tthis.cone = new Mesh( coneGeometry, new MeshBasicMaterial( { color: color } ) );\n\tthis.cone.matrixAutoUpdate = false;\n\tthis.add( this.cone );\n\n\tthis.setDirection( dir );\n\tthis.setLength( length, headLength, headWidth );\n\n}\n\nArrowHelper.prototype = Object.create( Object3D.prototype );\nArrowHelper.prototype.constructor = ArrowHelper;\n\nArrowHelper.prototype.setDirection = ( function () {\n\n\tvar axis = new Vector3();\n\tvar radians;\n\n\treturn function setDirection( dir ) {\n\n\t\t// dir is assumed to be normalized\n\n\t\tif ( dir.y > 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\n\n\t\t} else if ( dir.y < - 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\n\n\t\t} else {\n\n\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\n\n\t\t\tradians = Math.acos( dir.y );\n\n\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\n\n\t\t}\n\n\t};\n\n}() );\n\nArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\n\n\tif ( headLength === undefined ) headLength = 0.2 * length;\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\tthis.line.scale.set( 1, Math.max( 0, length - headLength ), 1 );\n\tthis.line.updateMatrix();\n\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\n\tthis.cone.position.y = length;\n\tthis.cone.updateMatrix();\n\n};\n\nArrowHelper.prototype.setColor = function ( color ) {\n\n\tthis.line.material.color.copy( color );\n\tthis.cone.material.color.copy( color );\n\n};\n\n\nexport { ArrowHelper };\n","/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { WebGLLights } from './WebGLLights.js';\n\nfunction WebGLRenderState() {\n\n\tvar lights = new WebGLLights();\n\n\tvar lightsArray = [];\n\tvar shadowsArray = [];\n\tvar spritesArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\t\tspritesArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction pushSprite( shadowLight ) {\n\n\t\tspritesArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights( camera ) {\n\n\t\tlights.setup( lightsArray, shadowsArray, camera );\n\n\t}\n\n\tvar state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\t\tspritesArray: spritesArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow,\n\t\tpushSprite: pushSprite\n\t};\n\n}\n\nfunction WebGLRenderStates() {\n\n\tvar renderStates = {};\n\n\tfunction get( scene, camera ) {\n\n\t\tvar hash = scene.id + ',' + camera.id;\n\n\t\tvar renderState = renderStates[ hash ];\n\n\t\tif ( renderState === undefined ) {\n\n\t\t\trenderState = new WebGLRenderState();\n\t\t\trenderStates[ hash ] = renderState;\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = {};\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderStates };\n","import { EventDispatcher } from '../core/EventDispatcher.js';\nimport { Texture } from '../textures/Texture.js';\nimport { LinearFilter } from '../constants.js';\nimport { Vector4 } from '../math/Vector4.js';\n\n/**\n * @author szimek / https://github.com/szimek/\n * @author alteredq / http://alteredqualia.com/\n * @author Marius Kintel / https://github.com/kintel\n */\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nfunction WebGLRenderTarget( width, height, options ) {\n\n\tthis.width = width;\n\tthis.height = height;\n\n\tthis.scissor = new Vector4( 0, 0, width, height );\n\tthis.scissorTest = false;\n\n\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\toptions = options || {};\n\n\tif ( options.minFilter === undefined ) options.minFilter = LinearFilter;\n\n\tthis.texture = new Texture( undefined, undefined, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n}\n\nWebGLRenderTarget.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: WebGLRenderTarget,\n\n\tisWebGLRenderTarget: true,\n\n\tsetSize: function ( width, height ) {\n\n\t\tif ( this.width !== width || this.height !== height ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\t\tthis.depthTexture = source.depthTexture;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { WebGLRenderTarget };\n","import { Material } from './Material.js';\nimport { BasicDepthPacking } from '../constants.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / https://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nfunction MeshDepthMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDepthMaterial';\n\n\tthis.depthPacking = BasicDepthPacking;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDepthMaterial.prototype = Object.create( Material.prototype );\nMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\n\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n\nMeshDepthMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.depthPacking = source.depthPacking;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\treturn this;\n\n};\n\n\nexport { MeshDepthMaterial };\n","import { Material } from './Material.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  referencePosition: <float>,\n *  nearDistance: <float>,\n *  farDistance: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>\n *\n * }\n */\n\nfunction MeshDistanceMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDistanceMaterial';\n\n\tthis.referencePosition = new Vector3();\n\tthis.nearDistance = 1;\n\tthis.farDistance = 1000;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.fog = false;\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDistanceMaterial.prototype = Object.create( Material.prototype );\nMeshDistanceMaterial.prototype.constructor = MeshDistanceMaterial;\n\nMeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\n\nMeshDistanceMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.referencePosition.copy( source.referencePosition );\n\tthis.nearDistance = source.nearDistance;\n\tthis.farDistance = source.farDistance;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\treturn this;\n\n};\n\n\nexport { MeshDistanceMaterial };\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { FrontSide, BackSide, DoubleSide, RGBAFormat, NearestFilter, PCFShadowMap, RGBADepthPacking } from '../../constants.js';\nimport { WebGLRenderTarget } from '../WebGLRenderTarget.js';\nimport { MeshDepthMaterial } from '../../materials/MeshDepthMaterial.js';\nimport { MeshDistanceMaterial } from '../../materials/MeshDistanceMaterial.js';\nimport { Vector4 } from '../../math/Vector4.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\nimport { Frustum } from '../../math/Frustum.js';\n\nfunction WebGLShadowMap( _renderer, _objects, maxTextureSize ) {\n\n\tvar _frustum = new Frustum(),\n\t\t_projScreenMatrix = new Matrix4(),\n\n\t\t_shadowMapSize = new Vector2(),\n\t\t_maxShadowMapSize = new Vector2( maxTextureSize, maxTextureSize ),\n\n\t\t_lookTarget = new Vector3(),\n\t\t_lightPositionWorld = new Vector3(),\n\n\t\t_MorphingFlag = 1,\n\t\t_SkinningFlag = 2,\n\n\t\t_NumberOfMaterialVariants = ( _MorphingFlag | _SkinningFlag ) + 1,\n\n\t\t_depthMaterials = new Array( _NumberOfMaterialVariants ),\n\t\t_distanceMaterials = new Array( _NumberOfMaterialVariants ),\n\n\t\t_materialCache = {};\n\n\tvar shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\n\n\tvar cubeDirections = [\n\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t];\n\n\tvar cubeUps = [\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t];\n\n\tvar cube2DViewPorts = [\n\t\tnew Vector4(), new Vector4(), new Vector4(),\n\t\tnew Vector4(), new Vector4(), new Vector4()\n\t];\n\n\t// init\n\n\tfor ( var i = 0; i !== _NumberOfMaterialVariants; ++ i ) {\n\n\t\tvar useMorphing = ( i & _MorphingFlag ) !== 0;\n\t\tvar useSkinning = ( i & _SkinningFlag ) !== 0;\n\n\t\tvar depthMaterial = new MeshDepthMaterial( {\n\n\t\t\tdepthPacking: RGBADepthPacking,\n\n\t\t\tmorphTargets: useMorphing,\n\t\t\tskinning: useSkinning\n\n\t\t} );\n\n\t\t_depthMaterials[ i ] = depthMaterial;\n\n\t\t//\n\n\t\tvar distanceMaterial = new MeshDistanceMaterial( {\n\n\t\t\tmorphTargets: useMorphing,\n\t\t\tskinning: useSkinning\n\n\t\t} );\n\n\t\t_distanceMaterials[ i ] = distanceMaterial;\n\n\t}\n\n\t//\n\n\tvar scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\n\tthis.render = function ( lights, scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( lights.length === 0 ) return;\n\n\t\t// TODO Clean up (needed in case of contextlost)\n\t\tvar _gl = _renderer.context;\n\t\tvar _state = _renderer.state;\n\n\t\t// Set GL state for depth map.\n\t\t_state.disable( _gl.BLEND );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tvar faceCount;\n\n\t\tfor ( var i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tvar light = lights[ i ];\n\n\t\t\tif ( light.isRectAreaLight ) {\n        return;\n      }\n\n\t\t\tvar shadow = light.shadow;\n\t\t\tvar isPointLight = light && light.isPointLight;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar shadowCamera = shadow.camera;\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\t\t\t_shadowMapSize.min( _maxShadowMapSize );\n\n\t\t\tif ( isPointLight ) {\n\n\t\t\t\tvar vpWidth = _shadowMapSize.x;\n\t\t\t\tvar vpHeight = _shadowMapSize.y;\n\n\t\t\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t\t\t// following orientation:\n\t\t\t\t//\n\t\t\t\t//  xzXZ\n\t\t\t\t//   y Y\n\t\t\t\t//\n\t\t\t\t// X - Positive x direction\n\t\t\t\t// x - Negative x direction\n\t\t\t\t// Y - Positive y direction\n\t\t\t\t// y - Negative y direction\n\t\t\t\t// Z - Positive z direction\n\t\t\t\t// z - Negative z direction\n\n\t\t\t\t// positive X\n\t\t\t\tcube2DViewPorts[ 0 ].set( vpWidth * 2, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// negative X\n\t\t\t\tcube2DViewPorts[ 1 ].set( 0, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// positive Z\n\t\t\t\tcube2DViewPorts[ 2 ].set( vpWidth * 3, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// negative Z\n\t\t\t\tcube2DViewPorts[ 3 ].set( vpWidth, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// positive Y\n\t\t\t\tcube2DViewPorts[ 4 ].set( vpWidth * 3, 0, vpWidth, vpHeight );\n\t\t\t\t// negative Y\n\t\t\t\tcube2DViewPorts[ 5 ].set( vpWidth, 0, vpWidth, vpHeight );\n\n\t\t\t\t_shadowMapSize.x *= 4.0;\n\t\t\t\t_shadowMapSize.y *= 2.0;\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tvar pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadowCamera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tif ( shadow.isSpotLightShadow ) {\n\n\t\t\t\tshadow.update( light );\n\n\t\t\t}\n\n\t\t\tvar shadowMap = shadow.map;\n\t\t\tvar shadowMatrix = shadow.matrix;\n\n\t\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\t\tshadowCamera.position.copy( _lightPositionWorld );\n\n\t\t\tif ( isPointLight ) {\n\n\t\t\t\tfaceCount = 6;\n\n\t\t\t\t// for point lights we set the shadow matrix to be a translation-only matrix\n\t\t\t\t// equal to inverse of the light's position\n\n\t\t\t\tshadowMatrix.makeTranslation( - _lightPositionWorld.x, - _lightPositionWorld.y, - _lightPositionWorld.z );\n\n\t\t\t} else {\n\n\t\t\t\tfaceCount = 1;\n\n\t\t\t\t_lookTarget.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tshadowCamera.lookAt( _lookTarget );\n\t\t\t\tshadowCamera.updateMatrixWorld();\n\n\t\t\t\t// compute shadow matrix\n\n\t\t\t\tshadowMatrix.set(\n\t\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t\t);\n\n\t\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget( shadowMap );\n\t\t\t_renderer.clear();\n\n\t\t\t// render shadow map for each cube face (if omni-directional) or\n\t\t\t// run a single pass if not\n\n\t\t\tfor ( var face = 0; face < faceCount; face ++ ) {\n\n\t\t\t\tif ( isPointLight ) {\n\n\t\t\t\t\t_lookTarget.copy( shadowCamera.position );\n\t\t\t\t\t_lookTarget.add( cubeDirections[ face ] );\n\t\t\t\t\tshadowCamera.up.copy( cubeUps[ face ] );\n\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\n\t\t\t\t\tshadowCamera.updateMatrixWorld();\n\n\t\t\t\t\tvar vpDimensions = cube2DViewPorts[ face ];\n\t\t\t\t\t_state.viewport( vpDimensions );\n\n\t\t\t\t}\n\n\t\t\t\t// update camera matrices and frustum\n\n\t\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\t\t\t// set object matrices & frustum culling\n\n\t\t\t\trenderObject( scene, camera, shadowCamera, isPointLight );\n\n\t\t\t}\n\n\t\t}\n\n\t\tscope.needsUpdate = false;\n\n\t};\n\n\tfunction getDepthMaterial( object, material, isPointLight, lightPositionWorld, shadowCameraNear, shadowCameraFar ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tvar result = null;\n\n\t\tvar materialVariants = _depthMaterials;\n\t\tvar customMaterial = object.customDepthMaterial;\n\n\t\tif ( isPointLight ) {\n\n\t\t\tmaterialVariants = _distanceMaterials;\n\t\t\tcustomMaterial = object.customDistanceMaterial;\n\n\t\t}\n\n\t\tif ( ! customMaterial ) {\n\n\t\t\tvar useMorphing = false;\n\n\t\t\tif ( material.morphTargets ) {\n\n\t\t\t\tif ( geometry && geometry.isBufferGeometry ) {\n\n\t\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\n\n\t\t\t\t} else if ( geometry && geometry.isGeometry ) {\n\n\t\t\t\t\tuseMorphing = geometry.morphTargets && geometry.morphTargets.length > 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( object.isSkinnedMesh && material.skinning === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\n\n\t\t\t}\n\n\t\t\tvar useSkinning = object.isSkinnedMesh && material.skinning;\n\n\t\t\tvar variantIndex = 0;\n\n\t\t\tif ( useMorphing ) variantIndex |= _MorphingFlag;\n\t\t\tif ( useSkinning ) variantIndex |= _SkinningFlag;\n\n\t\t\tresult = materialVariants[ variantIndex ];\n\n\t\t} else {\n\n\t\t\tresult = customMaterial;\n\n\t\t}\n\n\t\tif ( _renderer.localClippingEnabled &&\n\t\t\t\tmaterial.clipShadows === true &&\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tvar keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tvar materialsForVariant = _materialCache[ keyA ];\n\n\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tvar cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tresult.side = ( material.shadowSide != null ) ? material.shadowSide : shadowSide[ material.side ];\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( isPointLight && result.isMeshDistanceMaterial ) {\n\n\t\t\tresult.referencePosition.copy( lightPositionWorld );\n\t\t\tresult.nearDistance = shadowCameraNear;\n\t\t\tresult.farDistance = shadowCameraFar;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, isPointLight ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tvar visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( object.castShadow && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tvar geometry = _objects.update( object );\n\t\t\t\tvar material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tvar group = groups[ k ];\n\t\t\t\t\t\tvar groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, groupMaterial, isPointLight, _lightPositionWorld, shadowCamera.near, shadowCamera.far );\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, material, isPointLight, _lightPositionWorld, shadowCamera.near, shadowCamera.far );\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, isPointLight );\n\n\t\t}\n\n\t}\n\n}\n\n\nexport { WebGLShadowMap };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Texture } from './Texture.js';\n\nfunction CanvasTexture( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTexture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.needsUpdate = true;\n\n}\n\nCanvasTexture.prototype = Object.create( Texture.prototype );\nCanvasTexture.prototype.constructor = CanvasTexture;\n\n\nexport { CanvasTexture };\n","/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport { CanvasTexture } from '../../textures/CanvasTexture.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { Quaternion } from '../../math/Quaternion.js';\n\nfunction WebGLSpriteRenderer( renderer, gl, state, textures, capabilities ) {\n\n\tvar vertexBuffer, elementBuffer;\n\tvar program, attributes, uniforms;\n\n\tvar texture;\n\n\t// decompose matrixWorld\n\n\tvar spritePosition = new Vector3();\n\tvar spriteRotation = new Quaternion();\n\tvar spriteScale = new Vector3();\n\n\tfunction init() {\n\n\t\tvar vertices = new Float32Array( [\n\t\t\t- 0.5, - 0.5, 0, 0,\n\t\t\t  0.5, - 0.5, 1, 0,\n\t\t\t  0.5, 0.5, 1, 1,\n\t\t\t- 0.5, 0.5, 0, 1\n\t\t] );\n\n\t\tvar faces = new Uint16Array( [\n\t\t\t0, 1, 2,\n\t\t\t0, 2, 3\n\t\t] );\n\n\t\tvertexBuffer = gl.createBuffer();\n\t\telementBuffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\tprogram = createProgram();\n\n\t\tattributes = {\n\t\t\tposition: gl.getAttribLocation( program, 'position' ),\n\t\t\tuv: gl.getAttribLocation( program, 'uv' )\n\t\t};\n\n\t\tuniforms = {\n\t\t\tuvOffset: gl.getUniformLocation( program, 'uvOffset' ),\n\t\t\tuvScale: gl.getUniformLocation( program, 'uvScale' ),\n\n\t\t\trotation: gl.getUniformLocation( program, 'rotation' ),\n\t\t\tcenter: gl.getUniformLocation( program, 'center' ),\n\t\t\tscale: gl.getUniformLocation( program, 'scale' ),\n\n\t\t\tcolor: gl.getUniformLocation( program, 'color' ),\n\t\t\tmap: gl.getUniformLocation( program, 'map' ),\n\t\t\topacity: gl.getUniformLocation( program, 'opacity' ),\n\n\t\t\tmodelViewMatrix: gl.getUniformLocation( program, 'modelViewMatrix' ),\n\t\t\tprojectionMatrix: gl.getUniformLocation( program, 'projectionMatrix' ),\n\n\t\t\tfogType: gl.getUniformLocation( program, 'fogType' ),\n\t\t\tfogDensity: gl.getUniformLocation( program, 'fogDensity' ),\n\t\t\tfogNear: gl.getUniformLocation( program, 'fogNear' ),\n\t\t\tfogFar: gl.getUniformLocation( program, 'fogFar' ),\n\t\t\tfogColor: gl.getUniformLocation( program, 'fogColor' ),\n\t\t\tfogDepth: gl.getUniformLocation( program, 'fogDepth' ),\n\n\t\t\talphaTest: gl.getUniformLocation( program, 'alphaTest' )\n\t\t};\n\n\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\tcanvas.width = 8;\n\t\tcanvas.height = 8;\n\n\t\tvar context = canvas.getContext( '2d' );\n\t\tcontext.fillStyle = 'white';\n\t\tcontext.fillRect( 0, 0, 8, 8 );\n\n\t\ttexture = new CanvasTexture( canvas );\n\n\t}\n\n\tthis.render = function ( sprites, scene, camera ) {\n\n\t\tif ( sprites.length === 0 ) return;\n\n\t\t// setup gl\n\n\t\tif ( program === undefined ) {\n\n\t\t\tinit();\n\n\t\t}\n\n\t\tstate.useProgram( program );\n\n\t\tstate.initAttributes();\n\t\tstate.enableAttribute( attributes.position );\n\t\tstate.enableAttribute( attributes.uv );\n\t\tstate.disableUnusedAttributes();\n\n\t\tstate.disable( gl.CULL_FACE );\n\t\tstate.enable( gl.BLEND );\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\n\n\t\tstate.activeTexture( gl.TEXTURE0 );\n\t\tgl.uniform1i( uniforms.map, 0 );\n\n\t\tvar oldFogType = 0;\n\t\tvar sceneFogType = 0;\n\t\tvar fog = scene.fog;\n\n\t\tif ( fog ) {\n\n\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\n\n\t\t\tif ( fog.isFog ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\n\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\n\t\t\t\toldFogType = 1;\n\t\t\t\tsceneFogType = 1;\n\n\t\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\n\t\t\t\toldFogType = 2;\n\t\t\t\tsceneFogType = 2;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl.uniform1i( uniforms.fogType, 0 );\n\t\t\toldFogType = 0;\n\t\t\tsceneFogType = 0;\n\n\t\t}\n\n\n\t\t// update positions and sort\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\n\t\t\tsprite.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\n\t\t\tsprite.z = - sprite.modelViewMatrix.elements[ 14 ];\n\n\t\t}\n\n\t\tsprites.sort( painterSortStable );\n\n\t\t// render all sprites\n\n\t\tvar scale = [];\n\t\tvar center = [];\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\t\t\tvar material = sprite.material;\n\n\t\t\tif ( material.visible === false ) continue;\n\n\t\t\tsprite.onBeforeRender( renderer, scene, camera, undefined, material, undefined );\n\n\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\n\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements );\n\n\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\n\n\t\t\tscale[ 0 ] = spriteScale.x;\n\t\t\tscale[ 1 ] = spriteScale.y;\n\n\t\t\tcenter[ 0 ] = sprite.center.x - 0.5;\n\t\t\tcenter[ 1 ] = sprite.center.y - 0.5;\n\n\t\t\tvar fogType = 0;\n\n\t\t\tif ( scene.fog && material.fog ) {\n\n\t\t\t\tfogType = sceneFogType;\n\n\t\t\t}\n\n\t\t\tif ( oldFogType !== fogType ) {\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\n\t\t\t\toldFogType = fogType;\n\n\t\t\t}\n\n\t\t\tif ( material.map !== null ) {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\n\n\t\t\t} else {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\n\n\t\t\t}\n\n\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\n\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\n\n\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\n\t\t\tgl.uniform2fv( uniforms.center, center );\n\t\t\tgl.uniform2fv( uniforms.scale, scale );\n\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\t\t\tstate.buffers.depth.setTest( material.depthTest );\n\t\t\tstate.buffers.depth.setMask( material.depthWrite );\n\t\t\tstate.buffers.color.setMask( material.colorWrite );\n\n\t\t\ttextures.setTexture2D( material.map || texture, 0 );\n\n\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t\tsprite.onAfterRender( renderer, scene, camera, undefined, material, undefined );\n\n\t\t}\n\n\t\t// restore gl\n\n\t\tstate.enable( gl.CULL_FACE );\n\n\t\tstate.reset();\n\n\t};\n\n\tfunction createProgram() {\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\n\t\tgl.shaderSource( vertexShader, [\n\n\t\t\t'precision ' + capabilities.precision + ' float;',\n\n\t\t\t'#define SHADER_NAME ' + 'SpriteMaterial',\n\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform float rotation;',\n\t\t\t'uniform vec2 center;',\n\t\t\t'uniform vec2 scale;',\n\t\t\t'uniform vec2 uvOffset;',\n\t\t\t'uniform vec2 uvScale;',\n\n\t\t\t'attribute vec2 position;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'varying vec2 vUV;',\n\t\t\t'varying float fogDepth;',\n\n\t\t\t'void main() {',\n\n\t\t\t'\tvUV = uvOffset + uv * uvScale;',\n\n\t\t\t'\tvec2 alignedPosition = ( position - center ) * scale;',\n\n\t\t\t'\tvec2 rotatedPosition;',\n\t\t\t'\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\n\t\t\t'\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\n\n\t\t\t'\tvec4 mvPosition;',\n\n\t\t\t'\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\n\t\t\t'\tmvPosition.xy += rotatedPosition;',\n\n\t\t\t'\tgl_Position = projectionMatrix * mvPosition;',\n\n\t\t\t'\tfogDepth = - mvPosition.z;',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.shaderSource( fragmentShader, [\n\n\t\t\t'precision ' + capabilities.precision + ' float;',\n\n\t\t\t'#define SHADER_NAME ' + 'SpriteMaterial',\n\n\t\t\t'uniform vec3 color;',\n\t\t\t'uniform sampler2D map;',\n\t\t\t'uniform float opacity;',\n\n\t\t\t'uniform int fogType;',\n\t\t\t'uniform vec3 fogColor;',\n\t\t\t'uniform float fogDensity;',\n\t\t\t'uniform float fogNear;',\n\t\t\t'uniform float fogFar;',\n\t\t\t'uniform float alphaTest;',\n\n\t\t\t'varying vec2 vUV;',\n\t\t\t'varying float fogDepth;',\n\n\t\t\t'void main() {',\n\n\t\t\t'\tvec4 texture = texture2D( map, vUV );',\n\n\t\t\t'\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\n\n\t\t\t'\tif ( gl_FragColor.a < alphaTest ) discard;',\n\n\t\t\t'\tif ( fogType > 0 ) {',\n\n\t\t\t'\t\tfloat fogFactor = 0.0;',\n\n\t\t\t'\t\tif ( fogType == 1 ) {',\n\n\t\t\t'\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );',\n\n\t\t\t'\t\t} else {',\n\n\t\t\t'\t\t\tconst float LOG2 = 1.442695;',\n\t\t\t'\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );',\n\t\t\t'\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\n\n\t\t\t'\t\t}',\n\n\t\t\t'\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );',\n\n\t\t\t'\t}',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.compileShader( vertexShader );\n\t\tgl.compileShader( fragmentShader );\n\n\t\tgl.attachShader( program, vertexShader );\n\t\tgl.attachShader( program, fragmentShader );\n\n\t\tgl.linkProgram( program );\n\n\t\treturn program;\n\n\t}\n\n\tfunction painterSortStable( a, b ) {\n\n\t\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\t\treturn a.renderOrder - b.renderOrder;\n\n\t\t} else if ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else {\n\n\t\t\treturn b.id - a.id;\n\n\t\t}\n\n\t}\n\n}\n\n\nexport { WebGLSpriteRenderer };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { NotEqualDepth, GreaterDepth, GreaterEqualDepth, EqualDepth, LessEqualDepth, LessDepth, AlwaysDepth, NeverDepth, CullFaceFront, CullFaceBack, CullFaceNone, CustomBlending, MultiplyBlending, SubtractiveBlending, AdditiveBlending, NoBlending, NormalBlending, DoubleSide, BackSide } from '../../constants.js';\nimport { Vector4 } from '../../math/Vector4.js';\n\nfunction WebGLState( gl, extensions, utils ) {\n\n\tfunction ColorBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar color = new Vector4();\n\t\tvar currentColorMask = null;\n\t\tvar currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentDepthMask = null;\n\t\tvar currentDepthFunc = null;\n\t\tvar currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( gl.DEPTH_TEST );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( gl.DEPTH_TEST );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tif ( depthFunc ) {\n\n\t\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LESS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentStencilMask = null;\n\t\tvar currentStencilFunc = null;\n\t\tvar currentStencilRef = null;\n\t\tvar currentStencilFuncMask = null;\n\t\tvar currentStencilFail = null;\n\t\tvar currentStencilZFail = null;\n\t\tvar currentStencilZPass = null;\n\t\tvar currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\tenable( gl.STENCIL_TEST );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( gl.STENCIL_TEST );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef \t!== stencilRef \t||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail\t !== stencilFail \t||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tvar colorBuffer = new ColorBuffer();\n\tvar depthBuffer = new DepthBuffer();\n\tvar stencilBuffer = new StencilBuffer();\n\n\tvar maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tvar newAttributes = new Uint8Array( maxVertexAttributes );\n\tvar enabledAttributes = new Uint8Array( maxVertexAttributes );\n\tvar attributeDivisors = new Uint8Array( maxVertexAttributes );\n\n\tvar capabilities = {};\n\n\tvar compressedTextureFormats = null;\n\n\tvar currentProgram = null;\n\n\tvar currentBlending = null;\n\tvar currentBlendEquation = null;\n\tvar currentBlendSrc = null;\n\tvar currentBlendDst = null;\n\tvar currentBlendEquationAlpha = null;\n\tvar currentBlendSrcAlpha = null;\n\tvar currentBlendDstAlpha = null;\n\tvar currentPremultipledAlpha = false;\n\n\tvar currentFlipSided = null;\n\tvar currentCullFace = null;\n\n\tvar currentLineWidth = null;\n\n\tvar currentPolygonOffsetFactor = null;\n\tvar currentPolygonOffsetUnits = null;\n\n\tvar maxTextures = gl.getParameter( gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS );\n\n\tvar lineWidthAvailable = false;\n\tvar version = 0;\n\tvar glVersion = gl.getParameter( gl.VERSION );\n\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^WebGL\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 1.0 );\n\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^OpenGL\\ ES\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 2.0 );\n\n\t}\n\n\tvar currentTextureSlot = null;\n\tvar currentBoundTextures = {};\n\n\tvar currentScissor = new Vector4();\n\tvar currentViewport = new Vector4();\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tvar data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tvar texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\n\t\tfor ( var i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tvar emptyTextures = {};\n\temptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\n\temptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( gl.DEPTH_TEST );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( gl.CULL_FACE );\n\n\tenable( gl.BLEND );\n\tsetBlending( NormalBlending );\n\n\t//\n\n\tfunction initAttributes() {\n\n\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== 0 ) {\n\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension.vertexAttribDivisorANGLE( attribute, 0 );\n\t\t\tattributeDivisors[ attribute ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension.vertexAttribDivisorANGLE( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tfor ( var i = 0, l = enabledAttributes.length; i !== l; ++ i ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction enable( id ) {\n\n\t\tif ( capabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tcapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( capabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tcapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction getCompressedTextureFormats() {\n\n\t\tif ( compressedTextureFormats === null ) {\n\n\t\t\tcompressedTextureFormats = [];\n\n\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) ||\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_s3tc' ) ||\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_etc1' ) ||\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_astc' ) ) {\n\n\t\t\t\tvar formats = gl.getParameter( gl.COMPRESSED_TEXTURE_FORMATS );\n\n\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ) {\n\n\t\t\t\t\tcompressedTextureFormats.push( formats[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn compressedTextureFormats;\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending !== NoBlending ) {\n\n\t\t\tenable( gl.BLEND );\n\n\t\t} else {\n\n\t\t\tdisable( gl.BLEND );\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\tcase AdditiveBlending:\n\n\t\t\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE, gl.ONE, gl.ONE );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase SubtractiveBlending:\n\n\t\t\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase MultiplyBlending:\n\n\t\t\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tcurrentBlendEquation = null;\n\t\t\tcurrentBlendSrc = null;\n\t\t\tcurrentBlendDst = null;\n\t\t\tcurrentBlendEquationAlpha = null;\n\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t} else {\n\n\t\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\t\tgl.blendEquationSeparate( utils.convert( blendEquation ), utils.convert( blendEquationAlpha ) );\n\n\t\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t\t}\n\n\t\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\t\tgl.blendFuncSeparate( utils.convert( blendSrc ), utils.convert( blendDst ), utils.convert( blendSrcAlpha ), utils.convert( blendDstAlpha ) );\n\n\t\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\t\tcurrentBlendDst = blendDst;\n\t\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( gl.CULL_FACE )\n\t\t\t: enable( gl.CULL_FACE );\n\n\t\tvar flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\tmaterial.transparent === true\n\t\t\t? setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha )\n\t\t\t: setBlending( NoBlending );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( gl.CCW );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( gl.CULL_FACE );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( gl.BACK );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT_AND_BACK );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.CULL_FACE );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( gl.POLYGON_OFFSET_FILL );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.POLYGON_OFFSET_FILL );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( gl.SCISSOR_TEST );\n\n\t\t} else {\n\n\t\t\tdisable( gl.SCISSOR_TEST );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture ) {\n\n\t\tif ( currentTextureSlot === null ) {\n\n\t\t\tactiveTexture();\n\n\t\t}\n\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] === 1 ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcapabilities = {};\n\n\t\tcompressedTextureFormats = null;\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlending = null;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tenableAttributeAndDivisor: enableAttributeAndDivisor,\n\t\tdisableUnusedAttributes: disableUnusedAttributes,\n\t\tenable: enable,\n\t\tdisable: disable,\n\t\tgetCompressedTextureFormats: getCompressedTextureFormats,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\ttexImage2D: texImage2D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\n\nexport { WebGLState };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { LinearFilter, NearestFilter, RGBFormat, RGBAFormat, DepthFormat, DepthStencilFormat, UnsignedShortType, UnsignedIntType, UnsignedInt248Type, FloatType, HalfFloatType, ClampToEdgeWrapping, NearestMipMapLinearFilter, NearestMipMapNearestFilter } from '../../constants.js';\nimport { _Math } from '../../math/Math.js';\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\n\n\tvar _isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && _gl instanceof WebGL2RenderingContext ); /* global WebGL2RenderingContext */\n\tvar _videoTextures = {};\n\tvar _canvas;\n\n\t//\n\n\tfunction clampToMaxSize( image, maxSize ) {\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\tif ( 'data' in image ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t// Warning: Scaling through the canvas will only work with images that use\n\t\t\t// premultiplied alpha.\n\n\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\n\n\t\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\tcanvas.width = Math.floor( image.width * scale );\n\t\t\tcanvas.height = Math.floor( image.height * scale );\n\n\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\n\n\t\t\treturn canvas;\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo( image ) {\n\n\t\treturn _Math.isPowerOfTwo( image.width ) && _Math.isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction makePowerOfTwo( image ) {\n\n\t\tif ( image instanceof HTMLImageElement || image instanceof HTMLCanvasElement || image instanceof ImageBitmap ) {\n\n\t\t\tif ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t\t\t_canvas.width = _Math.floorPowerOfTwo( image.width );\n\t\t\t_canvas.height = _Math.floorPowerOfTwo( image.height );\n\n\t\t\tvar context = _canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, _canvas.width, _canvas.height );\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is not power of two (' + image.width + 'x' + image.height + '). Resized to ' + _canvas.width + 'x' + _canvas.height, image );\n\n\t\t\treturn _canvas;\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, isPowerOfTwo ) {\n\n\t\treturn texture.generateMipmaps && isPowerOfTwo &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\tfunction generateMipmap( target, texture, width, height ) {\n\n\t\t_gl.generateMipmap( target );\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\t// Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11\n\t\ttextureProperties.__maxMipLevel = Math.log( Math.max( width, height ) ) * Math.LOG2E;\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipMapNearestFilter || f === NearestMipMapLinearFilter ) {\n\n\t\t\treturn _gl.NEAREST;\n\n\t\t}\n\n\t\treturn _gl.LINEAR;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tvar texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tif ( texture.isVideoTexture ) {\n\n\t\t\tdelete _videoTextures[ texture.id ];\n\n\t\t}\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tvar renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.image && textureProperties.__image__webglTextureCube ) {\n\n\t\t\t// cube texture\n\n\t\t\t_gl.deleteTexture( textureProperties.__image__webglTextureCube );\n\n\t\t} else {\n\n\t\t\t// 2D texture\n\n\t\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\t// remove all webgl properties\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\tif ( ! renderTarget ) return;\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLRenderTargetCube ) {\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\n\t\t}\n\n\t\tproperties.remove( renderTarget.texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tvar image = texture.image;\n\n\t\t\tif ( image === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined', texture );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete', texture );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.image.length === 6 ) {\n\n\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\t\tif ( ! textureProperties.__image__webglTextureCube ) {\n\n\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\ttextureProperties.__image__webglTextureCube = _gl.createTexture();\n\n\t\t\t\t\tinfo.memory.textures ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\n\n\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\n\t\t\t\tvar isCompressed = ( texture && texture.isCompressedTexture );\n\t\t\t\tvar isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\t\t\tvar cubeImage = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], capabilities.maxCubemapSize );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar image = cubeImage[ 0 ],\n\t\t\t\t\tisPowerOfTwoImage = isPowerOfTwo( image ),\n\t\t\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isPowerOfTwoImage );\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( ! isCompressed ) {\n\n\t\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! isCompressed ) {\n\n\t\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t\t}\n\n\t\t\t\tif ( textureNeedsGenerateMipmaps( texture, isPowerOfTwoImage ) ) {\n\n\t\t\t\t\t// We assume images for cube map have the same size.\n\t\t\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP, texture, image.width, image.height );\n\n\t\t\t\t}\n\n\t\t\t\ttextureProperties.__version = texture.version;\n\n\t\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t\t} else {\n\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setTextureCubeDynamic( texture, slot ) {\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\n\n\t}\n\n\tfunction setTextureParameters( textureType, texture, isPowerOfTwoImage ) {\n\n\t\tvar extension;\n\n\t\tif ( isPowerOfTwoImage ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, utils.convert( texture.wrapS ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, utils.convert( texture.wrapT ) );\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, utils.convert( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, utils.convert( texture.minFilter ) );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.', texture );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.', texture );\n\n\t\t\t}\n\n\t\t}\n\n\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension ) {\n\n\t\t\tif ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\n\t\t\tif ( texture.type === HalfFloatType && extensions.get( 'OES_texture_half_float_linear' ) === null ) return;\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\tinfo.memory.textures ++;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\n\t\tvar image = clampToMaxSize( texture.image, capabilities.maxTextureSize );\n\n\t\tif ( textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( image ) === false ) {\n\n\t\t\timage = makePowerOfTwo( image );\n\n\t\t}\n\n\t\tvar isPowerOfTwoImage = isPowerOfTwo( image ),\n\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\tglType = utils.convert( texture.type );\n\n\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isPowerOfTwoImage );\n\n\t\tvar mipmap, mipmaps = texture.mipmaps;\n\n\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t// populate depth texture with dummy data\n\n\t\t\tvar internalFormat = _gl.DEPTH_COMPONENT;\n\n\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\tif ( ! _isWebGL2 ) throw new Error( 'Float Depth Texture only supported in WebGL2.0' );\n\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t} else if ( _isWebGL2 ) {\n\n\t\t\t\t// WebGL 2.0 requires signed internalformat for glTexImage2D\n\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT16;\n\n\t\t\t}\n\n\t\t\tif ( texture.format === DepthFormat && internalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedShortType;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\tif ( texture.format === DepthStencilFormat ) {\n\n\t\t\t\tinternalFormat = _gl.DEPTH_STENCIL;\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, internalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\n\n\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t} else {\n\n\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, image );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, isPowerOfTwoImage ) ) {\n\n\t\t\tgenerateMipmap( _gl.TEXTURE_2D, texture, image.width, image.height );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\n\n\t\tvar glFormat = utils.convert( renderTarget.texture.format );\n\t\tvar glType = utils.convert( renderTarget.texture.type );\n\t\tstate.texImage2D( textureTarget, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget ) {\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else {\n\n\t\t\t// FIXME: We don't support !depth !stencil\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tvar isCube = ( renderTarget && renderTarget.isWebGLRenderTargetCube );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tvar webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\tvar isCube = ( renderTarget.isWebGLRenderTargetCube === true );\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\tinfo.memory.textures ++;\n\n\t\tvar isCube = ( renderTarget.isWebGLRenderTargetCube === true );\n\t\tvar isTargetPowerOfTwo = isPowerOfTwo( renderTarget );\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, isTargetPowerOfTwo );\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, isTargetPowerOfTwo ) ) {\n\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t} else {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget.texture, isTargetPowerOfTwo );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D );\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, isTargetPowerOfTwo ) ) {\n\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_2D, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tvar texture = renderTarget.texture;\n\t\tvar isTargetPowerOfTwo = isPowerOfTwo( renderTarget );\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, isTargetPowerOfTwo ) ) {\n\n\t\t\tvar target = renderTarget.isWebGLRenderTargetCube ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\n\t\t\tvar webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\tgenerateMipmap( target, texture, renderTarget.width, renderTarget.height );\n\t\t\tstate.bindTexture( target, null );\n\n\t\t}\n\n\t}\n\n\tfunction updateVideoTexture( texture ) {\n\n\t\tvar id = texture.id;\n\t\tvar frame = info.render.frame;\n\n\t\t// Check the last frame we updated the VideoTexture\n\n\t\tif ( _videoTextures[ id ] !== frame ) {\n\n\t\t\t_videoTextures[ id ] = frame;\n\t\t\ttexture.update();\n\n\t\t}\n\n\t}\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.setTextureCubeDynamic = setTextureCubeDynamic;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\n}\n\n\nexport { WebGLTextures };\n","/**\n * @author thespite / http://www.twitter.com/thespite\n */\n\nimport { MaxEquation, MinEquation, RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_10x10_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGB_ETC1_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT5_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT1_Format, RGB_S3TC_DXT1_Format, SrcAlphaSaturateFactor, OneMinusDstColorFactor, DstColorFactor, OneMinusDstAlphaFactor, DstAlphaFactor, OneMinusSrcAlphaFactor, SrcAlphaFactor, OneMinusSrcColorFactor, SrcColorFactor, OneFactor, ZeroFactor, ReverseSubtractEquation, SubtractEquation, AddEquation, DepthFormat, DepthStencilFormat, LuminanceAlphaFormat, LuminanceFormat, RGBAFormat, RGBFormat, AlphaFormat, HalfFloatType, FloatType, UnsignedIntType, IntType, UnsignedShortType, ShortType, ByteType, UnsignedInt248Type, UnsignedShort565Type, UnsignedShort5551Type, UnsignedShort4444Type, UnsignedByteType, LinearMipMapLinearFilter, LinearMipMapNearestFilter, LinearFilter, NearestMipMapLinearFilter, NearestMipMapNearestFilter, NearestFilter, MirroredRepeatWrapping, ClampToEdgeWrapping, RepeatWrapping } from '../../constants.js';\n\nfunction WebGLUtils( gl, extensions ) {\n\n\tfunction convert( p ) {\n\n\t\tvar extension;\n\n\t\tif ( p === RepeatWrapping ) return gl.REPEAT;\n\t\tif ( p === ClampToEdgeWrapping ) return gl.CLAMP_TO_EDGE;\n\t\tif ( p === MirroredRepeatWrapping ) return gl.MIRRORED_REPEAT;\n\n\t\tif ( p === NearestFilter ) return gl.NEAREST;\n\t\tif ( p === NearestMipMapNearestFilter ) return gl.NEAREST_MIPMAP_NEAREST;\n\t\tif ( p === NearestMipMapLinearFilter ) return gl.NEAREST_MIPMAP_LINEAR;\n\n\t\tif ( p === LinearFilter ) return gl.LINEAR;\n\t\tif ( p === LinearMipMapNearestFilter ) return gl.LINEAR_MIPMAP_NEAREST;\n\t\tif ( p === LinearMipMapLinearFilter ) return gl.LINEAR_MIPMAP_LINEAR;\n\n\t\tif ( p === UnsignedByteType ) return gl.UNSIGNED_BYTE;\n\t\tif ( p === UnsignedShort4444Type ) return gl.UNSIGNED_SHORT_4_4_4_4;\n\t\tif ( p === UnsignedShort5551Type ) return gl.UNSIGNED_SHORT_5_5_5_1;\n\t\tif ( p === UnsignedShort565Type ) return gl.UNSIGNED_SHORT_5_6_5;\n\n\t\tif ( p === ByteType ) return gl.BYTE;\n\t\tif ( p === ShortType ) return gl.SHORT;\n\t\tif ( p === UnsignedShortType ) return gl.UNSIGNED_SHORT;\n\t\tif ( p === IntType ) return gl.INT;\n\t\tif ( p === UnsignedIntType ) return gl.UNSIGNED_INT;\n\t\tif ( p === FloatType ) return gl.FLOAT;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) return extension.HALF_FLOAT_OES;\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return gl.ALPHA;\n\t\tif ( p === RGBFormat ) return gl.RGB;\n\t\tif ( p === RGBAFormat ) return gl.RGBA;\n\t\tif ( p === LuminanceFormat ) return gl.LUMINANCE;\n\t\tif ( p === LuminanceAlphaFormat ) return gl.LUMINANCE_ALPHA;\n\t\tif ( p === DepthFormat ) return gl.DEPTH_COMPONENT;\n\t\tif ( p === DepthStencilFormat ) return gl.DEPTH_STENCIL;\n\n\t\tif ( p === AddEquation ) return gl.FUNC_ADD;\n\t\tif ( p === SubtractEquation ) return gl.FUNC_SUBTRACT;\n\t\tif ( p === ReverseSubtractEquation ) return gl.FUNC_REVERSE_SUBTRACT;\n\n\t\tif ( p === ZeroFactor ) return gl.ZERO;\n\t\tif ( p === OneFactor ) return gl.ONE;\n\t\tif ( p === SrcColorFactor ) return gl.SRC_COLOR;\n\t\tif ( p === OneMinusSrcColorFactor ) return gl.ONE_MINUS_SRC_COLOR;\n\t\tif ( p === SrcAlphaFactor ) return gl.SRC_ALPHA;\n\t\tif ( p === OneMinusSrcAlphaFactor ) return gl.ONE_MINUS_SRC_ALPHA;\n\t\tif ( p === DstAlphaFactor ) return gl.DST_ALPHA;\n\t\tif ( p === OneMinusDstAlphaFactor ) return gl.ONE_MINUS_DST_ALPHA;\n\n\t\tif ( p === DstColorFactor ) return gl.DST_COLOR;\n\t\tif ( p === OneMinusDstColorFactor ) return gl.ONE_MINUS_DST_COLOR;\n\t\tif ( p === SrcAlphaSaturateFactor ) return gl.SRC_ALPHA_SATURATE;\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) return extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t}\n\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn p;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === MinEquation || p === MaxEquation ) {\n\n\t\t\textension = extensions.get( 'EXT_blend_minmax' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === MinEquation ) return extension.MIN_EXT;\n\t\t\t\tif ( p === MaxEquation ) return extension.MAX_EXT;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) return extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t}\n\n\t\treturn 0;\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\n\nexport { WebGLUtils };\n","import { Camera } from './Camera.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { _Math } from '../math/Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author greggman / http://games.greggman.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author tschw\n */\n\nfunction PerspectiveCamera( fov, aspect, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.fov = fov !== undefined ? fov : 50;\n\tthis.zoom = 1;\n\n\tthis.near = near !== undefined ? near : 0.1;\n\tthis.far = far !== undefined ? far : 2000;\n\tthis.focus = 10;\n\n\tthis.aspect = aspect !== undefined ? aspect : 1;\n\tthis.view = null;\n\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\tthis.updateProjectionMatrix();\n\n}\n\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: PerspectiveCamera,\n\n\tisPerspectiveCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength: function ( focalLength ) {\n\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\n\t\tvar vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = _Math.RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength: function () {\n\n\t\tvar vExtentSlope = Math.tan( _Math.DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t},\n\n\tgetEffectiveFOV: function () {\n\n\t\treturn _Math.RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( _Math.DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t},\n\n\tgetFilmWidth: function () {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t},\n\n\tgetFilmHeight: function () {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t},\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   var w = 1920;\n\t *   var h = 1080;\n\t *   var fullWidth = w * 3;\n\t *   var fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar near = this.near,\n\t\t\ttop = near * Math.tan(\n\t\t\t\t_Math.DEG2RAD * 0.5 * this.fov ) / this.zoom,\n\t\t\theight = 2 * top,\n\t\t\twidth = this.aspect * height,\n\t\t\tleft = - 0.5 * width,\n\t\t\tview = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tvar fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tvar skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { PerspectiveCamera };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { PerspectiveCamera } from './PerspectiveCamera.js';\n\nfunction ArrayCamera( array ) {\n\n\tPerspectiveCamera.call( this );\n\n\tthis.cameras = array || [];\n\n}\n\nArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\n\n\tconstructor: ArrayCamera,\n\n\tisArrayCamera: true\n\n} );\n\n\nexport { ArrayCamera };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Matrix4 } from '../../math/Matrix4.js';\nimport { Vector4 } from '../../math/Vector4.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { Quaternion } from '../../math/Quaternion.js';\nimport { ArrayCamera } from '../../cameras/ArrayCamera.js';\nimport { PerspectiveCamera } from '../../cameras/PerspectiveCamera.js';\n\nfunction WebVRManager( renderer ) {\n\n\tvar scope = this;\n\n\tvar device = null;\n\tvar frameData = null;\n\n\tvar poseTarget = null;\n\n\tvar standingMatrix = new Matrix4();\n\tvar standingMatrixInverse = new Matrix4();\n\n\tif ( typeof window !== 'undefined' && 'VRFrameData' in window ) {\n\n\t\tframeData = new window.VRFrameData();\n\t\twindow.addEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange, false );\n\n\t}\n\n\tvar matrixWorldInverse = new Matrix4();\n\tvar tempQuaternion = new Quaternion();\n\tvar tempPosition = new Vector3();\n\n\tvar cameraL = new PerspectiveCamera();\n\tcameraL.bounds = new Vector4( 0.0, 0.0, 0.5, 1.0 );\n\tcameraL.layers.enable( 1 );\n\n\tvar cameraR = new PerspectiveCamera();\n\tcameraR.bounds = new Vector4( 0.5, 0.0, 0.5, 1.0 );\n\tcameraR.layers.enable( 2 );\n\n\tvar cameraVR = new ArrayCamera( [ cameraL, cameraR ] );\n\tcameraVR.layers.enable( 1 );\n\tcameraVR.layers.enable( 2 );\n\n\t//\n\n\tfunction isPresenting() {\n\n\t\treturn device !== null && device.isPresenting === true;\n\n\t}\n\n\tvar currentSize, currentPixelRatio;\n\n\tfunction onVRDisplayPresentChange() {\n\n\t\tif ( isPresenting() ) {\n\n\t\t\tvar eyeParameters = device.getEyeParameters( 'left' );\n\t\t\tvar renderWidth = eyeParameters.renderWidth;\n\t\t\tvar renderHeight = eyeParameters.renderHeight;\n\n\t\t\tcurrentPixelRatio = renderer.getPixelRatio();\n\t\t\tcurrentSize = renderer.getSize();\n\n\t\t\trenderer.setDrawingBufferSize( renderWidth * 2, renderHeight, 1 );\n\n\t\t} else if ( scope.enabled ) {\n\n\t\t\trenderer.setDrawingBufferSize( currentSize.width, currentSize.height, currentPixelRatio );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tthis.enabled = false;\n\tthis.userHeight = 1.6;\n\n\tthis.getDevice = function () {\n\n\t\treturn device;\n\n\t};\n\n\tthis.setDevice = function ( value ) {\n\n\t\tif ( value !== undefined ) device = value;\n\n\t};\n\n\tthis.setPoseTarget = function ( object ) {\n\n\t\tif ( object !== undefined ) poseTarget = object;\n\n\t};\n\n\tthis.getCamera = function ( camera ) {\n\n\t\tif ( device === null ) return camera;\n\n\t\tdevice.depthNear = camera.near;\n\t\tdevice.depthFar = camera.far;\n\n\t\tdevice.getFrameData( frameData );\n\n\t\t//\n\n\t\tvar stageParameters = device.stageParameters;\n\n\t\tif ( stageParameters ) {\n\n\t\t\tstandingMatrix.fromArray( stageParameters.sittingToStandingTransform );\n\n\t\t} else {\n\n\t\t\tstandingMatrix.makeTranslation( 0, scope.userHeight, 0 );\n\n\t\t}\n\n\n\t\tvar pose = frameData.pose;\n\t\tvar poseObject = poseTarget !== null ? poseTarget : camera;\n\n\t\t// We want to manipulate poseObject by its position and quaternion components since users may rely on them.\n\t\tposeObject.matrix.copy( standingMatrix );\n\t\tposeObject.matrix.decompose( poseObject.position, poseObject.quaternion, poseObject.scale );\n\n\t\tif ( pose.orientation !== null ) {\n\n\t\t\ttempQuaternion.fromArray( pose.orientation );\n\t\t\tposeObject.quaternion.multiply( tempQuaternion );\n\n\t\t}\n\n\t\tif ( pose.position !== null ) {\n\n\t\t\ttempQuaternion.setFromRotationMatrix( standingMatrix );\n\t\t\ttempPosition.fromArray( pose.position );\n\t\t\ttempPosition.applyQuaternion( tempQuaternion );\n\t\t\tposeObject.position.add( tempPosition );\n\n\t\t}\n\n\t\tposeObject.updateMatrixWorld();\n\n\t\tif ( device.isPresenting === false ) return camera;\n\n\t\t//\n\n\t\tcameraL.near = camera.near;\n\t\tcameraR.near = camera.near;\n\n\t\tcameraL.far = camera.far;\n\t\tcameraR.far = camera.far;\n\n\t\tcameraVR.matrixWorld.copy( camera.matrixWorld );\n\t\tcameraVR.matrixWorldInverse.copy( camera.matrixWorldInverse );\n\n\t\tcameraL.matrixWorldInverse.fromArray( frameData.leftViewMatrix );\n\t\tcameraR.matrixWorldInverse.fromArray( frameData.rightViewMatrix );\n\n\t\t// TODO (mrdoob) Double check this code\n\n\t\tstandingMatrixInverse.getInverse( standingMatrix );\n\n\t\tcameraL.matrixWorldInverse.multiply( standingMatrixInverse );\n\t\tcameraR.matrixWorldInverse.multiply( standingMatrixInverse );\n\n\t\tvar parent = poseObject.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\n\n\t\t\tcameraL.matrixWorldInverse.multiply( matrixWorldInverse );\n\t\t\tcameraR.matrixWorldInverse.multiply( matrixWorldInverse );\n\n\t\t}\n\n\t\t// envMap and Mirror needs camera.matrixWorld\n\n\t\tcameraL.matrixWorld.getInverse( cameraL.matrixWorldInverse );\n\t\tcameraR.matrixWorld.getInverse( cameraR.matrixWorldInverse );\n\n\t\tcameraL.projectionMatrix.fromArray( frameData.leftProjectionMatrix );\n\t\tcameraR.projectionMatrix.fromArray( frameData.rightProjectionMatrix );\n\n\t\t// HACK (mrdoob)\n\t\t// https://github.com/w3c/webvr/issues/203\n\n\t\tcameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\n\n\t\t//\n\n\t\tvar layers = device.getLayers();\n\n\t\tif ( layers.length ) {\n\n\t\t\tvar layer = layers[ 0 ];\n\n\t\t\tif ( layer.leftBounds !== null && layer.leftBounds.length === 4 ) {\n\n\t\t\t\tcameraL.bounds.fromArray( layer.leftBounds );\n\n\t\t\t}\n\n\t\t\tif ( layer.rightBounds !== null && layer.rightBounds.length === 4 ) {\n\n\t\t\t\tcameraR.bounds.fromArray( layer.rightBounds );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn cameraVR;\n\n\t};\n\n\tthis.getStandingMatrix = function () {\n\n\t\treturn standingMatrix;\n\n\t};\n\n\tthis.submitFrame = function () {\n\n\t\tif ( isPresenting() ) device.submitFrame();\n\n\t};\n\n\tthis.dispose = function () {\n\n\t\tif ( typeof window !== 'undefined' ) {\n\n\t\t\twindow.removeEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange );\n\n\t\t}\n\n\t};\n\n}\n\nexport { WebVRManager };\n","import { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Scene() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Scene';\n\n\tthis.background = null;\n\tthis.fog = null;\n\tthis.overrideMaterial = null;\n\n\tthis.autoUpdate = true; // checked by the renderer\n\n}\n\nScene.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Scene,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\n\nexport { Scene };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\n\n// CylinderGeometry\n\nfunction CylinderGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'CylinderGeometry';\n\n\tthis.parameters = {\n\t\tradiusTop: radiusTop,\n\t\tradiusBottom: radiusBottom,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n}\n\nCylinderGeometry.prototype = Object.create( Geometry.prototype );\nCylinderGeometry.prototype.constructor = CylinderGeometry;\n\n// CylinderBufferGeometry\n\nfunction CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'CylinderBufferGeometry';\n\n\tthis.parameters = {\n\t\tradiusTop: radiusTop,\n\t\tradiusBottom: radiusBottom,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tvar scope = this;\n\n\tradiusTop = radiusTop !== undefined ? radiusTop : 1;\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 1;\n\theight = height || 1;\n\n\tradialSegments = Math.floor( radialSegments ) || 8;\n\theightSegments = Math.floor( heightSegments ) || 1;\n\n\topenEnded = openEnded !== undefined ? openEnded : false;\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0.0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar index = 0;\n\tvar indexArray = [];\n\tvar halfHeight = height / 2;\n\tvar groupStart = 0;\n\n\t// generate geometry\n\n\tgenerateTorso();\n\n\tif ( openEnded === false ) {\n\n\t\tif ( radiusTop > 0 ) generateCap( true );\n\t\tif ( radiusBottom > 0 ) generateCap( false );\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\tfunction generateTorso() {\n\n\t\tvar x, y;\n\t\tvar normal = new Vector3();\n\t\tvar vertex = new Vector3();\n\n\t\tvar groupCount = 0;\n\n\t\t// this will be used to calculate the normal\n\t\tvar slope = ( radiusBottom - radiusTop ) / height;\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( y = 0; y <= heightSegments; y ++ ) {\n\n\t\t\tvar indexRow = [];\n\n\t\t\tvar v = y / heightSegments;\n\n\t\t\t// calculate the radius of the current row\n\n\t\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n\t\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\tvar u = x / radialSegments;\n\n\t\t\t\tvar theta = u * thetaLength + thetaStart;\n\n\t\t\t\tvar sinTheta = Math.sin( theta );\n\t\t\t\tvar cosTheta = Math.cos( theta );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\tvertex.y = - v * height + halfHeight;\n\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.set( sinTheta, slope, cosTheta ).normalize();\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( u, 1 - v );\n\n\t\t\t\t// save index of vertex in respective row\n\n\t\t\t\tindexRow.push( index ++ );\n\n\t\t\t}\n\n\t\t\t// now save vertices of the row in our index array\n\n\t\t\tindexArray.push( indexRow );\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tfor ( y = 0; y < heightSegments; y ++ ) {\n\n\t\t\t\t// we use the index array to access the correct indices\n\n\t\t\t\tvar a = indexArray[ y ][ x ];\n\t\t\t\tvar b = indexArray[ y + 1 ][ x ];\n\t\t\t\tvar c = indexArray[ y + 1 ][ x + 1 ];\n\t\t\t\tvar d = indexArray[ y ][ x + 1 ];\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t// update group counter\n\n\t\t\t\tgroupCount += 6;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\tscope.addGroup( groupStart, groupCount, 0 );\n\n\t\t// calculate new start value for groups\n\n\t\tgroupStart += groupCount;\n\n\t}\n\n\tfunction generateCap( top ) {\n\n\t\tvar x, centerIndexStart, centerIndexEnd;\n\n\t\tvar uv = new Vector2();\n\t\tvar vertex = new Vector3();\n\n\t\tvar groupCount = 0;\n\n\t\tvar radius = ( top === true ) ? radiusTop : radiusBottom;\n\t\tvar sign = ( top === true ) ? 1 : - 1;\n\n\t\t// save the index of the first center vertex\n\t\tcenterIndexStart = index;\n\n\t\t// first we generate the center vertex data of the cap.\n\t\t// because the geometry needs one set of uvs per face,\n\t\t// we must generate a center vertex per face/segment\n\n\t\tfor ( x = 1; x <= radialSegments; x ++ ) {\n\n\t\t\t// vertex\n\n\t\t\tvertices.push( 0, halfHeight * sign, 0 );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( 0.5, 0.5 );\n\n\t\t\t// increase index\n\n\t\t\tindex ++;\n\n\t\t}\n\n\t\t// save the index of the last center vertex\n\n\t\tcenterIndexEnd = index;\n\n\t\t// now we generate the surrounding vertices, normals and uvs\n\n\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\tvar u = x / radialSegments;\n\t\t\tvar theta = u * thetaLength + thetaStart;\n\n\t\t\tvar cosTheta = Math.cos( theta );\n\t\t\tvar sinTheta = Math.sin( theta );\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = radius * sinTheta;\n\t\t\tvertex.y = halfHeight * sign;\n\t\t\tvertex.z = radius * cosTheta;\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t// uv\n\n\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\n\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t// increase index\n\n\t\t\tindex ++;\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tvar c = centerIndexStart + x;\n\t\t\tvar i = centerIndexEnd + x;\n\n\t\t\tif ( top === true ) {\n\n\t\t\t\t// face top\n\n\t\t\t\tindices.push( i, i + 1, c );\n\n\t\t\t} else {\n\n\t\t\t\t// face bottom\n\n\t\t\t\tindices.push( i + 1, i, c );\n\n\t\t\t}\n\n\t\t\tgroupCount += 3;\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\n\n\t\t// calculate new start value for groups\n\n\t\tgroupStart += groupCount;\n\n\t}\n\n}\n\nCylinderBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nCylinderBufferGeometry.prototype.constructor = CylinderBufferGeometry;\n\n\nexport { CylinderGeometry, CylinderBufferGeometry };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Clock( autoStart ) {\n\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\n\n\tthis.startTime = 0;\n\tthis.oldTime = 0;\n\tthis.elapsedTime = 0;\n\n\tthis.running = false;\n\n}\n\nObject.assign( Clock.prototype, {\n\n\tstart: function () {\n\n\t\tthis.startTime = ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\n\n\t\tthis.oldTime = this.startTime;\n\t\tthis.elapsedTime = 0;\n\t\tthis.running = true;\n\n\t},\n\n\tstop: function () {\n\n\t\tthis.getElapsedTime();\n\t\tthis.running = false;\n\t\tthis.autoStart = false;\n\n\t},\n\n\tgetElapsedTime: function () {\n\n\t\tthis.getDelta();\n\t\treturn this.elapsedTime;\n\n\t},\n\n\tgetDelta: function () {\n\n\t\tvar diff = 0;\n\n\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\tthis.start();\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tif ( this.running ) {\n\n\t\t\tvar newTime = ( typeof performance === 'undefined' ? Date : performance ).now();\n\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\n\t\t\tthis.oldTime = newTime;\n\n\t\t\tthis.elapsedTime += diff;\n\n\t\t}\n\n\t\treturn diff;\n\n\t}\n\n} );\n\n\nexport { Clock };\n","import { Ray } from '../math/Ray.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author bhouston / http://clara.io/\n * @author stephomi / http://stephaneginier.com/\n */\n\nfunction Raycaster( origin, direction, near, far ) {\n\n\tthis.ray = new Ray( origin, direction );\n\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\tthis.near = near || 0;\n\tthis.far = far || Infinity;\n\n\tthis.params = {\n\t\tMesh: {},\n\t\tLine: {},\n\t\tLOD: {},\n\t\tPoints: { threshold: 1 },\n\t\tSprite: {}\n\t};\n\n\tObject.defineProperties( this.params, {\n\t\tPointCloud: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\n\t\t\t\treturn this.Points;\n\n\t\t\t}\n\t\t}\n\t} );\n\n}\n\nfunction ascSort( a, b ) {\n\n\treturn a.distance - b.distance;\n\n}\n\nfunction intersectObject( object, raycaster, intersects, recursive ) {\n\n\tif ( object.visible === false ) return;\n\n\tobject.raycast( raycaster, intersects );\n\n\tif ( recursive === true ) {\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t}\n\n\t}\n\n}\n\nObject.assign( Raycaster.prototype, {\n\n\tlinePrecision: 1,\n\n\tset: function ( origin, direction ) {\n\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.ray.set( origin, direction );\n\n\t},\n\n\tsetFromCamera: function ( coords, camera ) {\n\n\t\tif ( ( camera && camera.isPerspectiveCamera ) ) {\n\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\n\n\t\t} else if ( ( camera && camera.isOrthographicCamera ) ) {\n\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\n\n\t\t}\n\n\t},\n\n\tintersectObject: function ( object, recursive, optionalTarget ) {\n\n\t\tvar intersects = optionalTarget || [];\n\n\t\tintersectObject( object, this, intersects, recursive );\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t},\n\n\tintersectObjects: function ( objects, recursive, optionalTarget ) {\n\n\t\tvar intersects = optionalTarget || [];\n\n\t\tif ( Array.isArray( objects ) === false ) {\n\n\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\n\t\t\treturn intersects;\n\n\t\t}\n\n\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t}\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n} );\n\n\nexport { Raycaster };\n","import { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *  linecap: \"round\",\n *  linejoin: \"round\"\n * }\n */\n\nfunction LineBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'LineBasicMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\tthis.linecap = 'round';\n\tthis.linejoin = 'round';\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nLineBasicMaterial.prototype = Object.create( Material.prototype );\nLineBasicMaterial.prototype.constructor = LineBasicMaterial;\n\nLineBasicMaterial.prototype.isLineBasicMaterial = true;\n\nLineBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.linewidth = source.linewidth;\n\tthis.linecap = source.linecap;\n\tthis.linejoin = source.linejoin;\n\n\treturn this;\n\n};\n\n\nexport { LineBasicMaterial };\n","import { Line } from './Line.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LineSegments( geometry, material ) {\n\n\tLine.call( this, geometry, material );\n\n\tthis.type = 'LineSegments';\n\n}\n\nLineSegments.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\tconstructor: LineSegments,\n\n\tisLineSegments: true,\n\n\tcomputeLineDistances: ( function () {\n\n\t\tvar start = new Vector3();\n\t\tvar end = new Vector3();\n\n\t\treturn function computeLineDistances() {\n\n\t\t\tvar geometry = this.geometry;\n\n\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\t// we assume non-indexed geometry\n\n\t\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\t\tvar positionAttribute = geometry.attributes.position;\n\t\t\t\t\tvar lineDistances = [];\n\n\t\t\t\t\tfor ( var i = 0, l = positionAttribute.count; i < l; i += 2 ) {\n\n\t\t\t\t\t\tstart.fromBufferAttribute( positionAttribute, i );\n\t\t\t\t\t\tend.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + start.distanceTo( end );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgeometry.addAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t\t}\n\n\t\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\tvar lineDistances = geometry.lineDistances;\n\n\t\t\t\tfor ( var i = 0, l = vertices.length; i < l; i += 2 ) {\n\n\t\t\t\t\tstart.copy( vertices[ i ] );\n\t\t\t\t\tend.copy( vertices[ i + 1 ] );\n\n\t\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + start.distanceTo( end );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}() )\n\n} );\n\n\nexport { LineSegments };\n","import { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  color: <hex>,\n *  roughness: <float>,\n *  metalness: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  roughnessMap: new THREE.Texture( <Image> ),\n *\n *  metalnessMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  envMapIntensity: <float>\n *\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshStandardMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.type = 'MeshStandardMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.roughness = 0.5;\n\tthis.metalness = 0.5;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.roughnessMap = null;\n\n\tthis.metalnessMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.envMapIntensity = 1.0;\n\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshStandardMaterial.prototype = Object.create( Material.prototype );\nMeshStandardMaterial.prototype.constructor = MeshStandardMaterial;\n\nMeshStandardMaterial.prototype.isMeshStandardMaterial = true;\n\nMeshStandardMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.color.copy( source.color );\n\tthis.roughness = source.roughness;\n\tthis.metalness = source.metalness;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.roughnessMap = source.roughnessMap;\n\n\tthis.metalnessMap = source.metalnessMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.envMapIntensity = source.envMapIntensity;\n\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshStandardMaterial };\n","import { MeshStandardMaterial } from './MeshStandardMaterial.js';\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  reflectivity: <float>\n * }\n */\n\nfunction MeshPhysicalMaterial( parameters ) {\n\n\tMeshStandardMaterial.call( this );\n\n\tthis.defines = { 'PHYSICAL': '' };\n\n\tthis.type = 'MeshPhysicalMaterial';\n\n\tthis.reflectivity = 0.5; // maps to F0 = 0.04\n\n\tthis.clearCoat = 0.0;\n\tthis.clearCoatRoughness = 0.0;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhysicalMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\nMeshPhysicalMaterial.prototype.constructor = MeshPhysicalMaterial;\n\nMeshPhysicalMaterial.prototype.isMeshPhysicalMaterial = true;\n\nMeshPhysicalMaterial.prototype.copy = function ( source ) {\n\n\tMeshStandardMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'PHYSICAL': '' };\n\n\tthis.reflectivity = source.reflectivity;\n\n\tthis.clearCoat = source.clearCoat;\n\tthis.clearCoatRoughness = source.clearCoatRoughness;\n\n\treturn this;\n\n};\n\n\nexport { MeshPhysicalMaterial };\n","/**\n * @author mrdoob / http://mrdoob.com/\n *\n * parameters = {\n *  color: <THREE.Color>\n * }\n */\n\nimport { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\nfunction ShadowMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShadowMaterial';\n\n\tthis.color = new Color( 0x000000 );\n\tthis.transparent = true;\n\n\tthis.setValues( parameters );\n\n}\n\nShadowMaterial.prototype = Object.create( Material.prototype );\nShadowMaterial.prototype.constructor = ShadowMaterial;\n\nShadowMaterial.prototype.isShadowMaterial = true;\n\nShadowMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\treturn this;\n\n};\n\n\nexport { ShadowMaterial };\n","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *\n *  scale: <float>,\n *  dashSize: <float>,\n *  gapSize: <float>\n * }\n */\n\nimport { LineBasicMaterial } from './LineBasicMaterial.js';\n\nfunction LineDashedMaterial( parameters ) {\n\n\tLineBasicMaterial.call( this );\n\n\tthis.type = 'LineDashedMaterial';\n\n\tthis.scale = 1;\n\tthis.dashSize = 3;\n\tthis.gapSize = 1;\n\n\tthis.setValues( parameters );\n\n}\n\nLineDashedMaterial.prototype = Object.create( LineBasicMaterial.prototype );\nLineDashedMaterial.prototype.constructor = LineDashedMaterial;\n\nLineDashedMaterial.prototype.isLineDashedMaterial = true;\n\nLineDashedMaterial.prototype.copy = function ( source ) {\n\n\tLineBasicMaterial.prototype.copy.call( this, source );\n\n\tthis.scale = source.scale;\n\tthis.dashSize = source.dashSize;\n\tthis.gapSize = source.gapSize;\n\n\treturn this;\n\n};\n\n\nexport { LineDashedMaterial };\n","import { Object3D } from '../core/Object3D.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Light( color, intensity ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Light';\n\n\tthis.color = new Color( color );\n\tthis.intensity = intensity !== undefined ? intensity : 1;\n\n\tthis.receiveShadow = undefined;\n\n}\n\nLight.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Light,\n\n\tisLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { Light };\n","import { Matrix4 } from '../math/Matrix4.js';\nimport { Vector2 } from '../math/Vector2.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LightShadow( camera ) {\n\n\tthis.camera = camera;\n\n\tthis.bias = 0;\n\tthis.normalOffset = 1;\n\tthis.radius = 1;\n\n\tthis.mapSize = new Vector2( 512, 512 );\n\n\tthis.map = null;\n\tthis.matrix = new Matrix4();\n\n}\n\nObject.assign( LightShadow.prototype, {\n\n\tcopy: function ( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n} );\n\n\nexport { LightShadow };\n","import { LightShadow } from './LightShadow.js';\nimport { OrthographicCamera } from '../cameras/OrthographicCamera.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction DirectionalLightShadow( ) {\n\n\tLightShadow.call( this, new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n}\n\nDirectionalLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: DirectionalLightShadow\n\n} );\n\n\nexport { DirectionalLightShadow };\n","import { Light } from './Light.js';\nimport { DirectionalLightShadow } from './DirectionalLightShadow.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction DirectionalLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'DirectionalLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tthis.shadow = new DirectionalLightShadow();\n\n}\n\nDirectionalLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: DirectionalLight,\n\n\tisDirectionalLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { DirectionalLight };\n","import { Light } from './Light.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction AmbientLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'AmbientLight';\n\n\tthis.castShadow = undefined;\n\n}\n\nAmbientLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: AmbientLight,\n\n\tisAmbientLight: true\n\n} );\n\n\nexport { AmbientLight };\n","import { Light } from './Light.js';\nimport { Color } from '../math/Color.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction HemisphereLight( skyColor, groundColor, intensity ) {\n\n\tLight.call( this, skyColor, intensity );\n\n\tthis.type = 'HemisphereLight';\n\n\tthis.castShadow = undefined;\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.groundColor = new Color( groundColor );\n\n}\n\nHemisphereLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: HemisphereLight,\n\n\tisHemisphereLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.groundColor.copy( source.groundColor );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { HemisphereLight };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\n\nexport { Cache };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LoadingManager( onLoad, onProgress, onError ) {\n\n\tvar scope = this;\n\n\tvar isLoading = false;\n\tvar itemsLoaded = 0;\n\tvar itemsTotal = 0;\n\tvar urlModifier = undefined;\n\n\tthis.onStart = undefined;\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\titemsTotal ++;\n\n\t\tif ( isLoading === false ) {\n\n\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tisLoading = true;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\titemsLoaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t}\n\n\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\tisLoading = false;\n\n\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\tscope.onLoad();\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.itemError = function ( url ) {\n\n\t\tif ( scope.onError !== undefined ) {\n\n\t\t\tscope.onError( url );\n\n\t\t}\n\n\t};\n\n\tthis.resolveURL = function ( url ) {\n\n\t\tif ( urlModifier ) {\n\n\t\t\treturn urlModifier( url );\n\n\t\t}\n\n\t\treturn url;\n\n\t};\n\n\tthis.setURLModifier = function ( transform ) {\n\n\t\turlModifier = transform;\n\t\treturn this;\n\n\t};\n\n}\n\nvar DefaultLoadingManager = new LoadingManager();\n\n\nexport { DefaultLoadingManager, LoadingManager };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Cache } from './Cache.js';\nimport { DefaultLoadingManager } from './LoadingManager.js';\n\n\nfunction ImageLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( ImageLoader.prototype, {\n\n\tcrossOrigin: 'Anonymous',\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tvar scope = this;\n\n\t\tvar cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tvar image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\timage.addEventListener( 'load', function () {\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}, false );\n\n\t\t/*\n\t\timage.addEventListener( 'progress', function ( event ) {\n\n\t\t\tif ( onProgress ) onProgress( event );\n\n\t\t}, false );\n\t\t*/\n\n\t\timage.addEventListener( 'error', function ( event ) {\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemEnd( url );\n\t\t\tscope.manager.itemError( url );\n\n\t\t}, false );\n\n\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { ImageLoader };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { RGBAFormat, RGBFormat } from '../constants.js';\nimport { ImageLoader } from './ImageLoader.js';\nimport { Texture } from '../textures/Texture.js';\nimport { DefaultLoadingManager } from './LoadingManager.js';\n\n\nfunction TextureLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( TextureLoader.prototype, {\n\n\tcrossOrigin: 'Anonymous',\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar texture = new Texture();\n\n\t\tvar loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\n\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\t\t\tvar isJPEG = url.search( /\\.(jpg|jpeg)$/ ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { TextureLoader };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { ImageLoader } from './ImageLoader.js';\nimport { CubeTexture } from '../textures/CubeTexture.js';\nimport { DefaultLoadingManager } from './LoadingManager.js';\n\n\nfunction CubeTextureLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( CubeTextureLoader.prototype, {\n\n\tcrossOrigin: 'Anonymous',\n\n\tload: function ( urls, onLoad, onProgress, onError ) {\n\n\t\tvar texture = new CubeTexture();\n\n\t\tvar loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tvar loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( urls[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded ++;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, undefined, onError );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < urls.length; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { CubeTextureLoader };\n","import { _Math } from '../../math/Math.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Extensible curve object\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\n/**************************************************************\n *\tAbstract Curve base class\n **************************************************************/\n\nfunction Curve() {\n\n\tthis.type = 'Curve';\n\n\tthis.arcLengthDivisions = 200;\n\n}\n\nObject.assign( Curve.prototype, {\n\n\t// Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint: function ( /* t, optionalTarget */ ) {\n\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\n\t\treturn null;\n\n\t},\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt: function ( u, optionalTarget ) {\n\n\t\tvar t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t, optionalTarget );\n\n\t},\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tvar points = [];\n\n\t\tfor ( var d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tvar points = [];\n\n\t\tfor ( var d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get total curve arc length\n\n\tgetLength: function () {\n\n\t\tvar lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t},\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = this.arcLengthDivisions;\n\n\t\tif ( this.cacheArcLengths &&\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\n\t\t\t! this.needsUpdate ) {\n\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tvar cache = [];\n\t\tvar current, last = this.getPoint( 0 );\n\t\tvar p, sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\n\n\t},\n\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t},\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping: function ( u, distance ) {\n\n\t\tvar arcLengths = this.getLengths();\n\n\t\tvar i = 0, il = arcLengths.length;\n\n\t\tvar targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tvar low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\treturn i / ( il - 1 );\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tvar lengthBefore = arcLengths[ i ];\n\t\tvar lengthAfter = arcLengths[ i + 1 ];\n\n\t\tvar segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tvar segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tvar t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t},\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent: function ( t ) {\n\n\t\tvar delta = 0.0001;\n\t\tvar t1 = t - delta;\n\t\tvar t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tvar pt1 = this.getPoint( t1 );\n\t\tvar pt2 = this.getPoint( t2 );\n\n\t\tvar vec = pt2.clone().sub( pt1 );\n\t\treturn vec.normalize();\n\n\t},\n\n\tgetTangentAt: function ( u ) {\n\n\t\tvar t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t );\n\n\t},\n\n\tcomputeFrenetFrames: function ( segments, closed ) {\n\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\tvar normal = new Vector3();\n\n\t\tvar tangents = [];\n\t\tvar normals = [];\n\t\tvar binormals = [];\n\n\t\tvar vec = new Vector3();\n\t\tvar mat = new Matrix4();\n\n\t\tvar i, u, theta;\n\n\t\t// compute the tangent vectors for each segment on the curve\n\n\t\tfor ( i = 0; i <= segments; i ++ ) {\n\n\t\t\tu = i / segments;\n\n\t\t\ttangents[ i ] = this.getTangentAt( u );\n\t\t\ttangents[ i ].normalize();\n\n\t\t}\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the minimum tangent xyz component\n\n\t\tnormals[ 0 ] = new Vector3();\n\t\tbinormals[ 0 ] = new Vector3();\n\t\tvar min = Number.MAX_VALUE;\n\t\tvar tx = Math.abs( tangents[ 0 ].x );\n\t\tvar ty = Math.abs( tangents[ 0 ].y );\n\t\tvar tz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= min ) {\n\n\t\t\tmin = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= min ) {\n\n\t\t\tmin = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= min ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\tvec.normalize();\n\n\t\t\t\ttheta = Math.acos( _Math.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t}\n\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\tif ( closed === true ) {\n\n\t\t\ttheta = Math.acos( _Math.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\ttheta /= segments;\n\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\ttheta = - theta;\n\n\t\t\t}\n\n\t\t\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t// twist a little...\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttangents: tangents,\n\t\t\tnormals: normals,\n\t\t\tbinormals: binormals\n\t\t};\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Curve',\n\t\t\t\tgenerator: 'Curve.toJSON'\n\t\t\t}\n\t\t};\n\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\n\t\tdata.type = this.type;\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Curve };\n","import { Curve } from '../core/Curve.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\n\nfunction EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'EllipseCurve';\n\n\tthis.aX = aX || 0;\n\tthis.aY = aY || 0;\n\n\tthis.xRadius = xRadius || 1;\n\tthis.yRadius = yRadius || 1;\n\n\tthis.aStartAngle = aStartAngle || 0;\n\tthis.aEndAngle = aEndAngle || 2 * Math.PI;\n\n\tthis.aClockwise = aClockwise || false;\n\n\tthis.aRotation = aRotation || 0;\n\n}\n\nEllipseCurve.prototype = Object.create( Curve.prototype );\nEllipseCurve.prototype.constructor = EllipseCurve;\n\nEllipseCurve.prototype.isEllipseCurve = true;\n\nEllipseCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar twoPi = Math.PI * 2;\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\n\tvar samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\n\n\t// ensures that deltaAngle is 0 .. 2 PI\n\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\n\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\n\n\tif ( deltaAngle < Number.EPSILON ) {\n\n\t\tif ( samePoints ) {\n\n\t\t\tdeltaAngle = 0;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = twoPi;\n\n\t\t}\n\n\t}\n\n\tif ( this.aClockwise === true && ! samePoints ) {\n\n\t\tif ( deltaAngle === twoPi ) {\n\n\t\t\tdeltaAngle = - twoPi;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = deltaAngle - twoPi;\n\n\t\t}\n\n\t}\n\n\tvar angle = this.aStartAngle + t * deltaAngle;\n\tvar x = this.aX + this.xRadius * Math.cos( angle );\n\tvar y = this.aY + this.yRadius * Math.sin( angle );\n\n\tif ( this.aRotation !== 0 ) {\n\n\t\tvar cos = Math.cos( this.aRotation );\n\t\tvar sin = Math.sin( this.aRotation );\n\n\t\tvar tx = x - this.aX;\n\t\tvar ty = y - this.aY;\n\n\t\t// Rotate the point about the center of the ellipse.\n\t\tx = tx * cos - ty * sin + this.aX;\n\t\ty = tx * sin + ty * cos + this.aY;\n\n\t}\n\n\treturn point.set( x, y );\n\n};\n\nEllipseCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.aX = source.aX;\n\tthis.aY = source.aY;\n\n\tthis.xRadius = source.xRadius;\n\tthis.yRadius = source.yRadius;\n\n\tthis.aStartAngle = source.aStartAngle;\n\tthis.aEndAngle = source.aEndAngle;\n\n\tthis.aClockwise = source.aClockwise;\n\n\tthis.aRotation = source.aRotation;\n\n\treturn this;\n\n};\n\n\nEllipseCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.aX = this.aX;\n\tdata.aY = this.aY;\n\n\tdata.xRadius = this.xRadius;\n\tdata.yRadius = this.yRadius;\n\n\tdata.aStartAngle = this.aStartAngle;\n\tdata.aEndAngle = this.aEndAngle;\n\n\tdata.aClockwise = this.aClockwise;\n\n\tdata.aRotation = this.aRotation;\n\n\treturn data;\n\n};\n\nEllipseCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.aX = json.aX;\n\tthis.aY = json.aY;\n\n\tthis.xRadius = json.xRadius;\n\tthis.yRadius = json.yRadius;\n\n\tthis.aStartAngle = json.aStartAngle;\n\tthis.aEndAngle = json.aEndAngle;\n\n\tthis.aClockwise = json.aClockwise;\n\n\tthis.aRotation = json.aRotation;\n\n\treturn this;\n\n};\n\n\nexport { EllipseCurve };\n","import { EllipseCurve } from './EllipseCurve.js';\n\n\nfunction ArcCurve( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\tEllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\tthis.type = 'ArcCurve';\n\n}\n\nArcCurve.prototype = Object.create( EllipseCurve.prototype );\nArcCurve.prototype.constructor = ArcCurve;\n\nArcCurve.prototype.isArcCurve = true;\n\n\nexport { ArcCurve };\n","import { Vector3 } from '../../math/Vector3.js';\nimport { Curve } from '../core/Curve.js';\n\n/**\n * @author zz85 https://github.com/zz85\n *\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n\n\tvar c0 = 0, c1 = 0, c2 = 0, c3 = 0;\n\n\t/*\n\t * Compute coefficients for a cubic polynomial\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t * such that\n\t *   p(0) = x0, p(1) = x1\n\t *  and\n\t *   p'(0) = t0, p'(1) = t1.\n\t */\n\tfunction init( x0, x1, t0, t1 ) {\n\n\t\tc0 = x0;\n\t\tc1 = t0;\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n\t}\n\n\treturn {\n\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\n\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\n\n\t\t},\n\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\n\n\t\t\t// compute tangents when parameterized in [t1,t2]\n\t\t\tvar t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\n\t\t\tvar t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\n\n\t\t\t// rescale tangents for parametrization in [0,1]\n\t\t\tt1 *= dt1;\n\t\t\tt2 *= dt1;\n\n\t\t\tinit( x1, x2, t1, t2 );\n\n\t\t},\n\n\t\tcalc: function ( t ) {\n\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t2 * t;\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\n\n\t\t}\n\n\t};\n\n}\n\n//\n\nvar tmp = new Vector3();\nvar px = new CubicPoly(), py = new CubicPoly(), pz = new CubicPoly();\n\nfunction CatmullRomCurve3( points, closed, curveType, tension ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CatmullRomCurve3';\n\n\tthis.points = points || [];\n\tthis.closed = closed || false;\n\tthis.curveType = curveType || 'centripetal';\n\tthis.tension = tension || 0.5;\n\n}\n\nCatmullRomCurve3.prototype = Object.create( Curve.prototype );\nCatmullRomCurve3.prototype.constructor = CatmullRomCurve3;\n\nCatmullRomCurve3.prototype.isCatmullRomCurve3 = true;\n\nCatmullRomCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tvar points = this.points;\n\tvar l = points.length;\n\n\tvar p = ( l - ( this.closed ? 0 : 1 ) ) * t;\n\tvar intPoint = Math.floor( p );\n\tvar weight = p - intPoint;\n\n\tif ( this.closed ) {\n\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\n\n\t} else if ( weight === 0 && intPoint === l - 1 ) {\n\n\t\tintPoint = l - 2;\n\t\tweight = 1;\n\n\t}\n\n\tvar p0, p1, p2, p3; // 4 points\n\n\tif ( this.closed || intPoint > 0 ) {\n\n\t\tp0 = points[ ( intPoint - 1 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate first point\n\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\n\t\tp0 = tmp;\n\n\t}\n\n\tp1 = points[ intPoint % l ];\n\tp2 = points[ ( intPoint + 1 ) % l ];\n\n\tif ( this.closed || intPoint + 2 < l ) {\n\n\t\tp3 = points[ ( intPoint + 2 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate last point\n\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\n\t\tp3 = tmp;\n\n\t}\n\n\tif ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\n\n\t\t// init Centripetal / Chordal Catmull-Rom\n\t\tvar pow = this.curveType === 'chordal' ? 0.5 : 0.25;\n\t\tvar dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\n\t\tvar dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\n\t\tvar dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\n\n\t\t// safety check for repeated points\n\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\n\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\n\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\n\n\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\n\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\n\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\n\n\t} else if ( this.curveType === 'catmullrom' ) {\n\n\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\n\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\n\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\n\n\t}\n\n\tpoint.set(\n\t\tpx.calc( weight ),\n\t\tpy.calc( weight ),\n\t\tpz.calc( weight )\n\t);\n\n\treturn point;\n\n};\n\nCatmullRomCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tvar point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\tthis.closed = source.closed;\n\tthis.curveType = source.curveType;\n\tthis.tension = source.tension;\n\n\treturn this;\n\n};\n\nCatmullRomCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( var i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tvar point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\tdata.closed = this.closed;\n\tdata.curveType = this.curveType;\n\tdata.tension = this.tension;\n\n\treturn data;\n\n};\n\nCatmullRomCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tvar point = json.points[ i ];\n\t\tthis.points.push( new Vector3().fromArray( point ) );\n\n\t}\n\n\tthis.closed = json.closed;\n\tthis.curveType = json.curveType;\n\tthis.tension = json.tension;\n\n\treturn this;\n\n};\n\n\nexport { CatmullRomCurve3 };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Bezier Curves formulas obtained from\n * http://en.wikipedia.org/wiki/Bzier_curve\n */\n\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\n\n\tvar v0 = ( p2 - p0 ) * 0.5;\n\tvar v1 = ( p3 - p1 ) * 0.5;\n\tvar t2 = t * t;\n\tvar t3 = t * t2;\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n}\n\n//\n\nfunction QuadraticBezierP0( t, p ) {\n\n\tvar k = 1 - t;\n\treturn k * k * p;\n\n}\n\nfunction QuadraticBezierP1( t, p ) {\n\n\treturn 2 * ( 1 - t ) * t * p;\n\n}\n\nfunction QuadraticBezierP2( t, p ) {\n\n\treturn t * t * p;\n\n}\n\nfunction QuadraticBezier( t, p0, p1, p2 ) {\n\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\n\t\tQuadraticBezierP2( t, p2 );\n\n}\n\n//\n\nfunction CubicBezierP0( t, p ) {\n\n\tvar k = 1 - t;\n\treturn k * k * k * p;\n\n}\n\nfunction CubicBezierP1( t, p ) {\n\n\tvar k = 1 - t;\n\treturn 3 * k * k * t * p;\n\n}\n\nfunction CubicBezierP2( t, p ) {\n\n\treturn 3 * ( 1 - t ) * t * t * p;\n\n}\n\nfunction CubicBezierP3( t, p ) {\n\n\treturn t * t * t * p;\n\n}\n\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\n\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\n\t\tCubicBezierP3( t, p3 );\n\n}\n\nexport { CatmullRom, QuadraticBezier, CubicBezier };\n","import { Curve } from '../core/Curve.js';\nimport { CubicBezier } from '../core/Interpolations.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\n\nfunction CubicBezierCurve( v0, v1, v2, v3 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve';\n\n\tthis.v0 = v0 || new Vector2();\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\tthis.v3 = v3 || new Vector2();\n\n}\n\nCubicBezierCurve.prototype = Object.create( Curve.prototype );\nCubicBezierCurve.prototype.constructor = CubicBezierCurve;\n\nCubicBezierCurve.prototype.isCubicBezierCurve = true;\n\nCubicBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\n\nexport { CubicBezierCurve };\n","import { Curve } from '../core/Curve.js';\nimport { CubicBezier } from '../core/Interpolations.js';\nimport { Vector3 } from '../../math/Vector3.js';\n\n\nfunction CubicBezierCurve3( v0, v1, v2, v3 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve3';\n\n\tthis.v0 = v0 || new Vector3();\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\tthis.v3 = v3 || new Vector3();\n\n}\n\nCubicBezierCurve3.prototype = Object.create( Curve.prototype );\nCubicBezierCurve3.prototype.constructor = CubicBezierCurve3;\n\nCubicBezierCurve3.prototype.isCubicBezierCurve3 = true;\n\nCubicBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\n\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\n\nexport { CubicBezierCurve3 };\n","import { Vector2 } from '../../math/Vector2.js';\nimport { Curve } from '../core/Curve.js';\n\n\nfunction LineCurve( v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve';\n\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\n}\n\nLineCurve.prototype = Object.create( Curve.prototype );\nLineCurve.prototype.constructor = LineCurve;\n\nLineCurve.prototype.isLineCurve = true;\n\nLineCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve.prototype.getTangent = function ( /* t */ ) {\n\n\tvar tangent = this.v2.clone().sub( this.v1 );\n\n\treturn tangent.normalize();\n\n};\n\nLineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { LineCurve };\n","import { Vector3 } from '../../math/Vector3.js';\nimport { Curve } from '../core/Curve.js';\n\n\nfunction LineCurve3( v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve3';\n\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\n}\n\nLineCurve3.prototype = Object.create( Curve.prototype );\nLineCurve3.prototype.constructor = LineCurve3;\n\nLineCurve3.prototype.isLineCurve3 = true;\n\nLineCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve3.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { LineCurve3 };\n","import { Curve } from '../core/Curve.js';\nimport { QuadraticBezier } from '../core/Interpolations.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\n\nfunction QuadraticBezierCurve( v0, v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve';\n\n\tthis.v0 = v0 || new Vector2();\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\n}\n\nQuadraticBezierCurve.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve.prototype.constructor = QuadraticBezierCurve;\n\nQuadraticBezierCurve.prototype.isQuadraticBezierCurve = true;\n\nQuadraticBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { QuadraticBezierCurve };\n","import { Curve } from '../core/Curve.js';\nimport { QuadraticBezier } from '../core/Interpolations.js';\nimport { Vector3 } from '../../math/Vector3.js';\n\n\nfunction QuadraticBezierCurve3( v0, v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve3';\n\n\tthis.v0 = v0 || new Vector3();\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\n}\n\nQuadraticBezierCurve3.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve3.prototype.constructor = QuadraticBezierCurve3;\n\nQuadraticBezierCurve3.prototype.isQuadraticBezierCurve3 = true;\n\nQuadraticBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\n\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { QuadraticBezierCurve3 };\n","import { Curve } from '../core/Curve.js';\nimport { CatmullRom } from '../core/Interpolations.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\n\nfunction SplineCurve( points /* array of Vector2 */ ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'SplineCurve';\n\n\tthis.points = points || [];\n\n}\n\nSplineCurve.prototype = Object.create( Curve.prototype );\nSplineCurve.prototype.constructor = SplineCurve;\n\nSplineCurve.prototype.isSplineCurve = true;\n\nSplineCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar points = this.points;\n\tvar p = ( points.length - 1 ) * t;\n\n\tvar intPoint = Math.floor( p );\n\tvar weight = p - intPoint;\n\n\tvar p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n\tvar p1 = points[ intPoint ];\n\tvar p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\tvar p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\tpoint.set(\n\t\tCatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\n\t\tCatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\n\t);\n\n\treturn point;\n\n};\n\nSplineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tvar point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\treturn this;\n\n};\n\nSplineCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( var i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tvar point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\treturn data;\n\n};\n\nSplineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tvar point = json.points[ i ];\n\t\tthis.points.push( new Vector2().fromArray( point ) );\n\n\t}\n\n\treturn this;\n\n};\n\n\nexport { SplineCurve };\n","import { Curve } from './Curve.js';\nimport * as Curves from '../curves/Curves.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n **/\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nfunction CurvePath() {\n\n\tCurve.call( this );\n\n\tthis.type = 'CurvePath';\n\n\tthis.curves = [];\n\tthis.autoClose = false; // Automatically closes the path\n\n}\n\nCurvePath.prototype = Object.assign( Object.create( Curve.prototype ), {\n\n\tconstructor: CurvePath,\n\n\tadd: function ( curve ) {\n\n\t\tthis.curves.push( curve );\n\n\t},\n\n\tclosePath: function () {\n\n\t\t// Add a line curve if start and end of lines are not connected\n\t\tvar startPoint = this.curves[ 0 ].getPoint( 0 );\n\t\tvar endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\n\n\t\tif ( ! startPoint.equals( endPoint ) ) {\n\n\t\t\tthis.curves.push( new Curves[ 'LineCurve' ]( endPoint, startPoint ) );\n\n\t\t}\n\n\t},\n\n\t// To get accurate point with reference to\n\t// entire path distance at time t,\n\t// following has to be done:\n\n\t// 1. Length of each sub path have to be known\n\t// 2. Locate and identify type of curve\n\t// 3. Get t for the curve\n\t// 4. Return curve.getPointAt(t')\n\n\tgetPoint: function ( t ) {\n\n\t\tvar d = t * this.getLength();\n\t\tvar curveLengths = this.getCurveLengths();\n\t\tvar i = 0;\n\n\t\t// To think about boundaries points.\n\n\t\twhile ( i < curveLengths.length ) {\n\n\t\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\t\tvar diff = curveLengths[ i ] - d;\n\t\t\t\tvar curve = this.curves[ i ];\n\n\t\t\t\tvar segmentLength = curve.getLength();\n\t\t\t\tvar u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n\t\t\t\treturn curve.getPointAt( u );\n\n\t\t\t}\n\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn null;\n\n\t\t// loop where sum != 0, sum > d , sum+1 <d\n\n\t},\n\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n\t// getPoint() depends on getLength\n\n\tgetLength: function () {\n\n\t\tvar lens = this.getCurveLengths();\n\t\treturn lens[ lens.length - 1 ];\n\n\t},\n\n\t// cacheLengths must be recalculated.\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.cacheLengths = null;\n\t\tthis.getCurveLengths();\n\n\t},\n\n\t// Compute lengths and cache them\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\n\n\tgetCurveLengths: function () {\n\n\t\t// We use cache values if curves and cache array are same length\n\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\n\n\t\t\treturn this.cacheLengths;\n\n\t\t}\n\n\t\t// Get length of sub-curve\n\t\t// Push sums into cached array\n\n\t\tvar lengths = [], sums = 0;\n\n\t\tfor ( var i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tsums += this.curves[ i ].getLength();\n\t\t\tlengths.push( sums );\n\n\t\t}\n\n\t\tthis.cacheLengths = lengths;\n\n\t\treturn lengths;\n\n\t},\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 40;\n\n\t\tvar points = [];\n\n\t\tfor ( var i = 0; i <= divisions; i ++ ) {\n\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t}\n\n\t\tif ( this.autoClose ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tgetPoints: function ( divisions ) {\n\n\t\tdivisions = divisions || 12;\n\n\t\tvar points = [], last;\n\n\t\tfor ( var i = 0, curves = this.curves; i < curves.length; i ++ ) {\n\n\t\t\tvar curve = curves[ i ];\n\t\t\tvar resolution = ( curve && curve.isEllipseCurve ) ? divisions * 2\n\t\t\t\t: ( curve && curve.isLineCurve ) ? 1\n\t\t\t\t\t: ( curve && curve.isSplineCurve ) ? divisions * curve.points.length\n\t\t\t\t\t\t: divisions;\n\n\t\t\tvar pts = curve.getPoints( resolution );\n\n\t\t\tfor ( var j = 0; j < pts.length; j ++ ) {\n\n\t\t\t\tvar point = pts[ j ];\n\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\n\n\t\t\t\tpoints.push( point );\n\t\t\t\tlast = point;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurve.prototype.copy.call( this, source );\n\n\t\tthis.curves = [];\n\n\t\tfor ( var i = 0, l = source.curves.length; i < l; i ++ ) {\n\n\t\t\tvar curve = source.curves[ i ];\n\n\t\t\tthis.curves.push( curve.clone() );\n\n\t\t}\n\n\t\tthis.autoClose = source.autoClose;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = Curve.prototype.toJSON.call( this );\n\n\t\tdata.autoClose = this.autoClose;\n\t\tdata.curves = [];\n\n\t\tfor ( var i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tvar curve = this.curves[ i ];\n\t\t\tdata.curves.push( curve.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurve.prototype.fromJSON.call( this, json );\n\n\t\tthis.autoClose = json.autoClose;\n\t\tthis.curves = [];\n\n\t\tfor ( var i = 0, l = json.curves.length; i < l; i ++ ) {\n\n\t\t\tvar curve = json.curves[ i ];\n\t\t\tthis.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { CurvePath };\n","import { Vector2 } from '../../math/Vector2.js';\nimport { CurvePath } from './CurvePath.js';\nimport { EllipseCurve } from '../curves/EllipseCurve.js';\nimport { SplineCurve } from '../curves/SplineCurve.js';\nimport { CubicBezierCurve } from '../curves/CubicBezierCurve.js';\nimport { QuadraticBezierCurve } from '../curves/QuadraticBezierCurve.js';\nimport { LineCurve } from '../curves/LineCurve.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Creates free form 2d path using series of points, lines or curves.\n **/\n\nfunction Path( points ) {\n\n\tCurvePath.call( this );\n\n\tthis.type = 'Path';\n\n\tthis.currentPoint = new Vector2();\n\n\tif ( points ) {\n\n\t\tthis.setFromPoints( points );\n\n\t}\n\n}\n\nPath.prototype = Object.assign( Object.create( CurvePath.prototype ), {\n\n\tconstructor: Path,\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.moveTo( points[ 0 ].x, points[ 0 ].y );\n\n\t\tfor ( var i = 1, l = points.length; i < l; i ++ ) {\n\n\t\t\tthis.lineTo( points[ i ].x, points[ i ].y );\n\n\t\t}\n\n\t},\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tvar curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( x, y );\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tvar curve = new QuadraticBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCPx, aCPy ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tvar curve = new CubicBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCP1x, aCP1y ),\n\t\t\tnew Vector2( aCP2x, aCP2y ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t},\n\n\tsplineThru: function ( pts /*Array of Vector*/ ) {\n\n\t\tvar npts = [ this.currentPoint.clone() ].concat( pts );\n\n\t\tvar curve = new SplineCurve( npts );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\n\n\t},\n\n\tarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tvar x0 = this.currentPoint.x;\n\t\tvar y0 = this.currentPoint.y;\n\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\n\t\t\taStartAngle, aEndAngle, aClockwise );\n\n\t},\n\n\tabsarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t},\n\n\tellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tvar x0 = this.currentPoint.x;\n\t\tvar y0 = this.currentPoint.y;\n\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t},\n\n\tabsellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tvar curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\tif ( this.curves.length > 0 ) {\n\n\t\t\t// if a previous curve is present, attempt to join\n\t\t\tvar firstPoint = curve.getPoint( 0 );\n\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\n\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.curves.push( curve );\n\n\t\tvar lastPoint = curve.getPoint( 1 );\n\t\tthis.currentPoint.copy( lastPoint );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurvePath.prototype.copy.call( this, source );\n\n\t\tthis.currentPoint.copy( source.currentPoint );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = CurvePath.prototype.toJSON.call( this );\n\n\t\tdata.currentPoint = this.currentPoint.toArray();\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurvePath.prototype.fromJSON.call( this, json );\n\n\t\tthis.currentPoint.fromArray( json.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Path };\n","import { Path } from './Path.js';\nimport { _Math } from '../../math/Math.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Defines a 2d shape plane using paths.\n **/\n\n// STEP 1 Create a path.\n// STEP 2 Turn path into shape.\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\n// STEP 3a - Extract points from each shape, turn to vertices\n// STEP 3b - Triangulate each shape, add faces.\n\nfunction Shape( points ) {\n\n\tPath.call( this, points );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.type = 'Shape';\n\n\tthis.holes = [];\n\n}\n\nShape.prototype = Object.assign( Object.create( Path.prototype ), {\n\n\tconstructor: Shape,\n\n\tgetPointsHoles: function ( divisions ) {\n\n\t\tvar holesPts = [];\n\n\t\tfor ( var i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\n\n\t\t}\n\n\t\treturn holesPts;\n\n\t},\n\n\t// get points of shape and holes (keypoints based on segments parameter)\n\n\textractPoints: function ( divisions ) {\n\n\t\treturn {\n\n\t\t\tshape: this.getPoints( divisions ),\n\t\t\tholes: this.getPointsHoles( divisions )\n\n\t\t};\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tPath.prototype.copy.call( this, source );\n\n\t\tthis.holes = [];\n\n\t\tfor ( var i = 0, l = source.holes.length; i < l; i ++ ) {\n\n\t\t\tvar hole = source.holes[ i ];\n\n\t\t\tthis.holes.push( hole.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = Path.prototype.toJSON.call( this );\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.holes = [];\n\n\t\tfor ( var i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tvar hole = this.holes[ i ];\n\t\t\tdata.holes.push( hole.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tPath.prototype.fromJSON.call( this, json );\n\n\t\tthis.uuid = json.uuid;\n\t\tthis.holes = [];\n\n\t\tfor ( var i = 0, l = json.holes.length; i < l; i ++ ) {\n\n\t\t\tvar hole = json.holes[ i ];\n\t\t\tthis.holes.push( new Path().fromJSON( hole ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Shape };\n","/**\n * @author Mugen87 / https://github.com/Mugen87\n * Port from https://github.com/mapbox/earcut (v2.1.2)\n */\n\nvar Earcut = {\n\n\ttriangulate: function ( data, holeIndices, dim ) {\n\n\t\tdim = dim || 2;\n\n\t\tvar hasHoles = holeIndices && holeIndices.length,\n\t\t\touterLen = hasHoles ? holeIndices[ 0 ] * dim : data.length,\n\t\t\touterNode = linkedList( data, 0, outerLen, dim, true ),\n\t\t\ttriangles = [];\n\n\t\tif ( ! outerNode ) return triangles;\n\n\t\tvar minX, minY, maxX, maxY, x, y, invSize;\n\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\n\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\n\t\tif ( data.length > 80 * dim ) {\n\n\t\t\tminX = maxX = data[ 0 ];\n\t\t\tminY = maxY = data[ 1 ];\n\n\t\t\tfor ( var i = dim; i < outerLen; i += dim ) {\n\n\t\t\t\tx = data[ i ];\n\t\t\t\ty = data[ i + 1 ];\n\t\t\t\tif ( x < minX ) minX = x;\n\t\t\t\tif ( y < minY ) minY = y;\n\t\t\t\tif ( x > maxX ) maxX = x;\n\t\t\t\tif ( y > maxY ) maxY = y;\n\n\t\t\t}\n\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\n\t\t\tinvSize = invSize !== 0 ? 1 / invSize : 0;\n\n\t\t}\n\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize );\n\n\t\treturn triangles;\n\n\t}\n\n};\n\n// create a circular doubly linked list from polygon points in the specified winding order\n\nfunction linkedList( data, start, end, dim, clockwise ) {\n\n\tvar i, last;\n\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\n\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t} else {\n\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t}\n\n\tif ( last && equals( last, last.next ) ) {\n\n\t\tremoveNode( last );\n\t\tlast = last.next;\n\n\t}\n\n\treturn last;\n\n}\n\n// eliminate colinear or duplicate points\n\nfunction filterPoints( start, end ) {\n\n\tif ( ! start ) return start;\n\tif ( ! end ) end = start;\n\n\tvar p = start, again;\n\n\tdo {\n\n\t\tagain = false;\n\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\n\n\t\t\tremoveNode( p );\n\t\t\tp = end = p.prev;\n\t\t\tif ( p === p.next ) break;\n\t\t\tagain = true;\n\n\t\t} else {\n\n\t\t\tp = p.next;\n\n\t\t}\n\n\t} while ( again || p !== end );\n\n\treturn end;\n\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\n\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\n\n\tif ( ! ear ) return;\n\n\t// interlink polygon nodes in z-order\n\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\n\n\tvar stop = ear, prev, next;\n\n\t// iterate through ears, slicing them one by one\n\n\twhile ( ear.prev !== ear.next ) {\n\n\t\tprev = ear.prev;\n\t\tnext = ear.next;\n\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\n\n\t\t\t// cut off the triangle\n\t\t\ttriangles.push( prev.i / dim );\n\t\t\ttriangles.push( ear.i / dim );\n\t\t\ttriangles.push( next.i / dim );\n\n\t\t\tremoveNode( ear );\n\n\t\t\t// skipping the next vertice leads to less sliver triangles\n\t\t\tear = next.next;\n\t\t\tstop = next.next;\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tear = next;\n\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\n\n\t\tif ( ear === stop ) {\n\n\t\t\t// try filtering points and slicing again\n\n\t\t\tif ( ! pass ) {\n\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\n\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\n\n\t\t\t} else if ( pass === 1 ) {\n\n\t\t\t\tear = cureLocalIntersections( ear, triangles, dim );\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\n\n\t\t\t// as a last resort, try splitting the remaining polygon into two\n\n\t\t\t} else if ( pass === 2 ) {\n\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\n\nfunction isEar( ear ) {\n\n\tvar a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// now make sure we don't have other points inside the potential ear\n\tvar p = ear.next.next;\n\n\twhile ( p !== ear.prev ) {\n\n\t\tif ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) && area( p.prev, p, p.next ) >= 0 ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction isEarHashed( ear, minX, minY, invSize ) {\n\n\tvar a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// triangle bbox; min & max are calculated like this for speed\n\n\tvar minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\n\t\tminTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\n\t\tmaxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\n\t\tmaxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\n\n\t// z-order range for the current triangle bbox;\n\n\tvar minZ = zOrder( minTX, minTY, minX, minY, invSize ),\n\t\tmaxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\n\n\t// first look for points inside the triangle in increasing z-order\n\n\tvar p = ear.nextZ;\n\n\twhile ( p && p.z <= maxZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.nextZ;\n\n\t}\n\n\t// then look for points in decreasing z-order\n\n\tp = ear.prevZ;\n\n\twhile ( p && p.z >= minZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\n\t\tp = p.prevZ;\n\n\t}\n\n\treturn true;\n\n}\n\n// go through all polygon nodes and cure small local self-intersections\n\nfunction cureLocalIntersections( start, triangles, dim ) {\n\n\tvar p = start;\n\n\tdo {\n\n\t\tvar a = p.prev, b = p.next.next;\n\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\n\n\t\t\ttriangles.push( a.i / dim );\n\t\t\ttriangles.push( p.i / dim );\n\t\t\ttriangles.push( b.i / dim );\n\n\t\t\t// remove two nodes involved\n\n\t\t\tremoveNode( p );\n\t\t\tremoveNode( p.next );\n\n\t\t\tp = start = b;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn p;\n\n}\n\n// try splitting polygon into two and triangulate them independently\n\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\n\n\t// look for a valid diagonal that divides the polygon into two\n\n\tvar a = start;\n\n\tdo {\n\n\t\tvar b = a.next.next;\n\n\t\twhile ( b !== a.prev ) {\n\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\n\n\t\t\t\t// split the polygon in two by the diagonal\n\n\t\t\t\tvar c = splitPolygon( a, b );\n\n\t\t\t\t// filter colinear points around the cuts\n\n\t\t\t\ta = filterPoints( a, a.next );\n\t\t\t\tc = filterPoints( c, c.next );\n\n\t\t\t\t// run earcut on each half\n\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize );\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tb = b.next;\n\n\t\t}\n\n\t\ta = a.next;\n\n\t} while ( a !== start );\n\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\n\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\n\n\tvar queue = [], i, len, start, end, list;\n\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\n\n\t\tstart = holeIndices[ i ] * dim;\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\n\t\tlist = linkedList( data, start, end, dim, false );\n\t\tif ( list === list.next ) list.steiner = true;\n\t\tqueue.push( getLeftmost( list ) );\n\n\t}\n\n\tqueue.sort( compareX );\n\n\t// process holes from left to right\n\n\tfor ( i = 0; i < queue.length; i ++ ) {\n\n\t\teliminateHole( queue[ i ], outerNode );\n\t\touterNode = filterPoints( outerNode, outerNode.next );\n\n\t}\n\n\treturn outerNode;\n\n}\n\nfunction compareX( a, b ) {\n\n\treturn a.x - b.x;\n\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\n\nfunction eliminateHole( hole, outerNode ) {\n\n\touterNode = findHoleBridge( hole, outerNode );\n\n\tif ( outerNode ) {\n\n\t\tvar b = splitPolygon( outerNode, hole );\n\n\t\tfilterPoints( b, b.next );\n\n\t}\n\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\n\nfunction findHoleBridge( hole, outerNode ) {\n\n\tvar p = outerNode,\n\t\thx = hole.x,\n\t\thy = hole.y,\n\t\tqx = - Infinity,\n\t\tm;\n\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\n\t// segment's endpoint with lesser x will be potential connection point\n\n\tdo {\n\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\n\n\t\t\tvar x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\n\n\t\t\tif ( x <= hx && x > qx ) {\n\n\t\t\t\tqx = x;\n\n\t\t\t\tif ( x === hx ) {\n\n\t\t\t\t\tif ( hy === p.y ) return p;\n\t\t\t\t\tif ( hy === p.next.y ) return p.next;\n\n\t\t\t\t}\n\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== outerNode );\n\n\tif ( ! m ) return null;\n\n\tif ( hx === qx ) return m.prev; // hole touches outer segment; pick lower endpoint\n\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\n\t// if there are no points found, we have a valid connection;\n\t// otherwise choose the point of the minimum angle with the ray as connection point\n\n\tvar stop = m,\n\t\tmx = m.x,\n\t\tmy = m.y,\n\t\ttanMin = Infinity,\n\t\ttan;\n\n\tp = m.next;\n\n\twhile ( p !== stop ) {\n\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\n\t\t\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\n\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\n\n\t\t\tif ( ( tan < tanMin || ( tan === tanMin && p.x > m.x ) ) && locallyInside( p, hole ) ) {\n\n\t\t\t\tm = p;\n\t\t\t\ttanMin = tan;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t}\n\n\treturn m;\n\n}\n\n// interlink polygon nodes in z-order\n\nfunction indexCurve( start, minX, minY, invSize ) {\n\n\tvar p = start;\n\n\tdo {\n\n\t\tif ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\n\t\tp.prevZ = p.prev;\n\t\tp.nextZ = p.next;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\tp.prevZ.nextZ = null;\n\tp.prevZ = null;\n\n\tsortLinked( p );\n\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\n\nfunction sortLinked( list ) {\n\n\tvar i, p, q, e, tail, numMerges, pSize, qSize, inSize = 1;\n\n\tdo {\n\n\t\tp = list;\n\t\tlist = null;\n\t\ttail = null;\n\t\tnumMerges = 0;\n\n\t\twhile ( p ) {\n\n\t\t\tnumMerges ++;\n\t\t\tq = p;\n\t\t\tpSize = 0;\n\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\n\n\t\t\t\tpSize ++;\n\t\t\t\tq = q.nextZ;\n\t\t\t\tif ( ! q ) break;\n\n\t\t\t}\n\n\t\t\tqSize = inSize;\n\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\n\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\n\n\t\t\t\t\te = p;\n\t\t\t\t\tp = p.nextZ;\n\t\t\t\t\tpSize --;\n\n\t\t\t\t} else {\n\n\t\t\t\t\te = q;\n\t\t\t\t\tq = q.nextZ;\n\t\t\t\t\tqSize --;\n\n\t\t\t\t}\n\n\t\t\t\tif ( tail ) tail.nextZ = e;\n\t\t\t\telse list = e;\n\n\t\t\t\te.prevZ = tail;\n\t\t\t\ttail = e;\n\n\t\t\t}\n\n\t\t\tp = q;\n\n\t\t}\n\n\t\ttail.nextZ = null;\n\t\tinSize *= 2;\n\n\t} while ( numMerges > 1 );\n\n\treturn list;\n\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\n\nfunction zOrder( x, y, minX, minY, invSize ) {\n\n\t// coords are transformed into non-negative 15-bit integer range\n\n\tx = 32767 * ( x - minX ) * invSize;\n\ty = 32767 * ( y - minY ) * invSize;\n\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\n\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\n\n\treturn x | ( y << 1 );\n\n}\n\n// find the leftmost node of a polygon ring\n\nfunction getLeftmost( start ) {\n\n\tvar p = start, leftmost = start;\n\n\tdo {\n\n\t\tif ( p.x < leftmost.x ) leftmost = p;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn leftmost;\n\n}\n\n// check if a point lies within a convex triangle\n\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\n\n\treturn ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\n\t ( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\n\t ( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\n\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\n\nfunction isValidDiagonal( a, b ) {\n\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) &&\n\t\tlocallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b );\n\n}\n\n// signed area of a triangle\n\nfunction area( p, q, r ) {\n\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\n\n}\n\n// check if two points are equal\n\nfunction equals( p1, p2 ) {\n\n\treturn p1.x === p2.x && p1.y === p2.y;\n\n}\n\n// check if two segments intersect\n\nfunction intersects( p1, q1, p2, q2 ) {\n\n\tif ( ( equals( p1, q1 ) && equals( p2, q2 ) ) ||\n\t\t\t( equals( p1, q2 ) && equals( p2, q1 ) ) ) return true;\n\n\treturn area( p1, q1, p2 ) > 0 !== area( p1, q1, q2 ) > 0 &&\n\t\t\t\t area( p2, q2, p1 ) > 0 !== area( p2, q2, q1 ) > 0;\n\n}\n\n// check if a polygon diagonal intersects any polygon segments\n\nfunction intersectsPolygon( a, b ) {\n\n\tvar p = a;\n\n\tdo {\n\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n\t\t\t\t\t\tintersects( p, p.next, a, b ) ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn false;\n\n}\n\n// check if a polygon diagonal is locally inside the polygon\n\nfunction locallyInside( a, b ) {\n\n\treturn area( a.prev, a, a.next ) < 0 ?\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\n\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\n\nfunction middleInside( a, b ) {\n\n\tvar p = a,\n\t\tinside = false,\n\t\tpx = ( a.x + b.x ) / 2,\n\t\tpy = ( a.y + b.y ) / 2;\n\n\tdo {\n\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\n\t\t\t\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) ) {\n\n\t\t\tinside = ! inside;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn inside;\n\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\n\nfunction splitPolygon( a, b ) {\n\n\tvar a2 = new Node( a.i, a.x, a.y ),\n\t\tb2 = new Node( b.i, b.x, b.y ),\n\t\tan = a.next,\n\t\tbp = b.prev;\n\n\ta.next = b;\n\tb.prev = a;\n\n\ta2.next = an;\n\tan.prev = a2;\n\n\tb2.next = a2;\n\ta2.prev = b2;\n\n\tbp.next = b2;\n\tb2.prev = bp;\n\n\treturn b2;\n\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\n\nfunction insertNode( i, x, y, last ) {\n\n\tvar p = new Node( i, x, y );\n\n\tif ( ! last ) {\n\n\t\tp.prev = p;\n\t\tp.next = p;\n\n\t} else {\n\n\t\tp.next = last.next;\n\t\tp.prev = last;\n\t\tlast.next.prev = p;\n\t\tlast.next = p;\n\n\t}\n\n\treturn p;\n\n}\n\nfunction removeNode( p ) {\n\n\tp.next.prev = p.prev;\n\tp.prev.next = p.next;\n\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\n\n}\n\nfunction Node( i, x, y ) {\n\n\t// vertice index in coordinates array\n\tthis.i = i;\n\n\t// vertex coordinates\n\tthis.x = x;\n\tthis.y = y;\n\n\t// previous and next vertice nodes in a polygon ring\n\tthis.prev = null;\n\tthis.next = null;\n\n\t// z-order curve value\n\tthis.z = null;\n\n\t// previous and next nodes in z-order\n\tthis.prevZ = null;\n\tthis.nextZ = null;\n\n\t// indicates whether this is a steiner point\n\tthis.steiner = false;\n\n}\n\nfunction signedArea( data, start, end, dim ) {\n\n\tvar sum = 0;\n\n\tfor ( var i = start, j = end - dim; i < end; i += dim ) {\n\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\n\t\tj = i;\n\n\t}\n\n\treturn sum;\n\n}\n\nexport { Earcut };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nimport { Earcut } from './Earcut.js';\n\nvar ShapeUtils = {\n\n\t// calculate area of the contour polygon\n\n\tarea: function ( contour ) {\n\n\t\tvar n = contour.length;\n\t\tvar a = 0.0;\n\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t},\n\n\tisClockWise: function ( pts ) {\n\n\t\treturn ShapeUtils.area( pts ) < 0;\n\n\t},\n\n\ttriangulateShape: function ( contour, holes ) {\n\n\t\tvar vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\n\t\tvar holeIndices = []; // array of hole indices\n\t\tvar faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\n\n\t\tremoveDupEndPts( contour );\n\t\taddContour( vertices, contour );\n\n\t\t//\n\n\t\tvar holeIndex = contour.length;\n\n\t\tholes.forEach( removeDupEndPts );\n\n\t\tfor ( var i = 0; i < holes.length; i ++ ) {\n\n\t\t\tholeIndices.push( holeIndex );\n\t\t\tholeIndex += holes[ i ].length;\n\t\t\taddContour( vertices, holes[ i ] );\n\n\t\t}\n\n\t\t//\n\n\t\tvar triangles = Earcut.triangulate( vertices, holeIndices );\n\n\t\t//\n\n\t\tfor ( var i = 0; i < triangles.length; i += 3 ) {\n\n\t\t\tfaces.push( triangles.slice( i, i + 3 ) );\n\n\t\t}\n\n\t\treturn faces;\n\n\t}\n\n};\n\nfunction removeDupEndPts( points ) {\n\n\tvar l = points.length;\n\n\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\n\n\t\tpoints.pop();\n\n\t}\n\n}\n\nfunction addContour( vertices, contour ) {\n\n\tfor ( var i = 0; i < contour.length; i ++ ) {\n\n\t\tvertices.push( contour[ i ].x );\n\t\tvertices.push( contour[ i ].y );\n\n\t}\n\n}\n\nexport { ShapeUtils };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * minimal class for proxing functions to Path. Replaces old \"extractSubpaths()\"\n **/\n\nimport { Color } from '../../math/Color.js';\nimport { Path } from './Path.js';\nimport { Shape } from './Shape.js';\nimport { ShapeUtils } from '../ShapeUtils.js';\n\nfunction ShapePath() {\n\n\tthis.type = 'ShapePath';\n\n\tthis.color = new Color();\n\n\tthis.subPaths = [];\n\tthis.currentPath = null;\n\n}\n\nObject.assign( ShapePath.prototype, {\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPath = new Path();\n\t\tthis.subPaths.push( this.currentPath );\n\t\tthis.currentPath.moveTo( x, y );\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tthis.currentPath.lineTo( x, y );\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\n\n\t},\n\n\tsplineThru: function ( pts ) {\n\n\t\tthis.currentPath.splineThru( pts );\n\n\t},\n\n\ttoShapes: function ( isCCW, noHoles ) {\n\n\t\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\t\tvar shapes = [];\n\n\t\t\tfor ( var i = 0, l = inSubpaths.length; i < l; i ++ ) {\n\n\t\t\t\tvar tmpPath = inSubpaths[ i ];\n\n\t\t\t\tvar tmpShape = new Shape();\n\t\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\t\tshapes.push( tmpShape );\n\n\t\t\t}\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\n\t\t\tvar polyLen = inPolygon.length;\n\n\t\t\t// inPt on polygon contour => immediate success    or\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t\t//  with the horizontal line through inPt, left of inPt\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\t\tvar inside = false;\n\t\t\tfor ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\n\t\t\t\tvar edgeLowPt = inPolygon[ p ];\n\t\t\t\tvar edgeHighPt = inPolygon[ q ];\n\n\t\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not parallel\n\t\t\t\t\tif ( edgeDy < 0 ) {\n\n\t\t\t\t\t\tedgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\n\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// parallel or collinear\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t\t// continue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn\tinside;\n\n\t\t}\n\n\t\tvar isClockWise = ShapeUtils.isClockWise;\n\n\t\tvar subPaths = this.subPaths;\n\t\tif ( subPaths.length === 0 ) return [];\n\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tvar solid, tmpPath, tmpShape, shapes = [];\n\n\t\tif ( subPaths.length === 1 ) {\n\n\t\t\ttmpPath = subPaths[ 0 ];\n\t\t\ttmpShape = new Shape();\n\t\t\ttmpShape.curves = tmpPath.curves;\n\t\t\tshapes.push( tmpShape );\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tvar holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t\t// console.log(\"Holes first\", holesFirst);\n\n\t\tvar betterShapeHoles = [];\n\t\tvar newShapes = [];\n\t\tvar newShapeHoles = [];\n\t\tvar mainIdx = 0;\n\t\tvar tmpPoints;\n\n\t\tnewShapes[ mainIdx ] = undefined;\n\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\tfor ( var i = 0, l = subPaths.length; i < l; i ++ ) {\n\n\t\t\ttmpPath = subPaths[ i ];\n\t\t\ttmpPoints = tmpPath.getPoints();\n\t\t\tsolid = isClockWise( tmpPoints );\n\t\t\tsolid = isCCW ? ! solid : solid;\n\n\t\t\tif ( solid ) {\n\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\n\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\n\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\t\t//console.log('cw', i);\n\n\t\t\t} else {\n\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\n\n\t\t\t\t//console.log('ccw', i);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// only Holes? -> probably all Shapes with wrong orientation\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tif ( newShapes.length > 1 ) {\n\n\t\t\tvar ambiguous = false;\n\t\t\tvar toChange = [];\n\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tvar sho = newShapeHoles[ sIdx ];\n\n\t\t\t\tfor ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\n\t\t\t\t\tvar ho = sho[ hIdx ];\n\t\t\t\t\tvar hole_unassigned = true;\n\n\t\t\t\t\tfor ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\n\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tambiguous = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\n\t\t\tif ( toChange.length > 0 ) {\n\n\t\t\t\t// console.log(\"to change: \", toChange);\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar tmpHoles;\n\n\t\tfor ( var i = 0, il = newShapes.length; i < il; i ++ ) {\n\n\t\t\ttmpShape = newShapes[ i ].s;\n\t\t\tshapes.push( tmpShape );\n\t\t\ttmpHoles = newShapeHoles[ i ];\n\n\t\t\tfor ( var j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\n\nexport { ShapePath };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { ShapePath } from './ShapePath.js';\n\n\nfunction Font( data ) {\n\n\tthis.type = 'Font';\n\n\tthis.data = data;\n\n}\n\nObject.assign( Font.prototype, {\n\n\tisFont: true,\n\n\tgenerateShapes: function ( text, size, divisions ) {\n\n\t\tif ( size === undefined ) size = 100;\n\t\tif ( divisions === undefined ) divisions = 4;\n\n\t\tvar shapes = [];\n\t\tvar paths = createPaths( text, size, divisions, this.data );\n\n\t\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\n\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\nfunction createPaths( text, size, divisions, data ) {\n\n\tvar chars = String( text ).split( '' );\n\tvar scale = size / data.resolution;\n\tvar line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\n\n\tvar paths = [];\n\n\tvar offsetX = 0, offsetY = 0;\n\n\tfor ( var i = 0; i < chars.length; i ++ ) {\n\n\t\tvar char = chars[ i ];\n\n\t\tif ( char === '\\n' ) {\n\n\t\t\toffsetX = 0;\n\t\t\toffsetY -= line_height;\n\n\t\t} else {\n\n\t\t\tvar ret = createPath( char, divisions, scale, offsetX, offsetY, data );\n\t\t\toffsetX += ret.offsetX;\n\t\t\tpaths.push( ret.path );\n\n\t\t}\n\n\t}\n\n\treturn paths;\n\n}\n\nfunction createPath( char, divisions, scale, offsetX, offsetY, data ) {\n\n\tvar glyph = data.glyphs[ char ] || data.glyphs[ '?' ];\n\n\tif ( ! glyph ) return;\n\n\tvar path = new ShapePath();\n\n\tvar x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\n\n\tif ( glyph.o ) {\n\n\t\tvar outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\n\n\t\tfor ( var i = 0, l = outline.length; i < l; ) {\n\n\t\t\tvar action = outline[ i ++ ];\n\n\t\t\tswitch ( action ) {\n\n\t\t\t\tcase 'm': // moveTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'l': // lineTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'q': // quadraticCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'b': // bezierCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy2 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { offsetX: glyph.ha * scale, path: path };\n\n}\n\nexport { Font };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Cache } from './Cache.js';\nimport { DefaultLoadingManager } from './LoadingManager.js';\n\nvar loading = {};\n\nfunction FileLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( FileLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tvar scope = this;\n\n\t\tvar cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\t// Check if request is duplicate\n\n\t\tif ( loading[ url ] !== undefined ) {\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Check for data: URI\n\t\tvar dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\n\t\tvar dataUriRegexResult = url.match( dataUriRegex );\n\n\t\t// Safari can not handle Data URIs through XMLHttpRequest so process manually\n\t\tif ( dataUriRegexResult ) {\n\n\t\t\tvar mimeType = dataUriRegexResult[ 1 ];\n\t\t\tvar isBase64 = !! dataUriRegexResult[ 2 ];\n\t\t\tvar data = dataUriRegexResult[ 3 ];\n\n\t\t\tdata = window.decodeURIComponent( data );\n\n\t\t\tif ( isBase64 ) data = window.atob( data );\n\n\t\t\ttry {\n\n\t\t\t\tvar response;\n\t\t\t\tvar responseType = ( this.responseType || '' ).toLowerCase();\n\n\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\tcase 'arraybuffer':\n\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t\tvar view = new Uint8Array( data.length );\n\n\t\t\t\t\t\tfor ( var i = 0; i < data.length; i ++ ) {\n\n\t\t\t\t\t\t\tview[ i ] = data.charCodeAt( i );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( responseType === 'blob' ) {\n\n\t\t\t\t\t\t\tresponse = new Blob( [ view.buffer ], { type: mimeType } );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tresponse = view.buffer;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\tvar parser = new DOMParser();\n\t\t\t\t\t\tresponse = parser.parseFromString( data, mimeType );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\tresponse = JSON.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault: // 'text' or other\n\n\t\t\t\t\t\tresponse = data;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\twindow.setTimeout( function () {\n\n\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\twindow.setTimeout( function () {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\t\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Initialise array for duplicate requests\n\n\t\t\tloading[ url ] = [];\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\tvar request = new XMLHttpRequest();\n\n\t\t\trequest.open( 'GET', url, true );\n\n\t\t\trequest.addEventListener( 'load', function ( event ) {\n\n\t\t\t\tvar response = this.response;\n\n\t\t\t\tCache.add( url, response );\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tif ( this.status === 200 ) {\n\n\t\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( response );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t} else if ( this.status === 0 ) {\n\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\tconsole.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( response );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\t\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemEnd( url );\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}, false );\n\n\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\n\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\n\n\t\t\tif ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\n\n\t\t\tfor ( var header in this.requestHeader ) {\n\n\t\t\t\trequest.setRequestHeader( header, this.requestHeader[ header ] );\n\n\t\t\t}\n\n\t\t\trequest.send( null );\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\treturn request;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t},\n\n\tsetResponseType: function ( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t},\n\n\tsetWithCredentials: function ( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t},\n\n\tsetMimeType: function ( value ) {\n\n\t\tthis.mimeType = value;\n\t\treturn this;\n\n\t},\n\n\tsetRequestHeader: function ( value ) {\n\n\t\tthis.requestHeader = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { FileLoader };\n","import { Font } from '../extras/core/Font.js';\nimport { FileLoader } from './FileLoader.js';\nimport { DefaultLoadingManager } from './LoadingManager.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction FontLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( FontLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tvar json;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\n\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\n\n\t\t\t}\n\n\t\t\tvar font = scope.parse( json );\n\n\t\t\tif ( onLoad ) onLoad( font );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\treturn new Font( json );\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { FontLoader };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  amount: <int>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline is bevel\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\n *\n *  UVGenerator: <Object> // object that provides UV generator functions\n *\n * }\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { ShapeUtils } from '../extras/ShapeUtils.js';\n\n// ExtrudeGeometry\n\nfunction ExtrudeGeometry( shapes, options ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'ExtrudeGeometry';\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\toptions: options\n\t};\n\n\tthis.fromBufferGeometry( new ExtrudeBufferGeometry( shapes, options ) );\n\tthis.mergeVertices();\n\n}\n\nExtrudeGeometry.prototype = Object.create( Geometry.prototype );\nExtrudeGeometry.prototype.constructor = ExtrudeGeometry;\n\n// ExtrudeBufferGeometry\n\nfunction ExtrudeBufferGeometry( shapes, options ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'ExtrudeBufferGeometry';\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\toptions: options\n\t};\n\n\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\n\n\tvar scope = this;\n\n\tvar verticesArray = [];\n\tvar uvArray = [];\n\n\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\tvar shape = shapes[ i ];\n\t\taddShape( shape, options );\n\n\t}\n\n\t// build geometry\n\n\tthis.addAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\n\n\tthis.computeVertexNormals();\n\n\t// functions\n\n\tfunction addShape( shape ) {\n\n\t\tvar placeholder = [];\n\n\t\t// options\n\n\t\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\t\tvar steps = options.steps !== undefined ? options.steps : 1;\n\t\tvar amount = options.amount !== undefined ? options.amount : 100;\n\n\t\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\n\t\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6;\n\t\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2;\n\t\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\t\tvar extrudePath = options.extrudePath;\n\n\t\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\n\n\t\t//\n\n\t\tvar extrudePts, extrudeByPath = false;\n\t\tvar splineTube, binormal, normal, position2;\n\n\t\tif ( extrudePath ) {\n\n\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\t\textrudeByPath = true;\n\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t\t// SETUP TNB variables\n\n\t\t\t// TODO1 - have a .isClosed in spline?\n\n\t\t\tsplineTube = extrudePath.computeFrenetFrames( steps, false );\n\n\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\t\tbinormal = new Vector3();\n\t\t\tnormal = new Vector3();\n\t\t\tposition2 = new Vector3();\n\n\t\t}\n\n\t\t// Safeguards if bevels are not enabled\n\n\t\tif ( ! bevelEnabled ) {\n\n\t\t\tbevelSegments = 0;\n\t\t\tbevelThickness = 0;\n\t\t\tbevelSize = 0;\n\n\t\t}\n\n\t\t// Variables initialization\n\n\t\tvar ahole, h, hl; // looping of holes\n\n\t\tvar shapePoints = shape.extractPoints( curveSegments );\n\n\t\tvar vertices = shapePoints.shape;\n\t\tvar holes = shapePoints.holes;\n\n\t\tvar reverse = ! ShapeUtils.isClockWise( vertices );\n\n\t\tif ( reverse ) {\n\n\t\t\tvertices = vertices.reverse();\n\n\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\n\t\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\n\n\t\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar faces = ShapeUtils.triangulateShape( vertices, holes );\n\n\t\t/* Vertices */\n\n\t\tvar contour = vertices; // vertices has all points but contour has only points of circumference\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\n\t\t\tvertices = vertices.concat( ahole );\n\n\t\t}\n\n\n\t\tfunction scalePt2( pt, vec, size ) {\n\n\t\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\n\n\t\t\treturn vec.clone().multiplyScalar( size ).add( pt );\n\n\t\t}\n\n\t\tvar b, bs, t, z,\n\t\t\tvert, vlen = vertices.length,\n\t\t\tface, flen = faces.length;\n\n\n\t\t// Find directions for point movement\n\n\n\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\n\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t\t//\n\t\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\n\t\t\tvar v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\n\n\t\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\t\tvar v_prev_x = inPt.x - inPrev.x,\n\t\t\t\tv_prev_y = inPt.y - inPrev.y;\n\t\t\tvar v_next_x = inNext.x - inPt.x,\n\t\t\t\tv_next_y = inNext.y - inPt.y;\n\n\t\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\n\t\t\t// check for collinear edges\n\t\t\tvar collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\n\n\t\t\t\t// not collinear\n\n\t\t\t\t// length of vectors for normalizing\n\n\t\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\n\t\t\t\t// shift adjacent points by unit vectors to the left\n\n\t\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\n\t\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\n\t\t\t\t// scaling factor for v_prev to intersection point\n\n\t\t\t\tvar sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\n\t\t\t\t\t( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\t// vector from inPt to intersection point\n\n\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\n\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t\t//  but prevent crazy spikes\n\t\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\n\t\t\t\tif ( v_trans_lensq <= 2 ) {\n\n\t\t\t\t\treturn new Vector2( v_trans_x, v_trans_y );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// handle special case of collinear edges\n\n\t\t\t\tvar direction_eq = false; // assumes: opposite\n\t\t\t\tif ( v_prev_x > Number.EPSILON ) {\n\n\t\t\t\t\tif ( v_next_x > Number.EPSILON ) {\n\n\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( direction_eq ) {\n\n\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\t\tv_trans_y = v_prev_x;\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t\t}\n\n\n\t\tvar contourMovements = [];\n\n\t\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\tif ( j === il ) j = 0;\n\t\t\tif ( k === il ) k = 0;\n\n\t\t\t//  (j)---(i)---(k)\n\t\t\t// console.log('i,j,k', i, j , k)\n\n\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t\t}\n\n\t\tvar holesMovements = [],\n\t\t\toneHoleMovements, verticesMovements = contourMovements.concat();\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\n\t\t\toneHoleMovements = [];\n\n\t\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t\t}\n\n\t\t\tholesMovements.push( oneHoleMovements );\n\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t\t}\n\n\n\t\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\t\tfor ( b = 0; b < bevelSegments; b ++ ) {\n\n\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\t\tt = b / bevelSegments;\n\t\t\tz = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\tbs = bevelSize * Math.sin( t * Math.PI / 2 );\n\n\t\t\t// contract shape\n\n\t\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t}\n\n\t\t\t// expand holes\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tbs = bevelSize;\n\n\t\t// Back facing vertices\n\n\t\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t\t} else {\n\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\n\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\n\n\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\n\n\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Add stepped vertices...\n\t\t// Including front facing vertices\n\n\t\tvar s;\n\n\t\tfor ( s = 1; s <= steps; s ++ ) {\n\n\t\t\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y, amount / steps * s );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\n\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// Add bevel segments planes\n\n\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\t\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\t\tt = b / bevelSegments;\n\t\t\tz = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\tbs = bevelSize * Math.sin( t * Math.PI / 2 );\n\n\t\t\t// contract shape\n\n\t\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\t\tv( vert.x, vert.y, amount + z );\n\n\t\t\t}\n\n\t\t\t// expand holes\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\tv( vert.x, vert.y, amount + z );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t/* Faces */\n\n\t\t// Top and bottom faces\n\n\t\tbuildLidFaces();\n\n\t\t// Sides faces\n\n\t\tbuildSideFaces();\n\n\n\t\t/////  Internal functions\n\n\t\tfunction buildLidFaces() {\n\n\t\t\tvar start = verticesArray.length / 3;\n\n\t\t\tif ( bevelEnabled ) {\n\n\t\t\t\tvar layer = 0; // steps + 1\n\t\t\t\tvar offset = vlen * layer;\n\n\t\t\t\t// Bottom faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\n\n\t\t\t\t}\n\n\t\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\t\toffset = vlen * layer;\n\n\t\t\t\t// Top faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Bottom faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t\t}\n\n\t\t\t\t// Top faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 0 );\n\n\t\t}\n\n\t\t// Create faces for the z-sides of the shape\n\n\t\tfunction buildSideFaces() {\n\n\t\t\tvar start = verticesArray.length / 3;\n\t\t\tvar layeroffset = 0;\n\t\t\tsidewalls( contour, layeroffset );\n\t\t\tlayeroffset += contour.length;\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\t\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t\t//, true\n\t\t\t\tlayeroffset += ahole.length;\n\n\t\t\t}\n\n\n\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 1 );\n\n\n\t\t}\n\n\t\tfunction sidewalls( contour, layeroffset ) {\n\n\t\t\tvar j, k;\n\t\t\ti = contour.length;\n\n\t\t\twhile ( -- i >= 0 ) {\n\n\t\t\t\tj = i;\n\t\t\t\tk = i - 1;\n\t\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\t\tvar s = 0,\n\t\t\t\t\tsl = steps + bevelSegments * 2;\n\n\t\t\t\tfor ( s = 0; s < sl; s ++ ) {\n\n\t\t\t\t\tvar slen1 = vlen * s;\n\t\t\t\t\tvar slen2 = vlen * ( s + 1 );\n\n\t\t\t\t\tvar a = layeroffset + j + slen1,\n\t\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\t\tf4( a, b, c, d );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction v( x, y, z ) {\n\n\t\t\tplaceholder.push( x );\n\t\t\tplaceholder.push( y );\n\t\t\tplaceholder.push( z );\n\n\t\t}\n\n\n\t\tfunction f3( a, b, c ) {\n\n\t\t\taddVertex( a );\n\t\t\taddVertex( b );\n\t\t\taddVertex( c );\n\n\t\t\tvar nextIndex = verticesArray.length / 3;\n\t\t\tvar uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\taddUV( uvs[ 0 ] );\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 2 ] );\n\n\t\t}\n\n\t\tfunction f4( a, b, c, d ) {\n\n\t\t\taddVertex( a );\n\t\t\taddVertex( b );\n\t\t\taddVertex( d );\n\n\t\t\taddVertex( b );\n\t\t\taddVertex( c );\n\t\t\taddVertex( d );\n\n\n\t\t\tvar nextIndex = verticesArray.length / 3;\n\t\t\tvar uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\taddUV( uvs[ 0 ] );\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 2 ] );\n\t\t\taddUV( uvs[ 3 ] );\n\n\t\t}\n\n\t\tfunction addVertex( index ) {\n\n\t\t\tverticesArray.push( placeholder[ index * 3 + 0 ] );\n\t\t\tverticesArray.push( placeholder[ index * 3 + 1 ] );\n\t\t\tverticesArray.push( placeholder[ index * 3 + 2 ] );\n\n\t\t}\n\n\n\t\tfunction addUV( vector2 ) {\n\n\t\t\tuvArray.push( vector2.x );\n\t\t\tuvArray.push( vector2.y );\n\n\t\t}\n\n\t}\n\n}\n\nExtrudeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nExtrudeBufferGeometry.prototype.constructor = ExtrudeBufferGeometry;\n\nvar WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\n\n\t\tvar a_x = vertices[ indexA * 3 ];\n\t\tvar a_y = vertices[ indexA * 3 + 1 ];\n\t\tvar b_x = vertices[ indexB * 3 ];\n\t\tvar b_y = vertices[ indexB * 3 + 1 ];\n\t\tvar c_x = vertices[ indexC * 3 ];\n\t\tvar c_y = vertices[ indexC * 3 + 1 ];\n\n\t\treturn [\n\t\t\tnew Vector2( a_x, a_y ),\n\t\t\tnew Vector2( b_x, b_y ),\n\t\t\tnew Vector2( c_x, c_y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\n\n\t\tvar a_x = vertices[ indexA * 3 ];\n\t\tvar a_y = vertices[ indexA * 3 + 1 ];\n\t\tvar a_z = vertices[ indexA * 3 + 2 ];\n\t\tvar b_x = vertices[ indexB * 3 ];\n\t\tvar b_y = vertices[ indexB * 3 + 1 ];\n\t\tvar b_z = vertices[ indexB * 3 + 2 ];\n\t\tvar c_x = vertices[ indexC * 3 ];\n\t\tvar c_y = vertices[ indexC * 3 + 1 ];\n\t\tvar c_z = vertices[ indexC * 3 + 2 ];\n\t\tvar d_x = vertices[ indexD * 3 ];\n\t\tvar d_y = vertices[ indexD * 3 + 1 ];\n\t\tvar d_z = vertices[ indexD * 3 + 2 ];\n\n\t\tif ( Math.abs( a_y - b_y ) < 0.01 ) {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_x, 1 - a_z ),\n\t\t\t\tnew Vector2( b_x, 1 - b_z ),\n\t\t\t\tnew Vector2( c_x, 1 - c_z ),\n\t\t\t\tnew Vector2( d_x, 1 - d_z )\n\t\t\t];\n\n\t\t} else {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_y, 1 - a_z ),\n\t\t\t\tnew Vector2( b_y, 1 - b_z ),\n\t\t\t\tnew Vector2( c_y, 1 - c_z ),\n\t\t\t\tnew Vector2( d_y, 1 - d_z )\n\t\t\t];\n\n\t\t}\n\n\t}\n};\n\n\nexport { ExtrudeGeometry, ExtrudeBufferGeometry };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author alteredq / http://alteredqualia.com/\n *\n * Text = 3D Text\n *\n * parameters = {\n *  font: <THREE.Font>, // font\n *\n *  size: <float>, // size of the text\n *  height: <float>, // thickness to extrude text\n *  curveSegments: <int>, // number of points on the curves\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into text bevel goes\n *  bevelSize: <float> // how far from text outline is bevel\n * }\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { ExtrudeBufferGeometry } from './ExtrudeGeometry.js';\n\n// TextGeometry\n\nfunction TextGeometry( text, parameters ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TextGeometry';\n\n\tthis.parameters = {\n\t\ttext: text,\n\t\tparameters: parameters\n\t};\n\n\tthis.fromBufferGeometry( new TextBufferGeometry( text, parameters ) );\n\tthis.mergeVertices();\n\n}\n\nTextGeometry.prototype = Object.create( Geometry.prototype );\nTextGeometry.prototype.constructor = TextGeometry;\n\n// TextBufferGeometry\n\nfunction TextBufferGeometry( text, parameters ) {\n\n\tparameters = parameters || {};\n\n\tvar font = parameters.font;\n\n\tif ( ! ( font && font.isFont ) ) {\n\n\t\tconsole.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\n\t\treturn new Geometry();\n\n\t}\n\n\tvar shapes = font.generateShapes( text, parameters.size, parameters.curveSegments );\n\n\t// translate parameters to ExtrudeGeometry API\n\n\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\n\n\t// defaults\n\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\n\n\tExtrudeBufferGeometry.call( this, shapes, parameters );\n\n\tthis.type = 'TextBufferGeometry';\n\n}\n\nTextBufferGeometry.prototype = Object.create( ExtrudeBufferGeometry.prototype );\nTextBufferGeometry.prototype.constructor = TextBufferGeometry;\n\n\nexport { TextGeometry, TextBufferGeometry };\n","import { Material } from './Material.js';\nimport { MultiplyOperation } from '../constants.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshPhongMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshPhongMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.specular = new Color( 0x111111 );\n\tthis.shininess = 30;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhongMaterial.prototype = Object.create( Material.prototype );\nMeshPhongMaterial.prototype.constructor = MeshPhongMaterial;\n\nMeshPhongMaterial.prototype.isMeshPhongMaterial = true;\n\nMeshPhongMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\tthis.specular.copy( source.specular );\n\tthis.shininess = source.shininess;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshPhongMaterial };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Uniform( value ) {\n\n\tif ( typeof value === 'string' ) {\n\n\t\tconsole.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\n\t\tvalue = arguments[ 1 ];\n\n\t}\n\n\tthis.value = value;\n\n}\n\nUniform.prototype.clone = function () {\n\n\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\n\n};\n\nexport { Uniform };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author benaadams / https://twitter.com/ben_a_adams\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// SphereGeometry\n\nfunction SphereGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'SphereGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n}\n\nSphereGeometry.prototype = Object.create( Geometry.prototype );\nSphereGeometry.prototype.constructor = SphereGeometry;\n\n// SphereBufferGeometry\n\nfunction SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'SphereBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradius = radius || 1;\n\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\n\n\tphiStart = phiStart !== undefined ? phiStart : 0;\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\n\n\tvar thetaEnd = thetaStart + thetaLength;\n\n\tvar ix, iy;\n\n\tvar index = 0;\n\tvar grid = [];\n\n\tvar vertex = new Vector3();\n\tvar normal = new Vector3();\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// generate vertices, normals and uvs\n\n\tfor ( iy = 0; iy <= heightSegments; iy ++ ) {\n\n\t\tvar verticesRow = [];\n\n\t\tvar v = iy / heightSegments;\n\n\t\tfor ( ix = 0; ix <= widthSegments; ix ++ ) {\n\n\t\t\tvar u = ix / widthSegments;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormal.set( vertex.x, vertex.y, vertex.z ).normalize();\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( u, 1 - v );\n\n\t\t\tverticesRow.push( index ++ );\n\n\t\t}\n\n\t\tgrid.push( verticesRow );\n\n\t}\n\n\t// indices\n\n\tfor ( iy = 0; iy < heightSegments; iy ++ ) {\n\n\t\tfor ( ix = 0; ix < widthSegments; ix ++ ) {\n\n\t\t\tvar a = grid[ iy ][ ix + 1 ];\n\t\t\tvar b = grid[ iy ][ ix ];\n\t\t\tvar c = grid[ iy + 1 ][ ix ];\n\t\t\tvar d = grid[ iy + 1 ][ ix + 1 ];\n\n\t\t\tif ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\n\t\t\tif ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nSphereBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nSphereBufferGeometry.prototype.constructor = SphereBufferGeometry;\n\n\nexport { SphereGeometry, SphereBufferGeometry };\n","import { LightShadow } from './LightShadow.js';\nimport { _Math } from '../math/Math.js';\nimport { PerspectiveCamera } from '../cameras/PerspectiveCamera.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction SpotLightShadow() {\n\n\tLightShadow.call( this, new PerspectiveCamera( 50, 1, 0.5, 500 ) );\n\n}\n\nSpotLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: SpotLightShadow,\n\n\tisSpotLightShadow: true,\n\n\tupdate: function ( light ) {\n\n\t\tvar camera = this.camera;\n\n\t\tvar fov = _Math.RAD2DEG * 2 * light.angle;\n\t\tvar aspect = this.mapSize.width / this.mapSize.height;\n\t\tvar far = light.distance || camera.far;\n\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\tcamera.fov = fov;\n\t\t\tcamera.aspect = aspect;\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { SpotLightShadow };\n","import { Light } from './Light.js';\nimport { SpotLightShadow } from './SpotLightShadow.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction SpotLight( color, intensity, distance, angle, penumbra, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'SpotLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\treturn this.intensity * Math.PI;\n\n\t\t},\n\t\tset: function ( power ) {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\tthis.intensity = power / Math.PI;\n\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\n\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new SpotLightShadow();\n\n}\n\nSpotLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: SpotLight,\n\n\tisSpotLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.angle = source.angle;\n\t\tthis.penumbra = source.penumbra;\n\t\tthis.decay = source.decay;\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { SpotLight };\n","import { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *\tuvOffset: new THREE.Vector2(),\n *\tuvScale: new THREE.Vector2()\n * }\n */\n\nfunction SpriteMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'SpriteMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\tthis.map = null;\n\n\tthis.rotation = 0;\n\n\tthis.fog = false;\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nSpriteMaterial.prototype = Object.create( Material.prototype );\nSpriteMaterial.prototype.constructor = SpriteMaterial;\nSpriteMaterial.prototype.isSpriteMaterial = true;\n\nSpriteMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\tthis.map = source.map;\n\n\tthis.rotation = source.rotation;\n\n\treturn this;\n\n};\n\n\nexport { SpriteMaterial };\n","import { ShaderMaterial } from './ShaderMaterial.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction RawShaderMaterial( parameters ) {\n\n\tShaderMaterial.call( this, parameters );\n\n\tthis.type = 'RawShaderMaterial';\n\n}\n\nRawShaderMaterial.prototype = Object.create( ShaderMaterial.prototype );\nRawShaderMaterial.prototype.constructor = RawShaderMaterial;\n\nRawShaderMaterial.prototype.isRawShaderMaterial = true;\n\n\nexport { RawShaderMaterial };\n","import { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  size: <float>,\n *  sizeAttenuation: <bool>\n * }\n */\n\nfunction PointsMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'PointsMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.size = 1;\n\tthis.sizeAttenuation = true;\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nPointsMaterial.prototype = Object.create( Material.prototype );\nPointsMaterial.prototype.constructor = PointsMaterial;\n\nPointsMaterial.prototype.isPointsMaterial = true;\n\nPointsMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.size = source.size;\n\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\treturn this;\n\n};\n\n\nexport { PointsMaterial };\n","import { MeshPhongMaterial } from './MeshPhongMaterial.js';\n\n/**\n * @author takahirox / http://github.com/takahirox\n *\n * parameters = {\n *  gradientMap: new THREE.Texture( <Image> )\n * }\n */\n\nfunction MeshToonMaterial( parameters ) {\n\n\tMeshPhongMaterial.call( this );\n\n\tthis.defines = { 'TOON': '' };\n\n\tthis.type = 'MeshToonMaterial';\n\n\tthis.gradientMap = null;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshToonMaterial.prototype = Object.create( MeshPhongMaterial.prototype );\nMeshToonMaterial.prototype.constructor = MeshToonMaterial;\n\nMeshToonMaterial.prototype.isMeshToonMaterial = true;\n\nMeshToonMaterial.prototype.copy = function ( source ) {\n\n\tMeshPhongMaterial.prototype.copy.call( this, source );\n\n\tthis.gradientMap = source.gradientMap;\n\n\treturn this;\n\n};\n\n\nexport { MeshToonMaterial };\n","import { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  opacity: <float>,\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshNormalMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshNormalMaterial';\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\tthis.lights = false;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshNormalMaterial.prototype = Object.create( Material.prototype );\nMeshNormalMaterial.prototype.constructor = MeshNormalMaterial;\n\nMeshNormalMaterial.prototype.isMeshNormalMaterial = true;\n\nMeshNormalMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshNormalMaterial };\n","import { Material } from './Material.js';\nimport { MultiplyOperation } from '../constants.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshLambertMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshLambertMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshLambertMaterial.prototype = Object.create( Material.prototype );\nMeshLambertMaterial.prototype.constructor = MeshLambertMaterial;\n\nMeshLambertMaterial.prototype.isMeshLambertMaterial = true;\n\nMeshLambertMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshLambertMaterial };\n","import {\n\tNoBlending,\n\tNormalBlending,\n\tAdditiveBlending,\n\tSubtractiveBlending,\n\tMultiplyBlending,\n\tCustomBlending,\n\n\tFaceColors,\n\tVertexColors,\n\n\tDoubleSide,\n\tBackSide,\n\n\tMirroredRepeatWrapping,\n\tRepeatWrapping\n} from '../constants.js';\nimport { _Math } from '../math/Math.js';\nimport { MaterialLoader } from './MaterialLoader.js';\nimport { TextureLoader } from './TextureLoader.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Loader() {}\n\nLoader.Handlers = {\n\n\thandlers: [],\n\n\tadd: function ( regex, loader ) {\n\n\t\tthis.handlers.push( regex, loader );\n\n\t},\n\n\tget: function ( file ) {\n\n\t\tvar handlers = this.handlers;\n\n\t\tfor ( var i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\tvar regex = handlers[ i ];\n\t\t\tvar loader = handlers[ i + 1 ];\n\n\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\treturn loader;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n};\n\nObject.assign( Loader.prototype, {\n\n\tcrossOrigin: undefined,\n\n\tonLoadStart: function () {},\n\n\tonLoadProgress: function () {},\n\n\tonLoadComplete: function () {},\n\n\tinitMaterials: function ( materials, texturePath, crossOrigin ) {\n\n\t\tvar array = [];\n\n\t\tfor ( var i = 0; i < materials.length; ++ i ) {\n\n\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath, crossOrigin );\n\n\t\t}\n\n\t\treturn array;\n\n\t},\n\n\tcreateMaterial: ( function () {\n\n\t\tvar BlendingMode = {\n\t\t\tNoBlending: NoBlending,\n\t\t\tNormalBlending: NormalBlending,\n\t\t\tAdditiveBlending: AdditiveBlending,\n\t\t\tSubtractiveBlending: SubtractiveBlending,\n\t\t\tMultiplyBlending: MultiplyBlending,\n\t\t\tCustomBlending: CustomBlending\n\t\t};\n\n\t\tvar color = new Color();\n\t\tvar textureLoader = new TextureLoader();\n\t\tvar materialLoader = new MaterialLoader();\n\n\t\treturn function createMaterial( m, texturePath, crossOrigin ) {\n\n\t\t\t// convert from old material format\n\n\t\t\tvar textures = {};\n\n\t\t\tfunction loadTexture( path, repeat, offset, wrap, anisotropy ) {\n\n\t\t\t\tvar fullPath = texturePath + path;\n\t\t\t\tvar loader = Loader.Handlers.get( fullPath );\n\n\t\t\t\tvar texture;\n\n\t\t\t\tif ( loader !== null ) {\n\n\t\t\t\t\ttexture = loader.load( fullPath );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttextureLoader.setCrossOrigin( crossOrigin );\n\t\t\t\t\ttexture = textureLoader.load( fullPath );\n\n\t\t\t\t}\n\n\t\t\t\tif ( repeat !== undefined ) {\n\n\t\t\t\t\ttexture.repeat.fromArray( repeat );\n\n\t\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = RepeatWrapping;\n\t\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = RepeatWrapping;\n\n\t\t\t\t}\n\n\t\t\t\tif ( offset !== undefined ) {\n\n\t\t\t\t\ttexture.offset.fromArray( offset );\n\n\t\t\t\t}\n\n\t\t\t\tif ( wrap !== undefined ) {\n\n\t\t\t\t\tif ( wrap[ 0 ] === 'repeat' ) texture.wrapS = RepeatWrapping;\n\t\t\t\t\tif ( wrap[ 0 ] === 'mirror' ) texture.wrapS = MirroredRepeatWrapping;\n\n\t\t\t\t\tif ( wrap[ 1 ] === 'repeat' ) texture.wrapT = RepeatWrapping;\n\t\t\t\t\tif ( wrap[ 1 ] === 'mirror' ) texture.wrapT = MirroredRepeatWrapping;\n\n\t\t\t\t}\n\n\t\t\t\tif ( anisotropy !== undefined ) {\n\n\t\t\t\t\ttexture.anisotropy = anisotropy;\n\n\t\t\t\t}\n\n\t\t\t\tvar uuid = _Math.generateUUID();\n\n\t\t\t\ttextures[ uuid ] = texture;\n\n\t\t\t\treturn uuid;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tvar json = {\n\t\t\t\tuuid: _Math.generateUUID(),\n\t\t\t\ttype: 'MeshLambertMaterial'\n\t\t\t};\n\n\t\t\tfor ( var name in m ) {\n\n\t\t\t\tvar value = m[ name ];\n\n\t\t\t\tswitch ( name ) {\n\n\t\t\t\t\tcase 'DbgColor':\n\t\t\t\t\tcase 'DbgIndex':\n\t\t\t\t\tcase 'opticalDensity':\n\t\t\t\t\tcase 'illumination':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'DbgName':\n\t\t\t\t\t\tjson.name = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'blending':\n\t\t\t\t\t\tjson.blending = BlendingMode[ value ];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'colorAmbient':\n\t\t\t\t\tcase 'mapAmbient':\n\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial:', name, 'is no longer supported.' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'colorDiffuse':\n\t\t\t\t\t\tjson.color = color.fromArray( value ).getHex();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'colorSpecular':\n\t\t\t\t\t\tjson.specular = color.fromArray( value ).getHex();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'colorEmissive':\n\t\t\t\t\t\tjson.emissive = color.fromArray( value ).getHex();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'specularCoef':\n\t\t\t\t\t\tjson.shininess = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'shading':\n\t\t\t\t\t\tif ( value.toLowerCase() === 'basic' ) json.type = 'MeshBasicMaterial';\n\t\t\t\t\t\tif ( value.toLowerCase() === 'phong' ) json.type = 'MeshPhongMaterial';\n\t\t\t\t\t\tif ( value.toLowerCase() === 'standard' ) json.type = 'MeshStandardMaterial';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapDiffuse':\n\t\t\t\t\t\tjson.map = loadTexture( value, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapDiffuseRepeat':\n\t\t\t\t\tcase 'mapDiffuseOffset':\n\t\t\t\t\tcase 'mapDiffuseWrap':\n\t\t\t\t\tcase 'mapDiffuseAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapEmissive':\n\t\t\t\t\t\tjson.emissiveMap = loadTexture( value, m.mapEmissiveRepeat, m.mapEmissiveOffset, m.mapEmissiveWrap, m.mapEmissiveAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapEmissiveRepeat':\n\t\t\t\t\tcase 'mapEmissiveOffset':\n\t\t\t\t\tcase 'mapEmissiveWrap':\n\t\t\t\t\tcase 'mapEmissiveAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapLight':\n\t\t\t\t\t\tjson.lightMap = loadTexture( value, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapLightRepeat':\n\t\t\t\t\tcase 'mapLightOffset':\n\t\t\t\t\tcase 'mapLightWrap':\n\t\t\t\t\tcase 'mapLightAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapAO':\n\t\t\t\t\t\tjson.aoMap = loadTexture( value, m.mapAORepeat, m.mapAOOffset, m.mapAOWrap, m.mapAOAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapAORepeat':\n\t\t\t\t\tcase 'mapAOOffset':\n\t\t\t\t\tcase 'mapAOWrap':\n\t\t\t\t\tcase 'mapAOAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapBump':\n\t\t\t\t\t\tjson.bumpMap = loadTexture( value, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapBumpScale':\n\t\t\t\t\t\tjson.bumpScale = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapBumpRepeat':\n\t\t\t\t\tcase 'mapBumpOffset':\n\t\t\t\t\tcase 'mapBumpWrap':\n\t\t\t\t\tcase 'mapBumpAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapNormal':\n\t\t\t\t\t\tjson.normalMap = loadTexture( value, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapNormalFactor':\n\t\t\t\t\t\tjson.normalScale = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapNormalRepeat':\n\t\t\t\t\tcase 'mapNormalOffset':\n\t\t\t\t\tcase 'mapNormalWrap':\n\t\t\t\t\tcase 'mapNormalAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapSpecular':\n\t\t\t\t\t\tjson.specularMap = loadTexture( value, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapSpecularRepeat':\n\t\t\t\t\tcase 'mapSpecularOffset':\n\t\t\t\t\tcase 'mapSpecularWrap':\n\t\t\t\t\tcase 'mapSpecularAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapMetalness':\n\t\t\t\t\t\tjson.metalnessMap = loadTexture( value, m.mapMetalnessRepeat, m.mapMetalnessOffset, m.mapMetalnessWrap, m.mapMetalnessAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapMetalnessRepeat':\n\t\t\t\t\tcase 'mapMetalnessOffset':\n\t\t\t\t\tcase 'mapMetalnessWrap':\n\t\t\t\t\tcase 'mapMetalnessAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapRoughness':\n\t\t\t\t\t\tjson.roughnessMap = loadTexture( value, m.mapRoughnessRepeat, m.mapRoughnessOffset, m.mapRoughnessWrap, m.mapRoughnessAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapRoughnessRepeat':\n\t\t\t\t\tcase 'mapRoughnessOffset':\n\t\t\t\t\tcase 'mapRoughnessWrap':\n\t\t\t\t\tcase 'mapRoughnessAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapAlpha':\n\t\t\t\t\t\tjson.alphaMap = loadTexture( value, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapAlphaRepeat':\n\t\t\t\t\tcase 'mapAlphaOffset':\n\t\t\t\t\tcase 'mapAlphaWrap':\n\t\t\t\t\tcase 'mapAlphaAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'flipSided':\n\t\t\t\t\t\tjson.side = BackSide;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'doubleSided':\n\t\t\t\t\t\tjson.side = DoubleSide;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'transparency':\n\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial: transparency has been renamed to opacity' );\n\t\t\t\t\t\tjson.opacity = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'depthTest':\n\t\t\t\t\tcase 'depthWrite':\n\t\t\t\t\tcase 'colorWrite':\n\t\t\t\t\tcase 'opacity':\n\t\t\t\t\tcase 'reflectivity':\n\t\t\t\t\tcase 'transparent':\n\t\t\t\t\tcase 'visible':\n\t\t\t\t\tcase 'wireframe':\n\t\t\t\t\t\tjson[ name ] = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'vertexColors':\n\t\t\t\t\t\tif ( value === true ) json.vertexColors = VertexColors;\n\t\t\t\t\t\tif ( value === 'face' ) json.vertexColors = FaceColors;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.error( 'THREE.Loader.createMaterial: Unsupported', name, value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( json.type === 'MeshBasicMaterial' ) delete json.emissive;\n\t\t\tif ( json.type !== 'MeshPhongMaterial' ) delete json.specular;\n\n\t\t\tif ( json.opacity < 1 ) json.transparent = true;\n\n\t\t\tmaterialLoader.setTextures( textures );\n\n\t\t\treturn materialLoader.parse( json );\n\n\t\t};\n\n\t} )()\n\n} );\n\nexport { Loader };\n","import { Vector2 } from '../math/Vector2.js';\nimport { FileLoader } from './FileLoader.js';\nimport { DefaultLoadingManager } from './LoadingManager.js';\nimport * as Materials from '../materials/Materials.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction MaterialLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\tthis.textures = {};\n\n}\n\nObject.assign( MaterialLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new FileLoader( scope.manager );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetTextures: function ( value ) {\n\n\t\tthis.textures = value;\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar textures = this.textures;\n\n\t\tfunction getTexture( name ) {\n\n\t\t\tif ( textures[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\n\n\t\t\t}\n\n\t\t\treturn textures[ name ];\n\n\t\t}\n\n\t\tvar material = new Materials[ json.type ]();\n\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\n\t\tif ( json.name !== undefined ) material.name = json.name;\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.clearCoat !== undefined ) material.clearCoat = json.clearCoat;\n\t\tif ( json.clearCoatRoughness !== undefined ) material.clearCoatRoughness = json.clearCoatRoughness;\n\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\n\t\tif ( json.fog !== undefined ) material.fog = json.fog;\n\t\tif ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\n\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\n\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\n\n\t\tif ( json.rotation !== undefined ) material.rotation = json.rotation;\n\n\t\tif ( json.linewidth !== 1 ) material.linewidth = json.linewidth;\n\t\tif ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\n\t\tif ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\n\t\tif ( json.scale !== undefined ) material.scale = json.scale;\n\n\t\tif ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\n\t\tif ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\n\t\tif ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\n\n\t\tif ( json.skinning !== undefined ) material.skinning = json.skinning;\n\t\tif ( json.morphTargets !== undefined ) material.morphTargets = json.morphTargets;\n\t\tif ( json.dithering !== undefined ) material.dithering = json.dithering;\n\n\t\tif ( json.visible !== undefined ) material.visible = json.visible;\n\t\tif ( json.userData !== undefined ) material.userData = json.userData;\n\n\t\t// Deprecated\n\n\t\tif ( json.shading !== undefined ) material.flatShading = json.shading === 1; // THREE.FlatShading\n\n\t\t// for PointsMaterial\n\n\t\tif ( json.size !== undefined ) material.size = json.size;\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\n\n\t\t// maps\n\n\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\n\n\t\tif ( json.alphaMap !== undefined ) {\n\n\t\t\tmaterial.alphaMap = getTexture( json.alphaMap );\n\t\t\tmaterial.transparent = true;\n\n\t\t}\n\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\n\n\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\n\t\tif ( json.normalScale !== undefined ) {\n\n\t\t\tvar normalScale = json.normalScale;\n\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\n\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\n\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\n\n\t\t\t}\n\n\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\n\n\t\t}\n\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\n\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\n\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\n\n\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\n\n\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\n\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\n\n\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\n\n\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\n\n\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\n\n\t\treturn material;\n\n\t}\n\n} );\n\n\nexport { MaterialLoader };\n","/**\n * @author Don McCurdy / https://www.donmccurdy.com\n */\n\nvar LoaderUtils = {\n\n\tdecodeText: function ( array ) {\n\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\n\n\t\t\treturn new TextDecoder().decode( array );\n\n\t\t}\n\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\n\n\t\tvar s = '';\n\n\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t// Implicitly assumes little-endian.\n\t\t\ts += String.fromCharCode( array[ i ] );\n\n\t\t}\n\n\t\t// Merges multi-byte utf-8 characters.\n\t\treturn decodeURIComponent( escape( s ) );\n\n\t},\n\n\textractUrlBase: function ( url ) {\n\n\t\tvar index = url.lastIndexOf( '/' );\n\n\t\tif ( index === - 1 ) return './';\n\n\t\treturn url.substr( 0, index + 1 );\n\n\t}\n\n};\n\nexport { LoaderUtils };\n","import { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Group() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Group';\n\n}\n\nGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Group,\n\n\tisGroup: true\n\n} );\n\n\nexport { Group };\n","/**\n * @author tschw\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n */\n\nvar AnimationUtils = {\n\n\t// same as Array.prototype.slice, but also works on typed arrays\n\tarraySlice: function ( array, from, to ) {\n\n\t\tif ( AnimationUtils.isTypedArray( array ) ) {\n\n\t\t\t// in ios9 array.subarray(from, undefined) will return empty array\n\t\t\t// but array.subarray(from) or array.subarray(from, len) is correct\n\t\t\treturn new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\n\n\t\t}\n\n\t\treturn array.slice( from, to );\n\n\t},\n\n\t// converts an array to a specific type\n\tconvertArray: function ( array, type, forceClone ) {\n\n\t\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t\t\t! forceClone && array.constructor === type ) return array;\n\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\t\treturn new type( array ); // create typed array\n\n\t\t}\n\n\t\treturn Array.prototype.slice.call( array ); // create Array\n\n\t},\n\n\tisTypedArray: function ( object ) {\n\n\t\treturn ArrayBuffer.isView( object ) &&\n\t\t\t\t! ( object instanceof DataView );\n\n\t},\n\n\t// returns an array by which times and values can be sorted\n\tgetKeyframeOrder: function ( times ) {\n\n\t\tfunction compareTime( i, j ) {\n\n\t\t\treturn times[ i ] - times[ j ];\n\n\t\t}\n\n\t\tvar n = times.length;\n\t\tvar result = new Array( n );\n\t\tfor ( var i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\t\tresult.sort( compareTime );\n\n\t\treturn result;\n\n\t},\n\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\n\tsortedArray: function ( values, stride, order ) {\n\n\t\tvar nValues = values.length;\n\t\tvar result = new values.constructor( nValues );\n\n\t\tfor ( var i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\t\tvar srcOffset = order[ i ] * stride;\n\n\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// function for parsing AOS keyframe formats\n\tflattenJSON: function ( jsonKeys, times, values, valuePropertyName ) {\n\n\t\tvar i = 1, key = jsonKeys[ 0 ];\n\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t}\n\n\t\tif ( key === undefined ) return; // no data\n\n\t\tvar value = key[ valuePropertyName ];\n\t\tif ( value === undefined ) return; // no data\n\n\t\tif ( Array.isArray( value ) ) {\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else if ( value.toArray !== undefined ) {\n\n\t\t\t// ...assume THREE.Math-ish\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else {\n\n\t\t\t// otherwise push as-is\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push( value );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t}\n\n\t}\n\n};\n\n\nexport { AnimationUtils };\n","import { InterpolateDiscrete } from '../../constants.js';\nimport { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track that interpolates Strings\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction StringKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nStringKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: StringKeyframeTrack,\n\n\tValueTypeName: 'string',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\n\tInterpolantFactoryMethodSmooth: undefined\n\n} );\n\nexport { StringKeyframeTrack };\n","import { InterpolateDiscrete } from '../../constants.js';\nimport { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track of Boolean keyframe values.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction BooleanKeyframeTrack( name, times, values ) {\n\n\tKeyframeTrack.call( this, name, times, values );\n\n}\n\nBooleanKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: BooleanKeyframeTrack,\n\n\tValueTypeName: 'bool',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\tInterpolantFactoryMethodSmooth: undefined\n\n\t// Note: Actually this track could have a optimized / compressed\n\t// representation of a single value and a custom interpolant that\n\t// computes \"firstValue ^ isOdd( index )\".\n\n} );\n\nexport { BooleanKeyframeTrack };\n","/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n * @author tschw\n */\n\nfunction Interpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tthis.parameterPositions = parameterPositions;\n\tthis._cachedIndex = 0;\n\n\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\tthis.sampleValues = sampleValues;\n\tthis.valueSize = sampleSize;\n\n}\n\nObject.assign( Interpolant.prototype, {\n\n\tevaluate: function ( t ) {\n\n\t\tvar pp = this.parameterPositions,\n\t\t\ti1 = this._cachedIndex,\n\n\t\t\tt1 = pp[ i1 ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tvar right;\n\n\t\t\t\tlinear_scan: {\n\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( var giveUpAt = i1 + 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tvar t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( var giveUpAt = i1 - 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tvar mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[ i1 ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t},\n\n\tsettings: null, // optional, subclass-specific settings structure\n\t// Note: The indirection allows central control of many interpolants.\n\n\t// --- Protected interface\n\n\tDefaultSettings_: {},\n\n\tgetSettings_: function () {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t},\n\n\tcopySampleValue_: function ( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// Template methods for derived classes:\n\n\tinterpolate_: function ( /* i1, t0, t, t1 */ ) {\n\n\t\tthrow new Error( 'call to abstract method' );\n\t\t// implementations shall return this.resultBuffer\n\n\t},\n\n\tintervalChanged_: function ( /* i1, t0, t1 */ ) {\n\n\t\t// empty\n\n\t}\n\n} );\n\n//!\\ DECLARE ALIAS AFTER assign prototype !\nObject.assign( Interpolant.prototype, {\n\n\t//( 0, t, t0 ), returns this.resultBuffer\n\tbeforeStart_: Interpolant.prototype.copySampleValue_,\n\n\t//( N-1, tN-1, t ), returns this.resultBuffer\n\tafterEnd_: Interpolant.prototype.copySampleValue_,\n\n} );\n\n\nexport { Interpolant };\n","import { Interpolant } from '../Interpolant.js';\nimport { Quaternion } from '../Quaternion.js';\n\n/**\n * Spherical linear unit quaternion interpolant.\n *\n * @author tschw\n */\n\nfunction QuaternionLinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nQuaternionLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: QuaternionLinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset = i1 * stride,\n\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\n\n\t\tfor ( var end = offset + stride; offset !== end; offset += 4 ) {\n\n\t\t\tQuaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n\nexport { QuaternionLinearInterpolant };\n","import { InterpolateLinear } from '../../constants.js';\nimport { KeyframeTrack } from '../KeyframeTrack.js';\nimport { QuaternionLinearInterpolant } from '../../math/interpolants/QuaternionLinearInterpolant.js';\n\n/**\n *\n * A Track of quaternion keyframe values.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction QuaternionKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nQuaternionKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: QuaternionKeyframeTrack,\n\n\tValueTypeName: 'quaternion',\n\n\t// ValueBufferType is inherited\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\treturn new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\n\n} );\n\nexport { QuaternionKeyframeTrack };\n","import { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track of keyframe values that represent color.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction ColorKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nColorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: ColorKeyframeTrack,\n\n\tValueTypeName: 'color'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n\t// Note: Very basic implementation and nothing special yet.\n\t// However, this is the place for color space parameterization.\n\n} );\n\nexport { ColorKeyframeTrack };\n","import { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track of numeric keyframe values.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction NumberKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nNumberKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: NumberKeyframeTrack,\n\n\tValueTypeName: 'number'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\nexport { NumberKeyframeTrack };\n","import { ZeroCurvatureEnding } from '../../constants.js';\nimport { Interpolant } from '../Interpolant.js';\nimport { WrapAroundEnding, ZeroSlopeEnding } from '../../constants.js';\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n *\n * @author tschw\n */\n\nfunction CubicInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\tthis._weightPrev = - 0;\n\tthis._offsetPrev = - 0;\n\tthis._weightNext = - 0;\n\tthis._offsetNext = - 0;\n\n}\n\nCubicInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: CubicInterpolant,\n\n\tDefaultSettings_: {\n\n\t\tendingStart: ZeroCurvatureEnding,\n\t\tendingEnd: ZeroCurvatureEnding\n\n\t},\n\n\tintervalChanged_: function ( i1, t0, t1 ) {\n\n\t\tvar pp = this.parameterPositions,\n\t\t\tiPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t},\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tvar sP = - wP * ppp + 2 * wP * pp - wP * p;\n\t\tvar s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\n\t\tvar s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\n\t\tvar sN = wN * ppp - wN * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n\nexport { CubicInterpolant };\n","import { Interpolant } from '../Interpolant.js';\n\n/**\n * @author tschw\n */\n\nfunction LinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: LinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset1 = i1 * stride,\n\t\t\toffset0 = offset1 - stride,\n\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tweight0 = 1 - weight1;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n\nexport { LinearInterpolant };\n","import { Interpolant } from '../Interpolant.js';\n\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceeding\n * the parameter.\n *\n * @author tschw\n */\n\nfunction DiscreteInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nDiscreteInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: DiscreteInterpolant,\n\n\tinterpolate_: function ( i1 /*, t0, t, t1 */ ) {\n\n\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t}\n\n} );\n\n\nexport { DiscreteInterpolant };\n","import { StringKeyframeTrack } from './tracks/StringKeyframeTrack.js';\nimport { BooleanKeyframeTrack } from './tracks/BooleanKeyframeTrack.js';\nimport { QuaternionKeyframeTrack } from './tracks/QuaternionKeyframeTrack.js';\nimport { ColorKeyframeTrack } from './tracks/ColorKeyframeTrack.js';\nimport { VectorKeyframeTrack } from './tracks/VectorKeyframeTrack.js';\nimport { NumberKeyframeTrack } from './tracks/NumberKeyframeTrack.js';\nimport {\n\tInterpolateLinear,\n\tInterpolateSmooth,\n\tInterpolateDiscrete\n} from '../constants.js';\nimport { CubicInterpolant } from '../math/interpolants/CubicInterpolant.js';\nimport { LinearInterpolant } from '../math/interpolants/LinearInterpolant.js';\nimport { DiscreteInterpolant } from '../math/interpolants/DiscreteInterpolant.js';\nimport { AnimationUtils } from './AnimationUtils.js';\n\n/**\n *\n * A timed sequence of keyframes for a specific property.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction KeyframeTrack( name, times, values, interpolation ) {\n\n\tif ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\n\tif ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\n\n\tthis.name = name;\n\n\tthis.times = AnimationUtils.convertArray( times, this.TimeBufferType );\n\tthis.values = AnimationUtils.convertArray( values, this.ValueBufferType );\n\n\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\n\n\tthis.validate();\n\tthis.optimize();\n\n}\n\n// Static methods:\n\nObject.assign( KeyframeTrack, {\n\n\t// Serialization (in static context, because of constructor invocation\n\t// and automatic invocation of .toJSON):\n\n\tparse: function ( json ) {\n\n\t\tif ( json.type === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\n\n\t\t}\n\n\t\tvar trackType = KeyframeTrack._getTrackTypeForValueTypeName( json.type );\n\n\t\tif ( json.times === undefined ) {\n\n\t\t\tvar times = [], values = [];\n\n\t\t\tAnimationUtils.flattenJSON( json.keys, times, values, 'value' );\n\n\t\t\tjson.times = times;\n\t\t\tjson.values = values;\n\n\t\t}\n\n\t\t// derived classes can define a static parse method\n\t\tif ( trackType.parse !== undefined ) {\n\n\t\t\treturn trackType.parse( json );\n\n\t\t} else {\n\n\t\t\t// by default, we assume a constructor compatible with the base\n\t\t\treturn new trackType( json.name, json.times, json.values, json.interpolation );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( track ) {\n\n\t\tvar trackType = track.constructor;\n\n\t\tvar json;\n\n\t\t// derived classes can define a static toJSON method\n\t\tif ( trackType.toJSON !== undefined ) {\n\n\t\t\tjson = trackType.toJSON( track );\n\n\t\t} else {\n\n\t\t\t// by default, we assume the data can be serialized as-is\n\t\t\tjson = {\n\n\t\t\t\t'name': track.name,\n\t\t\t\t'times': AnimationUtils.convertArray( track.times, Array ),\n\t\t\t\t'values': AnimationUtils.convertArray( track.values, Array )\n\n\t\t\t};\n\n\t\t\tvar interpolation = track.getInterpolation();\n\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\n\n\t\t\t\tjson.interpolation = interpolation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tjson.type = track.ValueTypeName; // mandatory\n\n\t\treturn json;\n\n\t},\n\n\t_getTrackTypeForValueTypeName: function ( typeName ) {\n\n\t\tswitch ( typeName.toLowerCase() ) {\n\n\t\t\tcase 'scalar':\n\t\t\tcase 'double':\n\t\t\tcase 'float':\n\t\t\tcase 'number':\n\t\t\tcase 'integer':\n\n\t\t\t\treturn NumberKeyframeTrack;\n\n\t\t\tcase 'vector':\n\t\t\tcase 'vector2':\n\t\t\tcase 'vector3':\n\t\t\tcase 'vector4':\n\n\t\t\t\treturn VectorKeyframeTrack;\n\n\t\t\tcase 'color':\n\n\t\t\t\treturn ColorKeyframeTrack;\n\n\t\t\tcase 'quaternion':\n\n\t\t\t\treturn QuaternionKeyframeTrack;\n\n\t\t\tcase 'bool':\n\t\t\tcase 'boolean':\n\n\t\t\t\treturn BooleanKeyframeTrack;\n\n\t\t\tcase 'string':\n\n\t\t\t\treturn StringKeyframeTrack;\n\n\t\t}\n\n\t\tthrow new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\n\n\t}\n\n} );\n\nObject.assign( KeyframeTrack.prototype, {\n\n\tconstructor: KeyframeTrack,\n\n\tTimeBufferType: Float32Array,\n\n\tValueBufferType: Float32Array,\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodDiscrete: function ( result ) {\n\n\t\treturn new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\treturn new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: function ( result ) {\n\n\t\treturn new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tsetInterpolation: function ( interpolation ) {\n\n\t\tvar factoryMethod;\n\n\t\tswitch ( interpolation ) {\n\n\t\t\tcase InterpolateDiscrete:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateLinear:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateSmooth:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( factoryMethod === undefined ) {\n\n\t\t\tvar message = \"unsupported interpolation for \" +\n\t\t\t\tthis.ValueTypeName + \" keyframe track named \" + this.name;\n\n\t\t\tif ( this.createInterpolant === undefined ) {\n\n\t\t\t\t// fall back to default, unless the default itself is messed up\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\n\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconsole.warn( 'THREE.KeyframeTrack:', message );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.createInterpolant = factoryMethod;\n\n\t},\n\n\tgetInterpolation: function () {\n\n\t\tswitch ( this.createInterpolant ) {\n\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\n\n\t\t\t\treturn InterpolateDiscrete;\n\n\t\t\tcase this.InterpolantFactoryMethodLinear:\n\n\t\t\t\treturn InterpolateLinear;\n\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\n\n\t\t\t\treturn InterpolateSmooth;\n\n\t\t}\n\n\t},\n\n\tgetValueSize: function () {\n\n\t\treturn this.values.length / this.times.length;\n\n\t},\n\n\t// move all keyframes either forwards or backwards in time\n\tshift: function ( timeOffset ) {\n\n\t\tif ( timeOffset !== 0.0 ) {\n\n\t\t\tvar times = this.times;\n\n\t\t\tfor ( var i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] += timeOffset;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\tscale: function ( timeScale ) {\n\n\t\tif ( timeScale !== 1.0 ) {\n\n\t\t\tvar times = this.times;\n\n\t\t\tfor ( var i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] *= timeScale;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\ttrim: function ( startTime, endTime ) {\n\n\t\tvar times = this.times,\n\t\t\tnKeys = times.length,\n\t\t\tfrom = 0,\n\t\t\tto = nKeys - 1;\n\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) {\n\n\t\t\t++ from;\n\n\t\t}\n\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) {\n\n\t\t\t-- to;\n\n\t\t}\n\n\t\t++ to; // inclusive -> exclusive bound\n\n\t\tif ( from !== 0 || to !== nKeys ) {\n\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\n\t\t\tif ( from >= to ) to = Math.max( to, 1 ), from = to - 1;\n\n\t\t\tvar stride = this.getValueSize();\n\t\t\tthis.times = AnimationUtils.arraySlice( times, from, to );\n\t\t\tthis.values = AnimationUtils.arraySlice( this.values, from * stride, to * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\tvalidate: function () {\n\n\t\tvar valid = true;\n\n\t\tvar valueSize = this.getValueSize();\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tvar times = this.times,\n\t\t\tvalues = this.values,\n\n\t\t\tnKeys = times.length;\n\n\t\tif ( nKeys === 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Track is empty.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tvar prevTime = null;\n\n\t\tfor ( var i = 0; i !== nKeys; i ++ ) {\n\n\t\t\tvar currTime = times[ i ];\n\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tprevTime = currTime;\n\n\t\t}\n\n\t\tif ( values !== undefined ) {\n\n\t\t\tif ( AnimationUtils.isTypedArray( values ) ) {\n\n\t\t\t\tfor ( var i = 0, n = values.length; i !== n; ++ i ) {\n\n\t\t\t\t\tvar value = values[ i ];\n\n\t\t\t\t\tif ( isNaN( value ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn valid;\n\n\t},\n\n\t// removes equivalent sequential keys as common in morph target sequences\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\toptimize: function () {\n\n\t\tvar times = this.times,\n\t\t\tvalues = this.values,\n\t\t\tstride = this.getValueSize(),\n\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\n\n\t\t\twriteIndex = 1,\n\t\t\tlastIndex = times.length - 1;\n\n\t\tfor ( var i = 1; i < lastIndex; ++ i ) {\n\n\t\t\tvar keep = false;\n\n\t\t\tvar time = times[ i ];\n\t\t\tvar timeNext = times[ i + 1 ];\n\n\t\t\t// remove adjacent keyframes scheduled at the same time\n\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\n\n\t\t\t\tif ( ! smoothInterpolation ) {\n\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\n\n\t\t\t\t\tvar offset = i * stride,\n\t\t\t\t\t\toffsetP = offset - stride,\n\t\t\t\t\t\toffsetN = offset + stride;\n\n\t\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvar value = values[ offset + j ];\n\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\n\n\t\t\t\t\t\t\tkeep = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tkeep = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// in-place compaction\n\n\t\t\tif ( keep ) {\n\n\t\t\t\tif ( i !== writeIndex ) {\n\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\n\n\t\t\t\t\tvar readOffset = i * stride,\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\n\n\t\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t++ writeIndex;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// flush last keyframe (compaction looks ahead)\n\n\t\tif ( lastIndex > 0 ) {\n\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\n\n\t\t\tfor ( var readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t}\n\n\t\t\t++ writeIndex;\n\n\t\t}\n\n\t\tif ( writeIndex !== times.length ) {\n\n\t\t\tthis.times = AnimationUtils.arraySlice( times, 0, writeIndex );\n\t\t\tthis.values = AnimationUtils.arraySlice( values, 0, writeIndex * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nexport { KeyframeTrack };\n","import {\n\tREVISION,\n\tRGBAFormat,\n\tHalfFloatType,\n\tFloatType,\n\tUnsignedByteType,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tTrianglesDrawMode,\n\tNoColors,\n\tLinearToneMapping\n} from '../constants.js';\nimport { _Math } from '../math/Math.js';\nimport { DataTexture } from '../textures/DataTexture.js';\nimport { Frustum } from '../math/Frustum.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { ShaderLib } from './shaders/ShaderLib.js';\nimport { UniformsLib } from './shaders/UniformsLib.js';\nimport { UniformsUtils } from './shaders/UniformsUtils.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\nimport { WebGLAttributes } from './webgl/WebGLAttributes.js';\nimport { WebGLBackground } from './webgl/WebGLBackground.js';\nimport { WebGLBufferRenderer } from './webgl/WebGLBufferRenderer.js';\nimport { WebGLCapabilities } from './webgl/WebGLCapabilities.js';\nimport { WebGLClipping } from './webgl/WebGLClipping.js';\nimport { WebGLExtensions } from './webgl/WebGLExtensions.js';\nimport { WebGLGeometries } from './webgl/WebGLGeometries.js';\nimport { WebGLIndexedBufferRenderer } from './webgl/WebGLIndexedBufferRenderer.js';\nimport { WebGLInfo } from './webgl/WebGLInfo.js';\nimport { WebGLMorphtargets } from './webgl/WebGLMorphtargets.js';\nimport { WebGLObjects } from './webgl/WebGLObjects.js';\nimport { WebGLPrograms } from './webgl/WebGLPrograms.js';\nimport { WebGLProperties } from './webgl/WebGLProperties.js';\nimport { WebGLRenderLists } from './webgl/WebGLRenderLists.js';\nimport { WebGLRenderStates } from './webgl/WebGLRenderStates.js';\nimport { WebGLShadowMap } from './webgl/WebGLShadowMap.js';\nimport { WebGLSpriteRenderer } from './webgl/WebGLSpriteRenderer.js';\nimport { WebGLState } from './webgl/WebGLState.js';\nimport { WebGLTextures } from './webgl/WebGLTextures.js';\nimport { WebGLUniforms } from './webgl/WebGLUniforms.js';\nimport { WebGLUtils } from './webgl/WebGLUtils.js';\nimport { WebVRManager } from './webvr/WebVRManager.js';\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n * @author tschw\n */\n\nfunction WebGLRenderer( parameters ) {\n\n\tconsole.log( 'THREE.WebGLRenderer', REVISION );\n\n\tparameters = parameters || {};\n\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default';\n\n\tvar currentRenderList = null;\n\tvar currentRenderState = null;\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\tthis.context = null;\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\n\tthis.gammaInput = false;\n\tthis.gammaOutput = false;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = LinearToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\tthis.toneMappingWhitePoint = 1.0;\n\n\t// External buffers\n\tthis.saoBuffer = null;\n\tthis.indirectDiffuseBuffer = null;\n\tthis.screenBufferSize = new THREE.Vector2( 0, 0 );\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// internal properties\n\n\tvar _this = this,\n\n\t\t_isContextLost = false,\n\n\t\t// internal state cache\n\n\t\t_currentRenderTarget = null,\n\t\t_currentFramebuffer = null,\n\t\t_currentMaterialId = - 1,\n\t\t_currentGeometryProgram = '',\n\n\t\t_currentCamera = null,\n\t\t_currentArrayCamera = null,\n\n\t\t_currentViewport = new Vector4(),\n\t\t_currentScissor = new Vector4(),\n\t\t_currentScissorTest = null,\n\n\t\t//\n\n\t\t_usedTextureUnits = 0,\n\n\t\t//\n\n\t\t_width = _canvas.width,\n\t\t_height = _canvas.height,\n\n\t\t_pixelRatio = 1,\n\n\t\t_viewport = new Vector4( 0, 0, _width, _height ),\n\t\t_scissor = new Vector4( 0, 0, _width, _height ),\n\t\t_scissorTest = false,\n\n\t\t// frustum\n\n\t\t_frustum = new Frustum(),\n\n\t\t// clipping\n\n\t\t_clipping = new WebGLClipping(),\n\t\t_clippingEnabled = false,\n\t\t_localClippingEnabled = false,\n\n\t\t// camera matrices cache\n\n\t\t_projScreenMatrix = new Matrix4(),\n\n\t\t_vector3 = new Vector3();\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\t// initialize\n\n\tvar _gl;\n\n\ttry {\n\n\t\tvar contextAttributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\n\t\t\tpowerPreference: _powerPreference\n\t\t};\n\n\t\t// event listeners must be registered before WebGL context is created, see #12753\n\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\t_gl = _context || _canvas.getContext( 'webgl', contextAttributes ) || _canvas.getContext( 'experimental-webgl', contextAttributes );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\n\n\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\n\t}\n\n\tvar extensions, capabilities, state, info;\n\tvar properties, textures, attributes, geometries, objects;\n\tvar programCache, renderLists, renderStates;\n\n\tvar background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\tvar spriteRenderer;\n\n\tvar utils;\n\n\tfunction initGLContext() {\n\n\t\textensions = new WebGLExtensions( _gl );\n\t\textensions.get( 'WEBGL_depth_texture' );\n\t\textensions.get( 'OES_texture_float' );\n\t\textensions.get( 'OES_texture_float_linear' );\n\t\textensions.get( 'OES_texture_half_float' );\n\t\textensions.get( 'OES_texture_half_float_linear' );\n\t\textensions.get( 'OES_standard_derivatives' );\n\t\textensions.get( 'OES_element_index_uint' );\n\t\textensions.get( 'ANGLE_instanced_arrays' );\n\n\t\tutils = new WebGLUtils( _gl, extensions );\n\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\tstate = new WebGLState( _gl, extensions, utils );\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\n\n\t\tinfo = new WebGLInfo( _gl );\n\t\tproperties = new WebGLProperties();\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\n\t\tattributes = new WebGLAttributes( _gl );\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info );\n\t\tobjects = new WebGLObjects( geometries, info );\n\t\tmorphtargets = new WebGLMorphtargets( _gl );\n\t\tprogramCache = new WebGLPrograms( _this, extensions, capabilities );\n\t\trenderLists = new WebGLRenderLists();\n\t\trenderStates = new WebGLRenderStates();\n\n\t\tbackground = new WebGLBackground( _this, state, geometries, _premultipliedAlpha );\n\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info );\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info );\n\n\t\tspriteRenderer = new WebGLSpriteRenderer( _this, _gl, state, textures, capabilities );\n\n\t\tinfo.programs = programCache.programs;\n\n\t\t_this.context = _gl;\n\t\t_this.capabilities = capabilities;\n\t\t_this.extensions = extensions;\n\t\t_this.properties = properties;\n\t\t_this.renderLists = renderLists;\n\t\t_this.state = state;\n\t\t_this.info = info;\n\n\t}\n\n\tinitGLContext();\n\n\t// vr\n\n\tvar vr = new WebVRManager( _this );\n\n\tthis.vr = vr;\n\n\t// shadow map\n\n\tvar shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\n\n\tthis.shadowMap = shadowMap;\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\tvar extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.loseContext();\n\n\t};\n\n\tthis.forceContextRestore = function () {\n\n\t\tvar extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.restoreContext();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _width, _height, false );\n\n\t};\n\n\tthis.getSize = function () {\n\n\t\treturn {\n\t\t\twidth: _width,\n\t\t\theight: _height\n\t\t};\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\tvar device = vr.getDevice();\n\n\t\tif ( device && device.isPresenting ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = width * _pixelRatio;\n\t\t_canvas.height = height * _pixelRatio;\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getDrawingBufferSize = function () {\n\n\t\treturn {\n\t\t\twidth: _width * _pixelRatio,\n\t\t\theight: _height * _pixelRatio\n\t\t};\n\n\t};\n\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_pixelRatio = pixelRatio;\n\n\t\t_canvas.width = width * pixelRatio;\n\t\t_canvas.height = height * pixelRatio;\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getCurrentViewport = function () {\n\n\t\treturn _currentViewport;\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\t_viewport.set( x, _height - y - height, width, height );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\t_scissor.set( x, _height - y - height, width, height );\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function () {\n\n\t\treturn background.getClearColor();\n\n\t};\n\n\tthis.setClearColor = function () {\n\n\t\tbackground.setClearColor.apply( background, arguments );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn background.getClearAlpha();\n\n\t};\n\n\tthis.setClearAlpha = function () {\n\n\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tvar bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\n\n\t\tthis.setRenderTarget( renderTarget );\n\t\tthis.clear( color, depth, stencil );\n\n\t};\n\n\t//\n\n\tthis.dispose = function () {\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\trenderLists.dispose();\n\t\trenderStates.dispose();\n\t\tproperties.dispose();\n\t\tobjects.dispose();\n\n\t\tvr.dispose();\n\n\t\tstopAnimation();\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t_isContextLost = true;\n\n\t}\n\n\tfunction onContextRestore( /* event */ ) {\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t_isContextLost = false;\n\n\t\tinitGLContext();\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tvar material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReference( material );\n\n\t\tproperties.remove( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReference( material ) {\n\n\t\tvar programInfo = properties.get( material ).program;\n\n\t\tmaterial.program = undefined;\n\n\t\tif ( programInfo !== undefined ) {\n\n\t\t\tprogramCache.releaseProgram( programInfo );\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tfunction renderObjectImmediate( object, program, material ) {\n\n\t\tobject.render( function ( object ) {\n\n\t\t\t_this.renderBufferImmediate( object, program, material );\n\n\t\t} );\n\n\t}\n\n\tthis.renderBufferImmediate = function ( object, program, material ) {\n\n\t\tstate.initAttributes();\n\n\t\tvar buffers = properties.get( object );\n\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.position );\n\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\n\n\t\t\tif ( ! material.isMeshPhongMaterial &&\n\t\t\t\t! material.isMeshStandardMaterial &&\n\t\t\t\t! material.isMeshNormalMaterial &&\n\t\t\t\tmaterial.flatShading === true ) {\n\n\t\t\t\tfor ( var i = 0, l = object.count * 3; i < l; i += 9 ) {\n\n\t\t\t\t\tvar array = object.normalArray;\n\n\t\t\t\t\tvar nx = ( array[ i + 0 ] + array[ i + 3 ] + array[ i + 6 ] ) / 3;\n\t\t\t\t\tvar ny = ( array[ i + 1 ] + array[ i + 4 ] + array[ i + 7 ] ) / 3;\n\t\t\t\t\tvar nz = ( array[ i + 2 ] + array[ i + 5 ] + array[ i + 8 ] ) / 3;\n\n\t\t\t\t\tarray[ i + 0 ] = nx;\n\t\t\t\t\tarray[ i + 1 ] = ny;\n\t\t\t\t\tarray[ i + 2 ] = nz;\n\n\t\t\t\t\tarray[ i + 3 ] = nx;\n\t\t\t\t\tarray[ i + 4 ] = ny;\n\t\t\t\t\tarray[ i + 5 ] = nz;\n\n\t\t\t\t\tarray[ i + 6 ] = nx;\n\t\t\t\t\tarray[ i + 7 ] = ny;\n\t\t\t\t\tarray[ i + 8 ] = nz;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.normal );\n\n\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs && material.map ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.uv );\n\n\t\t\t_gl.vertexAttribPointer( programAttributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors && material.vertexColors !== NoColors ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.color );\n\n\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tthis.renderBufferDirect = function ( camera, fog, geometry, material, object, group ) {\n\n\t\tvar frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\tvar program = setProgram( camera, fog, material, object );\n\t\tvar geometryProgram = geometry.id + '_' + program.id + '_' + ( material.wireframe === true );\n\n\t\tvar updateBuffers = false;\n\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\n\n\t\t\t_currentGeometryProgram = geometryProgram;\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( object.morphTargetInfluences ) {\n\n\t\t\tmorphtargets.update( object, geometry, material, program );\n\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\t//\n\n\t\tvar index = geometry.index;\n\t\tvar position = geometry.attributes.position;\n\t\tvar rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\tvar attribute;\n\t\tvar renderer = bufferRenderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattribute = attributes.get( index );\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( attribute );\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tsetupVertexAttributes( material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, attribute.buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar dataCount = Infinity;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdataCount = index.count;\n\n\t\t} else if ( position !== undefined ) {\n\n\t\t\tdataCount = position.count;\n\n\t\t}\n\n\t\tvar rangeStart = geometry.drawRange.start * rangeFactor;\n\t\tvar rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\tvar groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\tvar groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\tvar drawStart = Math.max( rangeStart, groupStart );\n\t\tvar drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tvar drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else {\n\n\t\t\t\tswitch ( object.drawMode ) {\n\n\t\t\t\t\tcase TrianglesDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLES );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TriangleStripDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_STRIP );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TriangleFanDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_FAN );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t} else if ( object.isLine ) {\n\n\t\t\tvar lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\trenderer.setMode( _gl.LINE_LOOP );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\n\n\t\t\t}\n\n\t\t} else if ( object.isPoints ) {\n\n\t\t\trenderer.setMode( _gl.POINTS );\n\n\t\t}\n\n\t\tif ( geometry && geometry.isInstancedBufferGeometry ) {\n\n\t\t\tif ( geometry.maxInstancedCount > 0 ) {\n\n\t\t\t\trenderer.renderInstances( geometry, drawStart, drawCount );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\tfunction setupVertexAttributes( material, program, geometry ) {\n\n\t\tif ( geometry && geometry.isInstancedBufferGeometry ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.initAttributes();\n\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( var name in programAttributes ) {\n\n\t\t\tvar programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tvar normalized = geometryAttribute.normalized;\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\n\n\t\t\t\t\tvar attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tvar buffer = attribute.buffer;\n\t\t\t\t\tvar type = attribute.type;\n\t\t\t\t\tvar bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tvar data = geometryAttribute.data;\n\t\t\t\t\t\tvar stride = data.stride;\n\t\t\t\t\t\tvar offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t}\n\n\t// Compile\n\n\tthis.compile = function ( scene, camera ) {\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.material ) {\n\n\t\t\t\tif ( Array.isArray( object.material ) ) {\n\n\t\t\t\t\tfor ( var i = 0; i < object.material.length; i ++ ) {\n\n\t\t\t\t\t\tinitMaterial( object.material[ i ], scene.fog, object );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinitMaterial( object.material, scene.fog, object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\t// Animation Loop\n\n\tvar isAnimating = false;\n\tvar onAnimationFrame = null;\n\n\tfunction startAnimation() {\n\n\t\tif ( isAnimating ) return;\n\n\t\trequestAnimationLoopFrame();\n\n\t\tisAnimating = true;\n\n\t}\n\n\tfunction stopAnimation() {\n\n\t\tisAnimating = false;\n\n\t}\n\n\tfunction requestAnimationLoopFrame() {\n\n\t\tvar device = vr.getDevice();\n\n\t\tif ( device && device.isPresenting ) {\n\n\t\t\tdevice.requestAnimationFrame( animationLoop );\n\n\t\t} else {\n\n\t\t\twindow.requestAnimationFrame( animationLoop );\n\n\t\t}\n\n\t}\n\n\tfunction animationLoop( time ) {\n\n\t\tif ( isAnimating === false ) return;\n\n\t\tonAnimationFrame( time );\n\n\t\trequestAnimationLoopFrame();\n\n\t}\n\n\tthis.animate = function ( callback ) {\n\n\t\tonAnimationFrame = callback;\n\t\tonAnimationFrame !== null ? startAnimation() : stopAnimation();\n\n\t};\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\n\n\t\tif ( ! ( camera && camera.isCamera ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( _isContextLost ) return;\n\n\t\t// reset caching for this frame\n\n\t\t_currentGeometryProgram = '';\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tif ( vr.enabled ) {\n\n\t\t\tcamera = vr.getCamera( camera );\n\n\t\t}\n\n\t\t//\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\tscene.onBeforeRender( _this, scene, camera, renderTarget );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = _clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tcurrentRenderList = renderLists.get( scene, camera );\n\t\tcurrentRenderList.init();\n\n\t\tprojectObject( scene, camera, _this.sortObjects );\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\tcurrentRenderList.sort();\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled ) _clipping.beginShadows();\n\n\t\tvar shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tif ( _clippingEnabled ) _clipping.endShadows();\n\n\t\t//\n\n\t\tif ( this.info.autoReset ) this.info.reset();\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\trenderTarget = null;\n\n\t\t}\n\n\t\tthis.setRenderTarget( renderTarget );\n\n\t\t//\n\n\t\tbackground.render( currentRenderList, scene, camera, forceClear );\n\n\t\t// render scene\n\n\t\tvar opaqueObjects = currentRenderList.opaque;\n\t\tvar transparentObjects = currentRenderList.transparent;\n\n\t\tif ( scene.overrideMaterial ) {\n\n\t\t\tvar overrideMaterial = scene.overrideMaterial;\n\n\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera, overrideMaterial );\n\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera, overrideMaterial );\n\n\t\t} else {\n\n\t\t\t// opaque pass (front-to-back order)\n\n\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera );\n\n\t\t\t// transparent pass (back-to-front order)\n\n\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera );\n\n\t\t}\n\n\t\t// custom renderers\n\n\t\tvar spritesArray = currentRenderState.state.spritesArray;\n\n\t\tspriteRenderer.render( spritesArray, scene, camera );\n\n\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\tif ( renderTarget ) {\n\n\t\t\ttextures.updateRenderTargetMipmap( renderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.buffers.depth.setTest( true );\n\t\tstate.buffers.depth.setMask( true );\n\t\tstate.buffers.color.setMask( true );\n\n\t\tstate.setPolygonOffset( false );\n\n\t\tscene.onAfterRender( _this, scene, camera );\n\n\t\tif ( vr.enabled ) {\n\n\t\t\tvr.submitFrame();\n\n\t\t}\n\n\t\t// _gl.finish();\n\n\t\tcurrentRenderList = null;\n\t\tcurrentRenderState = null;\n\n\t};\n\n\t/*\n\t// TODO Duplicated code (Frustum)\n\n\tvar _sphere = new Sphere();\n\n\tfunction isObjectViewable( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null )\n\t\t\tgeometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere ).\n\t\tapplyMatrix4( object.matrixWorld );\n\n\t\treturn isSphereViewable( _sphere );\n\n\t}\n\n\tfunction isSpriteViewable( sprite ) {\n\n\t\t_sphere.center.set( 0, 0, 0 );\n\t\t_sphere.radius = 0.7071067811865476;\n\t\t_sphere.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn isSphereViewable( _sphere );\n\n\t}\n\n\tfunction isSphereViewable( sphere ) {\n\n\t\tif ( ! _frustum.intersectsSphere( sphere ) ) return false;\n\n\t\tvar numPlanes = _clipping.numPlanes;\n\n\t\tif ( numPlanes === 0 ) return true;\n\n\t\tvar planes = _this.clippingPlanes,\n\n\t\t\tcenter = sphere.center,\n\t\t\tnegRad = - sphere.radius,\n\t\t\ti = 0;\n\n\t\tdo {\n\n\t\t\t// out when deeper than radius in the negative halfspace\n\t\t\tif ( planes[ i ].distanceToPoint( center ) < negRad ) return false;\n\n\t\t} while ( ++ i !== numPlanes );\n\n\t\treturn true;\n\n\t}\n\t*/\n\n\tfunction projectObject( object, camera, sortObjects ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tvar visible = object.layers.test( camera.layers );\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\tcurrentRenderState.pushSprite( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isImmediateRenderObject ) {\n\n\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tcurrentRenderList.push( object, null, object.material, _vector3.z, null );\n\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\tobject.skeleton.update();\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar geometry = objects.update( object );\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tvar group = groups[ i ];\n\t\t\t\t\t\t\tvar groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, _vector3.z, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, sortObjects );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera, overrideMaterial ) {\n\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tvar renderItem = renderList[ i ];\n\n\t\t\tvar object = renderItem.object;\n\t\t\tvar geometry = renderItem.geometry;\n\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\n\t\t\tvar group = renderItem.group;\n\n\t\t\tif ( camera.isArrayCamera ) {\n\n\t\t\t\t_currentArrayCamera = camera;\n\n\t\t\t\tvar cameras = camera.cameras;\n\n\t\t\t\tfor ( var j = 0, jl = cameras.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar camera2 = cameras[ j ];\n\n\t\t\t\t\tif ( object.layers.test( camera2.layers ) ) {\n\n\t\t\t\t\t\tvar bounds = camera2.bounds;\n\n\t\t\t\t\t\tvar x = bounds.x * _width;\n\t\t\t\t\t\tvar y = bounds.y * _height;\n\t\t\t\t\t\tvar width = bounds.z * _width;\n\t\t\t\t\t\tvar height = bounds.w * _height;\n\n\t\t\t\t\t\tstate.viewport( _currentViewport.set( x, y, width, height ).multiplyScalar( _pixelRatio ) );\n\n\t\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_currentArrayCamera = null;\n\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\tif ( object.isImmediateRenderObject ) {\n\n\t\t\tvar frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\t\tvar program = setProgram( camera, scene.fog, material, object );\n\n\t\t\t_currentGeometryProgram = '';\n\n\t\t\trenderObjectImmediate( object, program, material );\n\n\t\t} else {\n\n\t\t\t_this.renderBufferDirect( camera, scene.fog, geometry, material, object, group );\n\n\t\t}\n\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t}\n\n\tfunction initMaterial( material, fog, object ) {\n\n\t\tvar materialProperties = properties.get( material );\n\n\t\tvar lights = currentRenderState.state.lights;\n\t\tvar shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tvar parameters = programCache.getParameters(\n\t\t\tmaterial, lights.state, shadowsArray, fog, _clipping.numPlanes, _clipping.numIntersection, object );\n\n\t\tvar code = programCache.getProgramCode( material, parameters );\n\n\t\tvar program = materialProperties.program;\n\t\tvar programChange = true;\n\n\t\tif ( program === undefined ) {\n\n\t\t\t// new material\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t} else if ( program.code !== code ) {\n\n\t\t\t// changed glsl or parameters\n\t\t\treleaseMaterialProgramReference( material );\n\n\t\t} else if ( materialProperties.lightsHash !== lights.state.hash ) {\n\n\t\t\tproperties.update( material, 'lightsHash', lights.state.hash );\n\t\t\tprogramChange = false;\n\n\t\t} else if ( parameters.shaderID !== undefined ) {\n\n\t\t\t// same glsl and uniform list\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// only rebuild uniform list\n\t\t\tprogramChange = false;\n\n\t\t}\n\n\t\tif ( programChange ) {\n\n\t\t\tif ( parameters.shaderID ) {\n\n\t\t\t\tvar shader = ShaderLib[ parameters.shaderID ];\n\n\t\t\t\tmaterialProperties.shader = {\n\t\t\t\t\tname: material.type,\n\t\t\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\t\tfragmentShader: shader.fragmentShader\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tmaterialProperties.shader = {\n\t\t\t\t\tname: material.type,\n\t\t\t\t\tuniforms: material.uniforms,\n\t\t\t\t\tvertexShader: material.vertexShader,\n\t\t\t\t\tfragmentShader: material.fragmentShader\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tmaterial.onBeforeCompile( materialProperties.shader, _this );\n\n\t\t\tprogram = programCache.acquireProgram( material, materialProperties.shader, parameters, code );\n\n\t\t\tmaterialProperties.program = program;\n\t\t\tmaterial.program = program;\n\n\t\t}\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tif ( material.morphTargets ) {\n\n\t\t\tmaterial.numSupportedMorphTargets = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\n\n\t\t\t\tif ( programAttributes[ 'morphTarget' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.morphNormals ) {\n\n\t\t\tmaterial.numSupportedMorphNormals = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphNormals; i ++ ) {\n\n\t\t\t\tif ( programAttributes[ 'morphNormal' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar uniforms = materialProperties.shader.uniforms;\n\n\t\tif ( ! material.isShaderMaterial &&\n\t\t\t! material.isRawShaderMaterial ||\n\t\t\tmaterial.clipping === true ) {\n\n\t\t\tmaterialProperties.numClippingPlanes = _clipping.numPlanes;\n\t\t\tmaterialProperties.numIntersection = _clipping.numIntersection;\n\t\t\tuniforms.clippingPlanes = _clipping.uniform;\n\n\t\t}\n\n\t\tmaterialProperties.fog = fog;\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.lightsHash = lights.state.hash;\n\n\t\tif ( material.lights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\tuniforms.rectAreaTexture.value = lights.state.rectAreaTexture;\n\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\tuniforms.lightDirection.value = lights.state.lightDirection;\n\t\t\tuniforms.directionalNormalOffset.value = lights.state.directionalNormalOffset;\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\tuniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n\t\t\tuniforms.spotPosition.value = lights.state.spotPosition;\n\t\t\tuniforms.spotNormalOffset.value = lights.state.spotNormalOffset;\n\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\tuniforms.rectShadowMap.value = lights.state.rectShadowMap;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tvar progUniforms = materialProperties.program.getUniforms(),\n\t\t\tuniformsList =\n\t\t\t\tWebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t}\n\n\tfunction setProgram( camera, fog, material, object ) {\n\n\t\t_usedTextureUnits = 0;\n\n\t\tvar materialProperties = properties.get( material );\n\t\tvar lights = currentRenderState.state.lights;\n\n\t\tvar useAO = (material.transparent || material.alphaTest > 0.) ? false : true;\n\n\t\tif ( _clippingEnabled ) {\n\n\t\t\tif ( _localClippingEnabled || camera !== _currentCamera ) {\n\n\t\t\t\tvar useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\t_clipping.setState(\n\t\t\t\t\tmaterial.clippingPlanes, material.clipIntersection, material.clipShadows,\n\t\t\t\t\tcamera, materialProperties, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.needsUpdate === false ) {\n\n\t\t\tif ( materialProperties.program === undefined ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( material.fog && materialProperties.fog !== fog ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( material.lights && materialProperties.lightsHash !== lights.state.hash ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== _clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection !== _clipping.numIntersection ) ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.needsUpdate ) {\n\n\t\t\tinitMaterial( material, fog, object );\n\t\t\tmaterial.needsUpdate = false;\n\n\t\t}\n\n\t\tvar refreshProgram = false;\n\t\tvar refreshMaterial = false;\n\t\tvar refreshLights = false;\n\n\t\tvar program = materialProperties.program,\n\t\t\tp_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.shader.uniforms;\n\n\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || camera !== _currentCamera ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\t\t\t// Avoid unneeded uniform updates per ArrayCamera's sub-camera\n\n\t\t\tif ( _currentCamera !== ( _currentArrayCamera || camera ) ) {\n\n\t\t\t\t_currentCamera = ( _currentArrayCamera || camera );\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\tvar uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\tmaterial.skinning ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// not sure why, but otherwise weird things happen\n\n\t\tif ( material.skinning ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tvar skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tvar bones = skeleton.bones;\n\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\tif ( skeleton.boneTexture === undefined ) {\n\n\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\n\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n\t\t\t\t\t\tvar size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\t\t\t\t\tsize = _Math.ceilPowerOfTwo( size );\n\t\t\t\t\t\tsize = Math.max( size, 4 );\n\n\t\t\t\t\t\tvar boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\n\n\t\t\t\t\t\tvar boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\t\t\t\t\t\tboneTexture.needsUpdate = true;\n\n\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\n\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\n\t\t\t\t\t\tskeleton.boneTextureSize = size;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture );\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingWhitePoint', _this.toneMappingWhitePoint );\n\t\t\tp_uniforms.setValue( _gl, 'screenBufferSize', _this.screenBufferSize );\n\t\t\tp_uniforms.setValue( _gl, 'useAO', useAO );\n\n\t\t\tp_uniforms.setValue( _gl, 'saoBuffer', _this.saoBuffer );\n\t\t\tp_uniforms.setValue( _gl, 'indirectDiffuseBuffer', _this.indirectDiffuseBuffer );\n\n\t\t\tif ( material.lights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t\tif ( material.isMeshToonMaterial ) {\n\n\t\t\t\t\trefreshUniformsToon( m_uniforms, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trefreshUniformsPhong( m_uniforms, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\t\trefreshUniformsPhysical( m_uniforms, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trefreshUniformsStandard( m_uniforms, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsDepth( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshDistanceMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsDistance( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsNormal( m_uniforms, material );\n\n\t\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\n\t\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\t\trefreshUniformsDash( m_uniforms, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\t\trefreshUniformsPoints( m_uniforms, material );\n\n\t\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\t\tm_uniforms.color.value = material.color;\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\n\n\t\t\t}\n\n\t\t\t// RectAreaLight Texture\n\t\t\t// TODO (mrdoob): Find a nicer implementation\n\n\t\t\tif ( m_uniforms.ltc_1 !== undefined ) m_uniforms.ltc_1.value = UniformsLib.LTC_1;\n\t\t\tif ( m_uniforms.ltc_2 !== undefined ) m_uniforms.ltc_2.value = UniformsLib.LTC_2;\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, _this );\n\n\t\t}\n\n\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, _this );\n\t\t\tmaterial.uniformsNeedUpdate = false;\n\n\t\t}\n\n\t\t// common matrices\n\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\treturn program;\n\n\t}\n\n\t// Uniforms (refresh uniforms objects)\n\n\tfunction refreshUniformsCommon( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value = material.color;\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t}\n\n\t\tif ( material.envMap ) {\n\n\t\t\tuniforms.envMap.value = material.envMap;\n\n\t\t\t// don't flip CubeTexture envMaps, flip everything else:\n\t\t\t//  WebGLRenderTargetCube will be flipped for backwards compatibility\n\t\t\t//  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\n\t\t\t// this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\n\t\t\tuniforms.flipEnvMap.value = ( ! ( material.envMap && material.envMap.isCubeTexture ) ) ? 1 : - 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t\tuniforms.maxMipLevel.value = properties.get( material.envMap ).__maxMipLevel;\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. normal map\n\t\t// 4. bump map\n\t\t// 5. alpha map\n\t\t// 6. emissive map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material ) {\n\n\t\tuniforms.diffuse.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * _pixelRatio;\n\t\tuniforms.scale.value = _height * 0.5;\n\n\t\tuniforms.map.value = material.map;\n\n\t\tif ( material.map !== null ) {\n\n\t\t\tif ( material.map.matrixAutoUpdate === true ) {\n\n\t\t\t\tmaterial.map.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( material.map.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsFog( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value = fog.color;\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert( uniforms, material ) {\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value = material.specular;\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\trefreshUniformsPhong( uniforms, material );\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tif ( material.envMap ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material ) {\n\n\t\tuniforms.clearCoat.value = material.clearCoat;\n\t\tuniforms.clearCoatRoughness.value = material.clearCoatRoughness;\n\n\t\trefreshUniformsStandard( uniforms, material );\n\n\t}\n\n\tfunction refreshUniformsDepth( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\n\t\tuniforms.nearDistance.value = material.nearDistance;\n\t\tuniforms.farDistance.value = material.farDistance;\n\n\t}\n\n\tfunction refreshUniformsNormal( uniforms, material ) {\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\t// Textures\n\n\tfunction allocTextureUnit() {\n\n\t\tvar textureUnit = _usedTextureUnits;\n\n\t\tif ( textureUnit >= capabilities.maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\n\n\t\t}\n\n\t\t_usedTextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\tthis.allocTextureUnit = allocTextureUnit;\n\n\t// this.setTexture2D = setTexture2D;\n\tthis.setTexture2D = ( function () {\n\n\t\tvar warned = false;\n\n\t\t// backwards compatibility: peel texture.texture\n\t\treturn function setTexture2D( texture, slot ) {\n\n\t\t\tif ( texture && texture.isWebGLRenderTarget ) {\n\n\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\t\t\twarned = true;\n\n\t\t\t\t}\n\n\t\t\t\ttexture = texture.texture;\n\n\t\t\t}\n\n\t\t\ttextures.setTexture2D( texture, slot );\n\n\t\t};\n\n\t}() );\n\n\tthis.setTexture = ( function () {\n\n\t\tvar warned = false;\n\n\t\treturn function setTexture( texture, slot ) {\n\n\t\t\tif ( ! warned ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\" );\n\t\t\t\twarned = true;\n\n\t\t\t}\n\n\t\t\ttextures.setTexture2D( texture, slot );\n\n\t\t};\n\n\t}() );\n\n\tthis.setTextureCube = ( function () {\n\n\t\tvar warned = false;\n\n\t\treturn function setTextureCube( texture, slot ) {\n\n\t\t\t// backwards compatibility: peel texture.texture\n\t\t\tif ( texture && texture.isWebGLRenderTargetCube ) {\n\n\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\n\t\t\t\t\twarned = true;\n\n\t\t\t\t}\n\n\t\t\t\ttexture = texture.texture;\n\n\t\t\t}\n\n\t\t\t// currently relying on the fact that WebGLRenderTargetCube.texture is a Texture and NOT a CubeTexture\n\t\t\t// TODO: unify these code paths\n\t\t\tif ( ( texture && texture.isCubeTexture ) ||\n\t\t\t\t( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\n\n\t\t\t\t// CompressedTexture can have Array in image :/\n\n\t\t\t\t// this function alone should take care of cube textures\n\t\t\t\ttextures.setTextureCube( texture, slot );\n\n\t\t\t} else {\n\n\t\t\t\t// assumed: texture property of THREE.WebGLRenderTargetCube\n\n\t\t\t\ttextures.setTextureCubeDynamic( texture, slot );\n\n\t\t\t}\n\n\t\t};\n\n\t}() );\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\n\n\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tvar framebuffer = null;\n\t\tvar isCube = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tvar __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLRenderTargetCube ) {\n\n\t\t\t\tframebuffer = __webglFramebuffer[ renderTarget.activeCubeFace ];\n\t\t\t\tisCube = true;\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t} else {\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio );\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio );\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t}\n\n\t\tif ( _currentFramebuffer !== framebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport );\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tif ( isCube ) {\n\n\t\t\tvar textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + renderTarget.activeCubeFace, textureProperties.__webglTexture, renderTarget.activeMipMapLevel );\n\n\t\t}\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer ) {\n\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( framebuffer ) {\n\n\t\t\tvar restore = false;\n\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\t\trestore = true;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tvar texture = renderTarget.texture;\n\t\t\t\tvar textureFormat = texture.format;\n\t\t\t\tvar textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) && // IE11, Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! ( textureType === HalfFloatType && extensions.get( 'EXT_color_buffer_half_float' ) ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\tif ( restore ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.copyFramebufferToTexture = function ( position, texture, level ) {\n\n\t\tvar width = texture.image.width;\n\t\tvar height = texture.image.height;\n\t\tvar glFormat = utils.convert( texture.format );\n\n\t\tthis.setTexture2D( texture, 0 );\n\n\t\t_gl.copyTexImage2D( _gl.TEXTURE_2D, level || 0, glFormat, position.x, position.y, width, height, 0 );\n\n\t};\n\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level ) {\n\n\t\tvar width = srcTexture.image.width;\n\t\tvar height = srcTexture.image.height;\n\t\tvar glFormat = utils.convert( dstTexture.format );\n\t\tvar glType = utils.convert( dstTexture.type );\n\t\tvar pixels = srcTexture.isDataTexture ? srcTexture.image.data : srcTexture.image;\n\n\t\tthis.setTexture2D( dstTexture, 0 );\n\n\t\t_gl.texSubImage2D( _gl.TEXTURE_2D, level || 0, position.x, position.y, width, height, glFormat, glType, pixels );\n\n\t};\n\n}\n\n\nexport { WebGLRenderer };\n"],"names":["min","max","vector","matrix","x","y","z","v1","quaternion","CullFaceNone","CullFaceBack","CullFaceFront","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","DoubleSide","NoColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","DepthFormat","DepthStencilFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","TrianglesDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","_Math","DEG2RAD","Math","PI","RAD2DEG","generateUUID","lut","i","toString","d0","random","d1","d2","d3","toUpperCase","clamp","value","euclideanModulo","n","m","mapLinear","a1","a2","b1","b2","lerp","t","smoothstep","smootherstep","randInt","low","high","floor","randFloat","randFloatSpread","range","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","pow","ceil","log","LN2","floorPowerOfTwo","EventDispatcher","Vector2","this","Matrix4","elements","arguments","length","console","error","Quaternion","w","_x","_y","_z","_w","undefined","Vector3","Matrix3","Object","assign","prototype","addEventListener","type","listener","_listeners","listeners","indexOf","push","hasEventListener","removeEventListener","listenerArray","index","splice","dispatchEvent","event","target","array","slice","l","call","defineProperties","width","get","set","height","isVector2","setScalar","scalar","setX","setY","setComponent","Error","getComponent","clone","constructor","copy","v","add","warn","addVectors","addScalar","s","a","b","addScaledVector","sub","subVectors","subScalar","multiply","multiplyScalar","divide","divideScalar","applyMatrix3","e","clampScalar","minVal","maxVal","clampLength","round","roundToZero","negate","dot","lengthSq","sqrt","manhattanLength","abs","normalize","angle","atan2","distanceTo","distanceToSquared","dx","dy","manhattanDistanceTo","setLength","alpha","lerpVectors","v2","equals","fromArray","offset","toArray","fromBufferAttribute","attribute","getX","getY","rotateAround","center","c","cos","sin","isMatrix4","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","te","identity","me","copyPosition","extractBasis","xAxis","yAxis","zAxis","setFromMatrixColumn","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","euler","isEuler","d","f","order","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","q","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","lookAt","eye","up","crossVectors","multiplyMatrices","premultiply","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","applyToBufferAttribute","count","getZ","applyMatrix4","setXYZ","determinant","transpose","tmp","setPosition","getInverse","throwOnDegenerate","t11","t12","t13","t14","det","msg","detInv","scale","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","theta","makeRotationY","makeRotationZ","makeRotationAxis","axis","tx","ty","makeScale","makeShear","compose","position","decompose","sx","sy","sz","invSX","invSY","invSZ","setFromRotationMatrix","makePerspective","left","right","top","bottom","near","far","makeOrthographic","h","p","slerp","qa","qb","qm","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","Number","EPSILON","len","tDir","onChangeCallback","setFromEuler","update","c1","c2","c3","s1","s2","s3","setFromAxisAngle","halfAngle","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","r","vFrom","vTo","inverse","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","onChange","callback","isVector3","setZ","multiplyVectors","applyEuler","applyQuaternion","applyAxisAngle","qx","qy","qz","qw","ix","iy","iz","iw","project","camera","projectionMatrix","matrixWorld","unproject","transformDirection","cross","ax","ay","az","bx","by","bz","projectOnVector","projectOnPlane","planeNormal","reflect","normal","angleTo","acos","dz","setFromSpherical","sinPhiRadius","phi","radius","setFromCylindrical","setFromMatrixPosition","setFromMatrixScale","isMatrix3","setFromMatrix4","g","getNormalMatrix","matrix4","transposeIntoArray","setUvTransform","rotation","cx","cy","rotate","translate","points","closestPoint","box","p1","p2","sphere","textureId","Texture","image","mapping","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","defineProperty","uuid","name","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","version","onUpdate","DataTexture","data","Box3","Sphere","Plane","constant","Frustum","p0","p3","p4","p5","planes","create","isTexture","updateMatrix","source","toJSON","meta","isRootObject","textures","output","metadata","generator","wrap","images","url","canvas","HTMLCanvasElement","document","createElementNS","context","getContext","ImageData","putImageData","drawImage","toDataURL","getDataURL","dispose","transformUv","uv","isDataTexture","isBox3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromBufferAttribute","setFromPoints","makeEmpty","il","expandByPoint","setFromCenterAndSize","size","halfSize","setFromObject","object","expandByObject","isEmpty","getCenter","getSize","point","expandByVector","expandByScalar","scope","traverse","node","geometry","isGeometry","vertices","isBufferGeometry","attributes","updateMatrixWorld","containsPoint","containsBox","getParameter","intersectsBox","intersectsSphere","clampPoint","intersectsPlane","plane","intersectsTriangle","v0","f0","f1","f2","testAxis","extents","triangleNormal","satForAxes","axes","j","triangle","distanceToPoint","getBoundingSphere","intersect","union","optionalCenter","maxRadiusSq","empty","radiusSum","deltaLengthSq","getBoundingBox","setComponents","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","intersectLine","line","direction","delta","denominator","start","intersectsLine","startSign","endSign","end","coplanarPoint","m1","optionalNormalMatrix","normalMatrix","referencePoint","frustum","setFromMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","intersectsObject","boundingSphere","computeBoundingSphere","intersectsSprite","sprite","negRadius","hsl","ShaderChunk","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","apply_accumulative_buffers_fragment","apply_accumulative_buffers_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","lights_pars_maps","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","UniformsUtils","merge","uniforms","merged","u","uniforms_src","uniforms_dst","parameter_src","isColor","isVector4","Array","isArray","ColorKeywords","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","Color","setRGB","setHex","setStyle","hex","setHSL","hue2rgb","style","handleAlpha","string","parseFloat","exec","color","components","parseInt","charAt","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","getHex","getHexString","getHSL","hue","saturation","lightness","getStyle","offsetHSL","addColors","color1","color2","UniformsLib","diffuse","opacity","map","uvTransform","alphaMap","specularmap","specularMap","envmap","envMap","flipEnvMap","reflectivity","refractionRatio","maxMipLevel","aomap","aoMap","aoMapIntensity","lightmap","lightMap","lightMapIntensity","emissivemap","emissiveMap","bumpmap","bumpMap","bumpScale","normalmap","normalMap","normalScale","displacementmap","displacementMap","displacementScale","displacementBias","roughnessmap","roughnessMap","metalnessmap","metalnessMap","gradientmap","gradientMap","fog","fogDensity","fogNear","fogFar","fogColor","lights","ambientLightColor","directionalLights","properties","shadow","shadowBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","lightDirection","directionalNormalOffset","spotLights","distance","coneCos","penumbraCos","decay","spotShadowMap","spotShadowMatrix","spotPosition","spotNormalOffset","pointLights","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","useAreaTexture","rectAreaTexture","rectShadowMap","ShaderLib","basic","vertexShader","fragmentShader","lambert","emissive","phong","specular","shininess","standard","roughness","metalness","envMapIntensity","dashed","dashSize","totalSize","depth","cube","tCube","tFlip","equirect","tEquirect","distanceRGBA","referencePosition","nearDistance","farDistance","Vector4","WebGLAttributes","gl","buffers","WeakMap","isInterleavedBufferAttribute","remove","deleteBuffer","buffer","delete","bufferType","usage","dynamic","DYNAMIC_DRAW","STATIC_DRAW","createBuffer","bindBuffer","bufferData","onUploadCallback","FLOAT","Float32Array","Float64Array","Uint16Array","UNSIGNED_SHORT","Int16Array","SHORT","Uint32Array","UNSIGNED_INT","Int32Array","INT","Int8Array","BYTE","Uint8Array","UNSIGNED_BYTE","bytesPerElement","BYTES_PER_ELEMENT","updateRange","bufferSubData","subarray","updateBuffer","Euler","_order","DefaultOrder","Layers","mask","physical","clearCoat","clearCoatRoughness","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","getW","RotationOrders","asin","setFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","channel","enable","toggle","disable","test","layers","q1","object3DId","Object3D","parent","children","DefaultUp","enumerable","modelViewMatrix","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","renderOrder","userData","Camera","matrixWorldInverse","OrthographicCamera","zoom","view","updateProjectionMatrix","Face3","materialIndex","vertexNormals","vertexColors","isObject3D","onBeforeRender","onAfterRender","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","isCamera","getObjectById","id","getObjectByProperty","getObjectByName","getWorldPosition","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverseVisible","traverseAncestors","force","geometries","materials","shapes","serialize","library","element","JSON","stringify","parameters","shape","material","uuids","extractFromCache","cache","values","key","recursive","parse","child","isOrthographicCamera","setViewOffset","fullWidth","fullHeight","enabled","offsetX","offsetY","clearViewOffset","zoomW","zoomH","scaleW","scaleH","obj","geometryId","Geometry","colors","faces","faceVertexUvs","morphTargets","morphNormals","skinWeights","skinIndices","lineDistances","boundingBox","elementsNeedUpdate","verticesNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","BufferAttribute","itemSize","normalized","TypeError","Int8BufferAttribute","Uint8BufferAttribute","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Uint16BufferAttribute","Int32BufferAttribute","Uint32BufferAttribute","Float32BufferAttribute","Float64BufferAttribute","DirectGeometry","normals","uvs","uvs2","groups","arrayMax","face","jl","computeBoundingBox","fromBufferGeometry","indices","positions","uv2","tempNormals","tempUVs","tempUVs2","addFace","group","computeFaceNormals","cb","ab","fl","vA","vB","vC","computeVertexNormals","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","colors1","colors2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeMesh","mesh","isMesh","mergeVertices","verticesMap","unique","changes","precision","faceIndicesToRemove","idx","diff","sortFacesByMaterialIndex","_id","sort","newUvs1","newUvs2","vertex","normalsHash","colorsHash","uvsHash","hasFaceVertexUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","hash","k","kl","uvsCopy","morphTarget","morphNormal","srcVertexNormal","destVertexNormal","isBufferAttribute","setArray","setDynamic","copyAt","index1","index2","copyArray","copyColorsArray","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","setXY","setXYZW","onUpload","computeGroups","fromGeometry","morphTargetsPosition","hasFaceVertexUv2","morphTargetsLength","morphTargetsNormal","morphNormalsLength","hasSkinIndices","hasSkinWeights","vertexUvs","bufferGeometryId","BufferGeometry","morphAttributes","drawRange","Infinity","BoxGeometry","widthSegments","heightSegments","depthSegments","BoxBufferGeometry","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","addGroup","setIndex","addAttribute","PlaneGeometry","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","getIndex","getAttribute","removeAttribute","clearGroups","setDrawRange","needsUpdate","isPoints","isLine","updateFromObject","direct","__directGeometry","lineDistance","fromDirectGeometry","isNaN","pA","pB","pC","normalizeNormals","attributeArray1","attribute2","attributeArray2","toNonIndexed","geometry2","array2","morphAttribute","segCenter","segDir","startP","startEnd","materialId","Material","blending","side","flatShading","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","premultipliedAlpha","overdraw","MeshBasicMaterial","combine","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","skinning","setValues","ShaderMaterial","defines","linewidth","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","Ray","origin","Line3","Triangle","Mesh","drawMode","updateMorphTargets","WebGLBackground","renderer","state","planeCamera","planeMesh","boxMesh","clearColor","clearAlpha","setClear","getClearColor","setClearColor","getClearAlpha","setClearAlpha","render","renderList","scene","forceClear","background","autoClear","clear","autoClearColor","autoClearDepth","autoClearStencil","isCubeTexture","renderBufferDirect","WebGLBufferRenderer","info","mode","setMode","drawArrays","renderInstances","extension","drawArraysInstancedANGLE","maxInstancedCount","WebGLCapabilities","maxAnisotropy","getMaxPrecision","getShaderPrecisionFormat","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","maxPrecision","logarithmicDepthBuffer","maxTextures","MAX_TEXTURE_IMAGE_UNITS","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","maxTextureSize","MAX_TEXTURE_SIZE","maxCubemapSize","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","MAX_VERTEX_ATTRIBS","maxVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","vertexTextures","floatFragmentTextures","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","floatVertexTextures","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","uniform","resetGlobalState","numPlanes","numIntersection","projectPlanes","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","i4","init","enableLocalClipping","beginShadows","endShadows","setState","fromCache","nGlobal","lGlobal","clippingState","WebGLExtensions","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","buffergeometry","memory","_bufferGeometry","geometryAttributes","ELEMENT_ARRAY_BUFFER","ARRAY_BUFFER","getWireframeAttribute","geometryIndex","WebGLIndexedBufferRenderer","drawElements","drawElementsInstancedANGLE","WebGLInfo","frame","calls","triangles","lines","programs","autoReset","reset","instanceCount","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","LINES","LINE_STRIP","LINE_LOOP","POINTS","absNumericalSort","WebGLMorphtargets","influencesList","morphInfluences","program","objectInfluences","morphTargetInfluences","influences","influence","getUniforms","setValue","WebGLObjects","updateList","CubeTexture","isMaterial","onBeforeCompile","newValue","currentValue","isRoot","emissiveIntensity","sizeAttenuation","gapSize","srcPlanes","dstPlanes","isMeshBasicMaterial","isShaderMaterial","ray","at","recast","closestPointToPoint","directionDistance","distanceSqToPoint","distanceSqToSegment","optionalPointOnRay","optionalPointOnSegment","s0","sqrDist","extDet","segExtent","a01","b0","invDet","intersectSphere","tca","radius2","thc","t0","t1","distanceToPlane","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","edge1","edge2","backfaceCulling","sign","DdN","DdQxE2","DdE1xQ","QdN","distanceSq","closestPointToPointParameter","clampToLine","startEnd2","getNormal","targetLengthSq","getBarycoord","dot00","dot01","dot02","dot11","dot12","denom","invDenom","setFromPointsAndIndices","i0","i1","i2","getArea","getMidpoint","getPlane","edgeList","projectedPoint","minDistance","setDrawMode","morphTargetDictionary","ml","keys","String","inverseMatrix","tempA","tempB","tempC","uvA","uvB","uvC","barycoord","intersectionPoint","intersectionPointWorld","uvIntersection","uv1","uv3","checkIntersection","raycaster","checkBufferGeometryIntersection","intersection","faceIndex","intersects","fvA","fvB","fvC","isMultiMaterial","faceMaterial","tl","targets","uvs_f","emptyTexture","emptyCubeTexture","UniformContainer","seq","arrayCacheF32","arrayCacheI32","mat4array","mat3array","flatten","nBlocks","blockSize","firstElem","allocTexUnits","allocTextureUnit","setValue1f","uniform1f","addr","setValue1i","uniform1i","setValue2fv","uniform2fv","uniform2f","setValue3fv","uniform3f","uniform3fv","setValue4fv","uniform4fv","uniform4f","setValue2fm","uniformMatrix2fv","setValue3fm","uniformMatrix3fv","setValue4fm","uniformMatrix4fv","setValueT1","unit","setTexture2D","setValueT6","setTextureCube","setValue2iv","uniform2iv","setValue3iv","uniform3iv","setValue4iv","uniform4iv","setValue1fv","uniform1fv","setValue1iv","uniform1iv","setValueV2a","setValueV3a","setValueV4a","setValueM2a","setValueM3a","setValueM4a","setValueT1a","units","setValueT6a","SingleUniform","activeInfo","getSingularSetter","PureArrayUniform","getPureArraySetter","StructuredUniform","RePathPart","addUniform","container","uniformObject","parseUniform","path","pathLength","lastIndex","match","matchEnd","idIsIndex","subscript","next","WebGLUniforms","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","WebGLShader","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","split","join","addLineNumbers","setOptional","upload","seqWithValue","programIdCount","getEncodingComponents","getTexelDecodingFunction","functionName","filterEmptyLine","replaceLightNums","replace","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","parseIncludes","include","unrollLoops","snippet","unroll","WebGLProgram","code","shadowMapTypeDefine","shadowMapType","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","prefixVertex","prefixFragment","gammaFactorDefine","customExtensions","rendererExtensions","envMapCubeUV","filter","generateExtensions","customDefines","chunks","generateDefines","shaderTextureLODExtEnabled","createProgram","isRawShaderMaterial","supportsVertexTextures","maxBones","useFog","fogExp","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","physicallyCorrectLights","toneMapping","toneMappingName","getToneMappingFunction","outputEncoding","mapEncoding","envMapEncoding","emissiveMapEncoding","depthPacking","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","cachedUniforms","cachedAttributes","programLog","getProgramInfoLog","trim","vertexLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","getError","VALIDATE_STATUS","diagnostics","prefix","deleteShader","getAttributes","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","fetchAttributeLocations","destroy","deleteProgram","usedTimes","WebGLPrograms","capabilities","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","parameterNames","getTextureEncodingFromMap","gammaOverrideLinear","isWebGLRenderTarget","texture","getParameters","shadows","nClipPlanes","nClipIntersection","shaderID","isSkinnedMesh","bones","skeleton","nVertexUniforms","nVertexMatrices","allocateBones","currentRenderTarget","getRenderTarget","gammaOutput","gammaInput","envMapMode","isFogExp2","maxMorphTargets","maxMorphNormals","directional","spot","rectArea","hemi","shadowMap","getProgramCode","acquireProgram","pl","programInfo","releaseProgram","pop","WebGLProperties","painterSortStable","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","renderItem","WebGLRenderLists","lists","list","UniformsCache","light","halfWidth","halfHeight","lineGeometry","coneGeometry","WebGLLights","ambient","vector3","matrix42","setup","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","intensity","isAmbientLight","isDirectionalLight","bias","mapSize","normalOffset","isSpotLight","penumbra","isRectAreaLight","areaTexture","isPointLight","isHemisphereLight","WebGLRenderState","lightsArray","shadowsArray","spritesArray","setupLights","pushLight","pushShadow","shadowLight","pushSprite","WebGLRenderStates","renderStates","renderState","WebGLRenderTarget","options","scissor","scissorTest","viewport","depthBuffer","stencilBuffer","depthTexture","WebGLShadowMap","_renderer","_objects","_frustum","_projScreenMatrix","_shadowMapSize","_maxShadowMapSize","_lookTarget","_lightPositionWorld","_MorphingFlag","_SkinningFlag","_NumberOfMaterialVariants","_depthMaterials","_distanceMaterials","_materialCache","0","1","2","cubeDirections","cubeUps","cube2DViewPorts","useMorphing","useSkinning","depthMaterial","distanceMaterial","getDepthMaterial","lightPositionWorld","result","materialVariants","customMaterial","customDepthMaterial","customDistanceMaterial","variantIndex","keyA","keyB","materialsForVariant","cachedMaterial","isMeshDistanceMaterial","renderObject","shadowCamera","groupMaterial","autoUpdate","faceCount","_gl","_state","BLEND","setTest","setScissorTest","vpWidth","vpHeight","pars","isSpotLightShadow","shadowMatrix","setRenderTarget","vpDimensions","CanvasTexture","WebGLSpriteRenderer","vertexBuffer","elementBuffer","spritePosition","spriteRotation","spriteScale","sprites","uvOffset","uvScale","fogType","fogDepth","fillStyle","fillRect","useProgram","initAttributes","enableAttribute","disableUnusedAttributes","CULL_FACE","vertexAttribPointer","activeTexture","TEXTURE0","oldFogType","sceneFogType","isFog","density","setBlending","setMask","WebGLState","utils","colorBuffer","locked","currentColorMask","currentColorClear","colorMask","setLocked","lock","currentDepthMask","currentDepthFunc","currentDepthClear","DEPTH_TEST","depthMask","setFunc","NEVER","ALWAYS","LESS","LEQUAL","EQUAL","GEQUAL","GREATER","NOTEQUAL","clearDepth","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","STENCIL_TEST","stencilMask","stencilFunc","stencilRef","setOp","stencilFail","stencilZFail","stencilZPass","stencilOp","stencil","clearStencil","maxVertexAttributes","newAttributes","enabledAttributes","attributeDivisors","compressedTextureFormats","currentProgram","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","MAX_COMBINED_TEXTURE_IMAGE_UNITS","lineWidthAvailable","glVersion","VERSION","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","emptyTextures","blendEquationSeparate","FUNC_ADD","blendFuncSeparate","ONE","blendFunc","SRC_ALPHA","ZERO","ONE_MINUS_SRC_COLOR","ONE_MINUS_SRC_ALPHA","SRC_COLOR","convert","setFlipSided","frontFace","CW","CCW","setCullFace","cullFace","BACK","FRONT","FRONT_AND_BACK","setPolygonOffset","factor","POLYGON_OFFSET_FILL","webglSlot","TEXTURE_2D","TEXTURE_CUBE_MAP","TEXTURE_CUBE_MAP_POSITIVE_X","enableVertexAttribArray","vertexAttribDivisorANGLE","enableAttributeAndDivisor","meshPerAttribute","disableVertexAttribArray","getCompressedTextureFormats","formats","COMPRESSED_TEXTURE_FORMATS","setMaterial","frontFaceCW","setLineWidth","lineWidth","SCISSOR_TEST","webglType","webglTexture","boundTexture","compressedTexImage2D","apply","WebGLTextures","_canvas","_isWebGL2","WebGL2RenderingContext","_videoTextures","clampToMaxSize","maxSize","textureNeedsGenerateMipmaps","generateMipmap","__maxMipLevel","LOG2E","filterFallback","LINEAR","onTextureDispose","textureProperties","__image__webglTextureCube","deleteTexture","__webglInit","__webglTexture","deallocateTexture","isVideoTexture","onRenderTargetDispose","renderTarget","renderTargetProperties","isWebGLRenderTargetCube","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","deallocateRenderTarget","slot","updateVideoTexture","__version","complete","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","textureNeedsPowerOfTwo","HTMLImageElement","ImageBitmap","makePowerOfTwo","isPowerOfTwoImage","glFormat","glType","setTextureParameters","mipmap","isDepthTexture","internalFormat","DEPTH_COMPONENT","DEPTH_COMPONENT32F","DEPTH_COMPONENT16","DEPTH_STENCIL","isCompressedTexture","uploadTexture","textureType","TEXTURE_WRAP_S","TEXTURE_WRAP_T","CLAMP_TO_EDGE","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","RGBA4","isCompressed","cubeImage","setTextureCubeDynamic","setupRenderTarget","isCube","isTargetPowerOfTwo","createFramebuffer","COLOR_ATTACHMENT0","webglDepthTexture","setupDepthTexture","createRenderbuffer","setupDepthRenderbuffer","updateRenderTargetMipmap","WebGLUtils","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","HALF_FLOAT_OES","ALPHA","RGB","LUMINANCE","LUMINANCE_ALPHA","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","MIN_EXT","MAX_EXT","UNSIGNED_INT_24_8_WEBGL","PerspectiveCamera","fov","aspect","focus","filmGauge","filmOffset","ArrayCamera","cameras","WebVRManager","device","frameData","poseTarget","standingMatrix","standingMatrixInverse","window","VRFrameData","onVRDisplayPresentChange","tempQuaternion","tempPosition","cameraL","bounds","cameraR","currentSize","currentPixelRatio","cameraVR","isPresenting","eyeParameters","getEyeParameters","renderWidth","renderHeight","getPixelRatio","setDrawingBufferSize","userHeight","getDevice","setDevice","setPoseTarget","getCamera","depthNear","depthFar","getFrameData","stageParameters","sittingToStandingTransform","pose","poseObject","orientation","leftViewMatrix","rightViewMatrix","leftProjectionMatrix","rightProjectionMatrix","getLayers","layer","leftBounds","rightBounds","getStandingMatrix","submitFrame","Scene","overrideMaterial","CylinderGeometry","radiusTop","radiusBottom","radialSegments","openEnded","thetaStart","thetaLength","CylinderBufferGeometry","indexArray","generateCap","centerIndexStart","centerIndexEnd","cosTheta","sinTheta","slope","indexRow","generateTorso","Clock","autoStart","startTime","oldTime","elapsedTime","running","Raycaster","params","Line","LOD","Points","threshold","Sprite","PointCloud","ascSort","intersectObject","linecap","linejoin","LineSegments","STANDARD","PHYSICAL","ArrowHelper","headLength","headWidth","cone","setDirection","Light","LightShadow","DirectionalLightShadow","DirectionalLight","AmbientLight","HemisphereLight","setSize","isMeshDepthMaterial","isPerspectiveCamera","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","getEffectiveFOV","getFilmWidth","skew","isArrayCamera","performance","Date","now","stop","getElapsedTime","getDelta","newTime","linePrecision","setFromCamera","coords","optionalTarget","intersectObjects","objects","isLineBasicMaterial","computeLineDistances","positionAttribute","precisionSq","vStart","vEnd","interSegment","interRay","step","isLineSegments","nbVertices","isMeshStandardMaterial","isMeshPhysicalMaterial","isShadowMaterial","isLineDashedMaterial","setColor","isLight","Cache","files","file","DefaultLoadingManager","onLoad","onProgress","onError","isLoading","itemsLoaded","itemsTotal","urlModifier","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","transform","ImageLoader","manager","TextureLoader","CubeTextureLoader","Curve","arcLengthDivisions","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","ArcCurve","aRadius","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","t2","calc","crossOrigin","load","cached","setTimeout","substr","src","setCrossOrigin","setPath","loader","isJPEG","search","urls","loaded","loadTexture","getPoint","getPointAt","getUtoTmapping","getPoints","divisions","getSpacedPoints","getLength","lengths","getLengths","cacheArcLengths","current","last","sum","updateArcLengths","targetArcLength","arcLengths","comparison","lengthBefore","getTangent","pt1","getTangentAt","computeFrenetFrames","segments","closed","tangents","binormals","vec","mat","MAX_VALUE","tz","fromJSON","json","isEllipseCurve","twoPi","deltaAngle","samePoints","isArcCurve","px","py","pz","CatmullRomCurve3","curveType","CatmullRom","QuadraticBezier","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","CubicBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","CubicBezierCurve","v3","CubicBezierCurve3","LineCurve","LineCurve3","QuadraticBezierCurve","QuadraticBezierCurve3","SplineCurve","isCatmullRomCurve3","intPoint","weight","isCubicBezierCurve","isCubicBezierCurve3","isLineCurve","isLineCurve3","isQuadraticBezierCurve","isQuadraticBezierCurve3","isSplineCurve","CurvePath","curves","autoClose","Path","currentPoint","Shape","holes","linkedList","dim","clockwise","signedArea","insertNode","removeNode","filterPoints","again","steiner","area","prev","earcutLinked","ear","invSize","pass","zOrder","prevZ","nextZ","tail","numMerges","pSize","qSize","inSize","sortLinked","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","locallyInside","isValidDiagonal","splitPolygon","compareX","eliminateHole","hole","outerNode","hx","hy","mx","my","tanMin","findHoleBridge","getLeftmost","leftmost","intersectsPolygon","inside","middleInside","q2","Node","an","bp","curve","closePath","startPoint","endPoint","Curves[ 'LineCurve' ]","curveLengths","getCurveLengths","segmentLength","lens","cacheLengths","sums","resolution","pts","Curves","moveTo","lineTo","quadraticCurveTo","aCPx","aCPy","bezierCurveTo","aCP1x","aCP1y","aCP2x","aCP2y","splineThru","concat","arc","absarc","absellipse","ellipse","firstPoint","lastPoint","getPointsHoles","holesPts","extractPoints","ShapeUtils","contour","isClockWise","triangulateShape","holeIndices","removeDupEndPts","addContour","holeIndex","forEach","hasHoles","outerLen","queue","eliminateHoles","Earcut","ShapePath","subPaths","currentPath","Font","createPath","char","glyph","glyphs","cpx","cpy","cpx1","cpy1","cpx2","cpy2","o","outline","_cachedOutline","ha","toShapes","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPt","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","tmpPoints","tmpHoles","betterShapeHoles","newShapes","newShapeHoles","mainIdx","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","isFont","generateShapes","text","paths","chars","line_height","yMax","yMin","underlineThickness","ret","createPaths","loading","FileLoader","FontLoader","ExtrudeGeometry","ExtrudeBufferGeometry","verticesArray","uvArray","addShape","extrudePts","splineTube","binormal","position2","ahole","hl","placeholder","curveSegments","steps","amount","bevelEnabled","bevelThickness","bevelSize","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","extrudeByPath","shapePoints","reverse","scalePt2","pt","bs","vert","vlen","flen","getBevelVec","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","sf","v_trans_lensq","direction_eq","contourMovements","oneHoleMovements","holesMovements","verticesMovements","sidewalls","layeroffset","sl","slen1","slen2","f4","f3","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","buildLidFaces","buildSideFaces","dataUriRegexResult","mimeType","isBase64","decodeURIComponent","atob","response","responseType","toLowerCase","charCodeAt","Blob","parser","DOMParser","parseFromString","request","XMLHttpRequest","header","open","callbacks","status","withCredentials","overrideMimeType","requestHeader","setRequestHeader","send","setResponseType","setWithCredentials","setMimeType","substring","font","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","TextGeometry","TextBufferGeometry","Uniform","SphereGeometry","phiStart","phiLength","SphereBufferGeometry","thetaEnd","grid","verticesRow","SpotLightShadow","SpotLight","power","SpriteMaterial","RawShaderMaterial","TOON","isMeshPhongMaterial","isSpriteMaterial","isPointsMaterial","isMeshToonMaterial","isMeshNormalMaterial","isMeshLambertMaterial","BlendingMode","textureLoader","materialLoader","MaterialLoader","Loader","setTextures","getTexture","Materials","shading","Handlers","handlers","regex","onLoadStart","onLoadProgress","onLoadComplete","initMaterials","texturePath","createMaterial","fullPath","mapDiffuseRepeat","mapDiffuseOffset","mapDiffuseWrap","mapDiffuseAnisotropy","mapEmissiveRepeat","mapEmissiveOffset","mapEmissiveWrap","mapEmissiveAnisotropy","mapLightRepeat","mapLightOffset","mapLightWrap","mapLightAnisotropy","mapAORepeat","mapAOOffset","mapAOWrap","mapAOAnisotropy","mapBumpRepeat","mapBumpOffset","mapBumpWrap","mapBumpAnisotropy","mapNormalRepeat","mapNormalOffset","mapNormalWrap","mapNormalAnisotropy","mapSpecularRepeat","mapSpecularOffset","mapSpecularWrap","mapSpecularAnisotropy","mapMetalnessRepeat","mapMetalnessOffset","mapMetalnessWrap","mapMetalnessAnisotropy","mapRoughnessRepeat","mapRoughnessOffset","mapRoughnessWrap","mapRoughnessAnisotropy","mapAlphaRepeat","mapAlphaOffset","mapAlphaWrap","mapAlphaAnisotropy","LoaderUtils","decodeText","TextDecoder","decode","fromCharCode","escape","extractUrlBase","lastIndexOf","Group","isGroup","AnimationUtils","arraySlice","from","to","isTypedArray","convertArray","forceClone","ArrayBuffer","isView","DataView","getKeyframeOrder","times","sortedArray","stride","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","time","StringKeyframeTrack","interpolation","KeyframeTrack","BooleanKeyframeTrack","Interpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","_cachedIndex","valueSize","QuaternionLinearInterpolant","QuaternionKeyframeTrack","ColorKeyframeTrack","NumberKeyframeTrack","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","LinearInterpolant","DiscreteInterpolant","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","validate","optimize","ValueTypeName","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","evaluate","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","getValueSize","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o1","o0","oP","oN","wP","wN","ppp","sP","sN","offset1","offset0","weight1","weight0","trackType","_getTrackTypeForValueTypeName","track","getInterpolation","typeName","VectorKeyframeTrack","InterpolantFactoryMethodDiscrete","factoryMethod","createInterpolant","message","shift","timeOffset","timeScale","endTime","nKeys","valid","prevTime","currTime","smoothInterpolation","writeIndex","keep","offsetP","offsetN","_context","_alpha","_depth","_stencil","_antialias","antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","currentRenderList","currentRenderState","domElement","sortObjects","toneMappingExposure","toneMappingWhitePoint","saoBuffer","indirectDiffuseBuffer","screenBufferSize","THREE","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","spriteRenderer","_this","_isContextLost","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentGeometryProgram","_currentCamera","_currentArrayCamera","_currentViewport","_currentScissor","_currentScissorTest","_usedTextureUnits","_width","_height","_pixelRatio","_viewport","_scissor","_scissorTest","_clipping","_clippingEnabled","_localClippingEnabled","_vector3","getTargetPixelRatio","contextAttributes","onContextLost","onContextRestore","rangeMin","rangeMax","initGLContext","vr","preventDefault","onMaterialDispose","releaseMaterialProgramReference","deallocateMaterial","getContextAttributes","forceContextLoss","loseContext","forceContextRestore","restoreContext","setPixelRatio","updateStyle","setViewport","getDrawingBufferSize","pixelRatio","getCurrentViewport","setScissor","boolean","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearTarget","stopAnimation","renderBufferImmediate","hasPositions","hasNormals","hasUvs","hasColors","programAttributes","positionArray","normalArray","nx","ny","nz","colorArray","setProgram","geometryProgram","updateBuffers","rangeFactor","isInstancedBufferGeometry","materialDefaultAttributeValues","programAttribute","geometryAttribute","isInstancedInterleavedBuffer","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","setupVertexAttributes","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineLoop","compile","initMaterial","warned","isAnimating","onAnimationFrame","requestAnimationLoopFrame","requestAnimationFrame","animationLoop","renderObjects","camera2","isImmediateRenderObject","renderObjectImmediate","materialProperties","programChange","lightsHash","numSupportedMorphTargets","numSupportedMorphNormals","progUniforms","uniformsList","useAO","useCache","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","boneTexture","boneMatrices","boneTextureSize","refreshUniformsFog","refreshUniformsCommon","refreshUniformsLambert","refreshUniformsPhong","refreshUniformsToon","refreshUniformsStandard","refreshUniformsPhysical","refreshUniformsDepth","refreshUniformsDistance","refreshUniformsNormal","refreshUniformsLine","refreshUniformsDash","refreshUniformsPoints","ltc_1","LTC_1","ltc_2","LTC_2","uvScaleMap","animate","projectObject","isSprite","opaqueObjects","transparentObjects","textureUnit","setTexture","activeCubeFace","activeMipMapLevel","readRenderTargetPixels","restore","textureFormat","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","copyFramebufferToTexture","level","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","pixels","texSubImage2D","LEFT","MIDDLE","RIGHT"],"mappings":"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B,IAAIK,EAChD8iB,GAAG7iB,EAAI2pB,EAAMxI,OAAOnhB,EAAI,EAAI4iB,EAAIljB,IAAIM,EAAI4iB,EAAIjjB,IAAIK,EAChD8iB,GAAG9iB,EAAI2pB,EAAMxI,OAAOnhB,EAAI,EAAI4iB,EAAIjjB,IAAIK,EAAI4iB,EAAIljB,IAAIM,EAEhD,IAAIkI,EAAKyhB,EAAMa,gBAAiB3H,IAC5B1a,EAAKwhB,EAAMa,gBAAiB1H,IAIhC,GAAK5a,EAAK,GAAKC,EAAK,EAEnB,OAAO,EAMT,OAAO,IAMTihB,cAAe,SAAWZ,GAIzB,IAFA,IAAIpD,EAAS5a,KAAK4a,OAERtd,EAAI,EAAGA,EAAI,EAAGA,IAEvB,GAAKsd,EAAQtd,GAAI0iB,gBAAiBhC,GAAU,EAE3C,OAAO,EAMT,OAAO,SGsNHuF,GClSKC,GAAc,CACxBC,yCACAC,mDACAC,2CACAC,mCACAC,6CACAC,6EACAC,uFACAC,+BACAC,2CACAC,iBACAC,iDACAC,uDACAC,iEACAC,6DACAC,mDACAC,mCACAC,6CACAC,yCACAC,+BACAC,mBACAC,6DACAC,+CACAC,6DACAC,mDACAC,+CACAC,yDACAC,2CACAC,qDACAC,qCACAC,+CACAC,2CACAC,iCACAC,2BACAC,qCACAC,+BACAC,yCACAC,yDACAC,yCACAC,mDACAC,iDACAC,yCACAC,uCACAC,iDACAC,2DACAC,uDACAC,iEACAC,iDACAC,+CACAC,6CACAC,+CACAC,yDACAC,qDACAC,2CACAC,+BACAC,yCACAC,iDACAC,2DACAC,iDACAC,2DACAC,2CACAC,qDACAC,2CACAC,iDACAC,+CACAC,qDACAC,qBACAC,+DACAC,mCACAC,2CACAC,qDACAC,iDACAC,2DACAC,qDACAC,iDACAC,uCACAC,uDACAC,qCACAC,+CACAC,qCACAC,yCACAC,+CACAC,yDACAC,+CACAC,yDACAC,uCACAC,mCACAC,yBACAC,yCACAC,qCACAC,2BACAC,qCAEAC,yBACAC,yBACAC,2BACAC,2BACAC,yCACAC,yCACAC,iCACAC,iCACAC,qCACAC,qCACAC,mCACAC,mCACAC,uCACAC,uCACAC,mCACAC,mCACAC,yCACAC,yCACAC,6BACAC,6BACAC,6BACAC,6BACAC,6BACAC,8BCrOGC,GAAgB,CAEnBC,MAAO,SAAWC,GAIjB,IAFA,IAAIC,EAAS,GAEHC,EAAI,EAAGA,EAAIF,EAAS1qB,OAAQ4qB,IAAO,CAE5C,IAAIvd,EAAMzN,KAAKmD,MAAO2nB,EAAUE,IAEhC,IAAM,IAAIza,KAAK9C,EAEdsd,EAAQxa,GAAM9C,EAAK8C,GAMrB,OAAOwa,GAIR5nB,MAAO,SAAW8nB,GAEjB,IAAIC,EAAe,GAEnB,IAAM,IAAIF,KAAKC,EAId,IAAM,IAAI1a,KAFV2a,EAAcF,GAAM,GAELC,EAAcD,GAAM,CAElC,IAAIG,EAAgBF,EAAcD,GAAKza,GAElC4a,IAAmBA,EAAcC,SACrCD,EAAc7T,WAAa6T,EAActkB,WACzCskB,EAAcxoB,WAAawoB,EAAcvW,WAAauW,EAAcE,WACpEF,EAAcrQ,WAEdoQ,EAAcF,GAAKza,GAAM4a,EAAchoB,QAE5BmoB,MAAMC,QAASJ,GAE1BD,EAAcF,GAAKza,GAAM4a,EAAchpB,QAIvC+oB,EAAcF,GAAKza,GAAM4a,EAQ5B,OAAOD,IFrDLM,GAAgB,CAAEC,UAAa,SAAUC,aAAgB,SAAUC,KAAQ,MAAUC,WAAc,QAAUC,MAAS,SACzHC,MAAS,SAAUC,OAAU,SAAUC,MAAS,EAAUC,eAAkB,SAAUC,KAAQ,IAAUC,WAAc,QACtHC,MAAS,SAAUC,UAAa,SAAUC,UAAa,QAAUC,WAAc,QAAUC,UAAa,SAAUC,MAAS,SACzHC,eAAkB,QAAUC,SAAY,SAAUC,QAAW,SAAUC,KAAQ,MAAUC,SAAY,IAAUC,SAAY,MAC3HC,cAAiB,SAAUC,SAAY,SAAUC,UAAa,MAAUC,SAAY,SAAUC,UAAa,SAAUC,YAAe,QACpIC,eAAkB,QAAUC,WAAc,SAAUC,WAAc,SAAUC,QAAW,QAAUC,WAAc,SAAUC,aAAgB,QACzIC,cAAiB,QAAUC,cAAiB,QAAUC,cAAiB,QAAUC,cAAiB,MAAUC,WAAc,QAC1HC,SAAY,SAAUC,YAAe,MAAUC,QAAW,QAAUC,QAAW,QAAUC,WAAc,QAAUC,UAAa,SAC9HC,YAAe,SAAUC,YAAe,QAAUC,QAAW,SAAUC,UAAa,SAAUC,WAAc,SAAUC,KAAQ,SAC9HC,UAAa,SAAUC,KAAQ,QAAUC,MAAS,MAAUC,YAAe,SAAUC,KAAQ,QAAUC,SAAY,SAAUC,QAAW,SACxIC,UAAa,SAAUC,OAAU,QAAUC,MAAS,SAAUC,MAAS,SAAUC,SAAY,SAAUC,cAAiB,SAAUC,UAAa,QAC/IC,aAAgB,SAAUC,UAAa,SAAUC,WAAc,SAAUC,UAAa,SAAUC,qBAAwB,SAAUC,UAAa,SAC/IC,WAAc,QAAUC,UAAa,SAAUC,UAAa,SAAUC,YAAe,SAAUC,cAAiB,QAAUC,aAAgB,QAC1IC,eAAkB,QAAUC,eAAkB,QAAUC,eAAkB,SAAUC,YAAe,SAAUC,KAAQ,MAAUC,UAAa,QAC5IC,MAAS,SAAUC,QAAW,SAAUC,OAAU,QAAUC,iBAAoB,QAAUC,WAAc,IAAUC,aAAgB,SAClIC,aAAgB,QAAUC,eAAkB,QAAUC,gBAAmB,QAAUC,kBAAqB,MAAUC,gBAAmB,QACrIC,gBAAmB,SAAUC,aAAgB,QAAUC,UAAa,SAAUC,UAAa,SAAUC,SAAY,SAAUC,YAAe,SAC1IC,KAAQ,IAAUC,QAAW,SAAUC,MAAS,QAAUC,UAAa,QAAUC,OAAU,SAAUC,UAAa,SAAUC,OAAU,SACtIC,cAAiB,SAAUC,UAAa,SAAUC,cAAiB,SAAUC,cAAiB,SAAUC,WAAc,SAAUC,UAAa,SAC7IC,KAAQ,SAAUC,KAAQ,SAAUC,KAAQ,SAAUC,WAAc,SAAUC,OAAU,QAAUC,cAAiB,QAAUC,IAAO,SAAUC,UAAa,SAC3JC,UAAa,QAAUC,YAAe,QAAUC,OAAU,SAAUC,WAAc,SAAUC,SAAY,QAAUC,SAAY,SAC9HC,OAAU,SAAUC,OAAU,SAAUC,QAAW,QAAUC,UAAa,QAAUC,UAAa,QAAUC,UAAa,QAAUC,KAAQ,SAC1IC,YAAe,MAAUC,UAAa,QAAUC,IAAO,SAAUC,KAAQ,MAAUC,QAAW,SAAUC,OAAU,SAAUC,UAAa,QACzIC,OAAU,SAAUC,MAAS,SAAUC,MAAS,SAAUC,WAAc,SAAUC,OAAU,SAAUC,YAAe,UAEtH,SAASC,GAAOthB,EAAGiE,EAAG3T,GAErB,YAAWhD,IAAN2W,QAAyB3W,IAANgD,EAGhB7D,KAAKyC,IAAK8Q,GAIXvT,KAAK80B,OAAQvhB,EAAGiE,EAAG3T,GAI3B7C,OAAOC,OAAQ4zB,GAAM3zB,UAAW,CAE/BkqB,SAAS,EAET7X,EAAG,EAAGiE,EAAG,EAAG3T,EAAG,EAEfpB,IAAK,SAAW1E,GAgBf,OAdKA,GAASA,EAAMqtB,QAEnBprB,KAAKqD,KAAMtF,GAEiB,iBAAVA,EAElBiC,KAAK+0B,OAAQh3B,GAEe,iBAAVA,GAElBiC,KAAKg1B,SAAUj3B,GAITiC,MAIR4C,UAAW,SAAWC,GAMrB,OAJA7C,KAAKuT,EAAI1Q,EACT7C,KAAKwX,EAAI3U,EACT7C,KAAK6D,EAAIhB,EAEF7C,MAIR+0B,OAAQ,SAAWE,GAQlB,OANAA,EAAMh4B,KAAK8B,MAAOk2B,GAElBj1B,KAAKuT,GAAM0hB,GAAO,GAAK,KAAQ,IAC/Bj1B,KAAKwX,GAAMyd,GAAO,EAAI,KAAQ,IAC9Bj1B,KAAK6D,GAAY,IAANoxB,GAAc,IAElBj1B,MAIR80B,OAAQ,SAAWvhB,EAAGiE,EAAG3T,GAMxB,OAJA7D,KAAKuT,EAAIA,EACTvT,KAAKwX,EAAIA,EACTxX,KAAK6D,EAAIA,EAEF7D,MAIRk1B,OAAQ,WAEP,SAASC,EAAS5kB,EAAGxG,EAAGtL,GAIvB,OAFKA,EAAI,IAAIA,GAAK,GACbA,EAAI,IAAIA,GAAK,GACbA,EAAI,EAAI,EAAW8R,EAAgB,GAAVxG,EAAIwG,GAAU9R,EACvCA,EAAI,GAAesL,EACnBtL,EAAI,EAAI,EAAW8R,EAAgB,GAAVxG,EAAIwG,IAAY,EAAI,EAAI9R,GAC/C8R,EAIR,OAAO,SAAiBD,EAAG3M,EAAGvB,GAO7B,GAJAkO,EAAIvT,GAAMiB,gBAAiBsS,EAAG,GAC9B3M,EAAI5G,GAAMe,MAAO6F,EAAG,EAAG,GACvBvB,EAAIrF,GAAMe,MAAOsE,EAAG,EAAG,GAEZ,IAANuB,EAEJ3D,KAAKuT,EAAIvT,KAAKwX,EAAIxX,KAAK6D,EAAIzB,MAErB,CAEN,IAAImO,EAAInO,GAAK,GAAMA,GAAM,EAAIuB,GAAMvB,EAAIuB,EAAMvB,EAAIuB,EAC7CoG,EAAM,EAAI3H,EAAMmO,EAEpBvQ,KAAKuT,EAAI4hB,EAASprB,EAAGwG,EAAGD,EAAI,EAAI,GAChCtQ,KAAKwX,EAAI2d,EAASprB,EAAGwG,EAAGD,GACxBtQ,KAAK6D,EAAIsxB,EAASprB,EAAGwG,EAAGD,EAAI,EAAI,GAIjC,OAAOtQ,MAnCD,GAyCRg1B,SAAU,SAAWI,GAEpB,SAASC,EAAaC,QAELz0B,IAAXy0B,GAEAC,WAAYD,GAAW,GAE3Bj1B,QAAQmD,KAAM,mCAAqC4xB,EAAQ,qBAO7D,IAAIl3B,EAEJ,GAAKA,EAAI,kCAAkCs3B,KAAMJ,GAAU,CAI1D,IAAIK,EACApc,EAAOnb,EAAG,GACVw3B,EAAax3B,EAAG,GAEpB,OAASmb,GAER,IAAK,MACL,IAAK,OAEJ,GAAKoc,EAAQ,gEAAgED,KAAME,GASlF,OANA11B,KAAKuT,EAAItW,KAAK/H,IAAK,IAAKygC,SAAUF,EAAO,GAAK,KAAS,IACvDz1B,KAAKwX,EAAIva,KAAK/H,IAAK,IAAKygC,SAAUF,EAAO,GAAK,KAAS,IACvDz1B,KAAK6D,EAAI5G,KAAK/H,IAAK,IAAKygC,SAAUF,EAAO,GAAK,KAAS,IAEvDJ,EAAaI,EAAO,IAEbz1B,KAIR,GAAKy1B,EAAQ,sEAAsED,KAAME,GASxF,OANA11B,KAAKuT,EAAItW,KAAK/H,IAAK,IAAKygC,SAAUF,EAAO,GAAK,KAAS,IACvDz1B,KAAKwX,EAAIva,KAAK/H,IAAK,IAAKygC,SAAUF,EAAO,GAAK,KAAS,IACvDz1B,KAAK6D,EAAI5G,KAAK/H,IAAK,IAAKygC,SAAUF,EAAO,GAAK,KAAS,IAEvDJ,EAAaI,EAAO,IAEbz1B,KAIR,MAED,IAAK,MACL,IAAK,OAEJ,GAAKy1B,EAAQ,gFAAgFD,KAAME,GAAe,CAGjH,IAAIplB,EAAIilB,WAAYE,EAAO,IAAQ,IAC/B9xB,EAAIgyB,SAAUF,EAAO,GAAK,IAAO,IACjCrzB,EAAIuzB,SAAUF,EAAO,GAAK,IAAO,IAIrC,OAFAJ,EAAaI,EAAO,IAEbz1B,KAAKk1B,OAAQ5kB,EAAG3M,EAAGvB,UAQvB,GAAKlE,EAAI,qBAAqBs3B,KAAMJ,GAAU,CAIpD,IAAIH,EACAzX,GADAyX,EAAM/2B,EAAG,IACEkC,OAEf,GAAc,IAATod,EAOJ,OAJAxd,KAAKuT,EAAIoiB,SAAUV,EAAIW,OAAQ,GAAMX,EAAIW,OAAQ,GAAK,IAAO,IAC7D51B,KAAKwX,EAAIme,SAAUV,EAAIW,OAAQ,GAAMX,EAAIW,OAAQ,GAAK,IAAO,IAC7D51B,KAAK6D,EAAI8xB,SAAUV,EAAIW,OAAQ,GAAMX,EAAIW,OAAQ,GAAK,IAAO,IAEtD51B,KAED,GAAc,IAATwd,EAOX,OAJAxd,KAAKuT,EAAIoiB,SAAUV,EAAIW,OAAQ,GAAMX,EAAIW,OAAQ,GAAK,IAAO,IAC7D51B,KAAKwX,EAAIme,SAAUV,EAAIW,OAAQ,GAAMX,EAAIW,OAAQ,GAAK,IAAO,IAC7D51B,KAAK6D,EAAI8xB,SAAUV,EAAIW,OAAQ,GAAMX,EAAIW,OAAQ,GAAK,IAAO,IAEtD51B,KAyBT,OAnBKo1B,GAASA,EAAMh1B,OAAS,SAKfS,KAFTo0B,EAAMzJ,GAAe4J,IAKxBp1B,KAAK+0B,OAAQE,GAKb50B,QAAQmD,KAAM,8BAAgC4xB,IAMzCp1B,MAIRmD,MAAO,WAEN,OAAO,IAAInD,KAAKoD,YAAapD,KAAKuT,EAAGvT,KAAKwX,EAAGxX,KAAK6D,IAInDR,KAAM,SAAWoyB,GAMhB,OAJAz1B,KAAKuT,EAAIkiB,EAAMliB,EACfvT,KAAKwX,EAAIie,EAAMje,EACfxX,KAAK6D,EAAI4xB,EAAM5xB,EAER7D,MAIR61B,kBAAmB,SAAWJ,EAAOK,GAQpC,YANqBj1B,IAAhBi1B,IAA4BA,EAAc,GAE/C91B,KAAKuT,EAAItW,KAAKwC,IAAKg2B,EAAMliB,EAAGuiB,GAC5B91B,KAAKwX,EAAIva,KAAKwC,IAAKg2B,EAAMje,EAAGse,GAC5B91B,KAAK6D,EAAI5G,KAAKwC,IAAKg2B,EAAM5xB,EAAGiyB,GAErB91B,MAIR+1B,kBAAmB,SAAWN,EAAOK,QAEfj1B,IAAhBi1B,IAA4BA,EAAc,GAE/C,IAAIE,EAAgBF,EAAc,EAAQ,EAAMA,EAAgB,EAMhE,OAJA91B,KAAKuT,EAAItW,KAAKwC,IAAKg2B,EAAMliB,EAAGyiB,GAC5Bh2B,KAAKwX,EAAIva,KAAKwC,IAAKg2B,EAAMje,EAAGwe,GAC5Bh2B,KAAK6D,EAAI5G,KAAKwC,IAAKg2B,EAAM5xB,EAAGmyB,GAErBh2B,MAIRi2B,qBAAsB,WAErB,IAAI1iB,EAAIvT,KAAKuT,EAAGiE,EAAIxX,KAAKwX,EAAG3T,EAAI7D,KAAK6D,EAMrC,OAJA7D,KAAKuT,EAAIA,EAAIA,EACbvT,KAAKwX,EAAIA,EAAIA,EACbxX,KAAK6D,EAAIA,EAAIA,EAEN7D,MAIRk2B,qBAAsB,WAMrB,OAJAl2B,KAAKuT,EAAItW,KAAKgI,KAAMjF,KAAKuT,GACzBvT,KAAKwX,EAAIva,KAAKgI,KAAMjF,KAAKwX,GACzBxX,KAAK6D,EAAI5G,KAAKgI,KAAMjF,KAAK6D,GAElB7D,MAIRm2B,OAAQ,WAEP,OAAkB,IAATn2B,KAAKuT,GAAa,GAAgB,IAATvT,KAAKwX,GAAa,EAAe,IAATxX,KAAK6D,GAAa,GAI7EuyB,aAAc,WAEb,OAAS,SAAWp2B,KAAKm2B,SAAS54B,SAAU,KAAO4E,OAAS,IAI7Dk0B,OAAQ,SAAWp0B,QAIFpB,IAAXoB,IAEJ5B,QAAQmD,KAAM,iDACdvB,EAAS,CAAEqO,EAAG,EAAG3M,EAAG,EAAGvB,EAAG,IAI3B,IAKIk0B,EAAKC,EALLhjB,EAAIvT,KAAKuT,EAAGiE,EAAIxX,KAAKwX,EAAG3T,EAAI7D,KAAK6D,EAEjC1O,EAAM8H,KAAK9H,IAAKoe,EAAGiE,EAAG3T,GACtB3O,EAAM+H,KAAK/H,IAAKqe,EAAGiE,EAAG3T,GAGtB2yB,GAActhC,EAAMC,GAAQ,EAEhC,GAAKD,IAAQC,EAEZmhC,EAAM,EACNC,EAAa,MAEP,CAEN,IAAIpV,EAAQhsB,EAAMD,EAIlB,OAFAqhC,EAAaC,GAAa,GAAMrV,GAAUhsB,EAAMD,GAAQisB,GAAU,EAAIhsB,EAAMD,GAEnEC,GAER,KAAKoe,EAAG+iB,GAAQ9e,EAAI3T,GAAMsd,GAAU3J,EAAI3T,EAAI,EAAI,GAAK,MACrD,KAAK2T,EAAG8e,GAAQzyB,EAAI0P,GAAM4N,EAAQ,EAAG,MACrC,KAAKtd,EAAGyyB,GAAQ/iB,EAAIiE,GAAM2J,EAAQ,EAInCmV,GAAO,EAQR,OAJAr0B,EAAOqO,EAAIgmB,EACXr0B,EAAO0B,EAAI4yB,EACXt0B,EAAOG,EAAIo0B,EAEJv0B,GAIRw0B,SAAU,WAET,MAAO,QAAsB,IAATz2B,KAAKuT,EAAY,GAAM,KAAmB,IAATvT,KAAKwX,EAAY,GAAM,KAAmB,IAATxX,KAAK6D,EAAY,GAAM,KAI9G6yB,WAEKnT,GAAM,GAEH,SAAWjT,EAAG3M,EAAGvB,GAQvB,OANApC,KAAKq2B,OAAQ9S,IAEbA,GAAIjT,GAAKA,EAAGiT,GAAI5f,GAAKA,EAAG4f,GAAInhB,GAAKA,EAEjCpC,KAAKk1B,OAAQ3R,GAAIjT,EAAGiT,GAAI5f,EAAG4f,GAAInhB,GAExBpC,OAMTuD,IAAK,SAAWkyB,GAMf,OAJAz1B,KAAKuT,GAAKkiB,EAAMliB,EAChBvT,KAAKwX,GAAKie,EAAMje,EAChBxX,KAAK6D,GAAK4xB,EAAM5xB,EAET7D,MAIR22B,UAAW,SAAWC,EAAQC,GAM7B,OAJA72B,KAAKuT,EAAIqjB,EAAOrjB,EAAIsjB,EAAOtjB,EAC3BvT,KAAKwX,EAAIof,EAAOpf,EAAIqf,EAAOrf,EAC3BxX,KAAK6D,EAAI+yB,EAAO/yB,EAAIgzB,EAAOhzB,EAEpB7D,MAIR0D,UAAW,SAAWC,GAMrB,OAJA3D,KAAKuT,GAAK5P,EACV3D,KAAKwX,GAAK7T,EACV3D,KAAK6D,GAAKF,EAEH3D,MAIR+D,IAAK,SAAW0xB,GAMf,OAJAz1B,KAAKuT,EAAItW,KAAK9H,IAAK,EAAG6K,KAAKuT,EAAIkiB,EAAMliB,GACrCvT,KAAKwX,EAAIva,KAAK9H,IAAK,EAAG6K,KAAKwX,EAAIie,EAAMje,GACrCxX,KAAK6D,EAAI5G,KAAK9H,IAAK,EAAG6K,KAAK6D,EAAI4xB,EAAM5xB,GAE9B7D,MAIRkE,SAAU,SAAWuxB,GAMpB,OAJAz1B,KAAKuT,GAAKkiB,EAAMliB,EAChBvT,KAAKwX,GAAKie,EAAMje,EAChBxX,KAAK6D,GAAK4xB,EAAM5xB,EAET7D,MAIRmE,eAAgB,SAAWR,GAM1B,OAJA3D,KAAKuT,GAAK5P,EACV3D,KAAKwX,GAAK7T,EACV3D,KAAK6D,GAAKF,EAEH3D,MAIRxB,KAAM,SAAWi3B,EAAO5vB,GAMvB,OAJA7F,KAAKuT,IAAOkiB,EAAMliB,EAAIvT,KAAKuT,GAAM1N,EACjC7F,KAAKwX,IAAOie,EAAMje,EAAIxX,KAAKwX,GAAM3R,EACjC7F,KAAK6D,IAAO4xB,EAAM5xB,EAAI7D,KAAK6D,GAAMgC,EAE1B7F,MAIRgG,OAAQ,SAAWU,GAElB,OAASA,EAAE6M,IAAMvT,KAAKuT,GAAS7M,EAAE8Q,IAAMxX,KAAKwX,GAAS9Q,EAAE7C,IAAM7D,KAAK6D,GAInEoC,UAAW,SAAW/D,EAAOgE,GAQ5B,YANgBrF,IAAXqF,IAAuBA,EAAS,GAErClG,KAAKuT,EAAIrR,EAAOgE,GAChBlG,KAAKwX,EAAItV,EAAOgE,EAAS,GACzBlG,KAAK6D,EAAI3B,EAAOgE,EAAS,GAElBlG,MAIRmG,QAAS,SAAWjE,EAAOgE,GAS1B,YAPerF,IAAVqB,IAAsBA,EAAQ,SACnBrB,IAAXqF,IAAuBA,EAAS,GAErChE,EAAOgE,GAAWlG,KAAKuT,EACvBrR,EAAOgE,EAAS,GAAMlG,KAAKwX,EAC3BtV,EAAOgE,EAAS,GAAMlG,KAAK6D,EAEpB3B,GAIR+Y,OAAQ,WAEP,OAAOjb,KAAKm2B,gBGvPRpsB,GC/QF+sB,GAAc,CAEjBlS,OAAQ,CAEPmS,QAAS,CAAEh5B,MAAO,IAAI82B,GAAO,WAC7BmC,QAAS,CAAEj5B,MAAO,GAElBk5B,IAAK,CAAEl5B,MAAO,MACdm5B,YAAa,CAAEn5B,MAAO,IAAIgD,IAE1Bo2B,SAAU,CAAEp5B,MAAO,OAIpBq5B,YAAa,CAEZC,YAAa,CAAEt5B,MAAO,OAIvBu5B,OAAQ,CAEPC,OAAQ,CAAEx5B,MAAO,MACjBy5B,WAAY,CAAEz5B,OAAS,GACvB05B,aAAc,CAAE15B,MAAO,GACvB25B,gBAAiB,CAAE35B,MAAO,KAC1B45B,YAAa,CAAE55B,MAAO,IAIvB65B,MAAO,CAENC,MAAO,CAAE95B,MAAO,MAChB+5B,eAAgB,CAAE/5B,MAAO,IAI1Bg6B,SAAU,CAETC,SAAU,CAAEj6B,MAAO,MACnBk6B,kBAAmB,CAAEl6B,MAAO,IAI7Bm6B,YAAa,CAEZC,YAAa,CAAEp6B,MAAO,OAIvBq6B,QAAS,CAERC,QAAS,CAAEt6B,MAAO,MAClBu6B,UAAW,CAAEv6B,MAAO,IAIrBw6B,UAAW,CAEVC,UAAW,CAAEz6B,MAAO,MACpB06B,YAAa,CAAE16B,MAAO,IAAIgC,GAAS,EAAG,KAIvC24B,gBAAiB,CAEhBC,gBAAiB,CAAE56B,MAAO,MAC1B66B,kBAAmB,CAAE76B,MAAO,GAC5B86B,iBAAkB,CAAE96B,MAAO,IAI5B+6B,aAAc,CAEbC,aAAc,CAAEh7B,MAAO,OAIxBi7B,aAAc,CAEbC,aAAc,CAAEl7B,MAAO,OAIxBm7B,YAAa,CAEZC,YAAa,CAAEp7B,MAAO,OAIvBq7B,IAAK,CAEJC,WAAY,CAAEt7B,MAAO,OACrBu7B,QAAS,CAAEv7B,MAAO,GAClBw7B,OAAQ,CAAEx7B,MAAO,KACjBy7B,SAAU,CAAEz7B,MAAO,IAAI82B,GAAO,YAI/B4E,OAAQ,CAEPC,kBAAmB,CAAE37B,MAAO,IAE5B47B,kBAAmB,CAAE57B,MAAO,GAAI67B,WAAY,CAC3C1Y,UAAW,GACXuU,MAAO,GAEPoE,OAAQ,GACRC,WAAY,GACZC,aAAc,GACdC,cAAe,KAGhBC,qBAAsB,CAAEl8B,MAAO,IAC/Bm8B,wBAAyB,CAAEn8B,MAAO,IAClCo8B,eAAgB,CAAEp8B,MAAO,IACzBq8B,wBAAyB,CAAEr8B,MAAO,IAElCs8B,WAAY,CAAEt8B,MAAO,GAAI67B,WAAY,CACpCnE,MAAO,GACPpmB,SAAU,GACV6R,UAAW,GACXoZ,SAAU,GACVC,QAAS,GACTC,YAAa,GACbC,MAAO,GAEPZ,OAAQ,GACRC,WAAY,GACZC,aAAc,GACdC,cAAe,KAGhBU,cAAe,CAAE38B,MAAO,IACxB48B,iBAAkB,CAAE58B,MAAO,IAC3B68B,aAAc,CAAE78B,MAAO,IACvB88B,iBAAkB,CAAE98B,MAAO,IAE3B+8B,YAAa,CAAE/8B,MAAO,GAAI67B,WAAY,CACrCnE,MAAO,GACPpmB,SAAU,GACVorB,MAAO,GACPH,SAAU,GAEVT,OAAQ,GACRC,WAAY,GACZC,aAAc,GACdC,cAAe,GACfe,iBAAkB,GAClBC,gBAAiB,KAGlBC,eAAgB,CAAEl9B,MAAO,IACzBm9B,kBAAmB,CAAEn9B,MAAO,IAE5Bo9B,iBAAkB,CAAEp9B,MAAO,GAAI67B,WAAY,CAC1C1Y,UAAW,GACXka,SAAU,GACVC,YAAa,KAIdC,eAAgB,CAAEv9B,MAAO,GAAI67B,WAAY,CACxCnE,MAAO,GACPpmB,SAAU,GACV9M,MAAO,GACPG,OAAQ,GACRm3B,OAAQ,GACR0B,eAAgB,KAGjBC,gBAAiB,CAAEz9B,MAAO,IAC1B09B,cAAe,CAAE19B,MAAO,KAIzBma,OAAQ,CAEP6e,QAAS,CAAEh5B,MAAO,IAAI82B,GAAO,WAC7BmC,QAAS,CAAEj5B,MAAO,GAClByf,KAAM,CAAEzf,MAAO,GACfqQ,MAAO,CAAErQ,MAAO,GAChBk5B,IAAK,CAAEl5B,MAAO,MACdm5B,YAAa,CAAEn5B,MAAO,IAAIgD,MCnLxB26B,GAAY,CAEfC,MAAO,CAEN7Q,SAAUF,GAAcC,MAAO,CAC9BiM,GAAYlS,OACZkS,GAAYM,YACZN,GAAYQ,OACZR,GAAYc,MACZd,GAAYiB,SACZjB,GAAYsC,MAGbwC,aAAcpY,GAAYuG,eAC1B8R,eAAgBrY,GAAYsG,gBAI7BgS,QAAS,CAERhR,SAAUF,GAAcC,MAAO,CAC9BiM,GAAYlS,OACZkS,GAAYM,YACZN,GAAYQ,OACZR,GAAYc,MACZd,GAAYiB,SACZjB,GAAYoB,YACZpB,GAAYsC,IACZtC,GAAY2C,OACZ,CACCsC,SAAU,CAAEh+B,MAAO,IAAI82B,GAAO,OAIhC+G,aAAcpY,GAAYyG,iBAC1B4R,eAAgBrY,GAAYwG,kBAI7BgS,MAAO,CAENlR,SAAUF,GAAcC,MAAO,CAC9BiM,GAAYlS,OACZkS,GAAYM,YACZN,GAAYQ,OACZR,GAAYc,MACZd,GAAYiB,SACZjB,GAAYoB,YACZpB,GAAYsB,QACZtB,GAAYyB,UACZzB,GAAY4B,gBACZ5B,GAAYoC,YACZpC,GAAYsC,IACZtC,GAAY2C,OACZ,CACCsC,SAAU,CAAEh+B,MAAO,IAAI82B,GAAO,IAC9BoH,SAAU,CAAEl+B,MAAO,IAAI82B,GAAO,UAC9BqH,UAAW,CAAEn+B,MAAO,OAItB69B,aAAcpY,GAAY2G,eAC1B0R,eAAgBrY,GAAY0G,gBAI7BiS,SAAU,CAETrR,SAAUF,GAAcC,MAAO,CAC9BiM,GAAYlS,OACZkS,GAAYQ,OACZR,GAAYc,MACZd,GAAYiB,SACZjB,GAAYoB,YACZpB,GAAYsB,QACZtB,GAAYyB,UACZzB,GAAY4B,gBACZ5B,GAAYgC,aACZhC,GAAYkC,aACZlC,GAAYsC,IACZtC,GAAY2C,OACZ,CACCsC,SAAU,CAAEh+B,MAAO,IAAI82B,GAAO,IAC9BuH,UAAW,CAAEr+B,MAAO,IACpBs+B,UAAW,CAAEt+B,MAAO,IACpBu+B,gBAAiB,CAAEv+B,MAAO,MAI5B69B,aAAcpY,GAAY6G,kBAC1BwR,eAAgBrY,GAAY4G,mBAI7BlS,OAAQ,CAEP4S,SAAUF,GAAcC,MAAO,CAC9BiM,GAAY5e,OACZ4e,GAAYsC,MAGbwC,aAAcpY,GAAYiH,YAC1BoR,eAAgBrY,GAAYgH,aAI7B+R,OAAQ,CAEPzR,SAAUF,GAAcC,MAAO,CAC9BiM,GAAYlS,OACZkS,GAAYsC,IACZ,CACChrB,MAAO,CAAErQ,MAAO,GAChBy+B,SAAU,CAAEz+B,MAAO,GACnB0+B,UAAW,CAAE1+B,MAAO,MAItB69B,aAAcpY,GAAYqG,gBAC1BgS,eAAgBrY,GAAYoG,iBAI7B8S,MAAO,CAEN5R,SAAUF,GAAcC,MAAO,CAC9BiM,GAAYlS,OACZkS,GAAY4B,kBAGbkD,aAAcpY,GAAY+F,WAC1BsS,eAAgBrY,GAAY8F,YAI7B3S,OAAQ,CAEPmU,SAAUF,GAAcC,MAAO,CAC9BiM,GAAYlS,OACZkS,GAAYsB,QACZtB,GAAYyB,UACZzB,GAAY4B,gBACZ,CACC1B,QAAS,CAAEj5B,MAAO,MAIpB69B,aAAcpY,GAAY+G,YAC1BsR,eAAgBrY,GAAY8G,aAQ7BqS,KAAM,CAEL7R,SAAU,CACT8R,MAAO,CAAE7+B,MAAO,MAChB8+B,MAAO,CAAE9+B,OAAS,GAClBi5B,QAAS,CAAEj5B,MAAO,IAGnB69B,aAAcpY,GAAY6F,UAC1BwS,eAAgBrY,GAAY4F,WAI7B0T,SAAU,CAEThS,SAAU,CACTiS,UAAW,CAAEh/B,MAAO,OAGrB69B,aAAcpY,GAAYmG,cAC1BkS,eAAgBrY,GAAYkG,eAI7BsT,aAAc,CAEblS,SAAUF,GAAcC,MAAO,CAC9BiM,GAAYlS,OACZkS,GAAY4B,gBACZ,CACCuE,kBAAmB,CAAEl/B,MAAO,IAAI+C,IAChCo8B,aAAc,CAAEn/B,MAAO,GACvBo/B,YAAa,CAAEp/B,MAAO,QAIxB69B,aAAcpY,GAAYiG,kBAC1BoS,eAAgBrY,GAAYgG,mBAI7BqQ,OAAQ,CAEP/O,SAAUF,GAAcC,MAAO,CAC9BiM,GAAY2C,OACZ3C,GAAYsC,IACZ,CACC3D,MAAO,CAAE13B,MAAO,IAAI82B,GAAO,IAC3BmC,QAAS,CAAEj5B,MAAO,MAIpB69B,aAAcpY,GAAYmH,YAC1BkR,eAAgBrY,GAAYkH,cCrN9B,SAAS0S,GAAS9nC,EAAGC,EAAGC,EAAGgL,GAE1BR,KAAK1K,EAAIA,GAAK,EACd0K,KAAKzK,EAAIA,GAAK,EACdyK,KAAKxK,EAAIA,GAAK,EACdwK,KAAKQ,OAAYK,IAANL,EAAoBA,EAAI,ECTpC,SAAS68B,GAAiBC,GAEzB,IAAIC,EAAU,IAAIC,QAyIlB,MAAO,CAENh7B,IA9CD,SAAc6D,GAIb,OAFKA,EAAUo3B,+BAA+Bp3B,EAAYA,EAAU6T,MAE7DqjB,EAAQ/6B,IAAK6D,IA2CpBq3B,OAvCD,SAAiBr3B,GAEXA,EAAUo3B,+BAA+Bp3B,EAAYA,EAAU6T,MAEpE,IAAIA,EAAOqjB,EAAQ/6B,IAAK6D,GAEnB6T,IAEJojB,EAAGK,aAAczjB,EAAK0jB,QAEtBL,EAAQM,OAAQx3B,KA8BjB8L,OAxBD,SAAiB9L,EAAWy3B,GAEtBz3B,EAAUo3B,+BAA+Bp3B,EAAYA,EAAU6T,MAEpE,IAAIA,EAAOqjB,EAAQ/6B,IAAK6D,QAEVxF,IAATqZ,EAEJqjB,EAAQ96B,IAAK4D,EA3Hf,SAAuBA,EAAWy3B,GAEjC,IAAI57B,EAAQmE,EAAUnE,MAClB67B,EAAQ13B,EAAU23B,QAAUV,EAAGW,aAAeX,EAAGY,YAEjDN,EAASN,EAAGa,eAEhBb,EAAGc,WAAYN,EAAYF,GAC3BN,EAAGe,WAAYP,EAAY57B,EAAO67B,GAElC13B,EAAUi4B,mBAEV,IAAIl9B,EAAOk8B,EAAGiB,MAoCd,OAlCKr8B,aAAiBs8B,aAErBp9B,EAAOk8B,EAAGiB,MAECr8B,aAAiBu8B,aAE5Bp+B,QAAQmD,KAAM,wEAEHtB,aAAiBw8B,YAE5Bt9B,EAAOk8B,EAAGqB,eAECz8B,aAAiB08B,WAE5Bx9B,EAAOk8B,EAAGuB,MAEC38B,aAAiB48B,YAE5B19B,EAAOk8B,EAAGyB,aAEC78B,aAAiB88B,WAE5B59B,EAAOk8B,EAAG2B,IAEC/8B,aAAiBg9B,UAE5B99B,EAAOk8B,EAAG6B,KAECj9B,aAAiBk9B,aAE5Bh+B,EAAOk8B,EAAG+B,eAIJ,CACNzB,OAAQA,EACRx8B,KAAMA,EACNk+B,gBAAiBp9B,EAAMq9B,kBACvBxlB,QAAS1T,EAAU0T,SAuEKokB,CAAc93B,EAAWy3B,IAEtC5jB,EAAKH,QAAU1T,EAAU0T,UApEtC,SAAuB6jB,EAAQv3B,EAAWy3B,GAEzC,IAAI57B,EAAQmE,EAAUnE,MAClBs9B,EAAcn5B,EAAUm5B,YAE5BlC,EAAGc,WAAYN,EAAYF,IAEA,IAAtBv3B,EAAU23B,QAEdV,EAAGe,WAAYP,EAAY57B,EAAOo7B,EAAGY,cAEF,IAAxBsB,EAAYryB,MAIvBmwB,EAAGmC,cAAe3B,EAAY,EAAG57B,GAEA,IAAtBs9B,EAAYryB,MAEvB9M,QAAQC,MAAO,4KAIfg9B,EAAGmC,cAAe3B,EAAY0B,EAAYt5B,OAAShE,EAAMq9B,kBACxDr9B,EAAMw9B,SAAUF,EAAYt5B,OAAQs5B,EAAYt5B,OAASs5B,EAAYryB,QAEtEqyB,EAAYryB,OAAU,GA4CtBwyB,CAAczlB,EAAK0jB,OAAQv3B,EAAWy3B,GAEtC5jB,EAAKH,QAAU1T,EAAU0T,WJ9H5B,SAAS6lB,GAAOtqC,EAAGC,EAAGC,EAAGyT,GAExBjJ,KAAKS,GAAKnL,GAAK,EACf0K,KAAKU,GAAKnL,GAAK,EACfyK,KAAKW,GAAKnL,GAAK,EACfwK,KAAK6/B,OAAS52B,GAAS22B,GAAME,aKZ9B,SAASC,KAER//B,KAAKggC,KAAO,EH6NbtE,GAAUuE,SAAW,CAEpBnV,SAAUF,GAAcC,MAAO,CAC9B6Q,GAAUS,SAASrR,SACnB,CACCoV,UAAW,CAAEniC,MAAO,GACpBoiC,mBAAoB,CAAEpiC,MAAO,MAI/B69B,aAAcpY,GAAY6G,kBAC1BwR,eAAgBrY,GAAY4G,mBC7N7BppB,OAAOC,OAAQm8B,GAAQl8B,UAAW,CAEjCmqB,WAAW,EAEX5oB,IAAK,SAAWnN,EAAGC,EAAGC,EAAGgL,GAOxB,OALAR,KAAK1K,EAAIA,EACT0K,KAAKzK,EAAIA,EACTyK,KAAKxK,EAAIA,EACTwK,KAAKQ,EAAIA,EAEFR,MAIR4C,UAAW,SAAWC,GAOrB,OALA7C,KAAK1K,EAAIuN,EACT7C,KAAKzK,EAAIsN,EACT7C,KAAKxK,EAAIqN,EACT7C,KAAKQ,EAAIqC,EAEF7C,MAIR8C,KAAM,SAAWxN,GAIhB,OAFA0K,KAAK1K,EAAIA,EAEF0K,MAIR+C,KAAM,SAAWxN,GAIhB,OAFAyK,KAAKzK,EAAIA,EAEFyK,MAIR6U,KAAM,SAAWrf,GAIhB,OAFAwK,KAAKxK,EAAIA,EAEFwK,MAIRogC,KAAM,SAAW5/B,GAIhB,OAFAR,KAAKQ,EAAIA,EAEFR,MAIRgD,aAAc,SAAWnB,EAAO9D,GAE/B,OAAS8D,GAER,KAAK,EAAG7B,KAAK1K,EAAIyI,EAAO,MACxB,KAAK,EAAGiC,KAAKzK,EAAIwI,EAAO,MACxB,KAAK,EAAGiC,KAAKxK,EAAIuI,EAAO,MACxB,KAAK,EAAGiC,KAAKQ,EAAIzC,EAAO,MACxB,QAAS,MAAM,IAAIkF,MAAO,0BAA4BpB,GAIvD,OAAO7B,MAIRkD,aAAc,SAAWrB,GAExB,OAASA,GAER,KAAK,EAAG,OAAO7B,KAAK1K,EACpB,KAAK,EAAG,OAAO0K,KAAKzK,EACpB,KAAK,EAAG,OAAOyK,KAAKxK,EACpB,KAAK,EAAG,OAAOwK,KAAKQ,EACpB,QAAS,MAAM,IAAIyC,MAAO,0BAA4BpB,KAMxDsB,MAAO,WAEN,OAAO,IAAInD,KAAKoD,YAAapD,KAAK1K,EAAG0K,KAAKzK,EAAGyK,KAAKxK,EAAGwK,KAAKQ,IAI3D6C,KAAM,SAAWC,GAOhB,OALAtD,KAAK1K,EAAIgO,EAAEhO,EACX0K,KAAKzK,EAAI+N,EAAE/N,EACXyK,KAAKxK,EAAI8N,EAAE9N,EACXwK,KAAKQ,OAAcK,IAARyC,EAAE9C,EAAoB8C,EAAE9C,EAAI,EAEhCR,MAIRuD,IAAK,SAAWD,EAAG9C,GAElB,YAAWK,IAANL,GAEJH,QAAQmD,KAAM,yFACPxD,KAAKyD,WAAYH,EAAG9C,KAI5BR,KAAK1K,GAAKgO,EAAEhO,EACZ0K,KAAKzK,GAAK+N,EAAE/N,EACZyK,KAAKxK,GAAK8N,EAAE9N,EACZwK,KAAKQ,GAAK8C,EAAE9C,EAELR,OAIR0D,UAAW,SAAWC,GAOrB,OALA3D,KAAK1K,GAAKqO,EACV3D,KAAKzK,GAAKoO,EACV3D,KAAKxK,GAAKmO,EACV3D,KAAKQ,GAAKmD,EAEH3D,MAIRyD,WAAY,SAAWG,EAAGC,GAOzB,OALA7D,KAAK1K,EAAIsO,EAAEtO,EAAIuO,EAAEvO,EACjB0K,KAAKzK,EAAIqO,EAAErO,EAAIsO,EAAEtO,EACjByK,KAAKxK,EAAIoO,EAAEpO,EAAIqO,EAAErO,EACjBwK,KAAKQ,EAAIoD,EAAEpD,EAAIqD,EAAErD,EAEVR,MAIR8D,gBAAiB,SAAWR,EAAGK,GAO9B,OALA3D,KAAK1K,GAAKgO,EAAEhO,EAAIqO,EAChB3D,KAAKzK,GAAK+N,EAAE/N,EAAIoO,EAChB3D,KAAKxK,GAAK8N,EAAE9N,EAAImO,EAChB3D,KAAKQ,GAAK8C,EAAE9C,EAAImD,EAET3D,MAIR+D,IAAK,SAAWT,EAAG9C,GAElB,YAAWK,IAANL,GAEJH,QAAQmD,KAAM,yFACPxD,KAAKgE,WAAYV,EAAG9C,KAI5BR,KAAK1K,GAAKgO,EAAEhO,EACZ0K,KAAKzK,GAAK+N,EAAE/N,EACZyK,KAAKxK,GAAK8N,EAAE9N,EACZwK,KAAKQ,GAAK8C,EAAE9C,EAELR,OAIRiE,UAAW,SAAWN,GAOrB,OALA3D,KAAK1K,GAAKqO,EACV3D,KAAKzK,GAAKoO,EACV3D,KAAKxK,GAAKmO,EACV3D,KAAKQ,GAAKmD,EAEH3D,MAIRgE,WAAY,SAAWJ,EAAGC,GAOzB,OALA7D,KAAK1K,EAAIsO,EAAEtO,EAAIuO,EAAEvO,EACjB0K,KAAKzK,EAAIqO,EAAErO,EAAIsO,EAAEtO,EACjByK,KAAKxK,EAAIoO,EAAEpO,EAAIqO,EAAErO,EACjBwK,KAAKQ,EAAIoD,EAAEpD,EAAIqD,EAAErD,EAEVR,MAIRmE,eAAgB,SAAWtB,GAO1B,OALA7C,KAAK1K,GAAKuN,EACV7C,KAAKzK,GAAKsN,EACV7C,KAAKxK,GAAKqN,EACV7C,KAAKQ,GAAKqC,EAEH7C,MAIRqN,aAAc,SAAWnP,GAExB,IAAI5I,EAAI0K,KAAK1K,EAAGC,EAAIyK,KAAKzK,EAAGC,EAAIwK,KAAKxK,EAAGgL,EAAIR,KAAKQ,EAC7C+D,EAAIrG,EAAEgC,SAOV,OALAF,KAAK1K,EAAIiP,EAAG,GAAMjP,EAAIiP,EAAG,GAAMhP,EAAIgP,EAAG,GAAM/O,EAAI+O,EAAG,IAAO/D,EAC1DR,KAAKzK,EAAIgP,EAAG,GAAMjP,EAAIiP,EAAG,GAAMhP,EAAIgP,EAAG,GAAM/O,EAAI+O,EAAG,IAAO/D,EAC1DR,KAAKxK,EAAI+O,EAAG,GAAMjP,EAAIiP,EAAG,GAAMhP,EAAIgP,EAAG,IAAO/O,EAAI+O,EAAG,IAAO/D,EAC3DR,KAAKQ,EAAI+D,EAAG,GAAMjP,EAAIiP,EAAG,GAAMhP,EAAIgP,EAAG,IAAO/O,EAAI+O,EAAG,IAAO/D,EAEpDR,MAIRqE,aAAc,SAAWxB,GAExB,OAAO7C,KAAKmE,eAAgB,EAAItB,IAIjCw9B,2BAA4B,SAAWt2B,GAMtC/J,KAAKQ,EAAI,EAAIvD,KAAK4Z,KAAM9M,EAAEvJ,GAE1B,IAAImD,EAAI1G,KAAKgI,KAAM,EAAI8E,EAAEvJ,EAAIuJ,EAAEvJ,GAgB/B,OAdKmD,EAAI,MAER3D,KAAK1K,EAAI,EACT0K,KAAKzK,EAAI,EACTyK,KAAKxK,EAAI,IAITwK,KAAK1K,EAAIyU,EAAEzU,EAAIqO,EACf3D,KAAKzK,EAAIwU,EAAExU,EAAIoO,EACf3D,KAAKxK,EAAIuU,EAAEvU,EAAImO,GAIT3D,MAIRsgC,+BAAgC,SAAWpiC,GAM1C,IAAImH,EAAO/P,EAAGC,EAAGC,EAIhBsS,EAAK5J,EAAEgC,SAEP0S,EAAM9K,EAAI,GAAK+K,EAAM/K,EAAI,GAAKgL,EAAMhL,EAAI,GACxCiL,EAAMjL,EAAI,GAAKkL,EAAMlL,EAAI,GAAKmL,EAAMnL,EAAI,GACxCoL,EAAMpL,EAAI,GAAKqL,EAAMrL,EAAI,GAAKsL,EAAMtL,EAAI,IAEzC,GAAO7K,KAAKkI,IAAK0N,EAAME,GATZ,KAUJ9V,KAAKkI,IAAK2N,EAAMI,GAVZ,KAWJjW,KAAKkI,IAAK8N,EAAME,GAXZ,IAWgC,CAM1C,GAAOlW,KAAKkI,IAAK0N,EAAME,GAhBZ,IAiBJ9V,KAAKkI,IAAK2N,EAAMI,GAjBZ,IAkBJjW,KAAKkI,IAAK8N,EAAME,GAlBZ,IAmBJlW,KAAKkI,IAAKyN,EAAMI,EAAMI,EAAM,GAnBxB,GAyBV,OAFApT,KAAKyC,IAAK,EAAG,EAAG,EAAG,GAEZzC,KAMRqF,EAAQpI,KAAKC,GAEb,IAAIiN,GAAOyI,EAAM,GAAM,EACnBtI,GAAO0I,EAAM,GAAM,EACnBxI,GAAO4I,EAAM,GAAM,EACnBhJ,GAAOyI,EAAME,GAAQ,EACrB1I,GAAOyI,EAAMI,GAAQ,EACrB3I,GAAO0I,EAAME,GAAQ,EA4DzB,OA1DOhJ,EAAKG,GAAUH,EAAKK,EAIrBL,EA7CI,KA+CR7U,EAAI,EACJC,EAAI,WACJC,EAAI,aAKJD,EAAI6U,GADJ9U,EAAI2H,KAAKgI,KAAMkF,IAEf3U,EAAI6U,EAAK/U,GAICgV,EAAKE,EAIXF,EA/DI,KAiERhV,EAAI,WACJC,EAAI,EACJC,EAAI,aAKJF,EAAI8U,GADJ7U,EAAI0H,KAAKgI,KAAMqF,IAEf9U,EAAI+U,EAAKhV,GAQLiV,EAjFI,KAmFRlV,EAAI,WACJC,EAAI,WACJC,EAAI,IAKJF,EAAI+U,GADJ7U,EAAIyH,KAAKgI,KAAMuF,IAEfjV,EAAIgV,EAAK/U,GAMXwK,KAAKyC,IAAKnN,EAAGC,EAAGC,EAAG6P,GAEZrF,KAMR,IAAI2D,EAAI1G,KAAKgI,MAAQkO,EAAMF,IAAUE,EAAMF,IACtBH,EAAMI,IAAUJ,EAAMI,IACtBH,EAAMF,IAAUE,EAAMF,IAY3C,OAVK5V,KAAKkI,IAAKxB,GAAM,OAAQA,EAAI,GAKjC3D,KAAK1K,GAAM6d,EAAMF,GAAQtP,EACzB3D,KAAKzK,GAAMud,EAAMI,GAAQvP,EACzB3D,KAAKxK,GAAMud,EAAMF,GAAQlP,EACzB3D,KAAKQ,EAAIvD,KAAK4Z,MAAQjE,EAAMI,EAAMI,EAAM,GAAM,GAEvCpT,MAIR9K,IAAK,SAAWoO,GAOf,OALAtD,KAAK1K,EAAI2H,KAAK/H,IAAK8K,KAAK1K,EAAGgO,EAAEhO,GAC7B0K,KAAKzK,EAAI0H,KAAK/H,IAAK8K,KAAKzK,EAAG+N,EAAE/N,GAC7ByK,KAAKxK,EAAIyH,KAAK/H,IAAK8K,KAAKxK,EAAG8N,EAAE9N,GAC7BwK,KAAKQ,EAAIvD,KAAK/H,IAAK8K,KAAKQ,EAAG8C,EAAE9C,GAEtBR,MAIR7K,IAAK,SAAWmO,GAOf,OALAtD,KAAK1K,EAAI2H,KAAK9H,IAAK6K,KAAK1K,EAAGgO,EAAEhO,GAC7B0K,KAAKzK,EAAI0H,KAAK9H,IAAK6K,KAAKzK,EAAG+N,EAAE/N,GAC7ByK,KAAKxK,EAAIyH,KAAK9H,IAAK6K,KAAKxK,EAAG8N,EAAE9N,GAC7BwK,KAAKQ,EAAIvD,KAAK9H,IAAK6K,KAAKQ,EAAG8C,EAAE9C,GAEtBR,MAIRlC,MAAO,SAAW5I,EAAKC,GAStB,OALA6K,KAAK1K,EAAI2H,KAAK9H,IAAKD,EAAII,EAAG2H,KAAK/H,IAAKC,EAAIG,EAAG0K,KAAK1K,IAChD0K,KAAKzK,EAAI0H,KAAK9H,IAAKD,EAAIK,EAAG0H,KAAK/H,IAAKC,EAAII,EAAGyK,KAAKzK,IAChDyK,KAAKxK,EAAIyH,KAAK9H,IAAKD,EAAIM,EAAGyH,KAAK/H,IAAKC,EAAIK,EAAGwK,KAAKxK,IAChDwK,KAAKQ,EAAIvD,KAAK9H,IAAKD,EAAIsL,EAAGvD,KAAK/H,IAAKC,EAAIqL,EAAGR,KAAKQ,IAEzCR,MAIRwE,YAAa,WAEZ,IAAItP,EAAKC,EAET,OAAO,SAAsBsP,EAAQC,GAYpC,YAVa7D,IAAR3L,IAEJA,EAAM,IAAIkoC,GACVjoC,EAAM,IAAIioC,IAIXloC,EAAIuN,IAAKgC,EAAQA,EAAQA,EAAQA,GACjCtP,EAAIsN,IAAKiC,EAAQA,EAAQA,EAAQA,GAE1B1E,KAAKlC,MAAO5I,EAAKC,IAhBb,GAsBbwP,YAAa,SAAWzP,EAAKC,GAE5B,IAAIiL,EAASJ,KAAKI,SAElB,OAAOJ,KAAKqE,aAAcjE,GAAU,GAAI+D,eAAgBlH,KAAK9H,IAAKD,EAAK+H,KAAK/H,IAAKC,EAAKiL,MAIvFrB,MAAO,WAON,OALAiB,KAAK1K,EAAI2H,KAAK8B,MAAOiB,KAAK1K,GAC1B0K,KAAKzK,EAAI0H,KAAK8B,MAAOiB,KAAKzK,GAC1ByK,KAAKxK,EAAIyH,KAAK8B,MAAOiB,KAAKxK,GAC1BwK,KAAKQ,EAAIvD,KAAK8B,MAAOiB,KAAKQ,GAEnBR,MAIRN,KAAM,WAOL,OALAM,KAAK1K,EAAI2H,KAAKyC,KAAMM,KAAK1K,GACzB0K,KAAKzK,EAAI0H,KAAKyC,KAAMM,KAAKzK,GACzByK,KAAKxK,EAAIyH,KAAKyC,KAAMM,KAAKxK,GACzBwK,KAAKQ,EAAIvD,KAAKyC,KAAMM,KAAKQ,GAElBR,MAIR4E,MAAO,WAON,OALA5E,KAAK1K,EAAI2H,KAAK2H,MAAO5E,KAAK1K,GAC1B0K,KAAKzK,EAAI0H,KAAK2H,MAAO5E,KAAKzK,GAC1ByK,KAAKxK,EAAIyH,KAAK2H,MAAO5E,KAAKxK,GAC1BwK,KAAKQ,EAAIvD,KAAK2H,MAAO5E,KAAKQ,GAEnBR,MAIR6E,YAAa,WAOZ,OALA7E,KAAK1K,EAAM0K,KAAK1K,EAAI,EAAM2H,KAAKyC,KAAMM,KAAK1K,GAAM2H,KAAK8B,MAAOiB,KAAK1K,GACjE0K,KAAKzK,EAAMyK,KAAKzK,EAAI,EAAM0H,KAAKyC,KAAMM,KAAKzK,GAAM0H,KAAK8B,MAAOiB,KAAKzK,GACjEyK,KAAKxK,EAAMwK,KAAKxK,EAAI,EAAMyH,KAAKyC,KAAMM,KAAKxK,GAAMyH,KAAK8B,MAAOiB,KAAKxK,GACjEwK,KAAKQ,EAAMR,KAAKQ,EAAI,EAAMvD,KAAKyC,KAAMM,KAAKQ,GAAMvD,KAAK8B,MAAOiB,KAAKQ,GAE1DR,MAIR8E,OAAQ,WAOP,OALA9E,KAAK1K,GAAM0K,KAAK1K,EAChB0K,KAAKzK,GAAMyK,KAAKzK,EAChByK,KAAKxK,GAAMwK,KAAKxK,EAChBwK,KAAKQ,GAAMR,KAAKQ,EAETR,MAIR+E,IAAK,SAAWzB,GAEf,OAAOtD,KAAK1K,EAAIgO,EAAEhO,EAAI0K,KAAKzK,EAAI+N,EAAE/N,EAAIyK,KAAKxK,EAAI8N,EAAE9N,EAAIwK,KAAKQ,EAAI8C,EAAE9C,GAIhEwE,SAAU,WAET,OAAOhF,KAAK1K,EAAI0K,KAAK1K,EAAI0K,KAAKzK,EAAIyK,KAAKzK,EAAIyK,KAAKxK,EAAIwK,KAAKxK,EAAIwK,KAAKQ,EAAIR,KAAKQ,GAI5EJ,OAAQ,WAEP,OAAOnD,KAAKgI,KAAMjF,KAAK1K,EAAI0K,KAAK1K,EAAI0K,KAAKzK,EAAIyK,KAAKzK,EAAIyK,KAAKxK,EAAIwK,KAAKxK,EAAIwK,KAAKQ,EAAIR,KAAKQ,IAIvF0E,gBAAiB,WAEhB,OAAOjI,KAAKkI,IAAKnF,KAAK1K,GAAM2H,KAAKkI,IAAKnF,KAAKzK,GAAM0H,KAAKkI,IAAKnF,KAAKxK,GAAMyH,KAAKkI,IAAKnF,KAAKQ,IAItF4E,UAAW,WAEV,OAAOpF,KAAKqE,aAAcrE,KAAKI,UAAY,IAI5CwF,UAAW,SAAWxF,GAErB,OAAOJ,KAAKoF,YAAYjB,eAAgB/D,IAIzC5B,KAAM,SAAW8E,EAAGuC,GAOnB,OALA7F,KAAK1K,IAAOgO,EAAEhO,EAAI0K,KAAK1K,GAAMuQ,EAC7B7F,KAAKzK,IAAO+N,EAAE/N,EAAIyK,KAAKzK,GAAMsQ,EAC7B7F,KAAKxK,IAAO8N,EAAE9N,EAAIwK,KAAKxK,GAAMqQ,EAC7B7F,KAAKQ,IAAO8C,EAAE9C,EAAIR,KAAKQ,GAAMqF,EAEtB7F,MAIR8F,YAAa,SAAWrQ,EAAIsQ,EAAIF,GAE/B,OAAO7F,KAAKgE,WAAY+B,EAAItQ,GAAK0O,eAAgB0B,GAAQtC,IAAK9N,IAI/DuQ,OAAQ,SAAW1C,GAElB,OAAWA,EAAEhO,IAAM0K,KAAK1K,GAASgO,EAAE/N,IAAMyK,KAAKzK,GAAS+N,EAAE9N,IAAMwK,KAAKxK,GAAS8N,EAAE9C,IAAMR,KAAKQ,GAI3FyF,UAAW,SAAW/D,EAAOgE,GAS5B,YAPgBrF,IAAXqF,IAAuBA,EAAS,GAErClG,KAAK1K,EAAI4M,EAAOgE,GAChBlG,KAAKzK,EAAI2M,EAAOgE,EAAS,GACzBlG,KAAKxK,EAAI0M,EAAOgE,EAAS,GACzBlG,KAAKQ,EAAI0B,EAAOgE,EAAS,GAElBlG,MAIRmG,QAAS,SAAWjE,EAAOgE,GAU1B,YARerF,IAAVqB,IAAsBA,EAAQ,SACnBrB,IAAXqF,IAAuBA,EAAS,GAErChE,EAAOgE,GAAWlG,KAAK1K,EACvB4M,EAAOgE,EAAS,GAAMlG,KAAKzK,EAC3B2M,EAAOgE,EAAS,GAAMlG,KAAKxK,EAC3B0M,EAAOgE,EAAS,GAAMlG,KAAKQ,EAEpB0B,GAIRkE,oBAAqB,SAAWC,EAAWxE,EAAOqE,GAajD,YAXgBrF,IAAXqF,GAEJ7F,QAAQmD,KAAM,uEAIfxD,KAAK1K,EAAI+Q,EAAUC,KAAMzE,GACzB7B,KAAKzK,EAAI8Q,EAAUE,KAAM1E,GACzB7B,KAAKxK,EAAI6Q,EAAU+G,KAAMvL,GACzB7B,KAAKQ,EAAI6F,EAAUk6B,KAAM1+B,GAElB7B,QHzlBT4/B,GAAMY,eAAiB,CAAE,MAAO,MAAO,MAAO,MAAO,MAAO,OAE5DZ,GAAME,aAAe,MAErB9+B,OAAOsB,iBAAkBs9B,GAAM1+B,UAAW,CAEzC5L,EAAG,CAEFkN,IAAK,WAEJ,OAAOxC,KAAKS,IAIbgC,IAAK,SAAW1E,GAEfiC,KAAKS,GAAK1C,EACViC,KAAKiS,qBAMP1c,EAAG,CAEFiN,IAAK,WAEJ,OAAOxC,KAAKU,IAIb+B,IAAK,SAAW1E,GAEfiC,KAAKU,GAAK3C,EACViC,KAAKiS,qBAMPzc,EAAG,CAEFgN,IAAK,WAEJ,OAAOxC,KAAKW,IAIb8B,IAAK,SAAW1E,GAEfiC,KAAKW,GAAK5C,EACViC,KAAKiS,qBAMPhJ,MAAO,CAENzG,IAAK,WAEJ,OAAOxC,KAAK6/B,QAIbp9B,IAAK,SAAW1E,GAEfiC,KAAK6/B,OAAS9hC,EACdiC,KAAKiS,uBAQRjR,OAAOC,OAAQ2+B,GAAM1+B,UAAW,CAE/B4H,SAAS,EAETrG,IAAK,SAAWnN,EAAGC,EAAGC,EAAGyT,GASxB,OAPAjJ,KAAKS,GAAKnL,EACV0K,KAAKU,GAAKnL,EACVyK,KAAKW,GAAKnL,EACVwK,KAAK6/B,OAAS52B,GAASjJ,KAAK6/B,OAE5B7/B,KAAKiS,mBAEEjS,MAIRmD,MAAO,WAEN,OAAO,IAAInD,KAAKoD,YAAapD,KAAKS,GAAIT,KAAKU,GAAIV,KAAKW,GAAIX,KAAK6/B,SAI9Dx8B,KAAM,SAAWwF,GAShB,OAPA7I,KAAKS,GAAKoI,EAAMpI,GAChBT,KAAKU,GAAKmI,EAAMnI,GAChBV,KAAKW,GAAKkI,EAAMlI,GAChBX,KAAK6/B,OAASh3B,EAAMg3B,OAEpB7/B,KAAKiS,mBAEEjS,MAIR6P,sBAAuB,SAAW3R,EAAG+K,EAAOkJ,GAE3C,IAAIrU,EAAQf,GAAMe,MAIdgK,EAAK5J,EAAEgC,SACP0S,EAAM9K,EAAI,GAAK+K,EAAM/K,EAAI,GAAKgL,EAAMhL,EAAI,GACxCiL,EAAMjL,EAAI,GAAKkL,EAAMlL,EAAI,GAAKmL,EAAMnL,EAAI,GACxCoL,EAAMpL,EAAI,GAAKqL,EAAMrL,EAAI,GAAKsL,EAAMtL,EAAI,IA8G5C,MA1Ge,SAFfmB,EAAQA,GAASjJ,KAAK6/B,SAIrB7/B,KAAKU,GAAKzD,KAAKwjC,KAAM3iC,EAAOgV,GAAO,EAAG,IAEjC7V,KAAKkI,IAAK2N,GAAQ,QAEtB9S,KAAKS,GAAKxD,KAAKqI,OAAS2N,EAAKG,GAC7BpT,KAAKW,GAAK1D,KAAKqI,OAASuN,EAAKD,KAI7B5S,KAAKS,GAAKxD,KAAKqI,MAAO6N,EAAKH,GAC3BhT,KAAKW,GAAK,IAIU,QAAVsI,GAEXjJ,KAAKS,GAAKxD,KAAKwjC,MAAQ3iC,EAAOmV,GAAO,EAAG,IAEnChW,KAAKkI,IAAK8N,GAAQ,QAEtBjT,KAAKU,GAAKzD,KAAKqI,MAAOwN,EAAKM,GAC3BpT,KAAKW,GAAK1D,KAAKqI,MAAOyN,EAAKC,KAI3BhT,KAAKU,GAAKzD,KAAKqI,OAAS4N,EAAKN,GAC7B5S,KAAKW,GAAK,IAIU,QAAVsI,GAEXjJ,KAAKS,GAAKxD,KAAKwjC,KAAM3iC,EAAOqV,GAAO,EAAG,IAEjClW,KAAKkI,IAAKgO,GAAQ,QAEtBnT,KAAKU,GAAKzD,KAAKqI,OAAS4N,EAAKE,GAC7BpT,KAAKW,GAAK1D,KAAKqI,OAASuN,EAAKG,KAI7BhT,KAAKU,GAAK,EACVV,KAAKW,GAAK1D,KAAKqI,MAAOyN,EAAKH,KAIP,QAAV3J,GAEXjJ,KAAKU,GAAKzD,KAAKwjC,MAAQ3iC,EAAOoV,GAAO,EAAG,IAEnCjW,KAAKkI,IAAK+N,GAAQ,QAEtBlT,KAAKS,GAAKxD,KAAKqI,MAAO6N,EAAKC,GAC3BpT,KAAKW,GAAK1D,KAAKqI,MAAOyN,EAAKH,KAI3B5S,KAAKS,GAAK,EACVT,KAAKW,GAAK1D,KAAKqI,OAASuN,EAAKG,KAIT,QAAV/J,GAEXjJ,KAAKW,GAAK1D,KAAKwjC,KAAM3iC,EAAOiV,GAAO,EAAG,IAEjC9V,KAAKkI,IAAK4N,GAAQ,QAEtB/S,KAAKS,GAAKxD,KAAKqI,OAAS2N,EAAKD,GAC7BhT,KAAKU,GAAKzD,KAAKqI,OAAS4N,EAAKN,KAI7B5S,KAAKS,GAAK,EACVT,KAAKU,GAAKzD,KAAKqI,MAAOwN,EAAKM,KAIP,QAAVnK,GAEXjJ,KAAKW,GAAK1D,KAAKwjC,MAAQ3iC,EAAO+U,GAAO,EAAG,IAEnC5V,KAAKkI,IAAK0N,GAAQ,QAEtB7S,KAAKS,GAAKxD,KAAKqI,MAAO6N,EAAKH,GAC3BhT,KAAKU,GAAKzD,KAAKqI,MAAOwN,EAAKF,KAI3B5S,KAAKS,GAAKxD,KAAKqI,OAAS2N,EAAKG,GAC7BpT,KAAKU,GAAK,IAMXL,QAAQmD,KAAM,kEAAoEyF,GAInFjJ,KAAK6/B,OAAS52B,GAEE,IAAXkJ,GAAmBnS,KAAKiS,mBAEtBjS,MAIR0gC,kBAAmB,WAElB,IAAIrrC,EAAS,IAAI4K,GAEjB,OAAO,SAA4B8J,EAAGd,EAAOkJ,GAI5C,OAFA9c,EAAOyU,2BAA4BC,GAE5B/J,KAAK6P,sBAAuBxa,EAAQ4T,EAAOkJ,IARjC,GAcnBwuB,eAAgB,SAAWr9B,EAAG2F,GAE7B,OAAOjJ,KAAKyC,IAAKa,EAAEhO,EAAGgO,EAAE/N,EAAG+N,EAAE9N,EAAGyT,GAASjJ,KAAK6/B,SAI/Ce,SAIK72B,GAAI,IAAIxJ,GAEL,SAAkBsgC,GAIxB,OAFA92B,GAAEmI,aAAclS,MAETA,KAAK0gC,kBAAmB32B,GAAG82B,KAMpC76B,OAAQ,SAAW6C,GAElB,OAASA,EAAMpI,KAAOT,KAAKS,IAAUoI,EAAMnI,KAAOV,KAAKU,IAAUmI,EAAMlI,KAAOX,KAAKW,IAAUkI,EAAMg3B,SAAW7/B,KAAK6/B,QAIpH55B,UAAW,SAAW/D,GASrB,OAPAlC,KAAKS,GAAKyB,EAAO,GACjBlC,KAAKU,GAAKwB,EAAO,GACjBlC,KAAKW,GAAKuB,EAAO,QACGrB,IAAfqB,EAAO,KAAoBlC,KAAK6/B,OAAS39B,EAAO,IAErDlC,KAAKiS,mBAEEjS,MAIRmG,QAAS,SAAWjE,EAAOgE,GAU1B,YARerF,IAAVqB,IAAsBA,EAAQ,SACnBrB,IAAXqF,IAAuBA,EAAS,GAErChE,EAAOgE,GAAWlG,KAAKS,GACvByB,EAAOgE,EAAS,GAAMlG,KAAKU,GAC3BwB,EAAOgE,EAAS,GAAMlG,KAAKW,GAC3BuB,EAAOgE,EAAS,GAAMlG,KAAK6/B,OAEpB39B,GAIR4+B,UAAW,SAAWC,GAErB,OAAKA,EAEGA,EAAet+B,IAAKzC,KAAKS,GAAIT,KAAKU,GAAIV,KAAKW,IAI3C,IAAIG,GAASd,KAAKS,GAAIT,KAAKU,GAAIV,KAAKW,KAM7C+T,SAAU,SAAWC,GAIpB,OAFA3U,KAAKiS,iBAAmB0C,EAEjB3U,MAIRiS,iBAAkB,eKhVnBjR,OAAOC,OAAQ8+B,GAAO7+B,UAAW,CAEhCuB,IAAK,SAAWu+B,GAEfhhC,KAAKggC,KAAO,GAAKgB,EAAU,GAI5BC,OAAQ,SAAWD,GAElBhhC,KAAKggC,MAAQ,GAAKgB,EAAU,GAI7BE,OAAQ,SAAWF,GAElBhhC,KAAKggC,MAAQ,GAAKgB,EAAU,GAI7BG,QAAS,SAAWH,GAEnBhhC,KAAKggC,QAAY,GAAKgB,EAAU,IAIjCI,KAAM,SAAWC,GAEhB,OAAuC,IAA9BrhC,KAAKggC,KAAOqB,EAAOrB,SCrB9B,IA6bM3wB,GACAjB,GA1KAuT,GArIA2f,GA/IFC,GAAa,EAEjB,SAASC,KAERxgC,OAAOmY,eAAgBnZ,KAAM,KAAM,CAAEjC,MAAOwjC,OAE5CvhC,KAAKoZ,KAAOrc,GAAMK,eAElB4C,KAAKqZ,KAAO,GACZrZ,KAAKoB,KAAO,WAEZpB,KAAKyhC,OAAS,KACdzhC,KAAK0hC,SAAW,GAEhB1hC,KAAK8K,GAAK02B,GAASG,UAAUx+B,QAE7B,IAAIkM,EAAW,IAAIvO,GACf+W,EAAW,IAAI+nB,GACflqC,EAAa,IAAI6K,GACjB6N,EAAQ,IAAItN,GAAS,EAAG,EAAG,GAc/B+W,EAASnD,SAZT,WAEChf,EAAWwc,aAAc2F,GAAU,KAWpCniB,EAAWgf,SAPX,WAECmD,EAAS6oB,kBAAmBhrC,OAAYmL,GAAW,KAOpDG,OAAOsB,iBAAkBtC,KAAM,CAC9BqP,SAAU,CACTuyB,YAAY,EACZ7jC,MAAOsR,GAERwI,SAAU,CACT+pB,YAAY,EACZ7jC,MAAO8Z,GAERniB,WAAY,CACXksC,YAAY,EACZ7jC,MAAOrI,GAER0Y,MAAO,CACNwzB,YAAY,EACZ7jC,MAAOqQ,GAERyzB,gBAAiB,CAChB9jC,MAAO,IAAIkC,IAEZ4hB,aAAc,CACb9jB,MAAO,IAAIgD,MAIbf,KAAK3K,OAAS,IAAI4K,GAClBD,KAAK6V,YAAc,IAAI5V,GAEvBD,KAAK0Z,iBAAmB8nB,GAASM,wBACjC9hC,KAAK+hC,wBAAyB,EAE9B/hC,KAAKqhC,OAAS,IAAItB,GAClB//B,KAAKgiC,SAAU,EAEfhiC,KAAKiiC,YAAa,EAClBjiC,KAAKkiC,eAAgB,EAErBliC,KAAKmiC,eAAgB,EACrBniC,KAAKoiC,YAAc,EAEnBpiC,KAAKqiC,SAAW,GClFjB,SAASC,KAERd,GAASn/B,KAAMrC,MAEfA,KAAKoB,KAAO,SAEZpB,KAAKuiC,mBAAqB,IAAItiC,GAC9BD,KAAK4V,iBAAmB,IAAI3V,GCV7B,SAASuiC,GAAoBzyB,EAAMC,EAAOC,EAAKC,EAAQC,EAAMC,GAE5DkyB,GAAOjgC,KAAMrC,MAEbA,KAAKoB,KAAO,qBAEZpB,KAAKyiC,KAAO,EACZziC,KAAK0iC,KAAO,KAEZ1iC,KAAK+P,KAAOA,EACZ/P,KAAKgQ,MAAQA,EACbhQ,KAAKiQ,IAAMA,EACXjQ,KAAKkQ,OAASA,EAEdlQ,KAAKmQ,UAAkBtP,IAATsP,EAAuBA,EAAO,GAC5CnQ,KAAKoQ,SAAgBvP,IAARuP,EAAsBA,EAAM,IAEzCpQ,KAAK2iC,yBCjBN,SAASC,GAAOh/B,EAAGC,EAAG6C,EAAGiQ,EAAQ8e,EAAOoN,GAEvC7iC,KAAK4D,EAAIA,EACT5D,KAAK6D,EAAIA,EACT7D,KAAK0G,EAAIA,EAET1G,KAAK2W,OAAWA,GAAUA,EAAO/B,UAAc+B,EAAS,IAAI7V,GAC5Dd,KAAK8iC,cAAgBxX,MAAMC,QAAS5U,GAAWA,EAAS,GAExD3W,KAAKy1B,MAAUA,GAASA,EAAMrK,QAAYqK,EAAQ,IAAIZ,GACtD70B,KAAK+iC,aAAezX,MAAMC,QAASkK,GAAUA,EAAQ,GAErDz1B,KAAK6iC,mBAAkChiC,IAAlBgiC,EAA8BA,EAAgB,EH6EpErB,GAASG,UAAY,IAAI7gC,GAAS,EAAG,EAAG,GACxC0gC,GAASM,yBAA0B,EAEnCN,GAAStgC,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ/a,GAAgBoB,WAAa,CAE/EkC,YAAao+B,GAEbwB,YAAY,EAEZC,eAAgB,aAChBC,cAAe,aAEfC,YAAa,SAAW9tC,GAEvB2K,KAAK3K,OAAO2V,iBAAkB3V,EAAQ2K,KAAK3K,QAE3C2K,KAAK3K,OAAOia,UAAWtP,KAAKqP,SAAUrP,KAAKtK,WAAYsK,KAAKoO,QAI7D4G,gBAAiB,SAAWjL,GAI3B,OAFA/J,KAAKtK,WAAWuV,YAAalB,GAEtB/J,MAIRojC,yBAA0B,SAAWr0B,EAAM1J,GAI1CrF,KAAKtK,WAAWgd,iBAAkB3D,EAAM1J,IAIzCg+B,qBAAsB,SAAWx6B,GAEhC7I,KAAKtK,WAAWwc,aAAcrJ,GAAO,IAItCy6B,sBAAuB,SAAWplC,GAIjC8B,KAAKtK,WAAWma,sBAAuB3R,IAIxCqlC,0BAA2B,SAAWx5B,GAIrC/J,KAAKtK,WAAW2N,KAAM0G,IAIvBy5B,cAKKlC,GAAK,IAAI/gC,GAEN,SAAuBwO,EAAM1J,GAMnC,OAJAi8B,GAAG5uB,iBAAkB3D,EAAM1J,GAE3BrF,KAAKtK,WAAWwO,SAAUo9B,IAEnBthC,OAMTyjC,kBAAmB,WAMlB,IAAInC,EAAK,IAAI/gC,GAEb,OAAO,SAA4BwO,EAAM1J,GAMxC,OAJAi8B,EAAG5uB,iBAAkB3D,EAAM1J,GAE3BrF,KAAKtK,WAAWuV,YAAaq2B,GAEtBthC,MAdU,GAoBnB0jC,QAAS,WAER,IAAIjuC,EAAK,IAAIqL,GAAS,EAAG,EAAG,GAE5B,OAAO,SAAkBuE,GAExB,OAAOrF,KAAKwjC,aAAc/tC,EAAI4P,IANvB,GAYTs+B,QAAS,WAER,IAAIluC,EAAK,IAAIqL,GAAS,EAAG,EAAG,GAE5B,OAAO,SAAkBuE,GAExB,OAAOrF,KAAKwjC,aAAc/tC,EAAI4P,IANvB,GAYTu+B,QAAS,WAER,IAAInuC,EAAK,IAAIqL,GAAS,EAAG,EAAG,GAE5B,OAAO,SAAkBuE,GAExB,OAAOrF,KAAKwjC,aAAc/tC,EAAI4P,IANvB,GAYTw+B,gBAAiB,WAKhB,IAAIpuC,EAAK,IAAIqL,GAEb,OAAO,SAA0BiO,EAAMurB,GAMtC,OAJA7kC,EAAG4N,KAAM0L,GAAOiG,gBAAiBhV,KAAKtK,YAEtCsK,KAAKqP,SAAS9L,IAAK9N,EAAG0O,eAAgBm2B,IAE/Bt6B,MAbQ,GAmBjB8jC,WAAY,WAEX,IAAIruC,EAAK,IAAIqL,GAAS,EAAG,EAAG,GAE5B,OAAO,SAAqBw5B,GAE3B,OAAOt6B,KAAK6jC,gBAAiBpuC,EAAI6kC,IANvB,GAYZyJ,WAAY,WAEX,IAAItuC,EAAK,IAAIqL,GAAS,EAAG,EAAG,GAE5B,OAAO,SAAqBw5B,GAE3B,OAAOt6B,KAAK6jC,gBAAiBpuC,EAAI6kC,IANvB,GAYZ0J,WAAY,WAEX,IAAIvuC,EAAK,IAAIqL,GAAS,EAAG,EAAG,GAE5B,OAAO,SAAqBw5B,GAE3B,OAAOt6B,KAAK6jC,gBAAiBpuC,EAAI6kC,IANvB,GAYZ2J,aAAc,SAAW7uC,GAExB,OAAOA,EAAOiY,aAAcrN,KAAK6V,cAIlCquB,cAEKviB,GAAK,IAAI1hB,GAEN,SAAuB7K,GAE7B,OAAOA,EAAOiY,aAAcsU,GAAGhU,WAAY3N,KAAK6V,gBAMlDjL,OAAQ,WAIP,IAAI+W,EAAK,IAAI1hB,GACT7K,EAAS,IAAI0L,GAEjB,OAAO,SAAiBxL,EAAGC,EAAGC,GAExBF,EAAEsf,UAENxf,EAAOiO,KAAM/N,GAIbF,EAAOqN,IAAKnN,EAAGC,EAAGC,GAIdwK,KAAKmkC,SAETxiB,EAAG/W,OAAQ5K,KAAKqP,SAAUja,EAAQ4K,KAAK8K,IAIvC6W,EAAG/W,OAAQxV,EAAQ4K,KAAKqP,SAAUrP,KAAK8K,IAIxC9K,KAAKtK,WAAWma,sBAAuB8R,IA7BjC,GAmCRpe,IAAK,SAAWoa,GAEf,GAAKxd,UAAUC,OAAS,EAAI,CAE3B,IAAM,IAAI9C,EAAI,EAAGA,EAAI6C,UAAUC,OAAQ9C,IAEtC0C,KAAKuD,IAAKpD,UAAW7C,IAItB,OAAO0C,KAIR,OAAK2d,IAAW3d,MAEfK,QAAQC,MAAO,kEAAmEqd,GAC3E3d,OAID2d,GAAUA,EAAOqlB,YAEA,OAAlBrlB,EAAO8jB,QAEX9jB,EAAO8jB,OAAO/D,OAAQ/f,GAIvBA,EAAO8jB,OAASzhC,KAChB2d,EAAO5b,cAAe,CAAEX,KAAM,UAE9BpB,KAAK0hC,SAASjgC,KAAMkc,IAIpBtd,QAAQC,MAAO,gEAAiEqd,GAI1E3d,OAIR09B,OAAQ,SAAW/f,GAElB,GAAKxd,UAAUC,OAAS,EAAI,CAE3B,IAAM,IAAI9C,EAAI,EAAGA,EAAI6C,UAAUC,OAAQ9C,IAEtC0C,KAAK09B,OAAQv9B,UAAW7C,IAIzB,OAAO0C,KAIR,IAAI6B,EAAQ7B,KAAK0hC,SAASlgC,QAASmc,GAYnC,OAViB,IAAZ9b,IAEJ8b,EAAO8jB,OAAS,KAEhB9jB,EAAO5b,cAAe,CAAEX,KAAM,YAE9BpB,KAAK0hC,SAAS5/B,OAAQD,EAAO,IAIvB7B,MAIRokC,cAAe,SAAWC,GAEzB,OAAOrkC,KAAKskC,oBAAqB,KAAMD,IAIxCE,gBAAiB,SAAWlrB,GAE3B,OAAOrZ,KAAKskC,oBAAqB,OAAQjrB,IAI1CirB,oBAAqB,SAAWjrB,EAAMtb,GAErC,GAAKiC,KAAMqZ,KAAWtb,EAAQ,OAAOiC,KAErC,IAAM,IAAI1C,EAAI,EAAG8E,EAAIpC,KAAK0hC,SAASthC,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAExD,IACIqgB,EADQ3d,KAAK0hC,SAAUpkC,GACRgnC,oBAAqBjrB,EAAMtb,GAE9C,QAAgB8C,IAAX8c,EAEJ,OAAOA,IAUV6mB,iBAAkB,SAAWviC,GAW5B,YATgBpB,IAAXoB,IAEJ5B,QAAQmD,KAAM,8DACdvB,EAAS,IAAInB,IAIdd,KAAK2e,mBAAmB,GAEjB1c,EAAOmV,sBAAuBpX,KAAK6V,cAI3C4uB,oBAEKp1B,GAAW,IAAIvO,GACfsN,GAAQ,IAAItN,GAET,SAA6BmB,GAanC,YAXgBpB,IAAXoB,IAEJ5B,QAAQmD,KAAM,gEACdvB,EAAS,IAAI1B,IAIdP,KAAK2e,mBAAmB,GAExB3e,KAAK6V,YAAYvG,UAAWD,GAAUpN,EAAQmM,IAEvCnM,IAMTyiC,cAAe,WAEd,IAAIr1B,EAAW,IAAIvO,GACfpL,EAAa,IAAI6K,GAErB,OAAO,SAAwB0B,GAa9B,YAXgBpB,IAAXoB,IAEJ5B,QAAQmD,KAAM,2DACdvB,EAAS,IAAInB,IAIdd,KAAK2e,mBAAmB,GAExB3e,KAAK6V,YAAYvG,UAAWD,EAAU3Z,EAAYuM,GAE3CA,GAlBM,GAwBf0iC,kBAAmB,WAElB,IAAIjvC,EAAa,IAAI6K,GAErB,OAAO,SAA4B0B,GAWlC,YATgBpB,IAAXoB,IAEJ5B,QAAQmD,KAAM,+DACdvB,EAAS,IAAInB,IAIdd,KAAKykC,mBAAoB/uC,GAElBuM,EAAOQ,IAAK,EAAG,EAAG,GAAIuS,gBAAiBtf,IAf7B,GAqBnBkvC,QAAS,aAETxmB,SAAU,SAAWzJ,GAEpBA,EAAU3U,MAIV,IAFA,IAAI0hC,EAAW1hC,KAAK0hC,SAEVpkC,EAAI,EAAG8E,EAAIs/B,EAASthC,OAAQ9C,EAAI8E,EAAG9E,IAE5CokC,EAAUpkC,GAAI8gB,SAAUzJ,IAM1BkwB,gBAAiB,SAAWlwB,GAE3B,IAAsB,IAAjB3U,KAAKgiC,QAAV,CAEArtB,EAAU3U,MAIV,IAFA,IAAI0hC,EAAW1hC,KAAK0hC,SAEVpkC,EAAI,EAAG8E,EAAIs/B,EAASthC,OAAQ9C,EAAI8E,EAAG9E,IAE5CokC,EAAUpkC,GAAIunC,gBAAiBlwB,KAMjCmwB,kBAAmB,SAAWnwB,GAE7B,IAAI8sB,EAASzhC,KAAKyhC,OAEF,OAAXA,IAEJ9sB,EAAU8sB,GAEVA,EAAOqD,kBAAmBnwB,KAM5BoG,aAAc,WAEb/a,KAAK3K,OAAO+Z,QAASpP,KAAKqP,SAAUrP,KAAKtK,WAAYsK,KAAKoO,OAE1DpO,KAAK+hC,wBAAyB,GAI/BpjB,kBAAmB,SAAWomB,GAExB/kC,KAAK0Z,kBAAmB1Z,KAAK+a,gBAE7B/a,KAAK+hC,wBAA0BgD,KAEd,OAAhB/kC,KAAKyhC,OAETzhC,KAAK6V,YAAYxS,KAAMrD,KAAK3K,QAI5B2K,KAAK6V,YAAY7K,iBAAkBhL,KAAKyhC,OAAO5rB,YAAa7V,KAAK3K,QAIlE2K,KAAK+hC,wBAAyB,EAE9BgD,GAAQ,GAQT,IAFA,IAAIrD,EAAW1hC,KAAK0hC,SAEVpkC,EAAI,EAAG8E,EAAIs/B,EAASthC,OAAQ9C,EAAI8E,EAAG9E,IAE5CokC,EAAUpkC,GAAIqhB,kBAAmBomB,IAMnC9pB,OAAQ,SAAWC,GAGlB,IAAIC,OAA0Bta,IAATqa,GAAsC,iBAATA,EAE9CG,EAAS,GAKRF,IAGJD,EAAO,CACN8pB,WAAY,GACZC,UAAW,GACX7pB,SAAU,GACVK,OAAQ,GACRypB,OAAQ,IAGT7pB,EAAOC,SAAW,CACjBvB,QAAS,IACT3Y,KAAM,SACNma,UAAW,oBAOb,IAAIoC,EAAS,GAmBb,SAASwnB,EAAWC,EAASC,GAQ5B,YANiCxkC,IAA5BukC,EAASC,EAAQjsB,QAErBgsB,EAASC,EAAQjsB,MAASisB,EAAQpqB,OAAQC,IAIpCmqB,EAAQjsB,KAIhB,GA7BAuE,EAAOvE,KAAOpZ,KAAKoZ,KACnBuE,EAAOvc,KAAOpB,KAAKoB,KAEA,KAAdpB,KAAKqZ,OAAcsE,EAAOtE,KAAOrZ,KAAKqZ,OAClB,IAApBrZ,KAAKiiC,aAAsBtkB,EAAOskB,YAAa,IACxB,IAAvBjiC,KAAKkiC,gBAAyBvkB,EAAOukB,eAAgB,IACpC,IAAjBliC,KAAKgiC,UAAoBrkB,EAAOqkB,SAAU,IACnB,IAAvBhiC,KAAKmiC,gBAA0BxkB,EAAOwkB,eAAgB,GACjC,IAArBniC,KAAKoiC,cAAoBzkB,EAAOykB,YAAcpiC,KAAKoiC,aACf,OAApCkD,KAAKC,UAAWvlC,KAAKqiC,YAAsB1kB,EAAO0kB,SAAWriC,KAAKqiC,UAEvE1kB,EAAOtoB,OAAS2K,KAAK3K,OAAO8Q,WAEG,IAA1BnG,KAAK0Z,mBAA6BiE,EAAOjE,kBAAmB,QAgB1C7Y,IAAlBb,KAAKse,SAAyB,CAElCX,EAAOW,SAAW6mB,EAAWjqB,EAAK8pB,WAAYhlC,KAAKse,UAEnD,IAAIknB,EAAaxlC,KAAKse,SAASknB,WAE/B,QAAoB3kC,IAAf2kC,QAAkD3kC,IAAtB2kC,EAAWN,OAAuB,CAElE,IAAIA,EAASM,EAAWN,OAExB,GAAK5Z,MAAMC,QAAS2Z,GAEnB,IAAM,IAAI5nC,EAAI,EAAG8E,EAAI8iC,EAAO9kC,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAEjD,IAAImoC,EAAQP,EAAQ5nC,GAEpB6nC,EAAWjqB,EAAKgqB,OAAQO,QAMzBN,EAAWjqB,EAAKgqB,OAAQA,IAQ3B,QAAuBrkC,IAAlBb,KAAK0lC,SAET,GAAKpa,MAAMC,QAASvrB,KAAK0lC,UAAa,CAErC,IAAIC,EAAQ,GAEZ,IAAUroC,EAAI,EAAG8E,EAAIpC,KAAK0lC,SAAStlC,OAAQ9C,EAAI8E,EAAG9E,IAEjDqoC,EAAMlkC,KAAM0jC,EAAWjqB,EAAK+pB,UAAWjlC,KAAK0lC,SAAUpoC,KAIvDqgB,EAAO+nB,SAAWC,OAIlBhoB,EAAO+nB,SAAWP,EAAWjqB,EAAK+pB,UAAWjlC,KAAK0lC,UAQpD,GAAK1lC,KAAK0hC,SAASthC,OAAS,EAI3B,IAFAud,EAAO+jB,SAAW,GAERpkC,EAAI,EAAGA,EAAI0C,KAAK0hC,SAASthC,OAAQ9C,IAE1CqgB,EAAO+jB,SAASjgC,KAAMzB,KAAK0hC,SAAUpkC,GAAI2d,OAAQC,GAAOyC,QAM1D,GAAKxC,EAAe,CAEnB,IAAI6pB,EAAaY,EAAkB1qB,EAAK8pB,YACpCC,EAAYW,EAAkB1qB,EAAK+pB,WACnC7pB,EAAWwqB,EAAkB1qB,EAAKE,UAClCK,EAASmqB,EAAkB1qB,EAAKO,QAChCypB,EAASU,EAAkB1qB,EAAKgqB,QAE/BF,EAAW5kC,OAAS,IAAIib,EAAO2pB,WAAaA,GAC5CC,EAAU7kC,OAAS,IAAIib,EAAO4pB,UAAYA,GAC1C7pB,EAAShb,OAAS,IAAIib,EAAOD,SAAWA,GACxCK,EAAOrb,OAAS,IAAIib,EAAOI,OAASA,GACpCypB,EAAO9kC,OAAS,IAAIib,EAAO6pB,OAASA,GAM1C,OAFA7pB,EAAOsC,OAASA,EAETtC,EAKP,SAASuqB,EAAkBC,GAE1B,IAAIC,EAAS,GACb,IAAM,IAAIC,KAAOF,EAAQ,CAExB,IAAI3rB,EAAO2rB,EAAOE,UACX7rB,EAAKoB,SACZwqB,EAAOrkC,KAAMyY,GAGd,OAAO4rB,IAMT3iC,MAAO,SAAW6iC,GAEjB,OAAO,IAAIhmC,KAAKoD,aAAcC,KAAMrD,KAAMgmC,IAI3C3iC,KAAM,SAAW2X,EAAQgrB,GA6BxB,QA3BmBnlC,IAAdmlC,IAA0BA,GAAY,GAE3ChmC,KAAKqZ,KAAO2B,EAAO3B,KAEnBrZ,KAAK8K,GAAGzH,KAAM2X,EAAOlQ,IAErB9K,KAAKqP,SAAShM,KAAM2X,EAAO3L,UAC3BrP,KAAKtK,WAAW2N,KAAM2X,EAAOtlB,YAC7BsK,KAAKoO,MAAM/K,KAAM2X,EAAO5M,OAExBpO,KAAK3K,OAAOgO,KAAM2X,EAAO3lB,QACzB2K,KAAK6V,YAAYxS,KAAM2X,EAAOnF,aAE9B7V,KAAK0Z,iBAAmBsB,EAAOtB,iBAC/B1Z,KAAK+hC,uBAAyB/mB,EAAO+mB,uBAErC/hC,KAAKqhC,OAAOrB,KAAOhlB,EAAOqmB,OAAOrB,KACjChgC,KAAKgiC,QAAUhnB,EAAOgnB,QAEtBhiC,KAAKiiC,WAAajnB,EAAOinB,WACzBjiC,KAAKkiC,cAAgBlnB,EAAOknB,cAE5BliC,KAAKmiC,cAAgBnnB,EAAOmnB,cAC5BniC,KAAKoiC,YAAcpnB,EAAOonB,YAE1BpiC,KAAKqiC,SAAWiD,KAAKW,MAAOX,KAAKC,UAAWvqB,EAAOqnB,YAEhC,IAAd2D,EAEJ,IAAM,IAAI1oC,EAAI,EAAGA,EAAI0d,EAAO0mB,SAASthC,OAAQ9C,IAAO,CAEnD,IAAI4oC,EAAQlrB,EAAO0mB,SAAUpkC,GAC7B0C,KAAKuD,IAAK2iC,EAAM/iC,SAMlB,OAAOnD,QCxyBTsiC,GAAOphC,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ2mB,GAAStgC,WAAa,CAEtEkC,YAAak/B,GAEb6B,UAAU,EAEV9gC,KAAM,SAAW2X,EAAQgrB,GAOxB,OALAxE,GAAStgC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,EAAQgrB,GAE5ChmC,KAAKuiC,mBAAmBl/B,KAAM2X,EAAOunB,oBACrCviC,KAAK4V,iBAAiBvS,KAAM2X,EAAOpF,kBAE5B5V,MAIR2kC,kBAAmB,WAElB,IAAIjvC,EAAa,IAAI6K,GAErB,OAAO,SAA4B0B,GAWlC,YATgBpB,IAAXoB,IAEJ5B,QAAQmD,KAAM,6DACdvB,EAAS,IAAInB,IAIdd,KAAKykC,mBAAoB/uC,GAElBuM,EAAOQ,IAAK,EAAG,GAAK,GAAIuS,gBAAiBtf,IAf/B,GAqBnBipB,kBAAmB,SAAWomB,GAE7BvD,GAAStgC,UAAUyd,kBAAkBtc,KAAMrC,KAAM+kC,GAEjD/kC,KAAKuiC,mBAAmB50B,WAAY3N,KAAK6V,cAI1C1S,MAAO,WAEN,OAAO,IAAInD,KAAKoD,aAAcC,KAAMrD,SCzCtCwiC,GAAmBthC,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQynB,GAAOphC,WAAa,CAEhFkC,YAAao/B,GAEb2D,sBAAsB,EAEtB9iC,KAAM,SAAW2X,EAAQgrB,GAcxB,OAZA1D,GAAOphC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,EAAQgrB,GAE1ChmC,KAAK+P,KAAOiL,EAAOjL,KACnB/P,KAAKgQ,MAAQgL,EAAOhL,MACpBhQ,KAAKiQ,IAAM+K,EAAO/K,IAClBjQ,KAAKkQ,OAAS8K,EAAO9K,OACrBlQ,KAAKmQ,KAAO6K,EAAO7K,KACnBnQ,KAAKoQ,IAAM4K,EAAO5K,IAElBpQ,KAAKyiC,KAAOznB,EAAOynB,KACnBziC,KAAK0iC,KAAuB,OAAhB1nB,EAAO0nB,KAAgB,KAAO1hC,OAAOC,OAAQ,GAAI+Z,EAAO0nB,MAE7D1iC,MAIRomC,cAAe,SAAWC,EAAWC,EAAYhxC,EAAGC,EAAGgN,EAAOG,GAE1C,OAAd1C,KAAK0iC,OAET1iC,KAAK0iC,KAAO,CACX6D,SAAS,EACTF,UAAW,EACXC,WAAY,EACZE,QAAS,EACTC,QAAS,EACTlkC,MAAO,EACPG,OAAQ,IAKV1C,KAAK0iC,KAAK6D,SAAU,EACpBvmC,KAAK0iC,KAAK2D,UAAYA,EACtBrmC,KAAK0iC,KAAK4D,WAAaA,EACvBtmC,KAAK0iC,KAAK8D,QAAUlxC,EACpB0K,KAAK0iC,KAAK+D,QAAUlxC,EACpByK,KAAK0iC,KAAKngC,MAAQA,EAClBvC,KAAK0iC,KAAKhgC,OAASA,EAEnB1C,KAAK2iC,0BAIN+D,gBAAiB,WAEG,OAAd1mC,KAAK0iC,OAET1iC,KAAK0iC,KAAK6D,SAAU,GAIrBvmC,KAAK2iC,0BAINA,uBAAwB,WAEvB,IAAIl9B,GAAOzF,KAAKgQ,MAAQhQ,KAAK+P,OAAW,EAAI/P,KAAKyiC,MAC7C/8B,GAAO1F,KAAKiQ,IAAMjQ,KAAKkQ,SAAa,EAAIlQ,KAAKyiC,MAC7C3qB,GAAO9X,KAAKgQ,MAAQhQ,KAAK+P,MAAS,EAClCgI,GAAO/X,KAAKiQ,IAAMjQ,KAAKkQ,QAAW,EAElCH,EAAO+H,EAAKrS,EACZuK,EAAQ8H,EAAKrS,EACbwK,EAAM8H,EAAKrS,EACXwK,EAAS6H,EAAKrS,EAElB,GAAmB,OAAd1F,KAAK0iC,MAAiB1iC,KAAK0iC,KAAK6D,QAAU,CAE9C,IAAII,EAAQ3mC,KAAKyiC,MAASziC,KAAK0iC,KAAKngC,MAAQvC,KAAK0iC,KAAK2D,WAClDO,EAAQ5mC,KAAKyiC,MAASziC,KAAK0iC,KAAKhgC,OAAS1C,KAAK0iC,KAAK4D,YACnDO,GAAW7mC,KAAKgQ,MAAQhQ,KAAK+P,MAAS/P,KAAK0iC,KAAKngC,MAChDukC,GAAW9mC,KAAKiQ,IAAMjQ,KAAKkQ,QAAWlQ,KAAK0iC,KAAKhgC,OAGpDsN,GADAD,GAAQ82B,GAAW7mC,KAAK0iC,KAAK8D,QAAUG,IACxBE,GAAW7mC,KAAK0iC,KAAKngC,MAAQokC,GAE5Cz2B,GADAD,GAAO62B,GAAW9mC,KAAK0iC,KAAK+D,QAAUG,IACvBE,GAAW9mC,KAAK0iC,KAAKhgC,OAASkkC,GAI9C5mC,KAAK4V,iBAAiBvF,iBAAkBN,EAAMC,EAAOC,EAAKC,EAAQlQ,KAAKmQ,KAAMnQ,KAAKoQ,MAInF6K,OAAQ,SAAWC,GAElB,IAAIhB,EAAOsnB,GAAStgC,UAAU+Z,OAAO5Y,KAAMrC,KAAMkb,GAYjD,OAVAhB,EAAKyD,OAAO8kB,KAAOziC,KAAKyiC,KACxBvoB,EAAKyD,OAAO5N,KAAO/P,KAAK+P,KACxBmK,EAAKyD,OAAO3N,MAAQhQ,KAAKgQ,MACzBkK,EAAKyD,OAAO1N,IAAMjQ,KAAKiQ,IACvBiK,EAAKyD,OAAOzN,OAASlQ,KAAKkQ,OAC1BgK,EAAKyD,OAAOxN,KAAOnQ,KAAKmQ,KACxB+J,EAAKyD,OAAOvN,IAAMpQ,KAAKoQ,IAEJ,OAAdpQ,KAAK0iC,OAAgBxoB,EAAKyD,OAAO+kB,KAAO1hC,OAAOC,OAAQ,GAAIjB,KAAK0iC,OAE9DxoB,KCjHTlZ,OAAOC,OAAQ2hC,GAAM1hC,UAAW,CAE/BiC,MAAO,WAEN,OAAO,IAAInD,KAAKoD,aAAcC,KAAMrD,OAIrCqD,KAAM,SAAW2X,GAEhBhb,KAAK4D,EAAIoX,EAAOpX,EAChB5D,KAAK6D,EAAImX,EAAOnX,EAChB7D,KAAK0G,EAAIsU,EAAOtU,EAEhB1G,KAAK2W,OAAOtT,KAAM2X,EAAOrE,QACzB3W,KAAKy1B,MAAMpyB,KAAM2X,EAAOya,OAExBz1B,KAAK6iC,cAAgB7nB,EAAO6nB,cAE5B,IAAM,IAAIvlC,EAAI,EAAG+f,EAAKrC,EAAO8nB,cAAc1iC,OAAQ9C,EAAI+f,EAAI/f,IAE1D0C,KAAK8iC,cAAexlC,GAAM0d,EAAO8nB,cAAexlC,GAAI6F,QAIrD,IAAU7F,EAAI,EAAG+f,EAAKrC,EAAO+nB,aAAa3iC,OAAQ9C,EAAI+f,EAAI/f,IAEzD0C,KAAK+iC,aAAczlC,GAAM0d,EAAO+nB,aAAczlC,GAAI6F,QAInD,OAAOnD,QClCT,IA+UMkG,GA3JA6gC,GApLFC,GAAa,EAEjB,SAASC,KAERjmC,OAAOmY,eAAgBnZ,KAAM,KAAM,CAAEjC,MAAOipC,IAAc,IAE1DhnC,KAAKoZ,KAAOrc,GAAMK,eAElB4C,KAAKqZ,KAAO,GACZrZ,KAAKoB,KAAO,WAEZpB,KAAKwe,SAAW,GAChBxe,KAAKknC,OAAS,GACdlnC,KAAKmnC,MAAQ,GACbnnC,KAAKonC,cAAgB,CAAC,IAEtBpnC,KAAKqnC,aAAe,GACpBrnC,KAAKsnC,aAAe,GAEpBtnC,KAAKunC,YAAc,GACnBvnC,KAAKwnC,YAAc,GAEnBxnC,KAAKynC,cAAgB,GAErBznC,KAAK0nC,YAAc,KACnB1nC,KAAKkjB,eAAiB,KAItBljB,KAAK2nC,oBAAqB,EAC1B3nC,KAAK4nC,oBAAqB,EAC1B5nC,KAAK6nC,eAAgB,EACrB7nC,KAAK8nC,mBAAoB,EACzB9nC,KAAK+nC,kBAAmB,EACxB/nC,KAAKgoC,yBAA0B,EAC/BhoC,KAAKioC,kBAAmB,EC/CzB,SAASC,GAAiBhmC,EAAOimC,EAAUC,GAE1C,GAAK9c,MAAMC,QAASrpB,GAEnB,MAAM,IAAImmC,UAAW,yDAItBroC,KAAKqZ,KAAO,GAEZrZ,KAAKkC,MAAQA,EACblC,KAAKmoC,SAAWA,EAChBnoC,KAAKmN,WAAkBtM,IAAVqB,EAAsBA,EAAM9B,OAAS+nC,EAAW,EAC7DnoC,KAAKooC,YAA4B,IAAfA,EAElBpoC,KAAKg+B,SAAU,EACfh+B,KAAKw/B,YAAc,CAAEt5B,OAAQ,EAAGiH,OAAS,GAEzCnN,KAAK+Z,QAAU,EA4ShB,SAASuuB,GAAqBpmC,EAAOimC,EAAUC,GAE9CF,GAAgB7lC,KAAMrC,KAAM,IAAIk/B,UAAWh9B,GAASimC,EAAUC,GAQ/D,SAASG,GAAsBrmC,EAAOimC,EAAUC,GAE/CF,GAAgB7lC,KAAMrC,KAAM,IAAIo/B,WAAYl9B,GAASimC,EAAUC,GAQhE,SAASI,GAA6BtmC,EAAOimC,EAAUC,GAEtDF,GAAgB7lC,KAAMrC,KAAM,IAAIyoC,kBAAmBvmC,GAASimC,EAAUC,GAQvE,SAASM,GAAsBxmC,EAAOimC,EAAUC,GAE/CF,GAAgB7lC,KAAMrC,KAAM,IAAI4+B,WAAY18B,GAASimC,EAAUC,GAQhE,SAASO,GAAuBzmC,EAAOimC,EAAUC,GAEhDF,GAAgB7lC,KAAMrC,KAAM,IAAI0+B,YAAax8B,GAASimC,EAAUC,GAQjE,SAASQ,GAAsB1mC,EAAOimC,EAAUC,GAE/CF,GAAgB7lC,KAAMrC,KAAM,IAAIg/B,WAAY98B,GAASimC,EAAUC,GAQhE,SAASS,GAAuB3mC,EAAOimC,EAAUC,GAEhDF,GAAgB7lC,KAAMrC,KAAM,IAAI8+B,YAAa58B,GAASimC,EAAUC,GAQjE,SAASU,GAAwB5mC,EAAOimC,EAAUC,GAEjDF,GAAgB7lC,KAAMrC,KAAM,IAAIw+B,aAAct8B,GAASimC,EAAUC,GAQlE,SAASW,GAAwB7mC,EAAOimC,EAAUC,GAEjDF,GAAgB7lC,KAAMrC,KAAM,IAAIy+B,aAAcv8B,GAASimC,EAAUC,GCnZlE,SAASY,KAERhpC,KAAKwe,SAAW,GAChBxe,KAAKipC,QAAU,GACfjpC,KAAKknC,OAAS,GACdlnC,KAAKkpC,IAAM,GACXlpC,KAAKmpC,KAAO,GAEZnpC,KAAKopC,OAAS,GAEdppC,KAAKqnC,aAAe,GAEpBrnC,KAAKunC,YAAc,GACnBvnC,KAAKwnC,YAAc,GAInBxnC,KAAK0nC,YAAc,KACnB1nC,KAAKkjB,eAAiB,KAItBljB,KAAK4nC,oBAAqB,EAC1B5nC,KAAK8nC,mBAAoB,EACzB9nC,KAAK+nC,kBAAmB,EACxB/nC,KAAK6nC,eAAgB,EACrB7nC,KAAKioC,kBAAmB,ECZzB,SAASoB,GAAUnnC,GAElB,GAAsB,IAAjBA,EAAM9B,OAAe,OAAO,EAAA,EAIjC,IAFA,IAAIjL,EAAM+M,EAAO,GAEP5E,EAAI,EAAG8E,EAAIF,EAAM9B,OAAQ9C,EAAI8E,IAAM9E,EAEvC4E,EAAO5E,GAAMnI,IAAMA,EAAM+M,EAAO5E,IAItC,OAAOnI,EH4BR8xC,GAAS/lC,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ/a,GAAgBoB,WAAa,CAE/EkC,YAAa6jC,GAEb1oB,YAAY,EAEZ4kB,YAAa,SAAW9tC,GAIvB,IAFA,IAAIwsB,GAAe,IAAI9gB,IAAU0W,gBAAiBpiB,GAExCiI,EAAI,EAAG+f,EAAKrd,KAAKwe,SAASpe,OAAQ9C,EAAI+f,EAAI/f,IAEtC0C,KAAKwe,SAAUlhB,GACrB+P,aAAchY,GAItB,IAAUiI,EAAI,EAAG+f,EAAKrd,KAAKmnC,MAAM/mC,OAAQ9C,EAAI+f,EAAI/f,IAAO,CAEvD,IAAIgsC,EAAOtpC,KAAKmnC,MAAO7pC,GACvBgsC,EAAK3yB,OAAOrS,aAAcud,GAAezc,YAEzC,IAAM,IAAI0a,EAAI,EAAGypB,EAAKD,EAAKxG,cAAc1iC,OAAQ0f,EAAIypB,EAAIzpB,IAExDwpB,EAAKxG,cAAehjB,GAAIxb,aAAcud,GAAezc,YAqBvD,OAf0B,OAArBpF,KAAK0nC,aAET1nC,KAAKwpC,qBAIuB,OAAxBxpC,KAAKkjB,gBAETljB,KAAKmjB,wBAINnjB,KAAK4nC,oBAAqB,EAC1B5nC,KAAK8nC,mBAAoB,EAElB9nC,MAIR0jC,QAAS,WAIR,IAAI/hB,EAAK,IAAI1hB,GAEb,OAAO,SAAkBoF,GAMxB,OAJAsc,EAAGjT,cAAerJ,GAElBrF,KAAKmjC,YAAaxhB,GAEX3hB,MAZA,GAkBT2jC,QAAS,WAIR,IAAIhiB,EAAK,IAAI1hB,GAEb,OAAO,SAAkBoF,GAMxB,OAJAsc,EAAG/S,cAAevJ,GAElBrF,KAAKmjC,YAAaxhB,GAEX3hB,MAZA,GAkBT4jC,QAAS,WAIR,IAAIjiB,EAAK,IAAI1hB,GAEb,OAAO,SAAkBoF,GAMxB,OAJAsc,EAAG9S,cAAexJ,GAElBrF,KAAKmjC,YAAaxhB,GAEX3hB,MAZA,GAkBTiY,UAAW,WAIV,IAAI0J,EAAK,IAAI1hB,GAEb,OAAO,SAAoB3K,EAAGC,EAAGC,GAMhC,OAJAmsB,EAAGlT,gBAAiBnZ,EAAGC,EAAGC,GAE1BwK,KAAKmjC,YAAaxhB,GAEX3hB,MAZE,GAkBXoO,MAAO,WAIN,IAAIuT,EAAK,IAAI1hB,GAEb,OAAO,SAAgB3K,EAAGC,EAAGC,GAM5B,OAJAmsB,EAAGzS,UAAW5Z,EAAGC,EAAGC,GAEpBwK,KAAKmjC,YAAaxhB,GAEX3hB,MAZF,GAkBP4K,QAEKm8B,GAAM,IAAIvF,GAEP,SAAiBpsC,GAEvB2xC,GAAIn8B,OAAQxV,GAEZ2xC,GAAIhsB,eAEJ/a,KAAKmjC,YAAa4D,GAAI1xC,UAMxBo0C,mBAAoB,SAAWnrB,GAE9B,IAAIH,EAAQne,KAER0pC,EAA6B,OAAnBprB,EAASzc,MAAiByc,EAASzc,MAAMK,WAAQrB,EAC3D6d,EAAaJ,EAASI,WAEtBirB,EAAYjrB,EAAWrP,SAASnN,MAChC+mC,OAAgCpoC,IAAtB6d,EAAW/H,OAAuB+H,EAAW/H,OAAOzU,WAAQrB,EACtEqmC,OAA8BrmC,IAArB6d,EAAW+W,MAAsB/W,EAAW+W,MAAMvzB,WAAQrB,EACnEqoC,OAAwBroC,IAAlB6d,EAAWlC,GAAmBkC,EAAWlC,GAAGta,WAAQrB,EAC1DsoC,OAA0BtoC,IAAnB6d,EAAWkrB,IAAoBlrB,EAAWkrB,IAAI1nC,WAAQrB,OAEnDA,IAATsoC,IAAqBnpC,KAAKonC,cAAe,GAAM,IAMpD,IAJA,IAAIyC,EAAc,GACdC,EAAU,GACVC,EAAW,GAELzsC,EAAI,EAAGwiB,EAAI,EAAGxiB,EAAIqsC,EAAUvpC,OAAQ9C,GAAK,EAAGwiB,GAAK,EAE1D3B,EAAMK,SAAS/c,KAAM,IAAIX,GAAS6oC,EAAWrsC,GAAKqsC,EAAWrsC,EAAI,GAAKqsC,EAAWrsC,EAAI,UAEpEuD,IAAZooC,GAEJY,EAAYpoC,KAAM,IAAIX,GAASmoC,EAAS3rC,GAAK2rC,EAAS3rC,EAAI,GAAK2rC,EAAS3rC,EAAI,UAI7DuD,IAAXqmC,GAEJ/oB,EAAM+oB,OAAOzlC,KAAM,IAAIozB,GAAOqS,EAAQ5pC,GAAK4pC,EAAQ5pC,EAAI,GAAK4pC,EAAQ5pC,EAAI,UAI5DuD,IAARqoC,GAEJY,EAAQroC,KAAM,IAAI1B,GAASmpC,EAAKppB,GAAKopB,EAAKppB,EAAI,UAIjCjf,IAATsoC,GAEJY,EAAStoC,KAAM,IAAI1B,GAASopC,EAAMrpB,GAAKqpB,EAAMrpB,EAAI,KAMnD,SAASkqB,EAASpmC,EAAGC,EAAG6C,EAAGm8B,GAE1B,IAGIyG,EAAO,IAAI1G,GAAOh/B,EAAGC,EAAG6C,OAHI7F,IAAZooC,EAAwB,CAAEY,EAAajmC,GAAIT,QAAS0mC,EAAahmC,GAAIV,QAAS0mC,EAAanjC,GAAIvD,SAAY,QACjGtC,IAAXqmC,EAAuB,CAAE/oB,EAAM+oB,OAAQtjC,GAAIT,QAASgb,EAAM+oB,OAAQrjC,GAAIV,QAASgb,EAAM+oB,OAAQxgC,GAAIvD,SAAY,GAEpE0/B,GAE5D1kB,EAAMgpB,MAAM1lC,KAAM6nC,QAELzoC,IAARqoC,GAEJ/qB,EAAMipB,cAAe,GAAI3lC,KAAM,CAAEqoC,EAASlmC,GAAIT,QAAS2mC,EAASjmC,GAAIV,QAAS2mC,EAASpjC,GAAIvD,eAI7EtC,IAATsoC,GAEJhrB,EAAMipB,cAAe,GAAI3lC,KAAM,CAAEsoC,EAAUnmC,GAAIT,QAAS4mC,EAAUlmC,GAAIV,QAAS4mC,EAAUrjC,GAAIvD,UAM/F,IAAIimC,EAAS9qB,EAAS8qB,OAEtB,GAAKA,EAAOhpC,OAAS,EAEpB,IAAU9C,EAAI,EAAGA,EAAI8rC,EAAOhpC,OAAQ9C,IAOnC,IALA,IAAI2sC,EAAQb,EAAQ9rC,GAEhB+jB,EAAQ4oB,EAAM5oB,MAGGkoB,GAAXzpB,EAAIuB,EAAYA,EAFd4oB,EAAM98B,OAEuB2S,EAAIypB,EAAIzpB,GAAK,OAEpCjf,IAAZ6oC,EAEJM,EAASN,EAAS5pB,GAAK4pB,EAAS5pB,EAAI,GAAK4pB,EAAS5pB,EAAI,GAAKmqB,EAAMpH,eAIjEmH,EAASlqB,EAAGA,EAAI,EAAGA,EAAI,EAAGmqB,EAAMpH,oBAUnC,QAAiBhiC,IAAZ6oC,EAEJ,IAAUpsC,EAAI,EAAGA,EAAIosC,EAAQtpC,OAAQ9C,GAAK,EAEzC0sC,EAASN,EAASpsC,GAAKosC,EAASpsC,EAAI,GAAKosC,EAASpsC,EAAI,SAMvD,IAAUA,EAAI,EAAGA,EAAIqsC,EAAUvpC,OAAS,EAAG9C,GAAK,EAE/C0sC,EAAS1sC,EAAGA,EAAI,EAAGA,EAAI,GAsB1B,OAdA0C,KAAKkqC,qBAEyB,OAAzB5rB,EAASopB,cAEb1nC,KAAK0nC,YAAcppB,EAASopB,YAAYvkC,SAIR,OAA5Bmb,EAAS4E,iBAEbljB,KAAKkjB,eAAiB5E,EAAS4E,eAAe/f,SAIxCnD,MAIRyG,QAEKP,GAAS,IAAIpF,GAEV,WAQN,OANAd,KAAKwpC,qBAELxpC,KAAK0nC,YAAY5pB,UAAW5X,IAASpB,SAErC9E,KAAKiY,UAAW/R,GAAO5Q,EAAG4Q,GAAO3Q,EAAG2Q,GAAO1Q,GAEpCwK,OAMToF,UAAW,WAEVpF,KAAKmjB,wBAEL,IAAI1c,EAASzG,KAAKkjB,eAAezc,OAC7ByQ,EAASlX,KAAKkjB,eAAehM,OAE7BvT,EAAe,IAAXuT,EAAe,EAAI,EAAMA,EAE7B7hB,EAAS,IAAI4K,GAUjB,OATA5K,EAAOoN,IACNkB,EAAG,EAAG,GAAKA,EAAI8C,EAAOnR,EACtB,EAAGqO,EAAG,GAAKA,EAAI8C,EAAOlR,EACtB,EAAG,EAAGoO,GAAKA,EAAI8C,EAAOjR,EACtB,EAAG,EAAG,EAAG,GAGVwK,KAAKmjC,YAAa9tC,GAEX2K,MAIRkqC,mBAAoB,WAInB,IAFA,IAAIC,EAAK,IAAIrpC,GAAWspC,EAAK,IAAItpC,GAEvBkI,EAAI,EAAGqhC,EAAKrqC,KAAKmnC,MAAM/mC,OAAQ4I,EAAIqhC,EAAIrhC,IAAO,CAEvD,IAAIsgC,EAAOtpC,KAAKmnC,MAAOn+B,GAEnBshC,EAAKtqC,KAAKwe,SAAU8qB,EAAK1lC,GACzB2mC,EAAKvqC,KAAKwe,SAAU8qB,EAAKzlC,GACzB2mC,EAAKxqC,KAAKwe,SAAU8qB,EAAK5iC,GAE7ByjC,EAAGnmC,WAAYwmC,EAAID,GACnBH,EAAGpmC,WAAYsmC,EAAIC,GACnBJ,EAAGn0B,MAAOo0B,GAEVD,EAAG/kC,YAEHkkC,EAAK3yB,OAAOtT,KAAM8mC,KAMpBM,qBAAsB,SAAWC,GAIhC,IAAIpnC,EAAGqnC,EAAI3hC,EAAGqhC,EAAIf,EAAM9qB,EAIxB,SANsB3d,IAAjB6pC,IAA6BA,GAAe,GAIjDlsB,EAAW,IAAI8M,MAAOtrB,KAAKwe,SAASpe,QAE9BkD,EAAI,EAAGqnC,EAAK3qC,KAAKwe,SAASpe,OAAQkD,EAAIqnC,EAAIrnC,IAE/Ckb,EAAUlb,GAAM,IAAIxC,GAIrB,GAAK4pC,EAAe,CAKnB,IAAIJ,EAAIC,EAAIC,EACRL,EAAK,IAAIrpC,GAAWspC,EAAK,IAAItpC,GAEjC,IAAMkI,EAAI,EAAGqhC,EAAKrqC,KAAKmnC,MAAM/mC,OAAQ4I,EAAIqhC,EAAIrhC,IAE5CsgC,EAAOtpC,KAAKmnC,MAAOn+B,GAEnBshC,EAAKtqC,KAAKwe,SAAU8qB,EAAK1lC,GACzB2mC,EAAKvqC,KAAKwe,SAAU8qB,EAAKzlC,GACzB2mC,EAAKxqC,KAAKwe,SAAU8qB,EAAK5iC,GAEzByjC,EAAGnmC,WAAYwmC,EAAID,GACnBH,EAAGpmC,WAAYsmC,EAAIC,GACnBJ,EAAGn0B,MAAOo0B,GAEV5rB,EAAU8qB,EAAK1lC,GAAIL,IAAK4mC,GACxB3rB,EAAU8qB,EAAKzlC,GAAIN,IAAK4mC,GACxB3rB,EAAU8qB,EAAK5iC,GAAInD,IAAK4mC,QAQzB,IAFAnqC,KAAKkqC,qBAEClhC,EAAI,EAAGqhC,EAAKrqC,KAAKmnC,MAAM/mC,OAAQ4I,EAAIqhC,EAAIrhC,IAI5CwV,GAFA8qB,EAAOtpC,KAAKmnC,MAAOn+B,IAEJpF,GAAIL,IAAK+lC,EAAK3yB,QAC7B6H,EAAU8qB,EAAKzlC,GAAIN,IAAK+lC,EAAK3yB,QAC7B6H,EAAU8qB,EAAK5iC,GAAInD,IAAK+lC,EAAK3yB,QAM/B,IAAMrT,EAAI,EAAGqnC,EAAK3qC,KAAKwe,SAASpe,OAAQkD,EAAIqnC,EAAIrnC,IAE/Ckb,EAAUlb,GAAI8B,YAIf,IAAM4D,EAAI,EAAGqhC,EAAKrqC,KAAKmnC,MAAM/mC,OAAQ4I,EAAIqhC,EAAIrhC,IAAO,CAInD,IAAI85B,GAFJwG,EAAOtpC,KAAKmnC,MAAOn+B,IAEM85B,cAEK,IAAzBA,EAAc1iC,QAElB0iC,EAAe,GAAIz/B,KAAMmb,EAAU8qB,EAAK1lC,IACxCk/B,EAAe,GAAIz/B,KAAMmb,EAAU8qB,EAAKzlC,IACxCi/B,EAAe,GAAIz/B,KAAMmb,EAAU8qB,EAAK5iC,MAIxCo8B,EAAe,GAAMtkB,EAAU8qB,EAAK1lC,GAAIT,QACxC2/B,EAAe,GAAMtkB,EAAU8qB,EAAKzlC,GAAIV,QACxC2/B,EAAe,GAAMtkB,EAAU8qB,EAAK5iC,GAAIvD,SAMrCnD,KAAKmnC,MAAM/mC,OAAS,IAExBJ,KAAK8nC,mBAAoB,IAM3B8C,yBAA0B,WAEzB,IAAI5hC,EAAGqhC,EAAIf,EAIX,IAFAtpC,KAAKkqC,qBAEClhC,EAAI,EAAGqhC,EAAKrqC,KAAKmnC,MAAM/mC,OAAQ4I,EAAIqhC,EAAIrhC,IAAO,CAInD,IAAI85B,GAFJwG,EAAOtpC,KAAKmnC,MAAOn+B,IAEM85B,cAEK,IAAzBA,EAAc1iC,QAElB0iC,EAAe,GAAIz/B,KAAMimC,EAAK3yB,QAC9BmsB,EAAe,GAAIz/B,KAAMimC,EAAK3yB,QAC9BmsB,EAAe,GAAIz/B,KAAMimC,EAAK3yB,UAI9BmsB,EAAe,GAAMwG,EAAK3yB,OAAOxT,QACjC2/B,EAAe,GAAMwG,EAAK3yB,OAAOxT,QACjC2/B,EAAe,GAAMwG,EAAK3yB,OAAOxT,SAM9BnD,KAAKmnC,MAAM/mC,OAAS,IAExBJ,KAAK8nC,mBAAoB,IAM3B+C,oBAAqB,WAEpB,IAAIvtC,EAAG+f,EAAIrU,EAAGqhC,EAAIf,EAMlB,IAAMtgC,EAAI,EAAGqhC,EAAKrqC,KAAKmnC,MAAM/mC,OAAQ4I,EAAIqhC,EAAIrhC,IAgB5C,KAdAsgC,EAAOtpC,KAAKmnC,MAAOn+B,IAEP8hC,qBAMXxB,EAAKwB,qBAAqBznC,KAAMimC,EAAK3yB,QAJrC2yB,EAAKwB,qBAAuBxB,EAAK3yB,OAAOxT,QAQlCmmC,EAAKyB,0BAA0BzB,EAAKyB,wBAA0B,IAE/DztC,EAAI,EAAG+f,EAAKisB,EAAKxG,cAAc1iC,OAAQ9C,EAAI+f,EAAI/f,IAE7CgsC,EAAKyB,wBAAyBztC,GAMpCgsC,EAAKyB,wBAAyBztC,GAAI+F,KAAMimC,EAAKxG,cAAexlC,IAJ5DgsC,EAAKyB,wBAAyBztC,GAAMgsC,EAAKxG,cAAexlC,GAAI6F,QAc/D,IAAI6nC,EAAS,IAAI/D,GAGjB,IAFA+D,EAAO7D,MAAQnnC,KAAKmnC,MAEd7pC,EAAI,EAAG+f,EAAKrd,KAAKqnC,aAAajnC,OAAQ9C,EAAI+f,EAAI/f,IAAO,CAI1D,IAAO0C,KAAKsnC,aAAchqC,GAAM,CAE/B0C,KAAKsnC,aAAchqC,GAAM,GACzB0C,KAAKsnC,aAAchqC,GAAI2tC,YAAc,GACrCjrC,KAAKsnC,aAAchqC,GAAIwlC,cAAgB,GAEvC,IAAIoI,EAAiBlrC,KAAKsnC,aAAchqC,GAAI2tC,YACxCE,EAAmBnrC,KAAKsnC,aAAchqC,GAAIwlC,cAI9C,IAAM95B,EAAI,EAAGqhC,EAAKrqC,KAAKmnC,MAAM/mC,OAAQ4I,EAAIqhC,EAAIrhC,IAE5CoiC,EAAa,IAAItqC,GACjBgiC,EAAgB,CAAEl/B,EAAG,IAAI9C,GAAW+C,EAAG,IAAI/C,GAAW4F,EAAG,IAAI5F,IAE7DoqC,EAAezpC,KAAM2pC,GACrBD,EAAiB1pC,KAAMqhC,GAMzB,IAaIsI,EAAYtI,EAbZwE,EAAetnC,KAAKsnC,aAAchqC,GAetC,IAXA0tC,EAAOxsB,SAAWxe,KAAKqnC,aAAc/pC,GAAIkhB,SAIzCwsB,EAAOd,qBACPc,EAAOP,uBAMDzhC,EAAI,EAAGqhC,EAAKrqC,KAAKmnC,MAAM/mC,OAAQ4I,EAAIqhC,EAAIrhC,IAE5CsgC,EAAOtpC,KAAKmnC,MAAOn+B,GAEnBoiC,EAAa9D,EAAa2D,YAAajiC,GACvC85B,EAAgBwE,EAAaxE,cAAe95B,GAE5CoiC,EAAW/nC,KAAMimC,EAAK3yB,QAEtBmsB,EAAcl/B,EAAEP,KAAMimC,EAAKxG,cAAe,IAC1CA,EAAcj/B,EAAER,KAAMimC,EAAKxG,cAAe,IAC1CA,EAAcp8B,EAAErD,KAAMimC,EAAKxG,cAAe,IAQ5C,IAAM95B,EAAI,EAAGqhC,EAAKrqC,KAAKmnC,MAAM/mC,OAAQ4I,EAAIqhC,EAAIrhC,KAE5CsgC,EAAOtpC,KAAKmnC,MAAOn+B,IAEd2N,OAAS2yB,EAAKwB,qBACnBxB,EAAKxG,cAAgBwG,EAAKyB,yBAM5BvB,mBAAoB,WAEO,OAArBxpC,KAAK0nC,cAET1nC,KAAK0nC,YAAc,IAAIvtB,IAIxBna,KAAK0nC,YAAYvqB,cAAend,KAAKwe,WAItC2E,sBAAuB,WAEO,OAAxBnjB,KAAKkjB,iBAETljB,KAAKkjB,eAAiB,IAAI9I,IAI3Bpa,KAAKkjB,eAAe/F,cAAend,KAAKwe,WAIzCqM,MAAO,SAAWvM,EAAUjpB,EAAQg2C,GAEnC,GAAS/sB,GAAYA,EAASC,WAA9B,CAOA,IAAIsD,EACHypB,EAAetrC,KAAKwe,SAASpe,OAC7BmrC,EAAYvrC,KAAKwe,SACjBgtB,EAAYltB,EAASE,SACrBitB,EAASzrC,KAAKmnC,MACduE,EAASptB,EAAS6oB,MAClBwE,EAAO3rC,KAAKonC,cAAe,GAC3B+B,EAAO7qB,EAAS8oB,cAAe,GAC/BwE,EAAU5rC,KAAKknC,OACf2E,EAAUvtB,EAAS4oB,YAESrmC,IAAxBwqC,IAAoCA,EAAsB,QAE/CxqC,IAAXxL,IAEJwsB,GAAe,IAAI9gB,IAAU0W,gBAAiBpiB,IAM/C,IAAM,IAAIiI,EAAI,EAAG+f,EAAKmuB,EAAUprC,OAAQ9C,EAAI+f,EAAI/f,IAAO,CAEtD,IAEIwuC,EAFSN,EAAWluC,GAEA6F,aAERtC,IAAXxL,GAAuBy2C,EAAWz+B,aAAchY,GAErDk2C,EAAU9pC,KAAMqqC,GAMjB,IAAUxuC,EAAI,EAAG+f,EAAKwuB,EAAQzrC,OAAQ9C,EAAI+f,EAAI/f,IAE7CsuC,EAAQnqC,KAAMoqC,EAASvuC,GAAI6F,SAM5B,IAAM7F,EAAI,EAAG+f,EAAKquB,EAAOtrC,OAAQ9C,EAAI+f,EAAI/f,IAAO,CAE/C,IAAwByuC,EAAUp1B,EAAQ8e,EAAtC6T,EAAOoC,EAAQpuC,GAClB0uC,EAAoB1C,EAAKxG,cACzBmJ,EAAmB3C,EAAKvG,cAEzBgJ,EAAW,IAAInJ,GAAO0G,EAAK1lC,EAAI0nC,EAAchC,EAAKzlC,EAAIynC,EAAchC,EAAK5iC,EAAI4kC,IACpE30B,OAAOtT,KAAMimC,EAAK3yB,aAEL9V,IAAjBghB,GAEJkqB,EAASp1B,OAAOrS,aAAcud,GAAezc,YAI9C,IAAM,IAAI0a,EAAI,EAAGypB,EAAKyC,EAAkB5rC,OAAQ0f,EAAIypB,EAAIzpB,IAEvDnJ,EAASq1B,EAAmBlsB,GAAI3c,aAEVtC,IAAjBghB,GAEJlL,EAAOrS,aAAcud,GAAezc,YAIrC2mC,EAASjJ,cAAcrhC,KAAMkV,GAM9B,IAFAo1B,EAAStW,MAAMpyB,KAAMimC,EAAK7T,OAEhB3V,EAAI,EAAGypB,EAAK0C,EAAiB7rC,OAAQ0f,EAAIypB,EAAIzpB,IAEtD2V,EAAQwW,EAAkBnsB,GAC1BisB,EAAShJ,aAAathC,KAAMg0B,EAAMtyB,SAInC4oC,EAASlJ,cAAgByG,EAAKzG,cAAgBwI,EAE9CI,EAAOhqC,KAAMsqC,GAMd,IAAMzuC,EAAI,EAAG+f,EAAK8rB,EAAK/oC,OAAQ9C,EAAI+f,EAAI/f,IAAO,CAE7C,IAAIkf,EAAK2sB,EAAM7rC,GAAK4uC,EAAS,GAE7B,QAAYrrC,IAAP2b,EAAL,CAMA,IAAUsD,EAAI,EAAGypB,EAAK/sB,EAAGpc,OAAQ0f,EAAIypB,EAAIzpB,IAExCosB,EAAOzqC,KAAM+a,EAAIsD,GAAI3c,SAItBwoC,EAAKlqC,KAAMyqC,UA9GX7rC,QAAQC,MAAO,sEAAuEge,IAoHxF6tB,UAAW,SAAWC,GAEZA,GAAQA,EAAKC,QAOjBD,EAAK1yB,kBAAmB0yB,EAAKrxB,eAElC/a,KAAK6qB,MAAOuhB,EAAK9tB,SAAU8tB,EAAK/2C,SAP/BgL,QAAQC,MAAO,kEAAmE8rC,IAiBpFE,cAAe,WAEd,IAGIhpC,EAAGyiC,EAGHzoC,EAAG+f,EAAIisB,EACPI,EAAS5pB,EAAGypB,EAPZgD,EAAc,GACdC,EAAS,GAAIC,EAAU,GAIvBC,EAAYzvC,KAAKwC,IAAK,GADJ,GAKtB,IAAMnC,EAAI,EAAG+f,EAAKrd,KAAKwe,SAASpe,OAAQ9C,EAAI+f,EAAI/f,IAE/CgG,EAAItD,KAAKwe,SAAUlhB,QAGSuD,IAAvB0rC,EAFLxG,EAAM9oC,KAAK2H,MAAOtB,EAAEhO,EAAIo3C,GAAc,IAAMzvC,KAAK2H,MAAOtB,EAAE/N,EAAIm3C,GAAc,IAAMzvC,KAAK2H,MAAOtB,EAAE9N,EAAIk3C,KAInGH,EAAaxG,GAAQzoC,EACrBkvC,EAAO/qC,KAAMzB,KAAKwe,SAAUlhB,IAC5BmvC,EAASnvC,GAAMkvC,EAAOpsC,OAAS,GAK/BqsC,EAASnvC,GAAMmvC,EAASF,EAAaxG,IASvC,IAAI4G,EAAsB,GAE1B,IAAMrvC,EAAI,EAAG+f,EAAKrd,KAAKmnC,MAAM/mC,OAAQ9C,EAAI+f,EAAI/f,IAAO,EAEnDgsC,EAAOtpC,KAAKmnC,MAAO7pC,IAEdsG,EAAI6oC,EAASnD,EAAK1lC,GACvB0lC,EAAKzlC,EAAI4oC,EAASnD,EAAKzlC,GACvBylC,EAAK5iC,EAAI+lC,EAASnD,EAAK5iC,GAEvBgjC,EAAU,CAAEJ,EAAK1lC,EAAG0lC,EAAKzlC,EAAGylC,EAAK5iC,GAIjC,IAAM,IAAIzI,EAAI,EAAGA,EAAI,EAAGA,IAEvB,GAAKyrC,EAASzrC,KAAQyrC,GAAWzrC,EAAI,GAAM,GAAM,CAEhD0uC,EAAoBlrC,KAAMnE,GAC1B,OAQH,IAAMA,EAAIqvC,EAAoBvsC,OAAS,EAAG9C,GAAK,EAAGA,IAAO,CAExD,IAAIsvC,EAAMD,EAAqBrvC,GAI/B,IAFA0C,KAAKmnC,MAAMrlC,OAAQ8qC,EAAK,GAElB9sB,EAAI,EAAGypB,EAAKvpC,KAAKonC,cAAchnC,OAAQ0f,EAAIypB,EAAIzpB,IAEpD9f,KAAKonC,cAAetnB,GAAIhe,OAAQ8qC,EAAK,GAQvC,IAAIC,EAAO7sC,KAAKwe,SAASpe,OAASosC,EAAOpsC,OAEzC,OADAJ,KAAKwe,SAAWguB,EACTK,GAIR1vB,cAAe,SAAWjF,GAEzBlY,KAAKwe,SAAW,GAEhB,IAAM,IAAIlhB,EAAI,EAAG8E,EAAI8V,EAAO9X,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAEjD,IAAI0gB,EAAQ9F,EAAQ5a,GACpB0C,KAAKwe,SAAS/c,KAAM,IAAIX,GAASkd,EAAM1oB,EAAG0oB,EAAMzoB,EAAGyoB,EAAMxoB,GAAK,IAI/D,OAAOwK,MAIR8sC,yBAA0B,WAOzB,IALA,IAAI3F,EAAQnnC,KAAKmnC,MACb/mC,EAAS+mC,EAAM/mC,OAIT9C,EAAI,EAAGA,EAAI8C,EAAQ9C,IAE5B6pC,EAAO7pC,GAAIyvC,IAAMzvC,EAYlB6pC,EAAM6F,KANN,SAA4BppC,EAAGC,GAE9B,OAAOD,EAAEi/B,cAAgBh/B,EAAEg/B,gBAQ5B,IAGIoK,EAASC,EAHTvB,EAAO3rC,KAAKonC,cAAe,GAC3B+B,EAAOnpC,KAAKonC,cAAe,GAO/B,IAHKuE,GAAQA,EAAKvrC,SAAWA,IAAS6sC,EAAU,IAC3C9D,GAAQA,EAAK/oC,SAAWA,IAAS8sC,EAAU,IAEtC5vC,EAAI,EAAGA,EAAI8C,EAAQ9C,IAAO,CAEnC,IAAI+mC,EAAK8C,EAAO7pC,GAAIyvC,IAEfE,GAAUA,EAAQxrC,KAAMkqC,EAAMtH,IAC9B6I,GAAUA,EAAQzrC,KAAM0nC,EAAM9E,IAI/B4I,IAAUjtC,KAAKonC,cAAe,GAAM6F,GACpCC,IAAUltC,KAAKonC,cAAe,GAAM8F,IAI1CjyB,OAAQ,WAEP,IAAIf,EAAO,CACVoB,SAAU,CACTvB,QAAS,IACT3Y,KAAM,WACNma,UAAW,oBAUb,GAJArB,EAAKd,KAAOpZ,KAAKoZ,KACjBc,EAAK9Y,KAAOpB,KAAKoB,KACE,KAAdpB,KAAKqZ,OAAca,EAAKb,KAAOrZ,KAAKqZ,WAEhBxY,IAApBb,KAAKwlC,WAA2B,CAEpC,IAAIA,EAAaxlC,KAAKwlC,WAEtB,IAAM,IAAIO,KAAOP,OAEW3kC,IAAtB2kC,EAAYO,KAAsB7rB,EAAM6rB,GAAQP,EAAYO,IAIlE,OAAO7rB,EAMR,IAFA,IAAIsE,EAAW,GAELlhB,EAAI,EAAGA,EAAI0C,KAAKwe,SAASpe,OAAQ9C,IAAO,CAEjD,IAAI6vC,EAASntC,KAAKwe,SAAUlhB,GAC5BkhB,EAAS/c,KAAM0rC,EAAO73C,EAAG63C,EAAO53C,EAAG43C,EAAO33C,GAI3C,IAAI2xC,EAAQ,GACR8B,EAAU,GACVmE,EAAc,GACdlG,EAAS,GACTmG,EAAa,GACbnE,EAAM,GACNoE,EAAU,GAEd,IAAUhwC,EAAI,EAAGA,EAAI0C,KAAKmnC,MAAM/mC,OAAQ9C,IAAO,CAE9C,IAAIgsC,EAAOtpC,KAAKmnC,MAAO7pC,GAInBiwC,OAAmD1sC,IAAjCb,KAAKonC,cAAe,GAAK9pC,GAC3CkwC,EAAgBlE,EAAK3yB,OAAOvW,SAAW,EACvCqtC,EAAsBnE,EAAKxG,cAAc1iC,OAAS,EAClDstC,EAAgC,IAAjBpE,EAAK7T,MAAMliB,GAA4B,IAAjB+1B,EAAK7T,MAAMje,GAA4B,IAAjB8xB,EAAK7T,MAAM5xB,EACtE8pC,EAAqBrE,EAAKvG,aAAa3iC,OAAS,EAEhDwtC,EAAW,EAef,GAbAA,EAAWC,EAAQD,EAAU,EAAG,GAChCA,EAAWC,EAAQD,EAAU,GAXX,GAYlBA,EAAWC,EAAQD,EAAU,GAXb,GAYhBA,EAAWC,EAAQD,EAAU,EAAGL,GAChCK,EAAWC,EAAQD,EAAU,EAAGJ,GAChCI,EAAWC,EAAQD,EAAU,EAAGH,GAChCG,EAAWC,EAAQD,EAAU,EAAGF,GAChCE,EAAWC,EAAQD,EAAU,EAAGD,GAEhCxG,EAAM1lC,KAAMmsC,GACZzG,EAAM1lC,KAAM6nC,EAAK1lC,EAAG0lC,EAAKzlC,EAAGylC,EAAK5iC,GACjCygC,EAAM1lC,KAAM6nC,EAAKzG,eAEZ0K,EAAkB,CAEtB,IAAInG,EAAgBpnC,KAAKonC,cAAe,GAAK9pC,GAE7C6pC,EAAM1lC,KACLqsC,EAAY1G,EAAe,IAC3B0G,EAAY1G,EAAe,IAC3B0G,EAAY1G,EAAe,KAW7B,GANKoG,GAEJrG,EAAM1lC,KAAMssC,EAAgBzE,EAAK3yB,SAI7B82B,EAAsB,CAE1B,IAAI3K,EAAgBwG,EAAKxG,cAEzBqE,EAAM1lC,KACLssC,EAAgBjL,EAAe,IAC/BiL,EAAgBjL,EAAe,IAC/BiL,EAAgBjL,EAAe,KAWjC,GANK4K,GAEJvG,EAAM1lC,KAAMusC,EAAe1E,EAAK7T,QAI5BkY,EAAqB,CAEzB,IAAI5K,EAAeuG,EAAKvG,aAExBoE,EAAM1lC,KACLusC,EAAejL,EAAc,IAC7BiL,EAAejL,EAAc,IAC7BiL,EAAejL,EAAc,MAOhC,SAAS8K,EAAQ9vC,EAAOsR,EAAUk3B,GAEjC,OAAOA,EAAUxoC,EAAU,GAAKsR,EAAatR,IAAc,GAAKsR,GAIjE,SAAS0+B,EAAgBp3B,GAExB,IAAIs3B,EAAOt3B,EAAOrhB,EAAEiI,WAAaoZ,EAAOphB,EAAEgI,r//DAAaoZ,EAAOnhB,EAAE+H,WAEhE,YAA6BsD,IAAxBusC,EAAaa,GAEVb,EAAaa,IAIrBb,EAAaa,GAAShF,EAAQ7oC,OAAS,EACvC6oC,EAAQxnC,KAAMkV,EAAOrhB,EAAGqhB,EAAOphB,EAAGohB,EAAOnhB,GAElC43C,EAAaa,IAIrB,SAASD,EAAevY,GAEvB,IAAIwY,EAAOxY,EAAMliB,EAAEhW,WAAak4B,EAAMje,EAAEja,WAAak4B,EAAM5xB,EAAEtG,WAE7D,YAA4BsD,IAAvBwsC,EAAYY,GAETZ,EAAYY,IAIpBZ,EAAYY,GAAS/G,EAAO9mC,OAC5B8mC,EAAOzlC,KAAMg0B,EAAMU,UAEZkX,EAAYY,IAIpB,SAASH,EAAYtxB,GAEpB,IAAIyxB,EAAOzxB,EAAGlnB,EAAEiI,WAAaif,EAAGjnB,EAAEgI,WAElC,YAAyBsD,IAApBysC,EAASW,GAENX,EAASW,IAIjBX,EAASW,GAAS/E,EAAI9oC,OAAS,EAC/B8oC,EAAIznC,KAAM+a,EAAGlnB,EAAGknB,EAAGjnB,GAEZ+3C,EAASW,IAYjB,OARA/zB,EAAKA,KAAO,GAEZA,EAAKA,KAAKsE,SAAWA,EACrBtE,EAAKA,KAAK+uB,QAAUA,EACf/B,EAAO9mC,OAAS,IAAI8Z,EAAKA,KAAKgtB,OAASA,GACvCgC,EAAI9oC,OAAS,IAAI8Z,EAAKA,KAAKgvB,IAAM,CAAEA,IACxChvB,EAAKA,KAAKitB,MAAQA,EAEXjtB,GAIR/W,MAAO,WA0BN,OAAO,IAAI8jC,IAAW5jC,KAAMrD,OAI7BqD,KAAM,SAAW2X,GAEhB,IAAI1d,EAAG+f,EAAIyC,EAAGypB,EAAI2E,EAAGC,EAIrBnuC,KAAKwe,SAAW,GAChBxe,KAAKknC,OAAS,GACdlnC,KAAKmnC,MAAQ,GACbnnC,KAAKonC,cAAgB,CAAC,IACtBpnC,KAAKqnC,aAAe,GACpBrnC,KAAKsnC,aAAe,GACpBtnC,KAAKunC,YAAc,GACnBvnC,KAAKwnC,YAAc,GACnBxnC,KAAKynC,cAAgB,GACrBznC,KAAK0nC,YAAc,KACnB1nC,KAAKkjB,eAAiB,KAItBljB,KAAKqZ,KAAO2B,EAAO3B,KAInB,IAAImF,EAAWxD,EAAOwD,SAEtB,IAAMlhB,EAAI,EAAG+f,EAAKmB,EAASpe,OAAQ9C,EAAI+f,EAAI/f,IAE1C0C,KAAKwe,SAAS/c,KAAM+c,EAAUlhB,GAAI6F,SAMnC,IAAI+jC,EAASlsB,EAAOksB,OAEpB,IAAM5pC,EAAI,EAAG+f,EAAK6pB,EAAO9mC,OAAQ9C,EAAI+f,EAAI/f,IAExC0C,KAAKknC,OAAOzlC,KAAMylC,EAAQ5pC,GAAI6F,SAM/B,IAAIgkC,EAAQnsB,EAAOmsB,MAEnB,IAAM7pC,EAAI,EAAG+f,EAAK8pB,EAAM/mC,OAAQ9C,EAAI+f,EAAI/f,IAEvC0C,KAAKmnC,MAAM1lC,KAAM0lC,EAAO7pC,GAAI6F,SAM7B,IAAM7F,EAAI,EAAG+f,EAAKrC,EAAOosB,cAAchnC,OAAQ9C,EAAI+f,EAAI/f,IAAO,CAE7D,IAAI8pC,EAAgBpsB,EAAOosB,cAAe9pC,GAQ1C,SANiCuD,IAA5Bb,KAAKonC,cAAe9pC,KAExB0C,KAAKonC,cAAe9pC,GAAM,IAIrBwiB,EAAI,EAAGypB,EAAKnC,EAAchnC,OAAQ0f,EAAIypB,EAAIzpB,IAAO,CAEtD,IAAIopB,EAAM9B,EAAetnB,GAAKsuB,EAAU,GAExC,IAAMF,EAAI,EAAGC,EAAKjF,EAAI9oC,OAAQ8tC,EAAIC,EAAID,IAAO,CAE5C,IAAI1xB,EAAK0sB,EAAKgF,GAEdE,EAAQ3sC,KAAM+a,EAAGrZ,SAIlBnD,KAAKonC,cAAe9pC,GAAImE,KAAM2sC,IAQhC,IAAI/G,EAAersB,EAAOqsB,aAE1B,IAAM/pC,EAAI,EAAG+f,EAAKgqB,EAAajnC,OAAQ9C,EAAI+f,EAAI/f,IAAO,CAErD,IAAI+wC,EAAc,GAKlB,GAJAA,EAAYh1B,KAAOguB,EAAc/pC,GAAI+b,UAIDxY,IAA/BwmC,EAAc/pC,GAAIkhB,SAItB,IAFA6vB,EAAY7vB,SAAW,GAEjBsB,EAAI,EAAGypB,EAAKlC,EAAc/pC,GAAIkhB,SAASpe,OAAQ0f,EAAIypB,EAAIzpB,IAE5DuuB,EAAY7vB,SAAS/c,KAAM4lC,EAAc/pC,GAAIkhB,SAAUsB,GAAI3c,SAQ7D,QAAmCtC,IAA9BwmC,EAAc/pC,GAAI2rC,QAItB,IAFAoF,EAAYpF,QAAU,GAEhBnpB,EAAI,EAAGypB,EAAKlC,EAAc/pC,GAAI2rC,QAAQ7oC,OAAQ0f,EAAIypB,EAAIzpB,IAE3DuuB,EAAYpF,QAAQxnC,KAAM4lC,EAAc/pC,GAAI2rC,QAASnpB,GAAI3c,SAM3DnD,KAAKqnC,aAAa5lC,KAAM4sC,GAMzB,IAAI/G,EAAetsB,EAAOssB,aAE1B,IAAMhqC,EAAI,EAAG+f,EAAKiqB,EAAalnC,OAAQ9C,EAAI+f,EAAI/f,IAAO,CAErD,IAAIgxC,EAAc,GAIlB,QAAyCztC,IAApCymC,EAAchqC,GAAIwlC,cAItB,IAFAwL,EAAYxL,cAAgB,GAEtBhjB,EAAI,EAAGypB,EAAKjC,EAAchqC,GAAIwlC,cAAc1iC,OAAQ0f,EAAIypB,EAAIzpB,IAAO,CAExE,IAAIyuB,EAAkBjH,EAAchqC,GAAIwlC,cAAehjB,GACnD0uB,EAAmB,GAEvBA,EAAiB5qC,EAAI2qC,EAAgB3qC,EAAET,QACvCqrC,EAAiB3qC,EAAI0qC,EAAgB1qC,EAAEV,QACvCqrC,EAAiB9nC,EAAI6nC,EAAgB7nC,EAAEvD,QAEvCmrC,EAAYxL,cAAcrhC,KAAM+sC,GAQlC,QAAuC3tC,IAAlCymC,EAAchqC,GAAI2tC,YAItB,IAFAqD,EAAYrD,YAAc,GAEpBnrB,EAAI,EAAGypB,EAAKjC,EAAchqC,GAAI2tC,YAAY7qC,OAAQ0f,EAAIypB,EAAIzpB,IAE/DwuB,EAAYrD,YAAYxpC,KAAM6lC,EAAchqC,GAAI2tC,YAAanrB,GAAI3c,SAMnEnD,KAAKsnC,aAAa7lC,KAAM6sC,GAMzB,IAAI/G,EAAcvsB,EAAOusB,YAEzB,IAAMjqC,EAAI,EAAG+f,EAAKkqB,EAAYnnC,OAAQ9C,EAAI+f,EAAI/f,IAE7C0C,KAAKunC,YAAY9lC,KAAM8lC,EAAajqC,GAAI6F,SAMzC,IAAIqkC,EAAcxsB,EAAOwsB,YAEzB,IAAMlqC,EAAI,EAAG+f,EAAKmqB,EAAYpnC,OAAQ9C,EAAI+f,EAAI/f,IAE7C0C,KAAKwnC,YAAY/lC,KAAM+lC,EAAalqC,GAAI6F,SAMzC,IAAIskC,EAAgBzsB,EAAOysB,cAE3B,IAAMnqC,EAAI,EAAG+f,EAAKoqB,EAAcrnC,OAAQ9C,EAAI+f,EAAI/f,IAE/C0C,KAAKynC,cAAchmC,KAAMgmC,EAAenqC,IAMzC,IAAIoqC,EAAc1sB,EAAO0sB,YAEJ,OAAhBA,IAEJ1nC,KAAK0nC,YAAcA,EAAYvkC,SAMhC,IAAI+f,EAAiBlI,EAAOkI,eAkB5B,OAhBwB,OAAnBA,IAEJljB,KAAKkjB,eAAiBA,EAAe/f,SAMtCnD,KAAK2nC,mBAAqB3sB,EAAO2sB,mBACjC3nC,KAAK4nC,mBAAqB5sB,EAAO4sB,mBACjC5nC,KAAK6nC,cAAgB7sB,EAAO6sB,cAC5B7nC,KAAK8nC,kBAAoB9sB,EAAO8sB,kBAChC9nC,KAAK+nC,iBAAmB/sB,EAAO+sB,iBAC/B/nC,KAAKgoC,wBAA0BhtB,EAAOgtB,wBACtChoC,KAAKioC,iBAAmBjtB,EAAOitB,iBAExBjoC,MAIRsc,QAAS,WAERtc,KAAK+B,cAAe,CAAEX,KAAM,eC13C9BJ,OAAOmY,eAAgB+uB,GAAgBhnC,UAAW,cAAe,CAEhEuB,IAAK,SAAW1E,IAEA,IAAVA,GAAiBiC,KAAK+Z,aAM7B/Y,OAAOC,OAAQinC,GAAgBhnC,UAAW,CAEzCutC,mBAAmB,EAEnBnQ,iBAAkB,aAElBoQ,SAAU,SAAWxsC,GAEpB,GAAKopB,MAAMC,QAASrpB,GAEnB,MAAM,IAAImmC,UAAW,yDAOtB,OAHAroC,KAAKmN,WAAkBtM,IAAVqB,EAAsBA,EAAM9B,OAASJ,KAAKmoC,SAAW,EAClEnoC,KAAKkC,MAAQA,EAENlC,MAIR2uC,WAAY,SAAW5wC,GAItB,OAFAiC,KAAKg+B,QAAUjgC,EAERiC,MAIRqD,KAAM,SAAW2X,GAUhB,OARAhb,KAAKqZ,KAAO2B,EAAO3B,KACnBrZ,KAAKkC,MAAQ,IAAI8Y,EAAO9Y,MAAMkB,YAAa4X,EAAO9Y,OAClDlC,KAAKmoC,SAAWntB,EAAOmtB,SACvBnoC,KAAKmN,MAAQ6N,EAAO7N,MACpBnN,KAAKooC,WAAaptB,EAAOotB,WAEzBpoC,KAAKg+B,QAAUhjB,EAAOgjB,QAEfh+B,MAIR4uC,OAAQ,SAAWC,EAAQxoC,EAAWyoC,GAErCD,GAAU7uC,KAAKmoC,SACf2G,GAAUzoC,EAAU8hC,SAEpB,IAAM,IAAI7qC,EAAI,EAAG8E,EAAIpC,KAAKmoC,SAAU7qC,EAAI8E,EAAG9E,IAE1C0C,KAAKkC,MAAO2sC,EAASvxC,GAAM+I,EAAUnE,MAAO4sC,EAASxxC,GAItD,OAAO0C,MAIR+uC,UAAW,SAAW7sC,GAIrB,OAFAlC,KAAKkC,MAAMO,IAAKP,GAETlC,MAIRgvC,gBAAiB,SAAW9H,GAI3B,IAFA,IAAIhlC,EAAQlC,KAAKkC,MAAOgE,EAAS,EAEvB5I,EAAI,EAAG8E,EAAI8kC,EAAO9mC,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAEjD,IAAIm4B,EAAQyR,EAAQ5pC,QAELuD,IAAV40B,IAEJp1B,QAAQmD,KAAM,8DAA+DlG,GAC7Em4B,EAAQ,IAAIZ,IAIb3yB,EAAOgE,KAAcuvB,EAAMliB,EAC3BrR,EAAOgE,KAAcuvB,EAAMje,EAC3BtV,EAAOgE,KAAcuvB,EAAM5xB,EAI5B,OAAO7D,MAIRivC,kBAAmB,SAAWC,GAI7B,IAFA,IAAIhtC,EAAQlC,KAAKkC,MAAOgE,EAAS,EAEvB5I,EAAI,EAAG8E,EAAI8sC,EAAQ9uC,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAElD,IAAIlI,EAAS85C,EAAS5xC,QAENuD,IAAXzL,IAEJiL,QAAQmD,KAAM,iEAAkElG,GAChFlI,EAAS,IAAI2K,IAIdmC,EAAOgE,KAAc9Q,EAAOE,EAC5B4M,EAAOgE,KAAc9Q,EAAOG,EAI7B,OAAOyK,MAIRmvC,kBAAmB,SAAWD,GAI7B,IAFA,IAAIhtC,EAAQlC,KAAKkC,MAAOgE,EAAS,EAEvB5I,EAAI,EAAG8E,EAAI8sC,EAAQ9uC,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAElD,IAAIlI,EAAS85C,EAAS5xC,QAENuD,IAAXzL,IAEJiL,QAAQmD,KAAM,iEAAkElG,GAChFlI,EAAS,IAAI0L,IAIdoB,EAAOgE,KAAc9Q,EAAOE,EAC5B4M,EAAOgE,KAAc9Q,EAAOG,EAC5B2M,EAAOgE,KAAc9Q,EAAOI,EAI7B,OAAOwK,MAIRovC,kBAAmB,SAAWF,GAI7B,IAFA,IAAIhtC,EAAQlC,KAAKkC,MAAOgE,EAAS,EAEvB5I,EAAI,EAAG8E,EAAI8sC,EAAQ9uC,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAElD,IAAIlI,EAAS85C,EAAS5xC,QAENuD,IAAXzL,IAEJiL,QAAQmD,KAAM,iEAAkElG,GAChFlI,EAAS,IAAIgoC,IAIdl7B,EAAOgE,KAAc9Q,EAAOE,EAC5B4M,EAAOgE,KAAc9Q,EAAOG,EAC5B2M,EAAOgE,KAAc9Q,EAAOI,EAC5B0M,EAAOgE,KAAc9Q,EAAOoL,EAI7B,OAAOR,MAIRyC,IAAK,SAAW1E,EAAOmI,GAMtB,YAJgBrF,IAAXqF,IAAuBA,EAAS,GAErClG,KAAKkC,MAAMO,IAAK1E,EAAOmI,GAEhBlG,MAIRsG,KAAM,SAAWzE,GAEhB,OAAO7B,KAAKkC,MAAOL,EAAQ7B,KAAKmoC,WAIjCrlC,KAAM,SAAWjB,EAAOvM,GAIvB,OAFA0K,KAAKkC,MAAOL,EAAQ7B,KAAKmoC,UAAa7yC,EAE/B0K,MAIRuG,KAAM,SAAW1E,GAEhB,OAAO7B,KAAKkC,MAAOL,EAAQ7B,KAAKmoC,SAAW,IAI5CplC,KAAM,SAAWlB,EAAOtM,GAIvB,OAFAyK,KAAKkC,MAAOL,EAAQ7B,KAAKmoC,SAAW,GAAM5yC,EAEnCyK,MAIRoN,KAAM,SAAWvL,GAEhB,OAAO7B,KAAKkC,MAAOL,EAAQ7B,KAAKmoC,SAAW,IAI5CtzB,KAAM,SAAWhT,EAAOrM,GAIvB,OAFAwK,KAAKkC,MAAOL,EAAQ7B,KAAKmoC,SAAW,GAAM3yC,EAEnCwK,MAIRugC,KAAM,SAAW1+B,GAEhB,OAAO7B,KAAKkC,MAAOL,EAAQ7B,KAAKmoC,SAAW,IAI5C/H,KAAM,SAAWv+B,EAAOrB,GAIvB,OAFAR,KAAKkC,MAAOL,EAAQ7B,KAAKmoC,SAAW,GAAM3nC,EAEnCR,MAIRqvC,MAAO,SAAWxtC,EAAOvM,EAAGC,GAO3B,OALAsM,GAAS7B,KAAKmoC,SAEdnoC,KAAKkC,MAAOL,EAAQ,GAAMvM,EAC1B0K,KAAKkC,MAAOL,EAAQ,GAAMtM,EAEnByK,MAIRsN,OAAQ,SAAWzL,EAAOvM,EAAGC,EAAGC,GAQ/B,OANAqM,GAAS7B,KAAKmoC,SAEdnoC,KAAKkC,MAAOL,EAAQ,GAAMvM,EAC1B0K,KAAKkC,MAAOL,EAAQ,GAAMtM,EAC1ByK,KAAKkC,MAAOL,EAAQ,GAAMrM,EAEnBwK,MAIRsvC,QAAS,SAAWztC,EAAOvM,EAAGC,EAAGC,EAAGgL,GASnC,OAPAqB,GAAS7B,KAAKmoC,SAEdnoC,KAAKkC,MAAOL,EAAQ,GAAMvM,EAC1B0K,KAAKkC,MAAOL,EAAQ,GAAMtM,EAC1ByK,KAAKkC,MAAOL,EAAQ,GAAMrM,EAC1BwK,KAAKkC,MAAOL,EAAQ,GAAMrB,EAEnBR,MAIRuvC,SAAU,SAAW56B,GAIpB,OAFA3U,KAAKs+B,iBAAmB3pB,EAEjB3U,MAIRmD,MAAO,WAEN,OAAO,IAAInD,KAAKoD,YAAapD,KAAKkC,MAAOlC,KAAKmoC,UAAW9kC,KAAMrD,SAcjEsoC,GAAoBpnC,UAAYF,OAAO6Z,OAAQqtB,GAAgBhnC,WAC/DonC,GAAoBpnC,UAAUkC,YAAcklC,GAS5CC,GAAqBrnC,UAAYF,OAAO6Z,OAAQqtB,GAAgBhnC,WAChEqnC,GAAqBrnC,UAAUkC,YAAcmlC,GAS7CC,GAA4BtnC,UAAYF,OAAO6Z,OAAQqtB,GAAgBhnC,WACvEsnC,GAA4BtnC,UAAUkC,YAAcolC,GASpDE,GAAqBxnC,UAAYF,OAAO6Z,OAAQqtB,GAAgBhnC,WAChEwnC,GAAqBxnC,UAAUkC,YAAcslC,GAS7CC,GAAsBznC,UAAYF,OAAO6Z,OAAQqtB,GAAgBhnC,WACjEynC,GAAsBznC,UAAUkC,YAAculC,GAS9CC,GAAqB1nC,UAAYF,OAAO6Z,OAAQqtB,GAAgBhnC,WAChE0nC,GAAqB1nC,UAAUkC,YAAcwlC,GAS7CC,GAAsB3nC,UAAYF,OAAO6Z,OAAQqtB,GAAgBhnC,WACjE2nC,GAAsB3nC,UAAUkC,YAAcylC,GAS9CC,GAAuB5nC,UAAYF,OAAO6Z,OAAQqtB,GAAgBhnC,WAClE4nC,GAAuB5nC,UAAUkC,YAAc0lC,GAS/CC,GAAuB7nC,UAAYF,OAAO6Z,OAAQqtB,GAAgBhnC,WAClE6nC,GAAuB7nC,UAAUkC,YAAc2lC,GC1X/C/nC,OAAOC,OAAQ+nC,GAAe9nC,UAAW,CAExCsuC,cAAe,SAAWlxB,GAQzB,IANA,IAAI2rB,EACAb,EAAS,GACTvG,OAAgBhiC,EAEhBsmC,EAAQ7oB,EAAS6oB,MAEX7pC,EAAI,EAAGA,EAAI6pC,EAAM/mC,OAAQ9C,IAAO,CAEzC,IAAIgsC,EAAOnC,EAAO7pC,GAIbgsC,EAAKzG,gBAAkBA,IAE3BA,EAAgByG,EAAKzG,mBAENhiC,IAAVopC,IAEJA,EAAM98B,MAAc,EAAJ7P,EAAU2sC,EAAM5oB,MAChC+nB,EAAO3nC,KAAMwoC,IAIdA,EAAQ,CACP5oB,MAAW,EAAJ/jB,EACPulC,cAAeA,SAOHhiC,IAAVopC,IAEJA,EAAM98B,MAAc,EAAJ7P,EAAU2sC,EAAM5oB,MAChC+nB,EAAO3nC,KAAMwoC,IAIdjqC,KAAKopC,OAASA,GAIfqG,aAAc,SAAWnxB,GAExB,IAYIoxB,EAZAvI,EAAQ7oB,EAAS6oB,MACjB3oB,EAAWF,EAASE,SACpB4oB,EAAgB9oB,EAAS8oB,cAEzBmG,EAAkBnG,EAAe,IAAOA,EAAe,GAAIhnC,OAAS,EACpEuvC,EAAmBvI,EAAe,IAAOA,EAAe,GAAIhnC,OAAS,EAIrEinC,EAAe/oB,EAAS+oB,aACxBuI,EAAqBvI,EAAajnC,OAItC,GAAKwvC,EAAqB,EAAI,CAE7BF,EAAuB,GAEvB,IAAM,IAAIpyC,EAAI,EAAGA,EAAIsyC,EAAoBtyC,IAExCoyC,EAAsBpyC,GAAM,GAI7B0C,KAAKqnC,aAAah4B,SAAWqgC,EAI9B,IAGIG,EAHAvI,EAAehpB,EAASgpB,aACxBwI,EAAqBxI,EAAalnC,OAItC,GAAK0vC,EAAqB,EAAI,CAI7B,IAFAD,EAAqB,GAEXvyC,EAAI,EAAGA,EAAIwyC,EAAoBxyC,IAExCuyC,EAAoBvyC,GAAM,GAI3B0C,KAAKqnC,aAAa1wB,OAASk5B,EAM5B,IAAIrI,EAAclpB,EAASkpB,YACvBD,EAAcjpB,EAASipB,YAEvBwI,EAAiBvI,EAAYpnC,SAAWoe,EAASpe,OACjD4vC,EAAiBzI,EAAYnnC,SAAWoe,EAASpe,OAIrD,IAAU9C,EAAI,EAAGA,EAAI6pC,EAAM/mC,OAAQ9C,IAAO,CAEzC,IAAIgsC,EAAOnC,EAAO7pC,GAElB0C,KAAKwe,SAAS/c,KAAM+c,EAAU8qB,EAAK1lC,GAAK4a,EAAU8qB,EAAKzlC,GAAK2a,EAAU8qB,EAAK5iC,IAE3E,IAAIo8B,EAAgBwG,EAAKxG,cAEzB,GAA8B,IAAzBA,EAAc1iC,OAElBJ,KAAKipC,QAAQxnC,KAAMqhC,EAAe,GAAKA,EAAe,GAAKA,EAAe,QAEpE,CAEN,IAAInsB,EAAS2yB,EAAK3yB,OAElB3W,KAAKipC,QAAQxnC,KAAMkV,EAAQA,EAAQA,GAIpC,IAkCKs5B,EAlCDlN,EAAeuG,EAAKvG,aAExB,GAA6B,IAAxBA,EAAa3iC,OAEjBJ,KAAKknC,OAAOzlC,KAAMshC,EAAc,GAAKA,EAAc,GAAKA,EAAc,QAEhE,CAEN,IAAItN,EAAQ6T,EAAK7T,MAEjBz1B,KAAKknC,OAAOzlC,KAAMg0B,EAAOA,EAAOA,IAIR,IAApB8X,SAIe1sC,KAFfovC,EAAY7I,EAAe,GAAK9pC,IAInC0C,KAAKkpC,IAAIznC,KAAMwuC,EAAW,GAAKA,EAAW,GAAKA,EAAW,KAI1D5vC,QAAQmD,KAAM,2DAA4DlG,GAE1E0C,KAAKkpC,IAAIznC,KAAM,IAAI1B,GAAW,IAAIA,GAAW,IAAIA,OAMzB,IAArB4vC,SAIe9uC,KAFfovC,EAAY7I,EAAe,GAAK9pC,IAInC0C,KAAKmpC,KAAK1nC,KAAMwuC,EAAW,GAAKA,EAAW,GAAKA,EAAW,KAI3D5vC,QAAQmD,KAAM,4DAA6DlG,GAE3E0C,KAAKmpC,KAAK1nC,KAAM,IAAI1B,GAAW,IAAIA,GAAW,IAAIA,MAQpD,IAAM,IAAI+f,EAAI,EAAGA,EAAI8vB,EAAoB9vB,IAAO,CAE/C,IAAIuuB,EAAchH,EAAcvnB,GAAItB,SAEpCkxB,EAAsB5vB,GAAIre,KAAM4sC,EAAa/E,EAAK1lC,GAAKyqC,EAAa/E,EAAKzlC,GAAKwqC,EAAa/E,EAAK5iC,IAIjG,IAAUoZ,EAAI,EAAGA,EAAIgwB,EAAoBhwB,IAAO,CAE/C,IAAIwuB,EAAchH,EAAcxnB,GAAIgjB,cAAexlC,GAEnDuyC,EAAoB/vB,GAAIre,KAAM6sC,EAAY1qC,EAAG0qC,EAAYzqC,EAAGyqC,EAAY5nC,GAMpEqpC,GAEJ/vC,KAAKwnC,YAAY/lC,KAAM+lC,EAAa8B,EAAK1lC,GAAK4jC,EAAa8B,EAAKzlC,GAAK2jC,EAAa8B,EAAK5iC,IAInFspC,GAEJhwC,KAAKunC,YAAY9lC,KAAM8lC,EAAa+B,EAAK1lC,GAAK2jC,EAAa+B,EAAKzlC,GAAK0jC,EAAa+B,EAAK5iC,IAczF,OARA1G,KAAKwvC,cAAelxB,GAEpBte,KAAK4nC,mBAAqBtpB,EAASspB,mBACnC5nC,KAAK8nC,kBAAoBxpB,EAASwpB,kBAClC9nC,KAAK+nC,iBAAmBzpB,EAASypB,iBACjC/nC,KAAK6nC,cAAgBvpB,EAASupB,cAC9B7nC,KAAKioC,iBAAmB3pB,EAAS2pB,iBAE1BjoC,QE7OT,IAAIkwC,GAAmB,EAEvB,SAASC,KAERnvC,OAAOmY,eAAgBnZ,KAAM,KAAM,CAAEjC,MAAOmyC,IAAoB,IAEhElwC,KAAKoZ,KAAOrc,GAAMK,eAElB4C,KAAKqZ,KAAO,GACZrZ,KAAKoB,KAAO,iBAEZpB,KAAK6B,MAAQ,KACb7B,KAAK0e,WAAa,GAElB1e,KAAKowC,gBAAkB,GAEvBpwC,KAAKopC,OAAS,GAEdppC,KAAK0nC,YAAc,KACnB1nC,KAAKkjB,eAAiB,KAEtBljB,KAAKqwC,UAAY,CAAEhvB,MAAO,EAAGlU,MAAOmjC,EAAAA,GC1BrC,SAASC,GAAahuC,EAAOG,EAAQg6B,EAAO8T,EAAeC,EAAgBC,GAE1EzJ,GAAS5kC,KAAMrC,MAEfA,KAAKoB,KAAO,cAEZpB,KAAKwlC,WAAa,CACjBjjC,MAAOA,EACPG,OAAQA,EACRg6B,MAAOA,EACP8T,cAAeA,EACfC,eAAgBA,EAChBC,cAAeA,GAGhB1wC,KAAKypC,mBAAoB,IAAIkH,GAAmBpuC,EAAOG,EAAQg6B,EAAO8T,EAAeC,EAAgBC,IACrG1wC,KAAKssC,gBASN,SAASqE,GAAmBpuC,EAAOG,EAAQg6B,EAAO8T,EAAeC,EAAgBC,GAEhFP,GAAe9tC,KAAMrC,MAErBA,KAAKoB,KAAO,oBAEZpB,KAAKwlC,WAAa,CACjBjjC,MAAOA,EACPG,OAAQA,EACRg6B,MAAOA,EACP8T,cAAeA,EACfC,eAAgBA,EAChBC,cAAeA,GAGhB,IAAIvyB,EAAQne,KAEZuC,EAAQA,GAAS,EACjBG,EAASA,GAAU,EACnBg6B,EAAQA,GAAS,EAIjB8T,EAAgBvzC,KAAK8B,MAAOyxC,IAAmB,EAC/CC,EAAiBxzC,KAAK8B,MAAO0xC,IAAoB,EACjDC,EAAgBzzC,KAAK8B,MAAO2xC,IAAmB,EAI/C,IAAIhH,EAAU,GACVlrB,EAAW,GACXyqB,EAAU,GACVC,EAAM,GAIN0H,EAAmB,EACnBC,EAAa,EAkBjB,SAASC,EAAY9lB,EAAG1nB,EAAG9C,EAAGuwC,EAAMC,EAAMzuC,EAAOG,EAAQg6B,EAAOuU,EAAOC,EAAOrO,GAE7E,IAaIvtB,EAAIC,EAbJ47B,EAAe5uC,EAAQ0uC,EACvBG,EAAgB1uC,EAASwuC,EAEzBG,EAAY9uC,EAAQ,EACpB+uC,EAAa5uC,EAAS,EACtB6uC,EAAY7U,EAAQ,EAEpB8U,EAASP,EAAQ,EACjBQ,EAASP,EAAQ,EAEjBQ,EAAgB,EAChBC,EAAa,EAIbv8C,EAAS,IAAI0L,GAIjB,IAAMyU,EAAK,EAAGA,EAAKk8B,EAAQl8B,IAAQ,CAElC,IAAIhgB,EAAIggB,EAAK67B,EAAgBE,EAE7B,IAAMh8B,EAAK,EAAGA,EAAKk8B,EAAQl8B,IAAQ,CAElC,IAAIhgB,EAAIggB,EAAK67B,EAAeE,EAI5Bj8C,EAAQ41B,GAAM11B,EAAIy7C,EAClB37C,EAAQkO,GAAM/N,EAAIy7C,EAClB57C,EAAQoL,GAAM+wC,EAId/yB,EAAS/c,KAAMrM,EAAOE,EAAGF,EAAOG,EAAGH,EAAOI,GAI1CJ,EAAQ41B,GAAM,EACd51B,EAAQkO,GAAM,EACdlO,EAAQoL,GAAMk8B,EAAQ,EAAI,GAAM,EAIhCuM,EAAQxnC,KAAMrM,EAAOE,EAAGF,EAAOG,EAAGH,EAAOI,GAIzC0zC,EAAIznC,KAAM6T,EAAK27B,GACf/H,EAAIznC,KAAM,EAAM8T,EAAK27B,GAIrBQ,GAAiB,GAYnB,IAAMn8B,EAAK,EAAGA,EAAK27B,EAAO37B,IAEzB,IAAMD,EAAK,EAAGA,EAAK27B,EAAO37B,IAAQ,CAEjC,IAAI1R,EAAIgtC,EAAmBt7B,EAAKk8B,EAASj8B,EACrC1R,EAAI+sC,EAAmBt7B,EAAKk8B,GAAWj8B,EAAK,GAC5C7O,EAAIkqC,GAAqBt7B,EAAK,GAAMk8B,GAAWj8B,EAAK,GACpDxM,EAAI6nC,GAAqBt7B,EAAK,GAAMk8B,EAASj8B,EAIjDm0B,EAAQjoC,KAAMmC,EAAGC,EAAGkF,GACpB2gC,EAAQjoC,KAAMoC,EAAG6C,EAAGqC,GAIpB4oC,GAAc,EAQhBxzB,EAAMyzB,SAAUf,EAAYc,EAAY9O,GAIxCgO,GAAcc,EAIdf,GAAoBc,EAlHrBZ,EAAY,IAAK,IAAK,KAAO,GAAK,EAAGpU,EAAOh6B,EAAQH,EAAOmuC,EAAeD,EAAgB,GAC1FK,EAAY,IAAK,IAAK,IAAK,GAAK,EAAGpU,EAAOh6B,GAAUH,EAAOmuC,EAAeD,EAAgB,GAC1FK,EAAY,IAAK,IAAK,IAAK,EAAG,EAAGvuC,EAAOm6B,EAAOh6B,EAAQ8tC,EAAeE,EAAe,GACrFI,EAAY,IAAK,IAAK,IAAK,GAAK,EAAGvuC,EAAOm6B,GAASh6B,EAAQ8tC,EAAeE,EAAe,GACzFI,EAAY,IAAK,IAAK,IAAK,GAAK,EAAGvuC,EAAOG,EAAQg6B,EAAO8T,EAAeC,EAAgB,GACxFK,EAAY,IAAK,IAAK,KAAO,GAAK,EAAGvuC,EAAOG,GAAUg6B,EAAO8T,EAAeC,EAAgB,GAI5FzwC,KAAK6xC,SAAUnI,GACf1pC,KAAK8xC,aAAc,WAAY,IAAIhJ,GAAwBtqB,EAAU,IACrExe,KAAK8xC,aAAc,SAAU,IAAIhJ,GAAwBG,EAAS,IAClEjpC,KAAK8xC,aAAc,KAAM,IAAIhJ,GAAwBI,EAAK,IC/E3D,SAAS6I,GAAexvC,EAAOG,EAAQ8tC,EAAeC,GAErDxJ,GAAS5kC,KAAMrC,MAEfA,KAAKoB,KAAO,gBAEZpB,KAAKwlC,WAAa,CACjBjjC,MAAOA,EACPG,OAAQA,EACR8tC,cAAeA,EACfC,eAAgBA,GAGjBzwC,KAAKypC,mBAAoB,IAAIuI,GAAqBzvC,EAAOG,EAAQ8tC,EAAeC,IAChFzwC,KAAKssC,gBASN,SAAS0F,GAAqBzvC,EAAOG,EAAQ8tC,EAAeC,GAE3DN,GAAe9tC,KAAMrC,MAErBA,KAAKoB,KAAO,sBAEZpB,KAAKwlC,WAAa,CACjBjjC,MAAOA,EACPG,OAAQA,EACR8tC,cAAeA,EACfC,eAAgBA,GAMjB,IAYIn7B,EAAIC,EAZJ08B,GAHJ1vC,EAAQA,GAAS,GAGQ,EACrB2vC,GAHJxvC,EAASA,GAAU,GAGQ,EAEvBuuC,EAAQh0C,KAAK8B,MAAOyxC,IAAmB,EACvCU,EAAQj0C,KAAK8B,MAAO0xC,IAAoB,EAExCe,EAASP,EAAQ,EACjBQ,EAASP,EAAQ,EAEjBiB,EAAgB5vC,EAAQ0uC,EACxBmB,EAAiB1vC,EAASwuC,EAM1BxH,EAAU,GACVlrB,EAAW,GACXyqB,EAAU,GACVC,EAAM,GAIV,IAAM3zB,EAAK,EAAGA,EAAKk8B,EAAQl8B,IAAQ,CAElC,IAAIhgB,EAAIggB,EAAK68B,EAAiBF,EAE9B,IAAM58B,EAAK,EAAGA,EAAKk8B,EAAQl8B,IAAQ,CAElC,IAAIhgB,EAAIggB,EAAK68B,EAAgBF,EAE7BzzB,EAAS/c,KAAMnM,GAAKC,EAAG,GAEvB0zC,EAAQxnC,KAAM,EAAG,EAAG,GAEpBynC,EAAIznC,KAAM6T,EAAK27B,GACf/H,EAAIznC,KAAM,EAAM8T,EAAK27B,IAQvB,IAAM37B,EAAK,EAAGA,EAAK27B,EAAO37B,IAEzB,IAAMD,EAAK,EAAGA,EAAK27B,EAAO37B,IAAQ,CAEjC,IAAI1R,EAAI0R,EAAKk8B,EAASj8B,EAClB1R,EAAIyR,EAAKk8B,GAAWj8B,EAAK,GACzB7O,EAAM4O,EAAK,EAAMk8B,GAAWj8B,EAAK,GACjCxM,EAAMuM,EAAK,EAAMk8B,EAASj8B,EAI9Bm0B,EAAQjoC,KAAMmC,EAAGC,EAAGkF,GACpB2gC,EAAQjoC,KAAMoC,EAAG6C,EAAGqC,GAQtB/I,KAAK6xC,SAAUnI,GACf1pC,KAAK8xC,aAAc,WAAY,IAAIhJ,GAAwBtqB,EAAU,IACrExe,KAAK8xC,aAAc,SAAU,IAAIhJ,GAAwBG,EAAS,IAClEjpC,KAAK8xC,aAAc,KAAM,IAAIhJ,GAAwBI,EAAK,IF3E3DiH,GAAejvC,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ/a,GAAgBoB,WAAa,CAErFkC,YAAa+sC,GAEb1xB,kBAAkB,EAElB4zB,SAAU,WAET,OAAOryC,KAAK6B,OAIbgwC,SAAU,SAAWhwC,GAEfypB,MAAMC,QAAS1pB,GAEnB7B,KAAK6B,MAAQ,IAAMwnC,GAAUxnC,GAAU,MAAQgnC,GAAwBF,IAAyB9mC,EAAO,GAIvG7B,KAAK6B,MAAQA,GAMfiwC,aAAc,SAAWz4B,EAAMhT,GAE9B,OAASA,GAAaA,EAAUooC,mBAA2BpoC,GAAaA,EAAUo3B,6BAUpE,UAATpkB,GAEJhZ,QAAQmD,KAAM,gFACdxD,KAAK6xC,SAAUxrC,KAMhBrG,KAAK0e,WAAYrF,GAAShT,EAEnBrG,OAnBNK,QAAQmD,KAAM,+EAEdxD,KAAK8xC,aAAcz4B,EAAM,IAAI6uB,GAAiB/nC,UAAW,GAAKA,UAAW,OAqB3EmyC,aAAc,SAAWj5B,GAExB,OAAOrZ,KAAK0e,WAAYrF,IAIzBk5B,gBAAiB,SAAWl5B,GAI3B,cAFOrZ,KAAK0e,WAAYrF,GAEjBrZ,MAIR4xC,SAAU,SAAWvwB,EAAOlU,EAAO01B,GAElC7iC,KAAKopC,OAAO3nC,KAAM,CAEjB4f,MAAOA,EACPlU,MAAOA,EACP01B,mBAAiChiC,IAAlBgiC,EAA8BA,EAAgB,KAM/D2P,YAAa,WAEZxyC,KAAKopC,OAAS,IAIfqJ,aAAc,SAAWpxB,EAAOlU,GAE/BnN,KAAKqwC,UAAUhvB,MAAQA,EACvBrhB,KAAKqwC,UAAUljC,MAAQA,GAIxBg2B,YAAa,SAAW9tC,GAEvB,IAAIga,EAAWrP,KAAK0e,WAAWrP,cAEbxO,IAAbwO,IAEJha,EAAO6X,uBAAwBmC,GAC/BA,EAASqjC,aAAc,GAIxB,IAAI/7B,EAAS3W,KAAK0e,WAAW/H,OAuB7B,YArBgB9V,IAAX8V,KAEe,IAAI5V,IAAU0W,gBAAiBpiB,GAErC6X,uBAAwByJ,GACrCA,EAAO+7B,aAAc,GAII,OAArB1yC,KAAK0nC,aAET1nC,KAAKwpC,qBAIuB,OAAxBxpC,KAAKkjB,gBAETljB,KAAKmjB,wBAICnjB,MAIR0jC,QAAS,WAIR,IAAI/hB,EAAK,IAAI1hB,GAEb,OAAO,SAAkBoF,GAMxB,OAJAsc,EAAGjT,cAAerJ,GAElBrF,KAAKmjC,YAAaxhB,GAEX3hB,MAZA,GAkBT2jC,QAAS,WAIR,IAAIhiB,EAAK,IAAI1hB,GAEb,OAAO,SAAkBoF,GAMxB,OAJAsc,EAAG/S,cAAevJ,GAElBrF,KAAKmjC,YAAaxhB,GAEX3hB,MAZA,GAkBT4jC,QAAS,WAIR,IAAIjiB,EAAK,IAAI1hB,GAEb,OAAO,SAAkBoF,GAMxB,OAJAsc,EAAG9S,cAAexJ,GAElBrF,KAAKmjC,YAAaxhB,GAEX3hB,MAZA,GAkBTiY,UAAW,WAIV,IAAI0J,EAAK,IAAI1hB,GAEb,OAAO,SAAoB3K,EAAGC,EAAGC,GAMhC,OAJAmsB,EAAGlT,gBAAiBnZ,EAAGC,EAAGC,GAE1BwK,KAAKmjC,YAAaxhB,GAEX3hB,MAZE,GAkBXoO,MAAO,WAIN,IAAIuT,EAAK,IAAI1hB,GAEb,OAAO,SAAgB3K,EAAGC,EAAGC,GAM5B,OAJAmsB,EAAGzS,UAAW5Z,EAAGC,EAAGC,GAEpBwK,KAAKmjC,YAAaxhB,GAEX3hB,MAZF,GAkBP4K,OAAQ,WAEP,IAAIm8B,EAAM,IAAIvF,GAEd,OAAO,SAAiBpsC,GAEvB2xC,EAAIn8B,OAAQxV,GAEZ2xC,EAAIhsB,eAEJ/a,KAAKmjC,YAAa4D,EAAI1xC,SAVhB,GAgBRoR,OAAQ,WAEP,IAAIP,EAAS,IAAIpF,GAEjB,OAAO,WAQN,OANAd,KAAKwpC,qBAELxpC,KAAK0nC,YAAY5pB,UAAW5X,GAASpB,SAErC9E,KAAKiY,UAAW/R,EAAO5Q,EAAG4Q,EAAO3Q,EAAG2Q,EAAO1Q,GAEpCwK,MAZD,GAkBR0d,cAAe,SAAWC,GAIzB,IAAIW,EAAWX,EAAOW,SAEtB,GAAKX,EAAOg1B,UAAYh1B,EAAOi1B,OAAS,CAEvC,IAAIjJ,EAAY,IAAIb,GAAmD,EAA3BxqB,EAASE,SAASpe,OAAY,GACtE8mC,EAAS,IAAI4B,GAAiD,EAAzBxqB,EAAS4oB,OAAO9mC,OAAY,GAKrE,GAHAJ,KAAK8xC,aAAc,WAAYnI,EAAUwF,kBAAmB7wB,EAASE,WACrExe,KAAK8xC,aAAc,QAAS5K,EAAO8H,gBAAiB1wB,EAAS4oB,SAExD5oB,EAASmpB,eAAiBnpB,EAASmpB,cAAcrnC,SAAWke,EAASE,SAASpe,OAAS,CAE3F,IAAIqnC,EAAgB,IAAIqB,GAAwBxqB,EAASmpB,cAAcrnC,OAAQ,GAE/EJ,KAAK8xC,aAAc,eAAgBrK,EAAcsH,UAAWzwB,EAASmpB,gBAIrC,OAA5BnpB,EAAS4E,iBAEbljB,KAAKkjB,eAAiB5E,EAAS4E,eAAe/f,SAIjB,OAAzBmb,EAASopB,cAEb1nC,KAAK0nC,YAAcppB,EAASopB,YAAYvkC,cAI9Bwa,EAAO0uB,QAEb/tB,GAAYA,EAASC,YAEzBve,KAAKyvC,aAAcnxB,GAMrB,OAAOte,MAIRmd,cAAe,SAAWjF,GAIzB,IAFA,IAAI7I,EAAW,GAEL/R,EAAI,EAAG8E,EAAI8V,EAAO9X,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAEjD,IAAI0gB,EAAQ9F,EAAQ5a,GACpB+R,EAAS5N,KAAMuc,EAAM1oB,EAAG0oB,EAAMzoB,EAAGyoB,EAAMxoB,GAAK,GAM7C,OAFAwK,KAAK8xC,aAAc,WAAY,IAAIhJ,GAAwBz5B,EAAU,IAE9DrP,MAIR6yC,iBAAkB,SAAWl1B,GAE5B,IAmCItX,EAnCAiY,EAAWX,EAAOW,SAEtB,GAAKX,EAAO0uB,OAAS,CAEpB,IAAIyG,EAASx0B,EAASy0B,iBAStB,IAPqC,IAAhCz0B,EAASqpB,qBAEbmL,OAASjyC,EACTyd,EAASqpB,oBAAqB,QAIf9mC,IAAXiyC,EAEJ,OAAO9yC,KAAKyvC,aAAcnxB,GAI3Bw0B,EAAOlL,mBAAqBtpB,EAASspB,mBACrCkL,EAAOhL,kBAAoBxpB,EAASwpB,kBACpCgL,EAAO/K,iBAAmBzpB,EAASypB,iBACnC+K,EAAOjL,cAAgBvpB,EAASupB,cAChCiL,EAAO7K,iBAAmB3pB,EAAS2pB,iBAEnC3pB,EAASspB,oBAAqB,EAC9BtpB,EAASwpB,mBAAoB,EAC7BxpB,EAASypB,kBAAmB,EAC5BzpB,EAASupB,eAAgB,EACzBvpB,EAAS2pB,kBAAmB,EAE5B3pB,EAAWw0B,EA0FZ,OApFqC,IAAhCx0B,EAASspB,0BAIM/mC,KAFnBwF,EAAYrG,KAAK0e,WAAWrP,YAI3BhJ,EAAU8oC,kBAAmB7wB,EAASE,UACtCnY,EAAUqsC,aAAc,GAIzBp0B,EAASspB,oBAAqB,IAIK,IAA/BtpB,EAASwpB,yBAIMjnC,KAFnBwF,EAAYrG,KAAK0e,WAAW/H,UAI3BtQ,EAAU8oC,kBAAmB7wB,EAAS2qB,SACtC5iC,EAAUqsC,aAAc,GAIzBp0B,EAASwpB,mBAAoB,IAIK,IAA9BxpB,EAASypB,wBAIMlnC,KAFnBwF,EAAYrG,KAAK0e,WAAW+W,SAI3BpvB,EAAU2oC,gBAAiB1wB,EAAS4oB,QACpC7gC,EAAUqsC,aAAc,GAIzBp0B,EAASypB,kBAAmB,GAIxBzpB,EAASupB,qBAIMhnC,KAFnBwF,EAAYrG,KAAK0e,WAAWlC,MAI3BnW,EAAU4oC,kBAAmB3wB,EAAS4qB,KACtC7iC,EAAUqsC,aAAc,GAIzBp0B,EAASupB,eAAgB,GAIrBvpB,EAAS0pB,+BAIMnnC,KAFnBwF,EAAYrG,KAAK0e,WAAWs0B,gBAI3B3sC,EAAU0oC,UAAWzwB,EAASmpB,eAC9BphC,EAAUqsC,aAAc,GAIzBp0B,EAAS0pB,yBAA0B,GAI/B1pB,EAAS2pB,mBAEb3pB,EAASkxB,cAAe7xB,EAAOW,UAC/Bte,KAAKopC,OAAS9qB,EAAS8qB,OAEvB9qB,EAAS2pB,kBAAmB,GAItBjoC,MAIRyvC,aAAc,SAAWnxB,GAIxB,OAFAA,EAASy0B,kBAAmB,IAAI/J,IAAiByG,aAAcnxB,GAExDte,KAAKizC,mBAAoB30B,EAASy0B,mBAI1CE,mBAAoB,SAAW30B,GAE9B,IAAIqrB,EAAY,IAAInL,aAAyC,EAA3BlgB,EAASE,SAASpe,QAGpD,GAFAJ,KAAK8xC,aAAc,WAAY,IAAI5J,GAAiByB,EAAW,GAAIwF,kBAAmB7wB,EAASE,WAE1FF,EAAS2qB,QAAQ7oC,OAAS,EAAI,CAElC,IAAI6oC,EAAU,IAAIzK,aAAwC,EAA1BlgB,EAAS2qB,QAAQ7oC,QACjDJ,KAAK8xC,aAAc,SAAU,IAAI5J,GAAiBe,EAAS,GAAIkG,kBAAmB7wB,EAAS2qB,UAI5F,GAAK3qB,EAAS4oB,OAAO9mC,OAAS,EAAI,CAEjC,IAAI8mC,EAAS,IAAI1I,aAAuC,EAAzBlgB,EAAS4oB,OAAO9mC,QAC/CJ,KAAK8xC,aAAc,QAAS,IAAI5J,GAAiBhB,EAAQ,GAAI8H,gBAAiB1wB,EAAS4oB,SAIxF,GAAK5oB,EAAS4qB,IAAI9oC,OAAS,EAAI,CAE9B,IAAI8oC,EAAM,IAAI1K,aAAoC,EAAtBlgB,EAAS4qB,IAAI9oC,QACzCJ,KAAK8xC,aAAc,KAAM,IAAI5J,GAAiBgB,EAAK,GAAI+F,kBAAmB3wB,EAAS4qB,MAIpF,GAAK5qB,EAAS6qB,KAAK/oC,OAAS,EAAI,CAE/B,IAAI+oC,EAAO,IAAI3K,aAAqC,EAAvBlgB,EAAS6qB,KAAK/oC,QAC3CJ,KAAK8xC,aAAc,MAAO,IAAI5J,GAAiBiB,EAAM,GAAI8F,kBAAmB3wB,EAAS6qB,OAUtF,IAAM,IAAI9vB,KAJVrZ,KAAKopC,OAAS9qB,EAAS8qB,OAIL9qB,EAAS+oB,aAAe,CAKzC,IAHA,IAAInlC,EAAQ,GACRmlC,EAAe/oB,EAAS+oB,aAAchuB,GAEhC/b,EAAI,EAAG8E,EAAIilC,EAAajnC,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAEvD,IAAI+wC,EAAchH,EAAc/pC,GAE5B+I,EAAY,IAAIyiC,GAA6C,EAArBuF,EAAYjuC,OAAY,GAEpE8B,EAAMT,KAAM4E,EAAU8oC,kBAAmBd,IAI1CruC,KAAKowC,gBAAiB/2B,GAASnX,EAMhC,GAAKoc,EAASkpB,YAAYpnC,OAAS,EAAI,CAEtC,IAAIonC,EAAc,IAAIsB,GAAsD,EAA9BxqB,EAASkpB,YAAYpnC,OAAY,GAC/EJ,KAAK8xC,aAAc,YAAatK,EAAY4H,kBAAmB9wB,EAASkpB,cAIzE,GAAKlpB,EAASipB,YAAYnnC,OAAS,EAAI,CAEtC,IAAImnC,EAAc,IAAIuB,GAAsD,EAA9BxqB,EAASipB,YAAYnnC,OAAY,GAC/EJ,KAAK8xC,aAAc,aAAcvK,EAAY6H,kBAAmB9wB,EAASipB,cAkB1E,OAZiC,OAA5BjpB,EAAS4E,iBAEbljB,KAAKkjB,eAAiB5E,EAAS4E,eAAe/f,SAIjB,OAAzBmb,EAASopB,cAEb1nC,KAAK0nC,YAAcppB,EAASopB,YAAYvkC,SAIlCnD,MAIRwpC,mBAAoB,WAEO,OAArBxpC,KAAK0nC,cAET1nC,KAAK0nC,YAAc,IAAIvtB,IAIxB,IAAI9K,EAAWrP,KAAK0e,WAAWrP,cAEbxO,IAAbwO,EAEJrP,KAAK0nC,YAAYxqB,uBAAwB7N,GAIzCrP,KAAK0nC,YAAYtqB,aAIb81B,MAAOlzC,KAAK0nC,YAAYxyC,IAAII,IAAO49C,MAAOlzC,KAAK0nC,YAAYxyC,IAAIK,IAAO29C,MAAOlzC,KAAK0nC,YAAYxyC,IAAIM,KAEtG6K,QAAQC,MAAO,oIAAqIN,OAMtJmjB,sBAAuB,WAEtB,IAAI/K,EAAM,IAAI+B,GACV/kB,EAAS,IAAI0L,GAEjB,OAAO,WAEuB,OAAxBd,KAAKkjB,iBAETljB,KAAKkjB,eAAiB,IAAI9I,IAI3B,IAAI/K,EAAWrP,KAAK0e,WAAWrP,SAE/B,GAAKA,EAAW,CAEf,IAAI5I,EAASzG,KAAKkjB,eAAezc,OAEjC2R,EAAI8E,uBAAwB7N,GAC5B+I,EAAI0F,UAAWrX,GAOf,IAFA,IAAI4Z,EAAc,EAER/iB,EAAI,EAAG+f,EAAKhO,EAASlC,MAAO7P,EAAI+f,EAAI/f,IAE7ClI,EAAOE,EAAI+Z,EAAS/I,KAAMhJ,GAC1BlI,EAAOG,EAAI8Z,EAAS9I,KAAMjJ,GAC1BlI,EAAOI,EAAI6Z,EAASjC,KAAM9P,GAC1B+iB,EAAcpjB,KAAK9H,IAAKkrB,EAAa5Z,EAAOjB,kBAAmBpQ,IAIhE4K,KAAKkjB,eAAehM,OAASja,KAAKgI,KAAMob,GAEnC6yB,MAAOlzC,KAAKkjB,eAAehM,SAE/B7W,QAAQC,MAAO,+HAAgIN,QAxC5H,GAkDvBkqC,mBAAoB,aAMpBO,qBAAsB,WAErB,IAAI5oC,EAAQ7B,KAAK6B,MACb6c,EAAa1e,KAAK0e,WAClB0qB,EAASppC,KAAKopC,OAElB,GAAK1qB,EAAWrP,SAAW,CAE1B,IAAIs6B,EAAYjrB,EAAWrP,SAASnN,MAEpC,QAA2BrB,IAAtB6d,EAAW/H,OAEf3W,KAAK8xC,aAAc,SAAU,IAAI5J,GAAiB,IAAI1J,aAAcmL,EAAUvpC,QAAU,SAQxF,IAFA,IAAI8B,EAAQwc,EAAW/H,OAAOzU,MAEpB5E,EAAI,EAAG+f,EAAKnb,EAAM9B,OAAQ9C,EAAI+f,EAAI/f,IAE3C4E,EAAO5E,GAAM,EAMf,IAEIgtC,EAAIC,EAAIC,EAFRvB,EAAUvqB,EAAW/H,OAAOzU,MAG5BixC,EAAK,IAAIryC,GAAWsyC,EAAK,IAAItyC,GAAWuyC,EAAK,IAAIvyC,GACjDqpC,EAAK,IAAIrpC,GAAWspC,EAAK,IAAItpC,GAIjC,GAAKe,EAAQ,CAEZ,IAAI6nC,EAAU7nC,EAAMK,MAEG,IAAlBknC,EAAOhpC,QAEXJ,KAAK4xC,SAAU,EAAGlI,EAAQtpC,QAI3B,IAAM,IAAI0f,EAAI,EAAGypB,EAAKH,EAAOhpC,OAAQ0f,EAAIypB,IAAOzpB,EAE/C,CAAA,IAAImqB,EAAQb,EAAQtpB,GAEhBuB,EAAQ4oB,EAAM5oB,MAGlB,IAAU/jB,EAAI+jB,EAAOhE,EAAKgE,EAFd4oB,EAAM98B,MAEuB7P,EAAI+f,EAAI/f,GAAK,EAErDgtC,EAAwB,EAAnBZ,EAASpsC,EAAI,GAClBitC,EAAwB,EAAnBb,EAASpsC,EAAI,GAClBktC,EAAwB,EAAnBd,EAASpsC,EAAI,GAElB61C,EAAGltC,UAAW0jC,EAAWW,GACzB8I,EAAGntC,UAAW0jC,EAAWY,GACzB8I,EAAGptC,UAAW0jC,EAAWa,GAEzBL,EAAGnmC,WAAYqvC,EAAID,GACnBhJ,EAAGpmC,WAAYmvC,EAAIC,GACnBjJ,EAAGn0B,MAAOo0B,GAEVnB,EAASqB,IAAQH,EAAG70C,EACpB2zC,EAASqB,EAAK,IAAOH,EAAG50C,EACxB0zC,EAASqB,EAAK,IAAOH,EAAG30C,EAExByzC,EAASsB,IAAQJ,EAAG70C,EACpB2zC,EAASsB,EAAK,IAAOJ,EAAG50C,EACxB0zC,EAASsB,EAAK,IAAOJ,EAAG30C,EAExByzC,EAASuB,IAAQL,EAAG70C,EACpB2zC,EAASuB,EAAK,IAAOL,EAAG50C,EACxB0zC,EAASuB,EAAK,IAAOL,EAAG30C,QAU1B,IAAU8H,EAAI,EAAG+f,EAAKssB,EAAUvpC,OAAQ9C,EAAI+f,EAAI/f,GAAK,EAEpD61C,EAAGltC,UAAW0jC,EAAWrsC,GACzB81C,EAAGntC,UAAW0jC,EAAWrsC,EAAI,GAC7B+1C,EAAGptC,UAAW0jC,EAAWrsC,EAAI,GAE7B6sC,EAAGnmC,WAAYqvC,EAAID,GACnBhJ,EAAGpmC,WAAYmvC,EAAIC,GACnBjJ,EAAGn0B,MAAOo0B,GAEVnB,EAAS3rC,GAAM6sC,EAAG70C,EAClB2zC,EAAS3rC,EAAI,GAAM6sC,EAAG50C,EACtB0zC,EAAS3rC,EAAI,GAAM6sC,EAAG30C,EAEtByzC,EAAS3rC,EAAI,GAAM6sC,EAAG70C,EACtB2zC,EAAS3rC,EAAI,GAAM6sC,EAAG50C,EACtB0zC,EAAS3rC,EAAI,GAAM6sC,EAAG30C,EAEtByzC,EAAS3rC,EAAI,GAAM6sC,EAAG70C,EACtB2zC,EAAS3rC,EAAI,GAAM6sC,EAAG50C,EACtB0zC,EAAS3rC,EAAI,GAAM6sC,EAAG30C,EAMxBwK,KAAKszC,mBAEL50B,EAAW/H,OAAO+7B,aAAc,IAMlC7nB,MAAO,SAAWvM,EAAUpY,GAE3B,GAASoY,GAAYA,EAASG,iBAA9B,MAOgB5d,IAAXqF,IAEJA,EAAS,EAET7F,QAAQmD,KACP,2JAMF,IAAIkb,EAAa1e,KAAK0e,WAEtB,IAAM,IAAIqnB,KAAOrnB,EAEhB,QAAoC7d,IAA/Byd,EAASI,WAAYqnB,GAU1B,IARA,IACIwN,EADa70B,EAAYqnB,GACI7jC,MAE7BsxC,EAAal1B,EAASI,WAAYqnB,GAClC0N,EAAkBD,EAAWtxC,MAIvB5E,EAAI,EAAGwiB,EAFG0zB,EAAWrL,SAEMjiC,EAAQ5I,EAAIm2C,EAAgBrzC,OAAQ9C,IAAMwiB,IAE9EyzB,EAAiBzzB,GAAM2zB,EAAiBn2C,GAM1C,OAAO0C,KAtCNK,QAAQC,MAAO,kFAAmFge,IA0CpGg1B,iBAAkB,WAEjB,IAAIl+C,EAAS,IAAI0L,GAEjB,OAAO,WAIN,IAFA,IAAImoC,EAAUjpC,KAAK0e,WAAW/H,OAEpBrZ,EAAI,EAAG+f,EAAK4rB,EAAQ97B,MAAO7P,EAAI+f,EAAI/f,IAE5ClI,EAAOE,EAAI2zC,EAAQ3iC,KAAMhJ,GACzBlI,EAAOG,EAAI0zC,EAAQ1iC,KAAMjJ,GACzBlI,EAAOI,EAAIyzC,EAAQ77B,KAAM9P,GAEzBlI,EAAOgQ,YAEP6jC,EAAQ37B,OAAQhQ,EAAGlI,EAAOE,EAAGF,EAAOG,EAAGH,EAAOI,IAhB/B,GAwBlBk+C,aAAc,WAEb,GAAoB,OAAf1zC,KAAK6B,MAGT,OADAxB,QAAQmD,KAAM,yEACPxD,KAIR,IAAI2zC,EAAY,IAAIxD,GAEhBzG,EAAU1pC,KAAK6B,MAAMK,MACrBwc,EAAa1e,KAAK0e,WAEtB,IAAM,IAAIrF,KAAQqF,EAAa,CAW9B,IATA,IAAIrY,EAAYqY,EAAYrF,GAExBnX,EAAQmE,EAAUnE,MAClBimC,EAAW9hC,EAAU8hC,SAErByL,EAAS,IAAI1xC,EAAMkB,YAAasmC,EAAQtpC,OAAS+nC,GAEjDtmC,EAAQ,EAAGitC,EAAS,EAEdxxC,EAAI,EAAG8E,EAAIsnC,EAAQtpC,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAElDuE,EAAQ6nC,EAASpsC,GAAM6qC,EAEvB,IAAM,IAAIroB,EAAI,EAAGA,EAAIqoB,EAAUroB,IAE9B8zB,EAAQ9E,KAAc5sC,EAAOL,KAM/B8xC,EAAU7B,aAAcz4B,EAAM,IAAI6uB,GAAiB0L,EAAQzL,IAI5D,IAAIiB,EAASppC,KAAKopC,OAElB,IAAU9rC,EAAI,EAAG8E,EAAIgnC,EAAOhpC,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAEjD,IAAI2sC,EAAQb,EAAQ9rC,GACpBq2C,EAAU/B,SAAU3H,EAAM5oB,MAAO4oB,EAAM98B,MAAO88B,EAAMpH,eAIrD,OAAO8Q,GAIR14B,OAAQ,WAEP,IAAIf,EAAO,CACVoB,SAAU,CACTvB,QAAS,IACT3Y,KAAM,iBACNma,UAAW,0BAUb,GAJArB,EAAKd,KAAOpZ,KAAKoZ,KACjBc,EAAK9Y,KAAOpB,KAAKoB,KACE,KAAdpB,KAAKqZ,OAAca,EAAKb,KAAOrZ,KAAKqZ,WAEhBxY,IAApBb,KAAKwlC,WAA2B,CAEpC,IAAIA,EAAaxlC,KAAKwlC,WAEtB,IAAM,IAAIO,KAAOP,OAEW3kC,IAAtB2kC,EAAYO,KAAsB7rB,EAAM6rB,GAAQP,EAAYO,IAIlE,OAAO7rB,EAIRA,EAAKA,KAAO,CAAEwE,WAAY,IAE1B,IAAI7c,EAAQ7B,KAAK6B,MAEjB,GAAe,OAAVA,EAAiB,CAErB,IAAIK,EAAQopB,MAAMpqB,UAAUiB,MAAME,KAAMR,EAAMK,OAE9CgY,EAAKA,KAAKrY,MAAQ,CACjBT,KAAMS,EAAMK,MAAMkB,YAAYiW,KAC9BnX,MAAOA,GAKT,IAAIwc,EAAa1e,KAAK0e,WAEtB,IAAM,IAAIqnB,KAAOrnB,EAAa,CAE7B,IAAIrY,EAAYqY,EAAYqnB,GAExB7jC,EAAQopB,MAAMpqB,UAAUiB,MAAME,KAAMgE,EAAUnE,OAElDgY,EAAKA,KAAKwE,WAAYqnB,GAAQ,CAC7BoC,SAAU9hC,EAAU8hC,SACpB/mC,KAAMiF,EAAUnE,MAAMkB,YAAYiW,KAClCnX,MAAOA,EACPkmC,WAAY/hC,EAAU+hC,YAKxB,IAAIgB,EAASppC,KAAKopC,OAEbA,EAAOhpC,OAAS,IAEpB8Z,EAAKA,KAAKkvB,OAAS9D,KAAKW,MAAOX,KAAKC,UAAW6D,KAIhD,IAAIlmB,EAAiBljB,KAAKkjB,eAW1B,OATwB,OAAnBA,IAEJhJ,EAAKA,KAAKgJ,eAAiB,CAC1Bzc,OAAQyc,EAAezc,OAAON,UAC9B+Q,OAAQgM,EAAehM,SAKlBgD,GAIR/W,MAAO,WA0BN,OAAO,IAAIgtC,IAAiB9sC,KAAMrD,OAInCqD,KAAM,SAAW2X,GAEhB,IAAI3B,EAAM/b,EAAG8E,EAIbpC,KAAK6B,MAAQ,KACb7B,KAAK0e,WAAa,GAClB1e,KAAKowC,gBAAkB,GACvBpwC,KAAKopC,OAAS,GACdppC,KAAK0nC,YAAc,KACnB1nC,KAAKkjB,eAAiB,KAItBljB,KAAKqZ,KAAO2B,EAAO3B,KAInB,IAAIxX,EAAQmZ,EAAOnZ,MAEJ,OAAVA,GAEJ7B,KAAK6xC,SAAUhwC,EAAMsB,SAMtB,IAAIub,EAAa1D,EAAO0D,WAExB,IAAMrF,KAAQqF,EAAa,CAE1B,IAAIrY,EAAYqY,EAAYrF,GAC5BrZ,KAAK8xC,aAAcz4B,EAAMhT,EAAUlD,SAMpC,IAAIitC,EAAkBp1B,EAAOo1B,gBAE7B,IAAM/2B,KAAQ+2B,EAAkB,CAE/B,IAAIluC,EAAQ,GACR2xC,EAAiBzD,EAAiB/2B,GAEtC,IAAM/b,EAAI,EAAG8E,EAAIyxC,EAAezzC,OAAQ9C,EAAI8E,EAAG9E,IAE9C4E,EAAMT,KAAMoyC,EAAgBv2C,GAAI6F,SAIjCnD,KAAKowC,gBAAiB/2B,GAASnX,EAMhC,IAAIknC,EAASpuB,EAAOouB,OAEpB,IAAM9rC,EAAI,EAAG8E,EAAIgnC,EAAOhpC,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAE7C,IAAI2sC,EAAQb,EAAQ9rC,GACpB0C,KAAK4xC,SAAU3H,EAAM5oB,MAAO4oB,EAAM98B,MAAO88B,EAAMpH,eAMhD,IAAI6E,EAAc1sB,EAAO0sB,YAEJ,OAAhBA,IAEJ1nC,KAAK0nC,YAAcA,EAAYvkC,SAMhC,IAAI+f,EAAiBlI,EAAOkI,eAa5B,OAXwB,OAAnBA,IAEJljB,KAAKkjB,eAAiBA,EAAe/f,SAMtCnD,KAAKqwC,UAAUhvB,MAAQrG,EAAOq1B,UAAUhvB,MACxCrhB,KAAKqwC,UAAUljC,MAAQ6N,EAAOq1B,UAAUljC,MAEjCnN,MAIRsc,QAAS,WAERtc,KAAK+B,cAAe,CAAEX,KAAM,eC3kC9BmvC,GAAYrvC,UAAYF,OAAO6Z,OAAQosB,GAAS/lC,WAChDqvC,GAAYrvC,UAAUkC,YAAcmtC,GAqKpCI,GAAkBzvC,UAAYF,OAAO6Z,OAAQs1B,GAAejvC,WAC5DyvC,GAAkBzvC,UAAUkC,YAAcutC,GC1K1CoB,GAAc7wC,UAAYF,OAAO6Z,OAAQosB,GAAS/lC,WAClD6wC,GAAc7wC,UAAUkC,YAAc2uC,GA2FtCC,GAAoB9wC,UAAYF,OAAO6Z,OAAQs1B,GAAejvC,WAC9D8wC,GAAoB9wC,UAAUkC,YAAc4uC,GCjH5C,ICyaM1uC,GAjTAwwC,GACAC,GACAlH,GCtCAmH,GACAC,GCzEA50B,GHZF60B,GAAa,EAEjB,SAASC,KAERnzC,OAAOmY,eAAgBnZ,KAAM,KAAM,CAAEjC,MAAOm2C,OAE5Cl0C,KAAKoZ,KAAOrc,GAAMK,eAElB4C,KAAKqZ,KAAO,GACZrZ,KAAKoB,KAAO,WAEZpB,KAAKo5B,KAAM,EACXp5B,KAAKy5B,QAAS,EAEdz5B,KAAKo0C,SAAW/9C,EAChB2J,KAAKq0C,KAAOr+C,EACZgK,KAAKs0C,aAAc,EACnBt0C,KAAK+iC,aAAe5sC,EAEpB6J,KAAKg3B,QAAU,EACfh3B,KAAKu0C,aAAc,EAEnBv0C,KAAKw0C,SAAWr9C,EAChB6I,KAAKy0C,SAAWr9C,EAChB4I,KAAK00C,cAAgBh+C,EACrBsJ,KAAK20C,cAAgB,KACrB30C,KAAK40C,cAAgB,KACrB50C,KAAK60C,mBAAqB,KAE1B70C,KAAK80C,UAAYj9C,EACjBmI,KAAK+0C,WAAY,EACjB/0C,KAAKg1C,YAAa,EAElBh1C,KAAKi1C,eAAiB,KACtBj1C,KAAKk1C,kBAAmB,EACxBl1C,KAAKm1C,aAAc,EAEnBn1C,KAAKo1C,WAAa,KAElBp1C,KAAKq1C,YAAa,EAElBr1C,KAAK0sC,UAAY,KAEjB1sC,KAAKs1C,eAAgB,EACrBt1C,KAAKu1C,oBAAsB,EAC3Bv1C,KAAKw1C,mBAAqB,EAE1Bx1C,KAAKy1C,WAAY,EAEjBz1C,KAAK01C,UAAY,EACjB11C,KAAK21C,oBAAqB,EAE1B31C,KAAK41C,SAAW,EAEhB51C,KAAKgiC,SAAU,EAEfhiC,KAAKqiC,SAAW,GAEhBriC,KAAK0yC,aAAc,EI5BpB,SAASmD,GAAmBrQ,GAE3B2O,GAAS9xC,KAAMrC,MAEfA,KAAKoB,KAAO,oBAEZpB,KAAKy1B,MAAQ,IAAIZ,GAAO,UAExB70B,KAAKi3B,IAAM,KAEXj3B,KAAKg4B,SAAW,KAChBh4B,KAAKi4B,kBAAoB,EAEzBj4B,KAAK63B,MAAQ,KACb73B,KAAK83B,eAAiB,EAEtB93B,KAAKq3B,YAAc,KAEnBr3B,KAAKm3B,SAAW,KAEhBn3B,KAAKu3B,OAAS,KACdv3B,KAAK81C,QAAU59C,EACf8H,KAAKy3B,aAAe,EACpBz3B,KAAK03B,gBAAkB,IAEvB13B,KAAK+1C,WAAY,EACjB/1C,KAAKg2C,mBAAqB,EAC1Bh2C,KAAKi2C,iBAAmB,QACxBj2C,KAAKk2C,kBAAoB,QAEzBl2C,KAAKm2C,UAAW,EAChBn2C,KAAKqnC,cAAe,EAEpBrnC,KAAKy5B,QAAS,EAEdz5B,KAAKo2C,UAAW5Q,GClDjB,SAAS6Q,GAAgB7Q,GAExB2O,GAAS9xC,KAAMrC,MAEfA,KAAKoB,KAAO,iBAEZpB,KAAKs2C,QAAU,GACft2C,KAAK8qB,SAAW,GAEhB9qB,KAAK47B,aAAe,gGACpB57B,KAAK67B,eAAiB,iEAEtB77B,KAAKu2C,UAAY,EAEjBv2C,KAAK+1C,WAAY,EACjB/1C,KAAKg2C,mBAAqB,EAE1Bh2C,KAAKo5B,KAAM,EACXp5B,KAAKy5B,QAAS,EACdz5B,KAAKw2C,UAAW,EAEhBx2C,KAAKm2C,UAAW,EAChBn2C,KAAKqnC,cAAe,EACpBrnC,KAAKsnC,cAAe,EAEpBtnC,KAAKy2C,WAAa,CACjBC,aAAa,EACbC,WAAW,EACXC,aAAa,EACbC,kBAAkB,GAKnB72C,KAAK82C,uBAAyB,CAC7BrhB,MAAS,CAAE,EAAG,EAAG,GACjBjZ,GAAM,CAAE,EAAG,GACXotB,IAAO,CAAE,EAAG,IAGb5pC,KAAK+2C,yBAAsBl2C,EAC3Bb,KAAKg3C,oBAAqB,OAENn2C,IAAf2kC,SAE2B3kC,IAA1B2kC,EAAW9mB,YAEfre,QAAQC,MAAO,2FAIhBN,KAAKo2C,UAAW5Q,IJrElB,SAASyR,GAAKC,EAAQh2B,GAErBlhB,KAAKk3C,YAAsBr2C,IAAXq2C,EAAyBA,EAAS,IAAIp2C,GACtDd,KAAKkhB,eAA4BrgB,IAAdqgB,EAA4BA,EAAY,IAAIpgB,GCFhE,SAASq2C,GAAO91B,EAAOI,GAEtBzhB,KAAKqhB,WAAoBxgB,IAAVwgB,EAAwBA,EAAQ,IAAIvgB,GACnDd,KAAKyhB,SAAgB5gB,IAAR4gB,EAAsBA,EAAM,IAAI3gB,GCD9C,SAASs2C,GAAUxzC,EAAGC,EAAG6C,GAExB1G,KAAK4D,OAAY/C,IAAN+C,EAAoBA,EAAI,IAAI9C,GACvCd,KAAK6D,OAAYhD,IAANgD,EAAoBA,EAAI,IAAI/C,GACvCd,KAAK0G,OAAY7F,IAAN6F,EAAoBA,EAAI,IAAI5F,GGMxC,SAASu2C,GAAM/4B,EAAUonB,GAExBlE,GAASn/B,KAAMrC,MAEfA,KAAKoB,KAAO,OAEZpB,KAAKse,cAAwBzd,IAAbyd,EAAyBA,EAAW,IAAI6xB,GACxDnwC,KAAK0lC,cAAwB7kC,IAAb6kC,EAAyBA,EAAW,IAAImQ,GAAmB,CAAEpgB,MAAuB,SAAhBx4B,KAAKQ,WAEzFuC,KAAKs3C,SAAWj7C,GAEhB2D,KAAKu3C,qBChBN,SAASC,GAAiBC,EAAUC,EAAO1S,EAAY2Q,GAEtD,IAGIgC,EAAaC,EACbC,EAJAC,EAAa,IAAIjjB,GAAO,GACxBkjB,EAAa,EAqFjB,SAASC,EAAUviB,EAAO5vB,GAEzB6xC,EAAMna,QAAQ9H,MAAMuiB,SAAUviB,EAAMliB,EAAGkiB,EAAMje,EAAGie,EAAM5xB,EAAGgC,EAAO8vC,GAIjE,MAAO,CAENsC,cAAe,WAEd,OAAOH,GAGRI,cAAe,SAAWziB,EAAO5vB,GAEhCiyC,EAAWr1C,IAAKgzB,GAEhBuiB,EAAUF,EADVC,OAAuBl3C,IAAVgF,EAAsBA,EAAQ,IAI5CsyC,cAAe,WAEd,OAAOJ,GAGRK,cAAe,SAAWvyC,GAGzBmyC,EAAUF,EADVC,EAAalyC,IAIdwyC,OA/GD,SAAiBC,EAAYC,EAAO5iC,EAAQ6iC,GAE3C,IAAIC,EAAaF,EAAME,WAEH,OAAfA,EAEJT,EAAUF,EAAYC,GAEXU,GAAcA,EAAWrtB,UAEpC4sB,EAAUS,EAAY,GACtBD,GAAa,IAITf,EAASiB,WAAaF,IAE1Bf,EAASkB,MAAOlB,EAASmB,eAAgBnB,EAASoB,eAAgBpB,EAASqB,kBAIvEL,GAAcA,EAAWM,oBAEZl4C,IAAZg3C,KAEJA,EAAU,IAAIR,GACb,IAAI1G,GAAmB,EAAG,EAAG,GAC7B,IAAI0F,GAAgB,CACnBvrB,SAAU4Q,GAAUiB,KAAK7R,SACzB8Q,aAAcF,GAAUiB,KAAKf,aAC7BC,eAAgBH,GAAUiB,KAAKd,eAC/BwY,KAAMp+C,EACN8+C,WAAW,EACXC,YAAY,EACZ5b,KAAK,MAIC9a,SAASi0B,gBAAiB,UAClCsF,EAAQv5B,SAASi0B,gBAAiB,MAElCsF,EAAQ5U,eAAiB,SAAWwU,EAAUc,EAAO5iC,GAEpD3V,KAAK6V,YAAY5N,aAAc0N,EAAOE,cAIvCmvB,EAAW7yB,OAAQ0lC,EAAQv5B,WAI5Bu5B,EAAQnS,SAAS5a,SAAS8R,MAAM7+B,MAAQ06C,EAExCH,EAAW72C,KAAMo2C,EAASA,EAAQv5B,SAAUu5B,EAAQnS,SAAU,EAAG,OAEtD+S,GAAcA,EAAW39B,iBAEfja,IAAhB82C,IAEJA,EAAc,IAAInV,IAAsB,EAAG,EAAG,GAAK,EAAG,EAAG,GAEzDoV,EAAY,IAAIP,GACf,IAAIrF,GAAqB,EAAG,GAC5B,IAAI6D,GAAmB,CAAEd,WAAW,EAAOC,YAAY,EAAO5b,KAAK,KAGpE4L,EAAW7yB,OAAQylC,EAAUt5B,WAI9Bs5B,EAAUlS,SAASzO,IAAMwhB,EAIzBhB,EAASuB,mBAAoBrB,EAAa,KAAMC,EAAUt5B,SAAUs5B,EAAUlS,SAAUkS,EAAW,SC5FtG,SAASqB,GAAqB3b,EAAImZ,EAAYyC,GAE7C,IAAIC,EA+CJn5C,KAAKo5C,QA7CL,SAAkBr7C,GAEjBo7C,EAAOp7C,GA4CRiC,KAAKq4C,OAxCL,SAAiBh3B,EAAOlU,GAEvBmwB,EAAG+b,WAAYF,EAAM93B,EAAOlU,GAE5B+rC,EAAK/mC,OAAQhF,EAAOgsC,IAqCrBn5C,KAAKs5C,gBAjCL,SAA0Bh7B,EAAU+C,EAAOlU,GAE1C,IAAIosC,EAAY9C,EAAWj0C,IAAK,0BAEhC,GAAmB,OAAd+2C,EAAL,CAOA,IAAIlqC,EAAWiP,EAASI,WAAWrP,SAE9BA,EAASouB,8BAEbtwB,EAAQkC,EAAS6K,KAAK/M,MAEtBosC,EAAUC,yBAA0BL,EAAM,EAAGhsC,EAAOmR,EAASm7B,oBAI7DF,EAAUC,yBAA0BL,EAAM93B,EAAOlU,EAAOmR,EAASm7B,mBAIlEP,EAAK/mC,OAAQhF,EAAOgsC,EAAM76B,EAASm7B,wBAnBlCp5C,QAAQC,MAAO,mICxBlB,SAASo5C,GAAmBpc,EAAImZ,EAAYjR,GAE3C,IAAImU,EAsBJ,SAASC,EAAiBlN,GAEzB,GAAmB,UAAdA,EAAwB,CAE5B,GAAKpP,EAAGuc,yBAA0Bvc,EAAGwc,cAAexc,EAAGyc,YAAarN,UAAY,GAC3EpP,EAAGuc,yBAA0Bvc,EAAG0c,gBAAiB1c,EAAGyc,YAAarN,UAAY,EAEjF,MAAO,QAIRA,EAAY,UAIb,MAAmB,YAAdA,GAECpP,EAAGuc,yBAA0Bvc,EAAGwc,cAAexc,EAAG2c,cAAevN,UAAY,GAC7EpP,EAAGuc,yBAA0Bvc,EAAG0c,gBAAiB1c,EAAG2c,cAAevN,UAAY,EAE5E,UAMF,OAIR,IAAIA,OAAqC7rC,IAAzB2kC,EAAWkH,UAA0BlH,EAAWkH,UAAY,QACxEwN,EAAeN,EAAiBlN,GAE/BwN,IAAiBxN,IAErBrsC,QAAQmD,KAAM,uBAAwBkpC,EAAW,uBAAwBwN,EAAc,YACvFxN,EAAYwN,GAIb,IAAIC,GAA+D,IAAtC3U,EAAW2U,uBAEpCC,EAAc9c,EAAGxe,aAAcwe,EAAG+c,yBAClCC,EAAoBhd,EAAGxe,aAAcwe,EAAGid,gCACxCC,EAAiBld,EAAGxe,aAAcwe,EAAGmd,kBACrCC,EAAiBpd,EAAGxe,aAAcwe,EAAGqd,2BAErCC,EAAgBtd,EAAGxe,aAAcwe,EAAGud,oBACpCC,EAAoBxd,EAAGxe,aAAcwe,EAAGyd,4BACxCC,EAAc1d,EAAGxe,aAAcwe,EAAG2d,qBAClCC,EAAsB5d,EAAGxe,aAAcwe,EAAG6d,8BAE1CC,EAAiBd,EAAoB,EACrCe,IAA2B5E,EAAWj0C,IAAK,qBAG/C,MAAO,CAEN84C,iBA9ED,WAEC,QAAuBz6C,IAAlB84C,EAA8B,OAAOA,EAE1C,IAAIJ,EAAY9C,EAAWj0C,IAAK,kCAYhC,OARCm3C,EAFkB,OAAdJ,EAEYjc,EAAGxe,aAAcy6B,EAAUgC,gCAI3B,GAmEjB3B,gBAAiBA,EAEjBlN,UAAWA,EACXyN,uBAAwBA,EAExBC,YAAaA,EACbE,kBAAmBA,EACnBE,eAAgBA,EAChBE,eAAgBA,EAEhBE,cAAeA,EACfE,kBAAmBA,EACnBE,YAAaA,EACbE,oBAAqBA,EAErBE,eAAgBA,EAChBC,sBAAuBA,EACvBG,oBAtByBJ,GAAkBC,GC3E7C,SAASI,KAER,IAAIt9B,EAAQne,KAEX07C,EAAc,KACdC,EAAkB,EAClBC,GAAuB,EACvBC,GAAmB,EAEnB18B,EAAQ,IAAI9E,GACZyhC,EAAmB,IAAI/6C,GAEvBg7C,EAAU,CAAEh+C,MAAO,KAAM20C,aAAa,GAmFvC,SAASsJ,IAEHD,EAAQh+C,QAAU29C,IAEtBK,EAAQh+C,MAAQ29C,EAChBK,EAAQrJ,YAAciJ,EAAkB,GAIzCx9B,EAAM89B,UAAYN,EAClBx9B,EAAM+9B,gBAAkB,EAIzB,SAASC,EAAevhC,EAAQjF,EAAQ7E,EAAWsrC,GAElD,IAAIC,EAAqB,OAAXzhC,EAAkBA,EAAOxa,OAAS,EAC/Ck8C,EAAW,KAEZ,GAAiB,IAAZD,EAAgB,CAIpB,GAFAC,EAAWP,EAAQh+C,OAEI,IAAlBq+C,GAAuC,OAAbE,EAAoB,CAElD,IAAIC,EAAWzrC,EAAsB,EAAVurC,EAC1BG,EAAa7mC,EAAO4sB,mBAErBuZ,EAAiBrkC,gBAAiB+kC,IAEhB,OAAbF,GAAqBA,EAASl8C,OAASm8C,KAE3CD,EAAW,IAAI9d,aAAc+d,IAI9B,IAAM,IAAIj/C,EAAI,EAAGm/C,EAAK3rC,EAAWxT,IAAM++C,IAAY/+C,EAAGm/C,GAAM,EAE3Dt9B,EAAM9b,KAAMuX,EAAQtd,IAAM+P,aAAcmvC,EAAYV,GAEpD38B,EAAMxI,OAAOxQ,QAASm2C,EAAUG,GAChCH,EAAUG,EAAK,GAAMt9B,EAAM7E,SAM7ByhC,EAAQh+C,MAAQu+C,EAChBP,EAAQrJ,aAAc,EAMvB,OAFAv0B,EAAM89B,UAAYI,EAEXC,EAvIRt8C,KAAK+7C,QAAUA,EACf/7C,KAAKi8C,UAAY,EACjBj8C,KAAKk8C,gBAAkB,EAEvBl8C,KAAK08C,KAAO,SAAW9hC,EAAQ+hC,EAAqBhnC,GAEnD,IAAI4wB,EACe,IAAlB3rB,EAAOxa,QACPu8C,GAGoB,IAApBhB,GACAC,EAOD,OALAA,EAAuBe,EAEvBjB,EAAcS,EAAevhC,EAAQjF,EAAQ,GAC7CgmC,EAAkB/gC,EAAOxa,OAElBmmC,GAIRvmC,KAAK48C,aAAe,WAEnBf,GAAmB,EACnBM,EAAe,OAIhBn8C,KAAK68C,WAAa,WAEjBhB,GAAmB,EACnBG,KAIDh8C,KAAK88C,SAAW,SAAWliC,EAAQs6B,EAAkBC,EAAax/B,EAAQkwB,EAAOkX,GAEhF,IAAOnB,GAAmC,OAAXhhC,GAAqC,IAAlBA,EAAOxa,QAAgBy7C,IAAsB1G,EAIzF0G,EAIJM,EAAe,MAIfH,QAIK,CAEN,IAAIgB,EAAUnB,EAAmB,EAAIF,EACpCsB,EAAoB,EAAVD,EAEVV,EAAWzW,EAAMqX,eAAiB,KAEnCnB,EAAQh+C,MAAQu+C,EAEhBA,EAAWH,EAAevhC,EAAQjF,EAAQsnC,EAASF,GAEnD,IAAM,IAAIz/C,EAAI,EAAGA,IAAM2/C,IAAY3/C,EAElCg/C,EAAUh/C,GAAMo+C,EAAap+C,GAI9BuoC,EAAMqX,cAAgBZ,EACtBt8C,KAAKk8C,gBAAkBhH,EAAmBl1C,KAAKi8C,UAAY,EAC3Dj8C,KAAKi8C,WAAae,IC3FrB,SAASG,GAAiB7f,GAEzB,IAAImZ,EAAa,GAEjB,MAAO,CAENj0C,IAAK,SAAW6W,GAEf,QAA4BxY,IAAvB41C,EAAYp9B,GAEhB,OAAOo9B,EAAYp9B,GAIpB,IAAIkgC,EAEJ,OAASlgC,GAER,IAAK,sBACJkgC,EAAYjc,EAAG8f,aAAc,wBAA2B9f,EAAG8f,aAAc,4BAA+B9f,EAAG8f,aAAc,8BACzH,MAED,IAAK,iCACJ7D,EAAYjc,EAAG8f,aAAc,mCAAsC9f,EAAG8f,aAAc,uCAA0C9f,EAAG8f,aAAc,yCAC/I,MAED,IAAK,gCACJ7D,EAAYjc,EAAG8f,aAAc,kCAAqC9f,EAAG8f,aAAc,sCAAyC9f,EAAG8f,aAAc,wCAC7I,MAED,IAAK,iCACJ7D,EAAYjc,EAAG8f,aAAc,mCAAsC9f,EAAG8f,aAAc,yCACpF,MAED,QACC7D,EAAYjc,EAAG8f,aAAc/jC,GAY/B,OARmB,OAAdkgC,GAEJl5C,QAAQmD,KAAM,wBAA0B6V,EAAO,6BAIhDo9B,EAAYp9B,GAASkgC,EAEdA,IC3CV,SAAS8D,GAAiB/f,EAAI5e,EAAYw6B,GAEzC,IAAIlU,EAAa,GACbsY,EAAsB,GAE1B,SAASC,EAAmBv7C,GAE3B,IAAIsc,EAAWtc,EAAMC,OACjBu7C,EAAiBxY,EAAY1mB,EAAS+lB,IAQ1C,IAAM,IAAIhrB,KANoB,OAAzBmkC,EAAe37C,OAEnB6c,EAAWgf,OAAQ8f,EAAe37C,OAIjB27C,EAAe9+B,WAEhCA,EAAWgf,OAAQ8f,EAAe9+B,WAAYrF,IAI/CiF,EAAS3c,oBAAqB,UAAW47C,UAElCvY,EAAY1mB,EAAS+lB,IAI5B,IAAIh+B,EAAYi3C,EAAqBh/B,EAAS+lB,IAEzCh+B,IAEJqY,EAAWgf,OAAQr3B,UACZi3C,EAAqBh/B,EAAS+lB,MAItCh+B,EAAYi3C,EAAqBE,EAAenZ,OAI/C3lB,EAAWgf,OAAQr3B,UACZi3C,EAAqBE,EAAenZ,KAM5C6U,EAAKuE,OAAOzY,aA8Hb,MAAO,CAENxiC,IA5HD,SAAcmb,EAAQW,GAErB,IAAIk/B,EAAiBxY,EAAY1mB,EAAS+lB,IAE1C,OAAKmZ,IAELl/B,EAASnd,iBAAkB,UAAWo8C,GAEjCj/B,EAASG,iBAEb++B,EAAiBl/B,EAENA,EAASC,kBAEc1d,IAA7Byd,EAASo/B,kBAEbp/B,EAASo/B,iBAAkB,IAAIvN,IAAiBzyB,cAAeC,IAIhE6/B,EAAiBl/B,EAASo/B,iBAI3B1Y,EAAY1mB,EAAS+lB,IAAOmZ,EAE5BtE,EAAKuE,OAAOzY,aAELwY,IAiGPrrC,OA7FD,SAAiBmM,GAEhB,IAAIzc,EAAQyc,EAASzc,MACjB87C,EAAqBr/B,EAASI,WAQlC,IAAM,IAAIrF,KANK,OAAVxX,GAEJ6c,EAAWvM,OAAQtQ,EAAOy7B,EAAGsgB,sBAIZD,EAEjBj/B,EAAWvM,OAAQwrC,EAAoBtkC,GAAQikB,EAAGugB,cAMnD,IAAIzN,EAAkB9xB,EAAS8xB,gBAE/B,IAAM,IAAI/2B,KAAQ+2B,EAIjB,IAFA,IAAIluC,EAAQkuC,EAAiB/2B,GAEnB/b,EAAI,EAAG8E,EAAIF,EAAM9B,OAAQ9C,EAAI8E,EAAG9E,IAEzCohB,EAAWvM,OAAQjQ,EAAO5E,GAAKggC,EAAGugB,eAoEpCC,sBA5DD,SAAgCx/B,GAE/B,IAAIjY,EAAYi3C,EAAqBh/B,EAAS+lB,IAE9C,GAAKh+B,EAAY,OAAOA,EAExB,IAuBKnE,EAvBDwnC,EAAU,GAEVqU,EAAgBz/B,EAASzc,MACzB87C,EAAqBr/B,EAASI,WAIlC,GAAuB,OAAlBq/B,EAIJ,IAFA,IAEUzgD,EAAI,EAAG8E,GAFbF,EAAQ67C,EAAc77C,OAEC9B,OAAQ9C,EAAI8E,EAAG9E,GAAK,EAAI,CAElD,IAAIsG,EAAI1B,EAAO5E,EAAI,GACfuG,EAAI3B,EAAO5E,EAAI,GACfoJ,EAAIxE,EAAO5E,EAAI,GAEnBosC,EAAQjoC,KAAMmC,EAAGC,EAAGA,EAAG6C,EAAGA,EAAG9C,QAQ9B,IAAUtG,EAAI,EAAG8E,GAFbF,EAAQy7C,EAAmBtuC,SAASnN,OAEX9B,OAAS,EAAM,EAAG9C,EAAI8E,EAAG9E,GAAK,EAEtDsG,EAAItG,EAAI,EACRuG,EAAIvG,EAAI,EACRoJ,EAAIpJ,EAAI,EAEZosC,EAAQjoC,KAAMmC,EAAGC,EAAGA,EAAG6C,EAAGA,EAAG9C,GAc/B,OANAyC,EAAY,IAAMgjC,GAAUK,GAAY,MAAQb,GAAwBF,IAAyBe,EAAS,GAE1GhrB,EAAWvM,OAAQ9L,EAAWi3B,EAAGsgB,sBAEjCN,EAAqBh/B,EAAS+lB,IAAOh+B,EAE9BA,IC9KT,SAAS23C,GAA4B1gB,EAAImZ,EAAYyC,GAEpD,IAAIC,EAQA/3C,EAAMk+B,EAoCVt/B,KAAKo5C,QA1CL,SAAkBr7C,GAEjBo7C,EAAOp7C,GAyCRiC,KAAK6xC,SAnCL,SAAmB9zC,GAElBqD,EAAOrD,EAAMqD,KACbk+B,EAAkBvhC,EAAMuhC,iBAiCzBt/B,KAAKq4C,OA7BL,SAAiBh3B,EAAOlU,GAEvBmwB,EAAG2gB,aAAc9E,EAAMhsC,EAAO/L,EAAMigB,EAAQie,GAE5C4Z,EAAK/mC,OAAQhF,EAAOgsC,IA0BrBn5C,KAAKs5C,gBAtBL,SAA0Bh7B,EAAU+C,EAAOlU,GAE1C,IAAIosC,EAAY9C,EAAWj0C,IAAK,0BAEb,OAAd+2C,GAOLA,EAAU2E,2BAA4B/E,EAAMhsC,EAAO/L,EAAMigB,EAAQie,EAAiBhhB,EAASm7B,mBAE3FP,EAAK/mC,OAAQhF,EAAOgsC,EAAM76B,EAASm7B,oBAPlCp5C,QAAQC,MAAO,0ICjClB,SAAS69C,GAAW7gB,GAEnB,IAKI+a,EAAS,CACZ+F,MAAO,EACPC,MAAO,EACPC,UAAW,EACXpmC,OAAQ,EACRqmC,MAAO,GAsDR,MAAO,CACNd,OAjEY,CACZzY,WAAY,EACZ5pB,SAAU,GAgEVi9B,OAAQA,EACRmG,SAAU,KACVC,WAAW,EACXC,MAfD,WAECrG,EAAO+F,QACP/F,EAAOgG,MAAQ,EACfhG,EAAOiG,UAAY,EACnBjG,EAAOngC,OAAS,EAChBmgC,EAAOkG,MAAQ,GAUfpsC,OAzDD,SAAiBhF,EAAOgsC,EAAMwF,GAM7B,OAJAA,EAAgBA,GAAiB,EAEjCtG,EAAOgG,QAEElF,GAER,KAAK7b,EAAGshB,UACPvG,EAAOiG,WAAaK,GAAkBxxC,EAAQ,GAC9C,MAED,KAAKmwB,EAAGuhB,eACR,KAAKvhB,EAAGwhB,aACPzG,EAAOiG,WAAaK,GAAkBxxC,EAAQ,GAC9C,MAED,KAAKmwB,EAAGyhB,MACP1G,EAAOkG,OAASI,GAAkBxxC,EAAQ,GAC1C,MAED,KAAKmwB,EAAG0hB,WACP3G,EAAOkG,OAASI,GAAkBxxC,EAAQ,GAC1C,MAED,KAAKmwB,EAAG2hB,UACP5G,EAAOkG,OAASI,EAAgBxxC,EAChC,MAED,KAAKmwB,EAAG4hB,OACP7G,EAAOngC,QAAUymC,EAAgBxxC,EACjC,MAED,QACC9M,QAAQC,MAAO,sCAAuC64C,MCjD1D,SAASgG,GAAkBv7C,EAAGC,GAE7B,OAAO5G,KAAKkI,IAAKtB,EAAG,IAAQ5G,KAAKkI,IAAKvB,EAAG,IAI1C,SAASw7C,GAAmB9hB,GAE3B,IAAI+hB,EAAiB,GACjBC,EAAkB,IAAI9gB,aAAc,GAwFxC,MAAO,CAENrsB,OAxFD,SAAiBwL,EAAQW,EAAUonB,EAAU6Z,GAE5C,IAAIC,EAAmB7hC,EAAO8hC,sBAE1Br/C,EAASo/C,EAAiBp/C,OAE1Bs/C,EAAaL,EAAgB/gC,EAAS+lB,IAE1C,QAAoBxjC,IAAf6+C,EAA2B,CAI/BA,EAAa,GAEb,IAAM,IAAIpiD,EAAI,EAAGA,EAAI8C,EAAQ9C,IAE5BoiD,EAAYpiD,GAAM,CAAEA,EAAG,GAIxB+hD,EAAgB/gC,EAAS+lB,IAAOqb,EAIjC,IAAIrY,EAAe3B,EAAS2B,cAAgB/oB,EAAS8xB,gBAAgB/gC,SACjEi4B,EAAe5B,EAAS4B,cAAgBhpB,EAAS8xB,gBAAgBz5B,OAIrE,IAAUrZ,EAAI,EAAGA,EAAI8C,EAAQ9C,IAIJ,KAFpBqiD,EAAYD,EAAYpiD,IAEZ,KAEV+pC,GAAe/oB,EAASi0B,gBAAiB,cAAgBj1C,GACzDgqC,GAAehpB,EAASi0B,gBAAiB,cAAgBj1C,IAQhE,IAAUA,EAAI,EAAGA,EAAI8C,EAAQ9C,KAExBqiD,EAAYD,EAAYpiD,IAEjB,GAAMA,EACjBqiD,EAAW,GAAMH,EAAkBliD,GAQpC,IAJAoiD,EAAW1S,KAAMmS,IAIP7hD,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAE9B,IAAIqiD,EAEJ,GAFIA,EAAYD,EAAYpiD,GAEX,CAEhB,IAAIuE,EAAQ89C,EAAW,GACnB5hD,EAAQ4hD,EAAW,GAEvB,GAAK5hD,EAAQ,CAEPspC,GAAe/oB,EAASwzB,aAAc,cAAgBx0C,EAAG+pC,EAAcxlC,IACvEylC,GAAehpB,EAASwzB,aAAc,cAAgBx0C,EAAGgqC,EAAczlC,IAE5Ey9C,EAAiBhiD,GAAMS,EACvB,UAMFuhD,EAAiBhiD,GAAM,EAIxBiiD,EAAQK,cAAcC,SAAUviB,EAAI,wBAAyBgiB,KC7F/D,SAASQ,GAAc9a,EAAYkU,GAElC,IAAI6G,EAAa,GAmCjB,MAAO,CAEN5tC,OAnCD,SAAiBwL,GAEhB,IAAIygC,EAAQlF,EAAKb,OAAO+F,MAEpB9/B,EAAWX,EAAOW,SAClBk/B,EAAiBxY,EAAWxiC,IAAKmb,EAAQW,GAkB7C,OAdKyhC,EAAYvC,EAAenZ,MAAS+Z,IAEnC9/B,EAASC,YAEbi/B,EAAe3K,iBAAkBl1B,GAIlCqnB,EAAW7yB,OAAQqrC,GAEnBuC,EAAYvC,EAAenZ,IAAO+Z,GAI5BZ,GAaPlhC,QATD,WAECyjC,EAAa,KC9Bf,SAASC,GAAavkC,EAAQ9C,EAASC,EAAOC,EAAOC,EAAWC,EAAWC,EAAQ5X,EAAM6X,EAAYC,GAEpGuC,OAAoB5a,IAAX4a,EAAuBA,EAAS,GACzC9C,OAAsB9X,IAAZ8X,EAAwBA,EAAUjgB,GAE5C+f,GAAQpW,KAAMrC,KAAMyb,EAAQ9C,EAASC,EAAOC,EAAOC,EAAWC,EAAWC,EAAQ5X,EAAM6X,EAAYC,GAEnGlZ,KAAK6Z,OAAQ,EjByDds6B,GAASjzC,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ/a,GAAgBoB,WAAa,CAE/EkC,YAAa+wC,GAEb8L,YAAY,EAEZC,gBAAiB,aAEjB9J,UAAW,SAAWtQ,GAErB,QAAgBjlC,IAAXilC,EAEL,IAAM,IAAIC,KAAOD,EAAS,CAEzB,IAAIqa,EAAWra,EAAQC,GAEvB,QAAkBllC,IAAbs/C,EAQL,GAAa,YAARpa,EAAL,CAQA,IAAIqa,EAAepgD,KAAM+lC,QAEHllC,IAAjBu/C,EAOAA,GAAgBA,EAAah1B,QAEjCg1B,EAAa39C,IAAK09C,GAELC,GAAgBA,EAAaxrC,WAAiBurC,GAAYA,EAASvrC,UAEhFwrC,EAAa/8C,KAAM88C,GAKnBngD,KAAM+lC,GAHa,aAARA,EAGGl0B,OAAQsuC,GAIRA,EApBd9/C,QAAQmD,KAAM,SAAWxD,KAAKoB,KAAO,MAAQ2kC,EAAM,8CAVnD1lC,QAAQmD,KAAM,SAAWxD,KAAKoB,KAAO,sEACrCpB,KAAKs0C,Y/BpFgB,I+BoFA6L,OATrB9/C,QAAQmD,KAAM,oBAAsBuiC,EAAM,+BA8C7C9qB,OAAQ,SAAWC,GAElB,IAAImlC,OAAoBx/C,IAATqa,GAAsC,iBAATA,EAEvCmlC,IAEJnlC,EAAO,CACNE,SAAU,GACVK,OAAQ,KAKV,IAAIvB,EAAO,CACVoB,SAAU,CACTvB,QAAS,IACT3Y,KAAM,WACNma,UAAW,oBAyGb,SAASqqB,EAAkBC,GAE1B,IAAIC,EAAS,GAEb,IAAM,IAAIC,KAAOF,EAAQ,CAExB,IAAI3rB,EAAO2rB,EAAOE,UACX7rB,EAAKoB,SACZwqB,EAAOrkC,KAAMyY,GAId,OAAO4rB,EAIR,GApHA5rB,EAAKd,KAAOpZ,KAAKoZ,KACjBc,EAAK9Y,KAAOpB,KAAKoB,KAEE,KAAdpB,KAAKqZ,OAAca,EAAKb,KAAOrZ,KAAKqZ,MAEpCrZ,KAAKy1B,OAASz1B,KAAKy1B,MAAMrK,UAAUlR,EAAKub,MAAQz1B,KAAKy1B,MAAMU,eAExCt1B,IAAnBb,KAAKo8B,YAA0BliB,EAAKkiB,UAAYp8B,KAAKo8B,gBAClCv7B,IAAnBb,KAAKq8B,YAA0BniB,EAAKmiB,UAAYr8B,KAAKq8B,WAErDr8B,KAAK+7B,UAAY/7B,KAAK+7B,SAAS3Q,UAAUlR,EAAK6hB,SAAW/7B,KAAK+7B,SAAS5F,UAC5C,IAA3Bn2B,KAAKsgD,oBAA0BpmC,EAAKomC,kBAAoBtgD,KAAKsgD,mBAE7DtgD,KAAKi8B,UAAYj8B,KAAKi8B,SAAS7Q,UAAUlR,EAAK+hB,SAAWj8B,KAAKi8B,SAAS9F,eACpDt1B,IAAnBb,KAAKk8B,YAA0BhiB,EAAKgiB,UAAYl8B,KAAKk8B,gBAClCr7B,IAAnBb,KAAKkgC,YAA0BhmB,EAAKgmB,UAAYlgC,KAAKkgC,gBACzBr/B,IAA5Bb,KAAKmgC,qBAAmCjmB,EAAKimB,mBAAqBngC,KAAKmgC,oBAEvEngC,KAAKi3B,KAAOj3B,KAAKi3B,IAAInc,YAAYZ,EAAK+c,IAAMj3B,KAAKi3B,IAAIhc,OAAQC,GAAO9B,MACpEpZ,KAAKm3B,UAAYn3B,KAAKm3B,SAASrc,YAAYZ,EAAKid,SAAWn3B,KAAKm3B,SAASlc,OAAQC,GAAO9B,MACxFpZ,KAAKg4B,UAAYh4B,KAAKg4B,SAASld,YAAYZ,EAAK8d,SAAWh4B,KAAKg4B,SAAS/c,OAAQC,GAAO9B,MACxFpZ,KAAKq4B,SAAWr4B,KAAKq4B,QAAQvd,YAEjCZ,EAAKme,QAAUr4B,KAAKq4B,QAAQpd,OAAQC,GAAO9B,KAC3Cc,EAAKoe,UAAYt4B,KAAKs4B,WAGlBt4B,KAAKw4B,WAAax4B,KAAKw4B,UAAU1d,YAErCZ,EAAKse,UAAYx4B,KAAKw4B,UAAUvd,OAAQC,GAAO9B,KAC/Cc,EAAKue,YAAcz4B,KAAKy4B,YAAYtyB,WAGhCnG,KAAK24B,iBAAmB34B,KAAK24B,gBAAgB7d,YAEjDZ,EAAKye,gBAAkB34B,KAAK24B,gBAAgB1d,OAAQC,GAAO9B,KAC3Dc,EAAK0e,kBAAoB54B,KAAK44B,kBAC9B1e,EAAK2e,iBAAmB74B,KAAK64B,kBAGzB74B,KAAK+4B,cAAgB/4B,KAAK+4B,aAAaje,YAAYZ,EAAK6e,aAAe/4B,KAAK+4B,aAAa9d,OAAQC,GAAO9B,MACxGpZ,KAAKi5B,cAAgBj5B,KAAKi5B,aAAane,YAAYZ,EAAK+e,aAAej5B,KAAKi5B,aAAahe,OAAQC,GAAO9B,MAExGpZ,KAAKm4B,aAAen4B,KAAKm4B,YAAYrd,YAAYZ,EAAKie,YAAcn4B,KAAKm4B,YAAYld,OAAQC,GAAO9B,MACpGpZ,KAAKq3B,aAAer3B,KAAKq3B,YAAYvc,YAAYZ,EAAKmd,YAAcr3B,KAAKq3B,YAAYpc,OAAQC,GAAO9B,MAEpGpZ,KAAKu3B,QAAUv3B,KAAKu3B,OAAOzc,YAE/BZ,EAAKqd,OAASv3B,KAAKu3B,OAAOtc,OAAQC,GAAO9B,KACzCc,EAAKud,aAAez3B,KAAKy3B,cAIrBz3B,KAAKm5B,aAAen5B,KAAKm5B,YAAYre,YAEzCZ,EAAKif,YAAcn5B,KAAKm5B,YAAYle,OAAQC,GAAO9B,WAIjCvY,IAAdb,KAAKwd,OAAqBtD,EAAKsD,KAAOxd,KAAKwd,WAClB3c,IAAzBb,KAAKugD,kBAAgCrmC,EAAKqmC,gBAAkBvgD,KAAKugD,iBAEjEvgD,KAAKo0C,WAAa/9C,IAAiB6jB,EAAKk6B,SAAWp0C,KAAKo0C,WACnC,IAArBp0C,KAAKs0C,cAAuBp6B,EAAKo6B,YAAct0C,KAAKs0C,aACpDt0C,KAAKq0C,OAASr+C,IAAYkkB,EAAKm6B,KAAOr0C,KAAKq0C,MAC3Cr0C,KAAK+iC,eAAiB5sC,IAAW+jB,EAAK6oB,aAAe/iC,KAAK+iC,cAE1D/iC,KAAKg3B,QAAU,IAAI9c,EAAK8c,QAAUh3B,KAAKg3B,UAClB,IAArBh3B,KAAKu0C,cAAuBr6B,EAAKq6B,YAAcv0C,KAAKu0C,aAEzDr6B,EAAK46B,UAAY90C,KAAK80C,UACtB56B,EAAK66B,UAAY/0C,KAAK+0C,UACtB76B,EAAK86B,WAAah1C,KAAKg1C,WAGA,IAAlBh1C,KAAK6X,WAAiBqC,EAAKrC,SAAW7X,KAAK6X,UAExB,IAAnB7X,KAAKu2C,YAAkBr8B,EAAKq8B,UAAYv2C,KAAKu2C,gBAC3B11C,IAAlBb,KAAKw8B,WAAyBtiB,EAAKsiB,SAAWx8B,KAAKw8B,eAClC37B,IAAjBb,KAAKwgD,UAAwBtmC,EAAKsmC,QAAUxgD,KAAKwgD,cAClC3/C,IAAfb,KAAKoO,QAAsB8L,EAAK9L,MAAQpO,KAAKoO,QAE1B,IAAnBpO,KAAKy1C,YAAqBv7B,EAAKu7B,WAAY,GAE3Cz1C,KAAK01C,UAAY,IAAIx7B,EAAKw7B,UAAY11C,KAAK01C,YACf,IAA5B11C,KAAK21C,qBAA8Bz7B,EAAKy7B,mBAAqB31C,KAAK21C,qBAE/C,IAAnB31C,KAAK+1C,YAAqB77B,EAAK67B,UAAY/1C,KAAK+1C,WAChD/1C,KAAKg2C,mBAAqB,IAAI97B,EAAK87B,mBAAqBh2C,KAAKg2C,oBACnC,UAA1Bh2C,KAAKi2C,mBAA+B/7B,EAAK+7B,iBAAmBj2C,KAAKi2C,kBACtC,UAA3Bj2C,KAAKk2C,oBAAgCh8B,EAAKg8B,kBAAoBl2C,KAAKk2C,oBAE7C,IAAtBl2C,KAAKqnC,eAAwBntB,EAAKmtB,cAAe,IAC/B,IAAlBrnC,KAAKm2C,WAAoBj8B,EAAKi8B,UAAW,IAExB,IAAjBn2C,KAAKgiC,UAAoB9nB,EAAK8nB,SAAU,GACJ,OAApCsD,KAAKC,UAAWvlC,KAAKqiC,YAAsBnoB,EAAKmoB,SAAWriC,KAAKqiC,UAoBhEge,EAAS,CAEb,IAAIjlC,EAAWwqB,EAAkB1qB,EAAKE,UAClCK,EAASmqB,EAAkB1qB,EAAKO,QAE/BL,EAAShb,OAAS,IAAI8Z,EAAKkB,SAAWA,GACtCK,EAAOrb,OAAS,IAAI8Z,EAAKuB,OAASA,GAIxC,OAAOvB,GAIR/W,MAAO,WAEN,OAAO,IAAInD,KAAKoD,aAAcC,KAAMrD,OAIrCqD,KAAM,SAAW2X,GAEhBhb,KAAKqZ,KAAO2B,EAAO3B,KAEnBrZ,KAAKo5B,IAAMpe,EAAOoe,IAClBp5B,KAAKy5B,OAASze,EAAOye,OAErBz5B,KAAKo0C,SAAWp5B,EAAOo5B,SACvBp0C,KAAKq0C,KAAOr5B,EAAOq5B,KACnBr0C,KAAKs0C,YAAct5B,EAAOs5B,YAC1Bt0C,KAAK+iC,aAAe/nB,EAAO+nB,aAE3B/iC,KAAKg3B,QAAUhc,EAAOgc,QACtBh3B,KAAKu0C,YAAcv5B,EAAOu5B,YAE1Bv0C,KAAKw0C,SAAWx5B,EAAOw5B,SACvBx0C,KAAKy0C,SAAWz5B,EAAOy5B,SACvBz0C,KAAK00C,cAAgB15B,EAAO05B,cAC5B10C,KAAK20C,cAAgB35B,EAAO25B,cAC5B30C,KAAK40C,cAAgB55B,EAAO45B,cAC5B50C,KAAK60C,mBAAqB75B,EAAO65B,mBAEjC70C,KAAK80C,UAAY95B,EAAO85B,UACxB90C,KAAK+0C,UAAY/5B,EAAO+5B,UACxB/0C,KAAKg1C,WAAah6B,EAAOg6B,WAEzBh1C,KAAKq1C,WAAar6B,EAAOq6B,WAEzBr1C,KAAK0sC,UAAY1xB,EAAO0xB,UAExB1sC,KAAKs1C,cAAgBt6B,EAAOs6B,cAC5Bt1C,KAAKu1C,oBAAsBv6B,EAAOu6B,oBAClCv1C,KAAKw1C,mBAAqBx6B,EAAOw6B,mBAEjCx1C,KAAKy1C,UAAYz6B,EAAOy6B,UAExBz1C,KAAK01C,UAAY16B,EAAO06B,UACxB11C,KAAK21C,mBAAqB36B,EAAO26B,mBAEjC31C,KAAK41C,SAAW56B,EAAO46B,SAEvB51C,KAAKgiC,QAAUhnB,EAAOgnB,QACtBhiC,KAAKqiC,SAAWiD,KAAKW,MAAOX,KAAKC,UAAWvqB,EAAOqnB,WAEnDriC,KAAKm1C,YAAcn6B,EAAOm6B,YAC1Bn1C,KAAKk1C,iBAAmBl6B,EAAOk6B,iBAE/B,IAAIuL,EAAYzlC,EAAOi6B,eACtByL,EAAY,KAEb,GAAmB,OAAdD,EAAqB,CAEzB,IAAIxiD,EAAIwiD,EAAUrgD,OAClBsgD,EAAY,IAAIp1B,MAAOrtB,GAEvB,IAAM,IAAIX,EAAI,EAAGA,IAAMW,IAAMX,EAC5BojD,EAAWpjD,GAAMmjD,EAAWnjD,GAAI6F,QAQlC,OAJAnD,KAAKi1C,eAAiByL,EAEtB1gD,KAAKo1C,WAAap6B,EAAOo6B,WAElBp1C,MAIRsc,QAAS,WAERtc,KAAK+B,cAAe,CAAEX,KAAM,eI7R9By0C,GAAkB30C,UAAYF,OAAO6Z,OAAQs5B,GAASjzC,WACtD20C,GAAkB30C,UAAUkC,YAAcyyC,GAE1CA,GAAkB30C,UAAUy/C,qBAAsB,EAElD9K,GAAkB30C,UAAUmC,KAAO,SAAW2X,GA+B7C,OA7BAm5B,GAASjzC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEpChb,KAAKy1B,MAAMpyB,KAAM2X,EAAOya,OAExBz1B,KAAKi3B,IAAMjc,EAAOic,IAElBj3B,KAAKg4B,SAAWhd,EAAOgd,SACvBh4B,KAAKi4B,kBAAoBjd,EAAOid,kBAEhCj4B,KAAK63B,MAAQ7c,EAAO6c,MACpB73B,KAAK83B,eAAiB9c,EAAO8c,eAE7B93B,KAAKq3B,YAAcrc,EAAOqc,YAE1Br3B,KAAKm3B,SAAWnc,EAAOmc,SAEvBn3B,KAAKu3B,OAASvc,EAAOuc,OACrBv3B,KAAK81C,QAAU96B,EAAO86B,QACtB91C,KAAKy3B,aAAezc,EAAOyc,aAC3Bz3B,KAAK03B,gBAAkB1c,EAAO0c,gBAE9B13B,KAAK+1C,UAAY/6B,EAAO+6B,UACxB/1C,KAAKg2C,mBAAqBh7B,EAAOg7B,mBACjCh2C,KAAKi2C,iBAAmBj7B,EAAOi7B,iBAC/Bj2C,KAAKk2C,kBAAoBl7B,EAAOk7B,kBAEhCl2C,KAAKm2C,SAAWn7B,EAAOm7B,SACvBn2C,KAAKqnC,aAAersB,EAAOqsB,aAEpBrnC,MCjCRq2C,GAAen1C,UAAYF,OAAO6Z,OAAQs5B,GAASjzC,WACnDm1C,GAAen1C,UAAUkC,YAAcizC,GAEvCA,GAAen1C,UAAU0/C,kBAAmB,EAE5CvK,GAAen1C,UAAUmC,KAAO,SAAW2X,GAwB1C,OAtBAm5B,GAASjzC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEpChb,KAAK67B,eAAiB7gB,EAAO6gB,eAC7B77B,KAAK47B,aAAe5gB,EAAO4gB,aAE3B57B,KAAK8qB,SAAWF,GAAcznB,MAAO6X,EAAO8P,UAE5C9qB,KAAKs2C,QAAUt1C,OAAOC,OAAQ,GAAI+Z,EAAOs7B,SAEzCt2C,KAAK+1C,UAAY/6B,EAAO+6B,UACxB/1C,KAAKg2C,mBAAqBh7B,EAAOg7B,mBAEjCh2C,KAAKy5B,OAASze,EAAOye,OACrBz5B,KAAKw2C,SAAWx7B,EAAOw7B,SAEvBx2C,KAAKm2C,SAAWn7B,EAAOm7B,SAEvBn2C,KAAKqnC,aAAersB,EAAOqsB,aAC3BrnC,KAAKsnC,aAAetsB,EAAOssB,aAE3BtnC,KAAKy2C,WAAaz7B,EAAOy7B,WAElBz2C,MAIRq2C,GAAen1C,UAAU+Z,OAAS,SAAWC,GAE5C,IAAIhB,EAAOi6B,GAASjzC,UAAU+Z,OAAO5Y,KAAMrC,KAAMkb,GAMjD,OAJAhB,EAAK4Q,SAAW9qB,KAAK8qB,SACrB5Q,EAAK0hB,aAAe57B,KAAK47B,aACzB1hB,EAAK2hB,eAAiB77B,KAAK67B,eAEpB3hB,GJ7GRlZ,OAAOC,OAAQg2C,GAAI/1C,UAAW,CAE7BuB,IAAK,SAAWy0C,EAAQh2B,GAKvB,OAHAlhB,KAAKk3C,OAAO7zC,KAAM6zC,GAClBl3C,KAAKkhB,UAAU7d,KAAM6d,GAEdlhB,MAIRmD,MAAO,WAEN,OAAO,IAAInD,KAAKoD,aAAcC,KAAMrD,OAIrCqD,KAAM,SAAWw9C,GAKhB,OAHA7gD,KAAKk3C,OAAO7zC,KAAMw9C,EAAI3J,QACtBl3C,KAAKkhB,UAAU7d,KAAMw9C,EAAI3/B,WAElBlhB,MAIR8gD,GAAI,SAAWriD,EAAGwD,GASjB,YAPgBpB,IAAXoB,IAEJ5B,QAAQmD,KAAM,2CACdvB,EAAS,IAAInB,IAIPmB,EAAOoB,KAAMrD,KAAKkhB,WAAY/c,eAAgB1F,GAAI8E,IAAKvD,KAAKk3C,SAIpEtsC,OAAQ,SAAWtH,GAIlB,OAFAtD,KAAKkhB,UAAU7d,KAAMC,GAAIS,IAAK/D,KAAKk3C,QAAS9xC,YAErCpF,MAIR+gD,OAAQ,WAEP,IAAItrD,EAAK,IAAIqL,GAEb,OAAO,SAAiBrC,GAIvB,OAFAuB,KAAKk3C,OAAO7zC,KAAMrD,KAAK8gD,GAAIriD,EAAGhJ,IAEvBuK,MARD,GAcRghD,oBAAqB,SAAWhjC,EAAO/b,QAEtBpB,IAAXoB,IAEJ5B,QAAQmD,KAAM,4DACdvB,EAAS,IAAInB,IAIdmB,EAAO+B,WAAYga,EAAOhe,KAAKk3C,QAE/B,IAAI+J,EAAoBh/C,EAAO8C,IAAK/E,KAAKkhB,WAEzC,OAAK+/B,EAAoB,EAEjBh/C,EAAOoB,KAAMrD,KAAKk3C,QAInBj1C,EAAOoB,KAAMrD,KAAKkhB,WAAY/c,eAAgB88C,GAAoB19C,IAAKvD,KAAKk3C,SAIpFl3B,gBAAiB,SAAWhC,GAE3B,OAAO/gB,KAAKgI,KAAMjF,KAAKkhD,kBAAmBljC,KAI3CkjC,kBAAmB,WAElB,IAAIzrD,EAAK,IAAIqL,GAEb,OAAO,SAA4Bkd,GAElC,IAAIijC,EAAoBxrD,EAAGuO,WAAYga,EAAOhe,KAAKk3C,QAASnyC,IAAK/E,KAAKkhB,WAItE,OAAK+/B,EAAoB,EAEjBjhD,KAAKk3C,OAAO1xC,kBAAmBwY,IAIvCvoB,EAAG4N,KAAMrD,KAAKkhB,WAAY/c,eAAgB88C,GAAoB19C,IAAKvD,KAAKk3C,QAEjEzhD,EAAG+P,kBAAmBwY,KAlBZ,GAwBnBmjC,qBAEKrN,GAAY,IAAIhzC,GAChBizC,GAAS,IAAIjzC,GACb+rC,GAAO,IAAI/rC,GAER,SAA8Bue,EAAI5pB,EAAI2rD,EAAoBC,GAShEvN,GAAUzwC,KAAMgc,GAAK9b,IAAK9N,GAAK0O,eAAgB,IAC/C4vC,GAAO1wC,KAAM5N,GAAKsO,IAAKsb,GAAKja,YAC5BynC,GAAKxpC,KAAMrD,KAAKk3C,QAASnzC,IAAK+vC,IAE9B,IAMIwN,EAAI/uC,EAAIgvC,EAASC,EANjBC,EAAkC,GAAtBpiC,EAAG9Z,WAAY9P,GAC3BisD,GAAQ1hD,KAAKkhB,UAAUnc,IAAKgvC,IAC5B4N,EAAK9U,GAAK9nC,IAAK/E,KAAKkhB,WACpB5iB,GAAOuuC,GAAK9nC,IAAKgvC,IACjBrtC,EAAImmC,GAAK7nC,WACTiJ,EAAMhR,KAAKkI,IAAK,EAAIu8C,EAAMA,GAG9B,GAAKzzC,EAAM,EAQV,GAHAsE,EAAKmvC,EAAMC,EAAKrjD,EAChBkjD,EAASC,EAAYxzC,GAFrBqzC,EAAKI,EAAMpjD,EAAKqjD,IAIL,EAEV,GAAKpvC,IAAQivC,EAEZ,GAAKjvC,GAAMivC,EAAS,CAKnB,IAAII,EAAS,EAAI3zC,EAGjBszC,GAFAD,GAAMM,IAEWN,EAAKI,GADtBnvC,GAAMqvC,GAC2B,EAAID,GAAOpvC,GAAOmvC,EAAMJ,EAAK/uC,EAAK,EAAIjU,GAAOoI,OAM9E6L,EAAKkvC,EAELF,IADAD,EAAKrkD,KAAK9H,IAAK,IAAOusD,EAAMnvC,EAAKovC,KAChBL,EAAK/uC,GAAOA,EAAK,EAAIjU,GAAOoI,OAQ9C6L,GAAOkvC,EAEPF,IADAD,EAAKrkD,KAAK9H,IAAK,IAAOusD,EAAMnvC,EAAKovC,KAChBL,EAAK/uC,GAAOA,EAAK,EAAIjU,GAAOoI,OAMzC6L,IAAQivC,EAMZD,IAFAD,EAAKrkD,KAAK9H,IAAK,KAASusD,EAAMD,EAAYE,KAEzBL,GADjB/uC,EAAO+uC,EAAK,GAAQG,EAAYxkD,KAAK/H,IAAK+H,KAAK9H,KAAOssD,GAAanjD,GAAMmjD,KAC5ClvC,EAAK,EAAIjU,GAAOoI,EAElC6L,GAAMivC,GAIjBF,EAAK,EAELC,GADAhvC,EAAKtV,KAAK/H,IAAK+H,KAAK9H,KAAOssD,GAAanjD,GAAMmjD,KAC7BlvC,EAAK,EAAIjU,GAAOoI,GAQjC66C,IAFAD,EAAKrkD,KAAK9H,IAAK,IAAOusD,EAAMD,EAAYE,KAEvBL,GADjB/uC,EAAO+uC,EAAK,EAAMG,EAAYxkD,KAAK/H,IAAK+H,KAAK9H,KAAOssD,GAAanjD,GAAMmjD,KAC1ClvC,EAAK,EAAIjU,GAAOoI,OAU/C6L,EAAOmvC,EAAM,GAAQD,EAAYA,EAEjCF,IADAD,EAAKrkD,KAAK9H,IAAK,IAAOusD,EAAMnvC,EAAKovC,KAChBL,EAAK/uC,GAAOA,EAAK,EAAIjU,GAAOoI,EAgB9C,OAZK06C,GAEJA,EAAmB/9C,KAAMrD,KAAKkhB,WAAY/c,eAAgBm9C,GAAK/9C,IAAKvD,KAAKk3C,QAIrEmK,GAEJA,EAAuBh+C,KAAM0wC,IAAS5vC,eAAgBoO,GAAKhP,IAAKuwC,IAI1DyN,IAMTM,gBAAiB,WAEhB,IAAIpsD,EAAK,IAAIqL,GAEb,OAAO,SAA0ByX,EAAQtW,GAExCxM,EAAGuO,WAAYuU,EAAO9R,OAAQzG,KAAKk3C,QACnC,IAAI4K,EAAMrsD,EAAGsP,IAAK/E,KAAKkhB,WACnBvjB,EAAKlI,EAAGsP,IAAKtP,GAAOqsD,EAAMA,EAC1BC,EAAUxpC,EAAOrB,OAASqB,EAAOrB,OAErC,GAAKvZ,EAAKokD,EAAU,OAAO,KAE3B,IAAIC,EAAM/kD,KAAKgI,KAAM88C,EAAUpkD,GAG3BskD,EAAKH,EAAME,EAGXE,EAAKJ,EAAME,EAGf,OAAKC,EAAK,GAAKC,EAAK,EAAW,KAK1BD,EAAK,EAAWjiD,KAAK8gD,GAAIoB,EAAIjgD,GAG3BjC,KAAK8gD,GAAImB,EAAIhgD,IA9BL,GAoCjB+c,iBAAkB,SAAWzG,GAE5B,OAAOvY,KAAKggB,gBAAiBzH,EAAO9R,SAAY8R,EAAOrB,QAIxDirC,gBAAiB,SAAWhjC,GAE3B,IAAIiC,EAAcjC,EAAMxI,OAAO5R,IAAK/E,KAAKkhB,WAEzC,GAAqB,IAAhBE,EAGJ,OAA8C,IAAzCjC,EAAMa,gBAAiBhgB,KAAKk3C,QAEzB,EAMD,KAIR,IAAIz4C,IAAQuB,KAAKk3C,OAAOnyC,IAAKoa,EAAMxI,QAAWwI,EAAM7E,UAAa8G,EAIjE,OAAO3iB,GAAK,EAAIA,EAAI,MAIrB2jD,eAAgB,SAAWjjC,EAAOld,GAEjC,IAAIxD,EAAIuB,KAAKmiD,gBAAiBhjC,GAE9B,OAAW,OAAN1gB,EAEG,KAIDuB,KAAK8gD,GAAIriD,EAAGwD,IAIpBid,gBAAiB,SAAWC,GAI3B,IAAIkjC,EAAcljC,EAAMa,gBAAiBhgB,KAAKk3C,QAE9C,OAAqB,IAAhBmL,GAMaljC,EAAMxI,OAAO5R,IAAK/E,KAAKkhB,WAEtBmhC,EAAc,GAYlCC,aAAc,SAAWlqC,EAAKnW,GAE7B,IAAIsgD,EAAMC,EAAMC,EAAOC,EAAOC,EAAOC,EAEjCC,EAAU,EAAI7iD,KAAKkhB,UAAU5rB,EAChCwtD,EAAU,EAAI9iD,KAAKkhB,UAAU3rB,EAC7BwtD,EAAU,EAAI/iD,KAAKkhB,UAAU1rB,EAE1B0hD,EAASl3C,KAAKk3C,OA0BlB,OAxBK2L,GAAW,GAEfN,GAASnqC,EAAIljB,IAAII,EAAI4hD,EAAO5hD,GAAMutD,EAClCL,GAASpqC,EAAIjjB,IAAIG,EAAI4hD,EAAO5hD,GAAMutD,IAIlCN,GAASnqC,EAAIjjB,IAAIG,EAAI4hD,EAAO5hD,GAAMutD,EAClCL,GAASpqC,EAAIljB,IAAII,EAAI4hD,EAAO5hD,GAAMutD,GAI9BC,GAAW,GAEfL,GAAUrqC,EAAIljB,IAAIK,EAAI2hD,EAAO3hD,GAAMutD,EACnCJ,GAAUtqC,EAAIjjB,IAAII,EAAI2hD,EAAO3hD,GAAMutD,IAInCL,GAAUrqC,EAAIjjB,IAAII,EAAI2hD,EAAO3hD,GAAMutD,EACnCJ,GAAUtqC,EAAIljB,IAAIK,EAAI2hD,EAAO3hD,GAAMutD,GAI7BP,EAAOG,GAAaD,EAAQD,EAAgB,OAK9CC,EAAQF,GAAQA,GAASA,KAAOA,EAAOE,IAEvCC,EAAQF,GAAQA,GAASA,KAAOA,EAAOE,GAEvCK,GAAW,GAEfJ,GAAUvqC,EAAIljB,IAAIM,EAAI0hD,EAAO1hD,GAAMutD,EACnCH,GAAUxqC,EAAIjjB,IAAIK,EAAI0hD,EAAO1hD,GAAMutD,IAInCJ,GAAUvqC,EAAIjjB,IAAIK,EAAI0hD,EAAO1hD,GAAMutD,EACnCH,GAAUxqC,EAAIljB,IAAIM,EAAI0hD,EAAO1hD,GAAMutD,GAI7BR,EAAOK,GAAaD,EAAQH,EAAgB,OAE9CG,EAAQJ,GAAQA,GAASA,KAAOA,EAAOI,IAEvCC,EAAQJ,GAAQA,GAASA,KAAOA,EAAOI,GAIvCJ,EAAO,EAAW,KAEhBxiD,KAAK8gD,GAAIyB,GAAQ,EAAIA,EAAOC,EAAMvgD,MAI1C8c,eAEKzb,GAAI,IAAIxC,GAEL,SAAwBsX,GAE9B,OAAuC,OAAhCpY,KAAKsiD,aAAclqC,EAAK9U,MAMjC0/C,kBAAmB,WAGlB,IAAInW,EAAO,IAAI/rC,GACXmiD,EAAQ,IAAIniD,GACZoiD,EAAQ,IAAIpiD,GACZ6V,EAAS,IAAI7V,GAEjB,OAAO,SAA4B8C,EAAGC,EAAG6C,EAAGy8C,EAAiBlhD,GAI5DghD,EAAMj/C,WAAYH,EAAGD,GACrBs/C,EAAMl/C,WAAY0C,EAAG9C,GACrB+S,EAAO5L,aAAck4C,EAAOC,GAO5B,IACIE,EADAC,EAAMrjD,KAAKkhB,UAAUnc,IAAK4R,GAG9B,GAAK0sC,EAAM,EAAI,CAEd,GAAKF,EAAkB,OAAO,KAC9BC,EAAO,MAED,CAAA,KAAKC,EAAM,GAOjB,OAAO,KALPD,GAAS,EACTC,GAAQA,EAQTxW,EAAK7oC,WAAYhE,KAAKk3C,OAAQtzC,GAC9B,IAAI0/C,EAASF,EAAOpjD,KAAKkhB,UAAUnc,IAAKm+C,EAAMn4C,aAAc8hC,EAAMqW,IAGlE,GAAKI,EAAS,EAEb,OAAO,KAIR,IAAIC,EAASH,EAAOpjD,KAAKkhB,UAAUnc,IAAKk+C,EAAMjtC,MAAO62B,IAGrD,GAAK0W,EAAS,EAEb,OAAO,KAKR,GAAKD,EAASC,EAASF,EAEtB,OAAO,KAKR,IAAIG,GAAQJ,EAAOvW,EAAK9nC,IAAK4R,GAG7B,OAAK6sC,EAAM,EAEH,KAKDxjD,KAAK8gD,GAAI0C,EAAMH,EAAKphD,IA7EV,GAmFnBoL,aAAc,SAAWqK,GAKxB,OAHA1X,KAAKk3C,OAAO7pC,aAAcqK,GAC1B1X,KAAKkhB,UAAUnL,mBAAoB2B,GAE5B1X,MAIRgG,OAAQ,SAAW66C,GAElB,OAAOA,EAAI3J,OAAOlxC,OAAQhG,KAAKk3C,SAAY2J,EAAI3/B,UAAUlb,OAAQhG,KAAKkhB,cC5gBxElgB,OAAOC,OAAQk2C,GAAMj2C,UAAW,CAE/BuB,IAAK,SAAW4e,EAAOI,GAKtB,OAHAzhB,KAAKqhB,MAAMhe,KAAMge,GACjBrhB,KAAKyhB,IAAIpe,KAAMoe,GAERzhB,MAIRmD,MAAO,WAEN,OAAO,IAAInD,KAAKoD,aAAcC,KAAMrD,OAIrCqD,KAAM,SAAW4d,GAKhB,OAHAjhB,KAAKqhB,MAAMhe,KAAM4d,EAAKI,OACtBrhB,KAAKyhB,IAAIpe,KAAM4d,EAAKQ,KAEbzhB,MAIR8d,UAAW,SAAW7b,GASrB,YAPgBpB,IAAXoB,IAEJ5B,QAAQmD,KAAM,oDACdvB,EAAS,IAAInB,IAIPmB,EAAOwB,WAAYzD,KAAKqhB,MAAOrhB,KAAKyhB,KAAMtd,eAAgB,KAIlEgd,MAAO,SAAWlf,GASjB,YAPgBpB,IAAXoB,IAEJ5B,QAAQmD,KAAM,gDACdvB,EAAS,IAAInB,IAIPmB,EAAO+B,WAAYhE,KAAKyhB,IAAKzhB,KAAKqhB,QAI1CoiC,WAAY,WAEX,OAAOzjD,KAAKqhB,MAAM7b,kBAAmBxF,KAAKyhB,MAI3C6Y,SAAU,WAET,OAAOt6B,KAAKqhB,MAAM9b,WAAYvF,KAAKyhB,MAIpCq/B,GAAI,SAAWriD,EAAGwD,GASjB,YAPgBpB,IAAXoB,IAEJ5B,QAAQmD,KAAM,6CACdvB,EAAS,IAAInB,IAIPd,KAAKmhB,MAAOlf,GAASkC,eAAgB1F,GAAI8E,IAAKvD,KAAKqhB,QAI3DqiC,8BAEK1P,GAAS,IAAIlzC,GACbmzC,GAAW,IAAInzC,GAEZ,SAAuCkd,EAAO2lC,GAEpD3P,GAAOhwC,WAAYga,EAAOhe,KAAKqhB,OAC/B4yB,GAASjwC,WAAYhE,KAAKyhB,IAAKzhB,KAAKqhB,OAEpC,IAAIuiC,EAAY3P,GAASlvC,IAAKkvC,IAG1Bx1C,EAFkBw1C,GAASlvC,IAAKivC,IAEV4P,EAQ1B,OANKD,IAEJllD,EAAI1B,GAAMe,MAAOW,EAAG,EAAG,IAIjBA,IAMTuiD,oBAAqB,SAAWhjC,EAAO2lC,EAAa1hD,GAEnD,IAAIxD,EAAIuB,KAAK0jD,6BAA8B1lC,EAAO2lC,GASlD,YAPgB9iD,IAAXoB,IAEJ5B,QAAQmD,KAAM,8DACdvB,EAAS,IAAInB,IAIPd,KAAKmhB,MAAOlf,GAASkC,eAAgB1F,GAAI8E,IAAKvD,KAAKqhB,QAI3DhU,aAAc,SAAWhY,GAKxB,OAHA2K,KAAKqhB,MAAMhU,aAAchY,GACzB2K,KAAKyhB,IAAIpU,aAAchY,GAEhB2K,MAIRgG,OAAQ,SAAWib,GAElB,OAAOA,EAAKI,MAAMrb,OAAQhG,KAAKqhB,QAAWJ,EAAKQ,IAAIzb,OAAQhG,KAAKyhB,QC/HlEzgB,OAAOC,OAAQm2C,GAAU,CAExByM,WAEKxkC,GAAK,IAAIve,GAEN,SAAoB8C,EAAGC,EAAG6C,EAAGzE,QAEnBpB,IAAXoB,IAEJ5B,QAAQmD,KAAM,uDACdvB,EAAS,IAAInB,IAIdmB,EAAO+B,WAAY0C,EAAG7C,GACtBwb,GAAGrb,WAAYJ,EAAGC,GAClB5B,EAAO+T,MAAOqJ,IAEd,IAAIykC,EAAiB7hD,EAAO+C,WAC5B,OAAK8+C,EAAiB,EAEd7hD,EAAOkC,eAAgB,EAAIlH,KAAKgI,KAAM6+C,IAIvC7hD,EAAOQ,IAAK,EAAG,EAAG,KAQ3BshD,aAAc,WAEb,IAAI1kC,EAAK,IAAIve,GACTrL,EAAK,IAAIqL,GACTiF,EAAK,IAAIjF,GAEb,OAAO,SAAuBkd,EAAOpa,EAAGC,EAAG6C,EAAGzE,GAE7Cod,EAAGrb,WAAY0C,EAAG9C,GAClBnO,EAAGuO,WAAYH,EAAGD,GAClBmC,EAAG/B,WAAYga,EAAOpa,GAEtB,IAAIogD,EAAQ3kC,EAAGta,IAAKsa,GAChB4kC,EAAQ5kC,EAAGta,IAAKtP,GAChByuD,EAAQ7kC,EAAGta,IAAKgB,GAChBo+C,EAAQ1uD,EAAGsP,IAAKtP,GAChB2uD,EAAQ3uD,EAAGsP,IAAKgB,GAEhBs+C,EAAUL,EAAQG,EAAQF,EAAQA,EAUtC,QARgBpjD,IAAXoB,IAEJ5B,QAAQmD,KAAM,0DACdvB,EAAS,IAAInB,IAKC,IAAVujD,EAIJ,OAAOpiD,EAAOQ,KAAO,GAAK,GAAK,GAIhC,IAAI6hD,EAAW,EAAID,EACfr5B,GAAMm5B,EAAQD,EAAQD,EAAQG,GAAUE,EACxChhD,GAAM0gD,EAAQI,EAAQH,EAAQC,GAAUI,EAG5C,OAAOriD,EAAOQ,IAAK,EAAIuoB,EAAI1nB,EAAGA,EAAG0nB,IAzCrB,GA+CdpM,cAAe,WAEd,IAAInpB,EAAK,IAAIqL,GAEb,OAAO,SAAwBkd,EAAOpa,EAAGC,EAAG6C,GAI3C,OAFA0wC,GAAS2M,aAAc/lC,EAAOpa,EAAGC,EAAG6C,EAAGjR,GAE9BA,EAAGH,GAAK,GAASG,EAAGF,GAAK,GAAWE,EAAGH,EAAIG,EAAGF,GAAO,GARjD,KAgBhByL,OAAOC,OAAQm2C,GAASl2C,UAAW,CAElCuB,IAAK,SAAWmB,EAAGC,EAAG6C,GAMrB,OAJA1G,KAAK4D,EAAEP,KAAMO,GACb5D,KAAK6D,EAAER,KAAMQ,GACb7D,KAAK0G,EAAErD,KAAMqD,GAEN1G,MAIRukD,wBAAyB,SAAWrsC,EAAQssC,EAAIC,EAAIC,GAMnD,OAJA1kD,KAAK4D,EAAEP,KAAM6U,EAAQssC,IACrBxkD,KAAK6D,EAAER,KAAM6U,EAAQusC,IACrBzkD,KAAK0G,EAAErD,KAAM6U,EAAQwsC,IAEd1kD,MAIRmD,MAAO,WAEN,OAAO,IAAInD,KAAKoD,aAAcC,KAAMrD,OAIrCqD,KAAM,SAAW0c,GAMhB,OAJA/f,KAAK4D,EAAEP,KAAM0c,EAASnc,GACtB5D,KAAK6D,EAAER,KAAM0c,EAASlc,GACtB7D,KAAK0G,EAAErD,KAAM0c,EAASrZ,GAEf1G,MAIR2kD,QAAS,WAER,IAAItlC,EAAK,IAAIve,GACTrL,EAAK,IAAIqL,GAEb,OAAO,WAKN,OAHAue,EAAGrb,WAAYhE,KAAK0G,EAAG1G,KAAK6D,GAC5BpO,EAAGuO,WAAYhE,KAAK4D,EAAG5D,KAAK6D,GAEK,GAA1Bwb,EAAGrJ,MAAOvgB,GAAK2K,UAVf,GAgBTwkD,YAAa,SAAW3iD,GASvB,YAPgBpB,IAAXoB,IAEJ5B,QAAQmD,KAAM,yDACdvB,EAAS,IAAInB,IAIPmB,EAAOwB,WAAYzD,KAAK4D,EAAG5D,KAAK6D,GAAIN,IAAKvD,KAAK0G,GAAIvC,eAAgB,EAAI,IAI9E0/C,UAAW,SAAW5hD,GAErB,OAAOm1C,GAASyM,UAAW7jD,KAAK4D,EAAG5D,KAAK6D,EAAG7D,KAAK0G,EAAGzE,IAIpD4iD,SAAU,SAAW5iD,GASpB,YAPgBpB,IAAXoB,IAEJ5B,QAAQmD,KAAM,sDACdvB,EAAS,IAAInB,IAIPmB,EAAO2e,sBAAuB5gB,KAAK4D,EAAG5D,KAAK6D,EAAG7D,KAAK0G,IAI3Dq9C,aAAc,SAAW/lC,EAAO/b,GAE/B,OAAOm1C,GAAS2M,aAAc/lC,EAAOhe,KAAK4D,EAAG5D,KAAK6D,EAAG7D,KAAK0G,EAAGzE,IAI9D2c,cAAe,SAAWZ,GAEzB,OAAOo5B,GAASx4B,cAAeZ,EAAOhe,KAAK4D,EAAG5D,KAAK6D,EAAG7D,KAAK0G,IAI5DqY,cAAe,SAAW3G,GAEzB,OAAOA,EAAIgH,mBAAoBpf,OAIhCghD,oBAAqB,WAEpB,IAAI7hC,EAAQ,IAAI9E,GACZyqC,EAAW,CAAE,IAAI3N,GAAS,IAAIA,GAAS,IAAIA,IAC3C4N,EAAiB,IAAIjkD,GACrBqX,EAAe,IAAIrX,GAEvB,OAAO,SAA8Bkd,EAAO/b,QAE3BpB,IAAXoB,IAEJ5B,QAAQmD,KAAM,iEACdvB,EAAS,IAAInB,IAId,IAAIkkD,EAAc1U,EAAAA,EASlB,GALAnxB,EAAMyB,sBAAuB5gB,KAAK4D,EAAG5D,KAAK6D,EAAG7D,KAAK0G,GAClDyY,EAAM4B,aAAc/C,EAAO+mC,IAImB,IAAzC/kD,KAAK4e,cAAemmC,GAIxB9iD,EAAOoB,KAAM0hD,OAEP,CAIND,EAAU,GAAIriD,IAAKzC,KAAK4D,EAAG5D,KAAK6D,GAChCihD,EAAU,GAAIriD,IAAKzC,KAAK6D,EAAG7D,KAAK0G,GAChCo+C,EAAU,GAAIriD,IAAKzC,KAAK0G,EAAG1G,KAAK4D,GAEhC,IAAM,IAAItG,EAAI,EAAGA,EAAIwnD,EAAS1kD,OAAQ9C,IAAO,CAE5CwnD,EAAUxnD,GAAI0jD,oBAAqB+D,GAAgB,EAAM5sC,GAEzD,IAAImiB,EAAWyqB,EAAev/C,kBAAmB2S,GAE5CmiB,EAAW0qB,IAEfA,EAAc1qB,EAEdr4B,EAAOoB,KAAM8U,KAQhB,OAAOlW,GAzDY,GA+DrB+D,OAAQ,SAAW+Z,GAElB,OAAOA,EAASnc,EAAEoC,OAAQhG,KAAK4D,IAAOmc,EAASlc,EAAEmC,OAAQhG,KAAK6D,IAAOkc,EAASrZ,EAAEV,OAAQhG,KAAK0G,MGzP/F2wC,GAAKn2C,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ2mB,GAAStgC,WAAa,CAEpEkC,YAAai0C,GAEbhL,QAAQ,EAER4Y,YAAa,SAAWlnD,GAEvBiC,KAAKs3C,SAAWv5C,GAIjBsF,KAAM,SAAW2X,GAkBhB,OAhBAwmB,GAAStgC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEpChb,KAAKs3C,SAAWt8B,EAAOs8B,cAEez2C,IAAjCma,EAAOykC,wBAEXz/C,KAAKy/C,sBAAwBzkC,EAAOykC,sBAAsBt9C,cAIrBtB,IAAjCma,EAAOkqC,wBAEXllD,KAAKklD,sBAAwBlkD,OAAOC,OAAQ,GAAI+Z,EAAOkqC,wBAIjDllD,MAIRu3C,mBAAoB,WAEnB,IACIr5C,EAAGinD,EAAI9rC,EADPiF,EAAWte,KAAKse,SAGpB,GAAKA,EAASG,iBAAmB,CAEhC,IAAI2xB,EAAkB9xB,EAAS8xB,gBAC3BgV,EAAOpkD,OAAOokD,KAAMhV,GAExB,GAAKgV,EAAKhlD,OAAS,EAAI,CAEtB,IAAIyzC,EAAiBzD,EAAiBgV,EAAM,IAE5C,QAAwBvkD,IAAnBgzC,EAKJ,IAHA7zC,KAAKy/C,sBAAwB,GAC7Bz/C,KAAKklD,sBAAwB,GAEvBhnD,EAAI,EAAGinD,EAAKtR,EAAezzC,OAAQlC,EAAIinD,EAAIjnD,IAEhDmb,EAAOw6B,EAAgB31C,GAAImb,MAAQgsC,OAAQnnD,GAE3C8B,KAAKy/C,sBAAsBh+C,KAAM,GACjCzB,KAAKklD,sBAAuB7rC,GAASnb,OAQlC,CAEN,IAAImpC,EAAe/oB,EAAS+oB,aAE5B,QAAsBxmC,IAAjBwmC,GAA8BA,EAAajnC,OAAS,EAKxD,IAHAJ,KAAKy/C,sBAAwB,GAC7Bz/C,KAAKklD,sBAAwB,GAEvBhnD,EAAI,EAAGinD,EAAK9d,EAAajnC,OAAQlC,EAAIinD,EAAIjnD,IAE9Cmb,EAAOguB,EAAcnpC,GAAImb,MAAQgsC,OAAQnnD,GAEzC8B,KAAKy/C,sBAAsBh+C,KAAM,GACjCzB,KAAKklD,sBAAuB7rC,GAASnb,IAUzC0mC,QAAW,WAEV,IAAI0gB,EAAgB,IAAIrlD,GACpB4gD,EAAM,IAAI5J,GACV1+B,EAAS,IAAI6B,GAEbkwB,EAAK,IAAIxpC,GACTypC,EAAK,IAAIzpC,GACT0pC,EAAK,IAAI1pC,GAETykD,EAAQ,IAAIzkD,GACZ0kD,EAAQ,IAAI1kD,GACZ2kD,EAAQ,IAAI3kD,GAEZ4kD,EAAM,IAAI3lD,GACV4lD,EAAM,IAAI5lD,GACV6lD,EAAM,IAAI7lD,GAEV8lD,EAAY,IAAI/kD,GAEhBglD,EAAoB,IAAIhlD,GACxBilD,EAAyB,IAAIjlD,GAEjC,SAASklD,EAAgBhoC,EAAO3F,EAAIC,EAAImC,EAAIwrC,EAAKrc,EAAKsc,GAUrD,OARA9O,GAAS2M,aAAc/lC,EAAO3F,EAAIC,EAAImC,EAAIorC,GAE1CI,EAAI9hD,eAAgB0hD,EAAUvwD,GAC9Bs0C,EAAIzlC,eAAgB0hD,EAAUtwD,GAC9B2wD,EAAI/hD,eAAgB0hD,EAAUrwD,GAE9BywD,EAAI1iD,IAAKqmC,GAAMrmC,IAAK2iD,GAEbD,EAAI9iD,QAIZ,SAASgjD,EAAmBxoC,EAAQ+nB,EAAU0gB,EAAWvF,EAAK1N,EAAIC,EAAIC,EAAIr1B,GAczE,GAAmB,QAVd0nB,EAAS2O,OAASp+C,EAEV4qD,EAAImC,kBAAmB3P,EAAID,EAAID,GAAI,EAAMn1B,GAIzC6iC,EAAImC,kBAAmB7P,EAAIC,EAAIC,EAAI3N,EAAS2O,OAASn+C,EAAY8nB,IAIpD,OAAO,KAEjC+nC,EAAuB1iD,KAAM2a,GAC7B+nC,EAAuB14C,aAAcsQ,EAAO9H,aAE5C,IAAIykB,EAAW8rB,EAAUvF,IAAI3J,OAAO3xC,WAAYwgD,GAEhD,OAAKzrB,EAAW8rB,EAAUj2C,MAAQmqB,EAAW8rB,EAAUh2C,IAAa,KAE7D,CACNkqB,SAAUA,EACVtc,MAAO+nC,EAAuB5iD,QAC9Bwa,OAAQA,GAKV,SAAS0oC,EAAiC1oC,EAAQyoC,EAAWvF,EAAKxxC,EAAUmN,EAAI5Y,EAAGC,EAAG6C,GAErF4jC,EAAGlkC,oBAAqBiJ,EAAUzL,GAClC2mC,EAAGnkC,oBAAqBiJ,EAAUxL,GAClC2mC,EAAGpkC,oBAAqBiJ,EAAU3I,GAElC,IAAI4/C,EAAeH,EAAmBxoC,EAAQA,EAAO+nB,SAAU0gB,EAAWvF,EAAKvW,EAAIC,EAAIC,EAAIsb,GAE3F,GAAKQ,EAAe,CAEd9pC,IAEJkpC,EAAIt/C,oBAAqBoW,EAAI5Y,GAC7B+hD,EAAIv/C,oBAAqBoW,EAAI3Y,GAC7B+hD,EAAIx/C,oBAAqBoW,EAAI9V,GAE7B4/C,EAAa9pC,GAAKwpC,EAAgBF,EAAmBxb,EAAIC,EAAIC,EAAIkb,EAAKC,EAAKC,IAI5E,IAAItc,EAAO,IAAI1G,GAAOh/B,EAAGC,EAAG6C,GAC5B0wC,GAASyM,UAAWvZ,EAAIC,EAAIC,EAAIlB,EAAK3yB,QAErC2vC,EAAahd,KAAOA,EACpBgd,EAAaC,UAAY3iD,EAI1B,OAAO0iD,EAIR,OAAO,SAAkBF,EAAWI,GAEnC,IA4BIF,EA5BAhoC,EAAWte,KAAKse,SAChBonB,EAAW1lC,KAAK0lC,SAChB7vB,EAAc7V,KAAK6V,YAEvB,QAAkBhV,IAAb6kC,IAI4B,OAA5BpnB,EAAS4E,gBAA0B5E,EAAS6E,wBAEjD5K,EAAOlV,KAAMib,EAAS4E,gBACtB3K,EAAOlL,aAAcwI,IAE6B,IAA7CuwC,EAAUvF,IAAI7hC,iBAAkBzG,KAIrC+sC,EAAc33C,WAAYkI,GAC1BgrC,EAAIx9C,KAAM+iD,EAAUvF,KAAMxzC,aAAci4C,GAIV,OAAzBhnC,EAASopB,cAEsC,IAA9CmZ,EAAI9hC,cAAeT,EAASopB,eAMlC,GAAKppB,EAASG,iBAAmB,CAEhC,IAAI7a,EAAGC,EAAG6C,EAINpJ,EAAG8E,EAHHP,EAAQyc,EAASzc,MACjBwN,EAAWiP,EAASI,WAAWrP,SAC/BmN,EAAK8B,EAASI,WAAWlC,GAG7B,GAAe,OAAV3a,EAIJ,IAAMvE,EAAI,EAAG8E,EAAIP,EAAMsL,MAAO7P,EAAI8E,EAAG9E,GAAK,EAEzCsG,EAAI/B,EAAMyE,KAAMhJ,GAChBuG,EAAIhC,EAAMyE,KAAMhJ,EAAI,GACpBoJ,EAAI7E,EAAMyE,KAAMhJ,EAAI,IAEpBgpD,EAAeD,EAAiCrmD,KAAMomD,EAAWvF,EAAKxxC,EAAUmN,EAAI5Y,EAAGC,EAAG6C,MAIzF4/C,EAAaC,UAAYtpD,KAAK8B,MAAOzB,EAAI,GACzCkpD,EAAW/kD,KAAM6kD,SAMb,QAAkBzlD,IAAbwO,EAIX,IAAM/R,EAAI,EAAG8E,EAAIiN,EAASlC,MAAO7P,EAAI8E,EAAG9E,GAAK,GAM5CgpD,EAAeD,EAAiCrmD,KAAMomD,EAAWvF,EAAKxxC,EAAUmN,EAJhF5Y,EAAItG,EACJuG,EAAIvG,EAAI,EACRoJ,EAAIpJ,EAAI,KAIYkpD,EAAW/kD,KAAM6kD,QAMjC,GAAKhoC,EAASC,WAAa,CAEjC,IAAIkoC,EAAKC,EAAKC,EAKVzd,EAJA0d,EAAkBt7B,MAAMC,QAASma,GAEjClnB,EAAWF,EAASE,SACpB2oB,EAAQ7oB,EAAS6oB,MAGjBC,EAAgB9oB,EAAS8oB,cAAe,GACvCA,EAAchnC,OAAS,IAAI8oC,EAAM9B,GAEtC,IAAM,IAAIp+B,EAAI,EAAGqhC,EAAKlD,EAAM/mC,OAAQ4I,EAAIqhC,EAAIrhC,IAAO,CAElD,IAAIsgC,EAAOnC,EAAOn+B,GACd69C,EAAeD,EAAkBlhB,EAAU4D,EAAKzG,eAAkB6C,EAEtE,QAAsB7kC,IAAjBgmD,EAAL,CAMA,GAJAJ,EAAMjoC,EAAU8qB,EAAK1lC,GACrB8iD,EAAMloC,EAAU8qB,EAAKzlC,GACrB8iD,EAAMnoC,EAAU8qB,EAAK5iC,IAEc,IAA9BmgD,EAAaxf,aAAwB,CAEzC,IAAIA,EAAe/oB,EAAS+oB,aACxBiY,EAAkBt/C,KAAKy/C,sBAE3BnV,EAAG7nC,IAAK,EAAG,EAAG,GACd8nC,EAAG9nC,IAAK,EAAG,EAAG,GACd+nC,EAAG/nC,IAAK,EAAG,EAAG,GAEd,IAAM,IAAIhE,EAAI,EAAGqoD,EAAKzf,EAAajnC,OAAQ3B,EAAIqoD,EAAIroD,IAAO,CAEzD,IAAIkhD,EAAYL,EAAiB7gD,GAEjC,GAAmB,IAAdkhD,EAAL,CAEA,IAAIoH,EAAU1f,EAAc5oC,GAAI+f,SAEhC8rB,EAAGxmC,gBAAiByhD,EAAMvhD,WAAY+iD,EAASzd,EAAK1lC,GAAK6iD,GAAO9G,GAChEpV,EAAGzmC,gBAAiB0hD,EAAMxhD,WAAY+iD,EAASzd,EAAKzlC,GAAK6iD,GAAO/G,GAChEnV,EAAG1mC,gBAAiB2hD,EAAMzhD,WAAY+iD,EAASzd,EAAK5iC,GAAKigD,GAAOhH,IAIjErV,EAAG/mC,IAAKkjD,GACRlc,EAAGhnC,IAAKmjD,GACRlc,EAAGjnC,IAAKojD,GAERF,EAAMnc,EACNoc,EAAMnc,EACNoc,EAAMnc,EAMP,GAFA8b,EAAeH,EAAmBnmD,KAAM6mD,EAAcT,EAAWvF,EAAK4F,EAAKC,EAAKC,EAAKb,GAEjE,CAEnB,GAAK5c,GAAOA,EAAKlgC,GAAM,CAEtB,IAAIg+C,EAAQ9d,EAAKlgC,GACjB08C,EAAIriD,KAAM2jD,EAAO,IACjBrB,EAAItiD,KAAM2jD,EAAO,IACjBpB,EAAIviD,KAAM2jD,EAAO,IAEjBV,EAAa9pC,GAAKwpC,EAAgBF,EAAmBW,EAAKC,EAAKC,EAAKjB,EAAKC,EAAKC,GAI/EU,EAAahd,KAAOA,EACpBgd,EAAaC,UAAYv9C,EACzBw9C,EAAW/kD,KAAM6kD,WAYtBnjD,MAAO,WAEN,OAAO,IAAInD,KAAKoD,YAAapD,KAAKse,SAAUte,KAAK0lC,UAAWriC,KAAMrD,SWpXpEggD,GAAY9+C,UAAYF,OAAO6Z,OAAQpC,GAAQvX,WAC/C8+C,GAAY9+C,UAAUkC,YAAc48C,GAEpCA,GAAY9+C,UAAU63C,eAAgB,EAEtC/3C,OAAOmY,eAAgB6mC,GAAY9+C,UAAW,SAAU,CAEvDsB,IAAK,WAEJ,OAAOxC,KAAK0Y,OAIbjW,IAAK,SAAW1E,GAEfiC,KAAK0Y,MAAQ3a,KCmBf,IAAIkpD,GAAe,IAAIxuC,GACnByuC,GAAmB,IAAIlH,GAI3B,SAASmH,KAERnnD,KAAKonD,IAAM,GACXpnD,KAAKi3B,IAAM,GAQZ,IAAIowB,GAAgB,GAChBC,GAAgB,GAIhBC,GAAY,IAAI/oB,aAAc,IAC9BgpB,GAAY,IAAIhpB,aAAc,GAIlC,SAASipB,GAASvlD,EAAOwlD,EAASC,GAEjC,IAAIC,EAAY1lD,EAAO,GAEvB,GAAK0lD,GAAa,GAAKA,EAAY,EAAI,OAAO1lD,EAI9C,IAAIjE,EAAIypD,EAAUC,EACjBp0C,EAAI8zC,GAAeppD,GASpB,QAPW4C,IAAN0S,IAEJA,EAAI,IAAIirB,aAAcvgC,GACtBopD,GAAeppD,GAAMsV,GAIL,IAAZm0C,EAAgB,CAEpBE,EAAUzhD,QAASoN,EAAG,GAEtB,IAAM,IAAIjW,EAAI,EAAG4I,EAAS,EAAG5I,IAAMoqD,IAAYpqD,EAE9C4I,GAAUyhD,EACVzlD,EAAO5E,GAAI6I,QAASoN,EAAGrN,GAMzB,OAAOqN,EAMR,SAASs0C,GAAepQ,EAAUx5C,GAEjC,IAAIsV,EAAI+zC,GAAerpD,QAEZ4C,IAAN0S,IAEJA,EAAI,IAAIyrB,WAAY/gC,GACpBqpD,GAAerpD,GAAMsV,GAItB,IAAM,IAAIjW,EAAI,EAAGA,IAAMW,IAAMX,EAC5BiW,EAAGjW,GAAMm6C,EAASqQ,mBAEnB,OAAOv0C,EAWR,SAASw0C,GAAYzqB,EAAIh6B,GAExBg6B,EAAG0qB,UAAWhoD,KAAKioD,KAAM3kD,GAI1B,SAAS4kD,GAAY5qB,EAAIh6B,GAExBg6B,EAAG6qB,UAAWnoD,KAAKioD,KAAM3kD,GAM1B,SAAS8kD,GAAa9qB,EAAIh6B,QAEZzC,IAARyC,EAAEhO,EAENgoC,EAAG+qB,WAAYroD,KAAKioD,KAAM3kD,GAI1Bg6B,EAAGgrB,UAAWtoD,KAAKioD,KAAM3kD,EAAEhO,EAAGgO,EAAE/N,GAMlC,SAASgzD,GAAajrB,EAAIh6B,QAEZzC,IAARyC,EAAEhO,EAENgoC,EAAGkrB,UAAWxoD,KAAKioD,KAAM3kD,EAAEhO,EAAGgO,EAAE/N,EAAG+N,EAAE9N,QAElBqL,IAARyC,EAAEiQ,EAEb+pB,EAAGkrB,UAAWxoD,KAAKioD,KAAM3kD,EAAEiQ,EAAGjQ,EAAEkU,EAAGlU,EAAEO,GAIrCy5B,EAAGmrB,WAAYzoD,KAAKioD,KAAM3kD,GAM5B,SAASolD,GAAaprB,EAAIh6B,QAEZzC,IAARyC,EAAEhO,EAENgoC,EAAGqrB,WAAY3oD,KAAKioD,KAAM3kD,GAIzBg6B,EAAGsrB,UAAW5oD,KAAKioD,KAAM3kD,EAAEhO,EAAGgO,EAAE/N,EAAG+N,EAAE9N,EAAG8N,EAAE9C,GAQ7C,SAASqoD,GAAavrB,EAAIh6B,GAEzBg6B,EAAGwrB,iBAAkB9oD,KAAKioD,MAAM,EAAO3kD,EAAEpD,UAAYoD,GAItD,SAASylD,GAAazrB,EAAIh6B,QAELzC,IAAfyC,EAAEpD,SAENo9B,EAAG0rB,iBAAkBhpD,KAAKioD,MAAM,EAAO3kD,IAIvCkkD,GAAU/kD,IAAKa,EAAEpD,UACjBo9B,EAAG0rB,iBAAkBhpD,KAAKioD,MAAM,EAAOT,KAMzC,SAASyB,GAAa3rB,EAAIh6B,QAELzC,IAAfyC,EAAEpD,SAENo9B,EAAG4rB,iBAAkBlpD,KAAKioD,MAAM,EAAO3kD,IAIvCikD,GAAU9kD,IAAKa,EAAEpD,UACjBo9B,EAAG4rB,iBAAkBlpD,KAAKioD,MAAM,EAAOV,KAQzC,SAAS4B,GAAY7rB,EAAIh6B,EAAGm0C,GAE3B,IAAI2R,EAAO3R,EAASqQ,mBACpBxqB,EAAG6qB,UAAWnoD,KAAKioD,KAAMmB,GACzB3R,EAAS4R,aAAc/lD,GAAK2jD,GAAcmC,GAI3C,SAASE,GAAYhsB,EAAIh6B,EAAGm0C,GAE3B,IAAI2R,EAAO3R,EAASqQ,mBACpBxqB,EAAG6qB,UAAWnoD,KAAKioD,KAAMmB,GACzB3R,EAAS8R,eAAgBjmD,GAAK4jD,GAAkBkC,GAMjD,SAASI,GAAalsB,EAAIh6B,GAEzBg6B,EAAGmsB,WAAYzpD,KAAKioD,KAAM3kD,GAI3B,SAASomD,GAAapsB,EAAIh6B,GAEzBg6B,EAAGqsB,WAAY3pD,KAAKioD,KAAM3kD,GAI3B,SAASsmD,GAAatsB,EAAIh6B,GAEzBg6B,EAAGusB,WAAY7pD,KAAKioD,KAAM3kD,GAiC3B,SAASwmD,GAAaxsB,EAAIh6B,GAEzBg6B,EAAGysB,WAAY/pD,KAAKioD,KAAM3kD,GAG3B,SAAS0mD,GAAa1sB,EAAIh6B,GAEzBg6B,EAAG2sB,WAAYjqD,KAAKioD,KAAM3kD,GAM3B,SAAS4mD,GAAa5sB,EAAIh6B,GAEzBg6B,EAAG+qB,WAAYroD,KAAKioD,KAAMR,GAASnkD,EAAGtD,KAAKwd,KAAM,IAIlD,SAAS2sC,GAAa7sB,EAAIh6B,GAEzBg6B,EAAGmrB,WAAYzoD,KAAKioD,KAAMR,GAASnkD,EAAGtD,KAAKwd,KAAM,IAIlD,SAAS4sC,GAAa9sB,EAAIh6B,GAEzBg6B,EAAGqrB,WAAY3oD,KAAKioD,KAAMR,GAASnkD,EAAGtD,KAAKwd,KAAM,IAMlD,SAAS6sC,GAAa/sB,EAAIh6B,GAEzBg6B,EAAGwrB,iBAAkB9oD,KAAKioD,MAAM,EAAOR,GAASnkD,EAAGtD,KAAKwd,KAAM,IAI/D,SAAS8sC,GAAahtB,EAAIh6B,GAEzBg6B,EAAG0rB,iBAAkBhpD,KAAKioD,MAAM,EAAOR,GAASnkD,EAAGtD,KAAKwd,KAAM,IAI/D,SAAS+sC,GAAajtB,EAAIh6B,GAEzBg6B,EAAG4rB,iBAAkBlpD,KAAKioD,MAAM,EAAOR,GAASnkD,EAAGtD,KAAKwd,KAAM,KAM/D,SAASgtC,GAAaltB,EAAIh6B,EAAGm0C,GAE5B,IAAIx5C,EAAIqF,EAAElD,OACTqqD,EAAQ5C,GAAepQ,EAAUx5C,GAElCq/B,EAAG2sB,WAAYjqD,KAAKioD,KAAMwC,GAE1B,IAAM,IAAIntD,EAAI,EAAGA,IAAMW,IAAMX,EAE5Bm6C,EAAS4R,aAAc/lD,EAAGhG,IAAO2pD,GAAcwD,EAAOntD,IAMxD,SAASotD,GAAaptB,EAAIh6B,EAAGm0C,GAE5B,IAAIx5C,EAAIqF,EAAElD,OACTqqD,EAAQ5C,GAAepQ,EAAUx5C,GAElCq/B,EAAG2sB,WAAYjqD,KAAKioD,KAAMwC,GAE1B,IAAM,IAAIntD,EAAI,EAAGA,IAAMW,IAAMX,EAE5Bm6C,EAAS8R,eAAgBjmD,EAAGhG,IAAO4pD,GAAkBuD,EAAOntD,IAmC9D,SAASqtD,GAAetmB,EAAIumB,EAAY3C,GAEvCjoD,KAAKqkC,GAAKA,EACVrkC,KAAKioD,KAAOA,EACZjoD,KAAK6/C,SA/IN,SAA4Bz+C,GAE3B,OA6ImCwpD,EAAWxpD,MA3I7C,KAAK,KAAQ,OAAO2mD,GACpB,KAAK,MAAQ,OAAOK,GACpB,KAAK,MAAQ,OAAOG,GACpB,KAAK,MAAQ,OAAOG,GAEpB,KAAK,MAAQ,OAAOG,GACpB,KAAK,MAAQ,OAAOE,GACpB,KAAK,MAAQ,OAAOE,GAEpB,KAAK,MAAQ,KAAK,MAAQ,OAAOE,GACjC,KAAK,MAAQ,OAAOG,GAEpB,KAAK,KAAQ,KAAK,MAAQ,OAAOpB,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOsB,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOE,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOE,IA4HlBiB,GAMjB,SAASC,GAAkBzmB,EAAIumB,EAAY3C,GAE1CjoD,KAAKqkC,GAAKA,EACVrkC,KAAKioD,KAAOA,EACZjoD,KAAKwd,KAAOotC,EAAWptC,KACvBxd,KAAK6/C,SA1CN,SAA6Bz+C,GAE5B,OAwCoCwpD,EAAWxpD,MAtC9C,KAAK,KAAQ,OAAO0oD,GACpB,KAAK,MAAQ,OAAOI,GACpB,KAAK,MAAQ,OAAOC,GACpB,KAAK,MAAQ,OAAOC,GAEpB,KAAK,MAAQ,OAAOC,GACpB,KAAK,MAAQ,OAAOC,GACpB,KAAK,MAAQ,OAAOC,GAEpB,KAAK,MAAQ,OAAOC,GACpB,KAAK,MAAQ,OAAOE,GAEpB,KAAK,KAAQ,KAAK,MAAQ,OAAOV,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOR,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOE,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOE,IAuBlBmB,GAMjB,SAASC,GAAmB3mB,GAE3BrkC,KAAKqkC,GAAKA,EAEV8iB,GAAiB9kD,KAAMrC,MAIxBgrD,GAAkB9pD,UAAU2+C,SAAW,SAAWviB,EAAIv/B,GAOrD,IAFA,IAAIqpD,EAAMpnD,KAAKonD,IAEL9pD,EAAI,EAAGW,EAAImpD,EAAIhnD,OAAQ9C,IAAMW,IAAMX,EAAI,CAEhD,IAAI0tB,EAAIo8B,EAAK9pD,GACb0tB,EAAE60B,SAAUviB,EAAIv/B,EAAOitB,EAAEqZ,OAU3B,IAAI4mB,GAAa,2BAWjB,SAASC,GAAYC,EAAWC,GAE/BD,EAAU/D,IAAI3lD,KAAM2pD,GACpBD,EAAUl0B,IAAKm0B,EAAc/mB,IAAO+mB,EAIrC,SAASC,GAAcT,EAAY3C,EAAMkD,GAExC,IAAIG,EAAOV,EAAWvxC,KACrBkyC,EAAaD,EAAKlrD,OAKnB,IAFA6qD,GAAWO,UAAY,IAEX,CAEX,IAAIC,EAAQR,GAAWz1B,KAAM81B,GAC5BI,EAAWT,GAAWO,UAEtBnnB,EAAKonB,EAAO,GACZE,EAA2B,MAAfF,EAAO,GACnBG,EAAYH,EAAO,GAIpB,GAFKE,IAAYtnB,GAAU,QAERxjC,IAAd+qD,GAAyC,MAAdA,GAAqBF,EAAW,IAAMH,EAAa,CAIlFL,GAAYC,OAAyBtqD,IAAd+qD,EACtB,IAAIjB,GAAetmB,EAAIumB,EAAY3C,GACnC,IAAI6C,GAAkBzmB,EAAIumB,EAAY3C,IAEvC,MAMA,IAAyB4D,EAAfV,EAAUl0B,IAAiBoN,QAEvBxjC,IAATgrD,GAGJX,GAAYC,EADZU,EAAO,IAAIb,GAAmB3mB,IAK/B8mB,EAAYU,GAUf,SAASC,GAAexuB,EAAIiiB,EAAS9H,GAEpC0P,GAAiB9kD,KAAMrC,MAEvBA,KAAKy3C,SAAWA,EAIhB,IAFA,IAAIx5C,EAAIq/B,EAAGyuB,oBAAqBxM,EAASjiB,EAAG0uB,iBAElC1uD,EAAI,EAAGA,EAAIW,IAAMX,EAAI,CAE9B,IAAI47C,EAAO5b,EAAG2uB,iBAAkB1M,EAASjiD,GAGzC+tD,GAAcnS,EAFN5b,EAAG4uB,mBAAoB3M,EAASrG,EAAK7/B,MAEnBrZ,OCnhB5B,SAASmsD,GAAa7uB,EAAIl8B,EAAMk0B,GAE/B,IAAI82B,EAAS9uB,EAAG+uB,aAAcjrD,GAoB9B,OAlBAk8B,EAAGgvB,aAAcF,EAAQ92B,GACzBgI,EAAGivB,cAAeH,IAE0C,IAAvD9uB,EAAGkvB,mBAAoBJ,EAAQ9uB,EAAGmvB,iBAEtCpsD,QAAQC,MAAO,+CAIuB,KAAlCg9B,EAAGovB,iBAAkBN,IAEzB/rD,QAAQmD,KAAM,2CAA4CpC,IAASk8B,EAAGwc,cAAgB,SAAW,WAAYxc,EAAGovB,iBAAkBN,GA7BpI,SAAyB92B,GAIxB,IAFA,IAAIipB,EAAQjpB,EAAOq3B,MAAO,MAEhBrvD,EAAI,EAAGA,EAAIihD,EAAMn+C,OAAQ9C,IAElCihD,EAAOjhD,GAAQA,EAAI,EAAM,KAAOihD,EAAOjhD,GAIxC,OAAOihD,EAAMqO,KAAM,MAmB0HC,CAAgBv3B,IAOtJ82B,EDmgBRN,GAAc5qD,UAAU2+C,SAAW,SAAWviB,EAAIjkB,EAAMtb,GAEvD,IAAIitB,EAAIhrB,KAAKi3B,IAAK5d,QAEPxY,IAANmqB,GAAkBA,EAAE60B,SAAUviB,EAAIv/B,EAAOiC,KAAKy3C,WAIpDqU,GAAc5qD,UAAU4rD,YAAc,SAAWxvB,EAAI3f,EAAQtE,GAE5D,IAAI/V,EAAIqa,EAAQtE,QAELxY,IAANyC,GAAkBtD,KAAK6/C,SAAUviB,EAAIjkB,EAAM/V,IAOjDwoD,GAAciB,OAAS,SAAWzvB,EAAI8pB,EAAKthB,EAAQ2R,GAElD,IAAM,IAAIn6C,EAAI,EAAGW,EAAImpD,EAAIhnD,OAAQ9C,IAAMW,IAAMX,EAAI,CAEhD,IAAI0tB,EAAIo8B,EAAK9pD,GACZgG,EAAIwiC,EAAQ9a,EAAEqZ,KAEQ,IAAlB/gC,EAAEovC,aAGN1nB,EAAE60B,SAAUviB,EAAIh6B,EAAEvF,MAAO05C,KAQ5BqU,GAAckB,aAAe,SAAW5F,EAAKthB,GAI5C,IAFA,IAAIvyB,EAAI,GAEEjW,EAAI,EAAGW,EAAImpD,EAAIhnD,OAAQ9C,IAAMW,IAAMX,EAAI,CAEhD,IAAI0tB,EAAIo8B,EAAK9pD,GACR0tB,EAAEqZ,MAAMyB,GAASvyB,EAAE9R,KAAMupB,GAI/B,OAAOzX,GEllBR,IAAI05C,GAAiB,EAErB,SAASC,GAAuBh0C,GAE/B,OAASA,GAER,KAAK5c,GACJ,MAAO,CAAE,SAAU,aACpB,KAAKC,GACJ,MAAO,CAAE,OAAQ,aAClB,KAAKE,GACJ,MAAO,CAAE,OAAQ,aAClB,KAAKC,GACJ,MAAO,CAAE,OAAQ,kBAClB,KAAKC,GACJ,MAAO,CAAE,OAAQ,mBAClB,KAAKC,GACJ,MAAO,CAAE,OAAQ,oBAClB,KAAKJ,GACJ,MAAO,CAAE,QAAS,oCACnB,QACC,MAAM,IAAIyG,MAAO,yBAA2BiW,IAM/C,SAASi0C,GAA0BC,EAAcl0C,GAEhD,IAAIwc,EAAaw3B,GAAuBh0C,GACxC,MAAO,QAAUk0C,EAAe,2BAA6B13B,EAAY,GAAM,WAAaA,EAAY,GAAM,MAgG/G,SAAS23B,GAAiB/3B,GAEzB,MAAkB,KAAXA,EAIR,SAASg4B,GAAkBh4B,EAAQkQ,GAElC,OAAOlQ,EACLi4B,QAAS,kBAAmB/nB,EAAWgoB,cACvCD,QAAS,mBAAoB/nB,EAAWioB,eACxCF,QAAS,wBAAyB/nB,EAAWkoB,mBAC7CH,QAAS,oBAAqB/nB,EAAWmoB,gBACzCJ,QAAS,mBAAoB/nB,EAAWooB,eAI3C,SAASC,GAA0Bv4B,EAAQkQ,GAE1C,OAAOlQ,EACLi4B,QAAS,uBAAwB/nB,EAAWsoB,mBAC5CP,QAAS,yBAA4B/nB,EAAWsoB,kBAAoBtoB,EAAWuoB,qBAIlF,SAASC,GAAe14B,GAkBvB,OAAOA,EAAOi4B,QAhBA,kCAEd,SAAkB9B,EAAOwC,GAExB,IAAIV,EAAU/pC,GAAayqC,GAE3B,QAAiBptD,IAAZ0sD,EAEJ,MAAM,IAAItqD,MAAO,6BAA+BgrD,EAAU,KAI3D,OAAOD,GAAeT,KAQxB,SAASW,GAAa54B,GAkBrB,OAAOA,EAAOi4B,QAhBA,+FAEd,SAAkB9B,EAAOpqC,EAAOI,EAAK0sC,GAIpC,IAFA,IAAIC,EAAS,GAEH9wD,EAAIq4B,SAAUtU,GAAS/jB,EAAIq4B,SAAUlU,GAAOnkB,IAErD8wD,GAAUD,EAAQZ,QAAS,WAAY,KAAOjwD,EAAI,MAInD,OAAO8wD,IAQT,SAASC,GAAc5W,EAAUhB,EAAY6X,EAAM5oB,EAAU0mB,EAAQ5mB,GAEpE,IAAIlI,EAAKma,EAAS17B,QAEdu6B,EAAU5Q,EAAS4Q,QAEnB1a,EAAewwB,EAAOxwB,aACtBC,EAAiBuwB,EAAOvwB,eAExB0yB,EAAsB,uBAErB/oB,EAAWgpB,gBAAkB14D,EAEjCy4D,EAAsB,qBAEX/oB,EAAWgpB,gBAAkBz4D,IAExCw4D,EAAsB,2BAIvB,IAAIE,EAAmB,mBACnBC,EAAmB,yBACnBC,EAAuB,2BAE3B,GAAKnpB,EAAWjO,OAAS,CAExB,OAASmO,EAASnO,OAAO5e,SAExB,KAAKjgB,GACL,KAAKC,GACJ81D,EAAmB,mBACnB,MAED,KAAK11D,GACL,KAAKC,GACJy1D,EAAmB,sBACnB,MAED,KAAK71D,GACL,KAAKC,GACJ41D,EAAmB,sBACnB,MAED,KAAK31D,GACJ21D,EAAmB,qBAKrB,OAAS/oB,EAASnO,OAAO5e,SAExB,KAAKhgB,GACL,KAAKE,GACJ61D,EAAmB,yBAKrB,OAAShpB,EAASoQ,SAEjB,KAAK59C,EACJy2D,EAAuB,2BACvB,MAED,KAAKx2D,EACJw2D,EAAuB,sBACvB,MAED,KAAKv2D,EACJu2D,EAAuB,uBAO1B,IAeIC,EAAcC,EA7P8B31C,EAE5Cwc,EA4OAo5B,EAAsBrX,EAAS3hB,YAAc,EAAM2hB,EAAS3hB,YAAc,EAM1Ei5B,EA9ML,SAA6BtY,EAAYjR,EAAYwpB,GAWpD,MAPa,EAFbvY,EAAaA,GAAc,IAGbC,aAAelR,EAAWypB,cAAgBzpB,EAAWnN,SAAWmN,EAAWhN,WAAagN,EAAW8O,YAAgB,kDAAoD,IAClLmC,EAAWE,WAAanR,EAAW2U,yBAA4B6U,EAAmBxsD,IAAK,kBAAqB,wCAA0C,GACtJi0C,eAA4BuY,EAAmBxsD,IAAK,sBAAyB,2CAA6C,IAC1Hi0C,EAAWI,kBAAoBrR,EAAWjO,SAAYy3B,EAAmBxsD,IAAK,0BAA6B,gDAAkD,IAGlJ0sD,OAAQ7B,IAAkBT,KAAM,MAmMvBuC,CAAoBzpB,EAAS+Q,WAAYjR,EAAYiR,GAExE2Y,EAjML,SAA0B9Y,GAEzB,IAAI+Y,EAAS,GAEb,IAAM,IAAIh2C,KAAQi9B,EAAU,CAE3B,IAAIv4C,EAAQu4C,EAASj9B,IAEN,IAAVtb,GAELsxD,EAAO5tD,KAAM,WAAa4X,EAAO,IAAMtb,GAIxC,OAAOsxD,EAAOzC,KAAM,MAmLA0C,CAAiBhZ,GAEjCiZ,KAA6B7pB,EAAS+Q,aAAc/Q,EAAS+Q,WAAWI,kBAGxE0I,EAAUjiB,EAAGkyB,gBAIZ9pB,EAAS+pB,sBAEbb,EAAe,CAEdQ,GAECF,OAAQ7B,IAAkBT,KAAM,OAEhBxsD,OAAS,IAE1BwuD,GAAgB,OAIjBC,EAAiB,CAEhBE,EACAK,GAECF,OAAQ7B,IAAkBT,KAAM,OAEdxsD,OAAS,IAE5ByuD,GAAkB,QAMnBD,EAAe,CAEd,aAAeppB,EAAWkH,UAAY,UACtC,aAAelH,EAAWkH,UAAY,QAEtC,uBAAyB0f,EAAO/yC,KAEhC+1C,EAEA5pB,EAAWkqB,uBAAyB,0BAA4B,GAEhE,wBAA0BZ,EAE1B,qBAAuBtpB,EAAWmqB,SAChCnqB,EAAWoqB,QAAUpqB,EAAWpM,IAAQ,kBAAoB,GAC5DoM,EAAWoqB,QAAUpqB,EAAWqqB,OAAW,mBAAqB,GAElErqB,EAAWvO,IAAM,kBAAoB,GACrCuO,EAAWjO,OAAS,qBAAuB,GAC3CiO,EAAWjO,OAAS,WAAam3B,EAAmB,GACpDlpB,EAAWxN,SAAW,uBAAyB,GAC/CwN,EAAW3N,MAAQ,oBAAsB,GACzC2N,EAAWrN,YAAc,0BAA4B,GACrDqN,EAAWnN,QAAU,sBAAwB,GAC7CmN,EAAWhN,UAAY,wBAA0B,GACjDgN,EAAW7M,iBAAmB6M,EAAWkqB,uBAAyB,8BAAgC,GAClGlqB,EAAWnO,YAAc,0BAA4B,GACrDmO,EAAWzM,aAAe,2BAA6B,GACvDyM,EAAWvM,aAAe,2BAA6B,GACvDuM,EAAWrO,SAAW,uBAAyB,GAC/CqO,EAAWzC,aAAe,oBAAsB,GAEhDyC,EAAW8O,YAAc,sBAAwB,GAEjD9O,EAAW2Q,SAAW,uBAAyB,GAC/C3Q,EAAWsqB,iBAAmB,uBAAyB,GAEvDtqB,EAAW6B,aAAe,2BAA6B,GACvD7B,EAAW8B,eAA2C,IAA3B9B,EAAW8O,YAAwB,2BAA6B,GAC3F9O,EAAWuqB,YAAc,uBAAyB,GAClDvqB,EAAWwqB,UAAY,qBAAuB,GAE9CxqB,EAAWyqB,iBAAmB,wBAA0B,GACxDzqB,EAAWyqB,iBAAmB,WAAa1B,EAAsB,GAEjE/oB,EAAW+a,gBAAkB,8BAAgC,GAE7D/a,EAAW2U,uBAAyB,0BAA4B,GAChE3U,EAAW2U,wBAA0B1D,EAAWj0C,IAAK,kBAAqB,8BAAgC,GAE1G,4BACA,gCACA,iCACA,2BACA,6BACA,+BAEA,2BACA,yBACA,qBAEA,mBAEA,0BAEA,SAEA,0BAEA,iCACA,iCACA,iCACA,iCAEA,4BAEA,mCACA,mCACA,mCACA,mCAEA,UAEA,mCACA,mCACA,mCACA,mCAEA,WAEA,SAEA,sBAEA,8BACA,+BAEA,SAEA,MAEC0sD,OAAQ7B,IAAkBT,KAAM,MAElCiC,EAAiB,CAEhBE,EAEA,aAAevpB,EAAWkH,UAAY,UACtC,aAAelH,EAAWkH,UAAY,QAEtC,uBAAyB0f,EAAO/yC,KAEhC+1C,EAEA5pB,EAAWkQ,UAAY,qBAAuBlQ,EAAWkQ,UAAY,GAErE,wBAA0BoZ,EAExBtpB,EAAWoqB,QAAUpqB,EAAWpM,IAAQ,kBAAoB,GAC5DoM,EAAWoqB,QAAUpqB,EAAWqqB,OAAW,mBAAqB,GAElErqB,EAAWvO,IAAM,kBAAoB,GACrCuO,EAAWjO,OAAS,qBAAuB,GAC3CiO,EAAWjO,OAAS,WAAak3B,EAAmB,GACpDjpB,EAAWjO,OAAS,WAAam3B,EAAmB,GACpDlpB,EAAWjO,OAAS,WAAao3B,EAAuB,GACxDnpB,EAAWxN,SAAW,uBAAyB,GAC/CwN,EAAW3N,MAAQ,oBAAsB,GACzC2N,EAAWrN,YAAc,0BAA4B,GACrDqN,EAAWnN,QAAU,sBAAwB,GAC7CmN,EAAWhN,UAAY,wBAA0B,GACjDgN,EAAWnO,YAAc,0BAA4B,GACrDmO,EAAWzM,aAAe,2BAA6B,GACvDyM,EAAWvM,aAAe,2BAA6B,GACvDuM,EAAWrO,SAAW,uBAAyB,GAC/CqO,EAAWzC,aAAe,oBAAsB,GAEhDyC,EAAWrM,YAAc,0BAA4B,GAErDqM,EAAW8O,YAAc,sBAAwB,GAEjD9O,EAAWuqB,YAAc,uBAAyB,GAClDvqB,EAAWwqB,UAAY,qBAAuB,GAE9CxqB,EAAWyqB,iBAAmB,wBAA0B,GACxDzqB,EAAWyqB,iBAAmB,WAAa1B,EAAsB,GAEjE/oB,EAAWmQ,mBAAqB,8BAAgC,GAEhEnQ,EAAW0qB,wBAA0B,oCAAsC,GAE3E1qB,EAAW2U,uBAAyB,0BAA4B,GAChE3U,EAAW2U,wBAA0B1D,EAAWj0C,IAAK,kBAAqB,8BAAgC,GAEzG+sD,GAA8B9Y,EAAWj0C,IAAK,2BAAgCgjC,EAAWjO,QAAUkf,EAAWj0C,IAAK,0BAA8B,0BAA4B,GAE9K,2BACA,+BAEEgjC,EAAW2qB,cAAgB93D,EAAkB,uBAAyB,GACtEmtC,EAAW2qB,cAAgB93D,EAAkBmrB,6BAA6C,GAC1FgiB,EAAW2qB,cAAgB93D,EAtbhC,SAAiC+0D,EAAc+C,GAE9C,IAAIC,EAEJ,OAASD,GAER,KAAK73D,EACJ83D,EAAkB,SAClB,MAED,KAAK73D,GACJ63D,EAAkB,WAClB,MAED,KAAK53D,GACJ43D,EAAkB,aAClB,MAED,KAAK33D,GACJ23D,EAAkB,kBAClB,MAED,QACC,MAAM,IAAIntD,MAAO,4BAA8BktD,GAIjD,MAAO,2CAAsDC,EAAkB,0BA2Z9BC,CAAwB,EAAe7qB,EAAW2qB,aAAgB,GAEjH3qB,EAAWiQ,UAAY,oBAAsB,GAE3CjQ,EAAW8qB,gBAAkB9qB,EAAW+qB,aAAe/qB,EAAWgrB,gBAAkBhrB,EAAWirB,oBAAwBjtC,2BAA2C,GACpKgiB,EAAW+qB,YAAcpD,GAA0B,mBAAoB3nB,EAAW+qB,aAAgB,GAClG/qB,EAAWgrB,eAAiBrD,GAA0B,sBAAuB3nB,EAAWgrB,gBAAmB,GAC3GhrB,EAAWirB,oBAAsBtD,GAA0B,2BAA4B3nB,EAAWirB,qBAAwB,GAC1HjrB,EAAW8qB,gBArcmCp3C,EAqc+BssB,EAAW8qB,eAnctF56B,EAAaw3B,GAAuBh0C,GACjC,2DAA8Dwc,EAAY,GAAMA,EAAY,GAAM,OAkcI,GAE3G8P,EAAWkrB,aAAe,yBAA2BhrB,EAASgrB,aAAe,GAC7E,MAECxB,OAAQ7B,IAAkBT,KAAM,OAMnChxB,EAAeiyB,GADfjyB,EAAe0xB,GADf1xB,EAAeoyB,GAAepyB,GACiB4J,GACQA,GAIvD3J,EAAiBgyB,GADjBhyB,EAAiByxB,GADjBzxB,EAAiBmyB,GAAenyB,GACmB2J,GACQA,GAK3D,IAAImrB,EAAa/B,GAHjBhzB,EAAesyB,GAAatyB,IAIxBg1B,EAAe/B,GAHnBhzB,EAAiBqyB,GAAaryB,IAQ1Bg1B,EAAiB1E,GAAa7uB,EAAIA,EAAGwc,cAAe6W,GACpDG,EAAmB3E,GAAa7uB,EAAIA,EAAG0c,gBAAiB4W,GAE5DtzB,EAAGyzB,aAAcxR,EAASsR,GAC1BvzB,EAAGyzB,aAAcxR,EAASuR,QAIYjwD,IAAjC6kC,EAASqR,oBAEbzZ,EAAG0zB,mBAAoBzR,EAAS,EAAG7Z,EAASqR,sBAEL,IAA5BvR,EAAW6B,cAGtB/J,EAAG0zB,mBAAoBzR,EAAS,EAAG,YAIpCjiB,EAAG2zB,YAAa1R,GAEhB,IA4DI2R,EAgBAC,EA5EAC,EAAa9zB,EAAG+zB,kBAAmB9R,GAAU+R,OAC7CC,EAAYj0B,EAAGovB,iBAAkBmE,GAAiBS,OAClDE,EAAcl0B,EAAGovB,iBAAkBoE,GAAmBQ,OAEtDG,GAAW,EACXC,GAAkB,EAiItB,OA5H2D,IAAtDp0B,EAAGyuB,oBAAqBxM,EAASjiB,EAAGq0B,cAExCF,GAAW,EAEXpxD,QAAQC,MAAO,qCAAsCg9B,EAAGs0B,WAAY,qBAAsBt0B,EAAGyuB,oBAAqBxM,EAASjiB,EAAGu0B,iBAAmB,uBAAwBT,EAAYG,EAAWC,IAEtK,KAAfJ,EAEX/wD,QAAQmD,KAAM,6CAA8C4tD,GAEnC,KAAdG,GAAoC,KAAhBC,IAE/BE,GAAkB,GAIdA,IAEJ1xD,KAAK8xD,YAAc,CAElBL,SAAUA,EACV/rB,SAAUA,EAEV0rB,WAAYA,EAEZx1B,aAAc,CAEbj8B,IAAK4xD,EACLQ,OAAQnD,GAIT/yB,eAAgB,CAEfl8B,IAAK6xD,EACLO,OAAQlD,KAUXvxB,EAAG00B,aAAcnB,GACjBvzB,EAAG00B,aAAclB,GAMjB9wD,KAAK4/C,YAAc,WAQlB,YANwB/+C,IAAnBqwD,IAEJA,EAAiB,IAAIpF,GAAexuB,EAAIiiB,EAAS9H,IAI3CyZ,GAQRlxD,KAAKiyD,cAAgB,WAQpB,YAN0BpxD,IAArBswD,IAEJA,EA/fH,SAAkC7zB,EAAIiiB,GAMrC,IAJA,IAAI7gC,EAAa,GAEbzgB,EAAIq/B,EAAGyuB,oBAAqBxM,EAASjiB,EAAG40B,mBAElC50D,EAAI,EAAGA,EAAIW,EAAGX,IAAO,CAE9B,IACI+b,EADOikB,EAAG60B,gBAAiB5S,EAASjiD,GACxB+b,KAIhBqF,EAAYrF,GAASikB,EAAG80B,kBAAmB7S,EAASlmC,GAIrD,OAAOqF,EA8ec2zC,CAAyB/0B,EAAIiiB,IAI1C4R,GAMRnxD,KAAKsyD,QAAU,WAEdh1B,EAAGi1B,cAAehT,GAClBv/C,KAAKu/C,aAAU1+C,GAMhBG,OAAOsB,iBAAkBtC,KAAM,CAE9B8qB,SAAU,CACTtoB,IAAK,WAGJ,OADAnC,QAAQmD,KAAM,wDACPxD,KAAK4/C,gBAKdlhC,WAAY,CACXlc,IAAK,WAGJ,OADAnC,QAAQmD,KAAM,4DACPxD,KAAKiyD,oBAUfjyD,KAAKqZ,KAAO+yC,EAAO/yC,KACnBrZ,KAAKqkC,GAAK4oB,KACVjtD,KAAKsuD,KAAOA,EACZtuD,KAAKwyD,UAAY,EACjBxyD,KAAKu/C,QAAUA,EACfv/C,KAAK47B,aAAei1B,EACpB7wD,KAAK67B,eAAiBi1B,EAEf9wD,KC9pBR,SAASyyD,GAAehb,EAAUhB,EAAYic,GAE7C,IAAIlU,EAAW,GAEXmU,EAAY,CACfC,kBAAmB,QACnBC,qBAAsB,eACtBC,mBAAoB,SACpBjd,kBAAmB,QACnBkd,oBAAqB,UACrBC,kBAAmB,QACnBC,iBAAkB,QAClBC,qBAAsB,WACtBC,qBAAsB,WACtBC,kBAAmB,QACnBC,mBAAoB,SACpBC,eAAgB,SAChBC,eAAgB,UAGbC,EAAiB,CACpB,YAAa,yBAA0B,MAAO,cAAe,SAAU,aAAc,iBACrF,WAAY,QAAS,cAAe,sBAAuB,UAAW,YAAa,kBAAmB,cACtG,eAAgB,eAAgB,cAChC,WAAY,UAAW,eAAgB,MAAO,SAAU,SACxD,cAAe,kBAAmB,yBAA0B,WAC5D,WAAY,mBAAoB,eAAgB,eAChD,kBAAmB,kBAAmB,qBACtC,eAAgB,iBAAkB,gBAAiB,gBAAiB,oBACpE,mBAAoB,gBAAiB,cAAe,0BACpD,YAAa,cAAe,YAAa,5+/DAAqB,sBAAuB,eAAgB,aAwCtG,SAASC,EAA2Bx8B,EAAKy8B,GAExC,IAAIx6C,EAwBJ,OAtBO+d,EAIKA,EAAInc,UAEf5B,EAAW+d,EAAI/d,SAEJ+d,EAAI08B,sBAEftzD,QAAQmD,KAAM,6HACd0V,EAAW+d,EAAI28B,QAAQ16C,UATvBA,EAAW5c,GAcP4c,IAAa5c,IAAkBo3D,IAEnCx6C,EAAW1c,IAIL0c,EAIRlZ,KAAK6zD,cAAgB,SAAWnuB,EAAUjM,EAAQq6B,EAAS16B,EAAK26B,EAAaC,EAAmBr2C,GAE/F,IAAIs2C,EAAWtB,EAAWjtB,EAAStkC,MAK/BuuD,EAAWhyC,EAAOu2C,cAzEvB,SAAwBv2C,GAEvB,IACIw2C,EADWx2C,EAAOy2C,SACDD,MAErB,GAAKzB,EAAalX,oBAEjB,OAAO,KAWP,IAAI6Y,EAAkB3B,EAAa5X,kBAC/BwZ,EAAkBr3D,KAAK8B,OAASs1D,EAAkB,IAAO,GAEzD1E,EAAW1yD,KAAK/H,IAAKo/D,EAAiBH,EAAM/zD,QAEhD,OAAKuvD,EAAWwE,EAAM/zD,QAErBC,QAAQmD,KAAM,qCAAuC2wD,EAAM/zD,OAAS,6BAA+BuvD,EAAW,KACvG,GAIDA,EA2C8B4E,CAAe52C,GAAW,EAC5D+uB,EAAYgmB,EAAahmB,UAED,OAAvBhH,EAASgH,YAEbA,EAAYgmB,EAAa9Y,gBAAiBlU,EAASgH,cAEhChH,EAASgH,WAE3BrsC,QAAQmD,KAAM,oCAAqCkiC,EAASgH,UAAW,uBAAwBA,EAAW,YAM5G,IAAI8nB,EAAsB/c,EAASgd,kBA6EnC,MA3EiB,CAEhBR,SAAUA,EAEVvnB,UAAWA,EACXgjB,uBAAwBgD,EAAatX,eACrCkV,eAAgBmD,EAA+Be,EAA+BA,EAAoBZ,QAA3B,KAAoCnc,EAASid,aACpHz9B,MAAQyO,EAASzO,IACjBs5B,YAAakD,EAA2B/tB,EAASzO,IAAKwgB,EAASkd,YAC/Dp9B,SAAWmO,EAASnO,OACpBq9B,WAAYlvB,EAASnO,QAAUmO,EAASnO,OAAO5e,QAC/C63C,eAAgBiD,EAA2B/tB,EAASnO,OAAQkgB,EAASkd,YACrE1F,eAAmBvpB,EAASnO,SAAgBmO,EAASnO,OAAO5e,UAAY5f,IAA+B2sC,EAASnO,OAAO5e,UAAY3f,IACnIg/B,WAAa0N,EAAS1N,SACtBH,QAAU6N,EAAS7N,MACnBM,cAAgBuN,EAASvN,YACzBs4B,oBAAqBgD,EAA2B/tB,EAASvN,YAAasf,EAASkd,YAC/Et8B,UAAYqN,EAASrN,QACrBG,YAAckN,EAASlN,UACvBG,kBAAoB+M,EAAS/M,gBAC7BI,eAAiB2M,EAAS3M,aAC1BE,eAAiByM,EAASzM,aAC1B5B,cAAgBqO,EAASrO,YACzBF,WAAauO,EAASvO,SAEtBgC,cAAgBuM,EAASvM,YAEzB2c,QAASpQ,EAASoQ,QAElB/S,aAAc2C,EAAS3C,aAEvB3J,MAAQA,EACRw2B,OAAQlqB,EAAStM,IACjBy2B,OAAUz2B,GAAOA,EAAIy7B,UAErBvgB,YAAa5O,EAAS4O,YAEtBiM,gBAAiB7a,EAAS6a,gBAC1BpG,uBAAwBuY,EAAavY,uBAErChE,SAAUzQ,EAASyQ,UAAYwZ,EAAW,EAC1CA,SAAUA,EACVG,iBAAkB4C,EAAalX,oBAE/BnU,aAAc3B,EAAS2B,aACvBC,aAAc5B,EAAS4B,aACvBwtB,gBAAiBrd,EAASqd,gBAC1BC,gBAAiBtd,EAASsd,gBAE1BvH,aAAc/zB,EAAOu7B,YAAY50D,OACjCutD,eAAgBl0B,EAAOzb,MAAM5d,OAC7BqtD,cAAeh0B,EAAOw7B,KAAK70D,OAC3BstD,kBAAmBj0B,EAAOy7B,SAAS90D,OACnCwtD,cAAen0B,EAAO07B,KAAK/0D,OAE3B0tD,kBAAmBiG,EACnBhG,oBAAqBiG,EAErBve,UAAW/P,EAAS+P,UAEpBwa,iBAAkBxY,EAAS2d,UAAU7uB,SAAW5oB,EAAOukB,eAAiB4xB,EAAQ1zD,OAAS,EACzFouD,cAAe/W,EAAS2d,UAAUh0D,KAElC+uD,YAAa1Y,EAAS0Y,YACtBD,wBAAyBzY,EAASyY,wBAElCva,mBAAoBjQ,EAASiQ,mBAE7BD,UAAWhQ,EAASgQ,UACpBqa,YAAarqB,EAAS2O,OAASn+C,EAC/B85D,UAAWtqB,EAAS2O,OAASp+C,EAE7By6D,kBAA0C7vD,IAA1B6kC,EAASgrB,cAA+BhrB,EAASgrB,eAOnE1wD,KAAKq1D,eAAiB,SAAW3vB,EAAUF,GAE1C,IAAItjC,EAAQ,GAaZ,GAXKsjC,EAAWyuB,SAEf/xD,EAAMT,KAAM+jC,EAAWyuB,WAIvB/xD,EAAMT,KAAMikC,EAAS7J,gBACrB35B,EAAMT,KAAMikC,EAAS9J,oBAII/6B,IAArB6kC,EAAS4Q,QAEb,IAAM,IAAIj9B,KAAQqsB,EAAS4Q,QAE1Bp0C,EAAMT,KAAM4X,GACZnX,EAAMT,KAAMikC,EAAS4Q,QAASj9B,IAMhC,IAAM,IAAI/b,EAAI,EAAGA,EAAIk2D,EAAepzD,OAAQ9C,IAE3C4E,EAAMT,KAAM+jC,EAAYguB,EAAgBl2D,KAQzC,OAJA4E,EAAMT,KAAMikC,EAASwa,gBAAgB3iD,YAErC2E,EAAMT,KAAMg2C,EAASid,aAEdxyD,EAAM0qD,QAId5sD,KAAKs1D,eAAiB,SAAW5vB,EAAU0mB,EAAQ5mB,EAAY8oB,GAK9D,IAHA,IAAI/O,EAGMhvC,EAAI,EAAGglD,EAAK/W,EAASp+C,OAAQmQ,EAAIglD,EAAIhlD,IAAO,CAErD,IAAIilD,EAAchX,EAAUjuC,GAE5B,GAAKilD,EAAYlH,OAASA,EAAO,IAEhC/O,EAAUiW,GACChD,UAEX,OAaF,YAPiB3xD,IAAZ0+C,IAEJA,EAAU,IAAI8O,GAAc5W,EAAUhB,EAAY6X,EAAM5oB,EAAU0mB,EAAQ5mB,GAC1EgZ,EAAS/8C,KAAM89C,IAITA,GAIRv/C,KAAKy1D,eAAiB,SAAWlW,GAEhC,GAA8B,KAAtBA,EAAQiT,UAAkB,CAGjC,IAAIl1D,EAAIkhD,EAASh9C,QAAS+9C,GAC1Bf,EAAUlhD,GAAMkhD,EAAUA,EAASp+C,OAAS,GAC5Co+C,EAASkX,MAGTnW,EAAQ+S,YAOVtyD,KAAKw+C,SAAWA,ECtSjB,SAASmX,KAER,IAAI/7B,EAAa,IAAI4D,QAmCrB,MAAO,CACNh7B,IAlCD,SAAcmb,GAEb,IAAIsZ,EAAM2C,EAAWp3B,IAAKmb,GAS1B,YAPa9c,IAARo2B,IAEJA,EAAM,GACN2C,EAAWn3B,IAAKkb,EAAQsZ,IAIlBA,GAwBPyG,OApBD,SAAiB/f,GAEhBic,EAAWiE,OAAQlgB,IAmBnBxL,OAfD,SAAiBwL,EAAQooB,EAAKhoC,GAE7B67B,EAAWp3B,IAAKmb,GAAUooB,GAAQhoC,GAclCue,QAVD,WAECsd,EAAa,IAAI4D,UCjCnB,SAASo4B,GAAmBhyD,EAAGC,GAE9B,OAAKD,EAAEw+B,cAAgBv+B,EAAEu+B,YAEjBx+B,EAAEw+B,YAAcv+B,EAAEu+B,YAEdx+B,EAAE27C,SAAW17C,EAAE07C,SAAW37C,EAAE27C,UAAY17C,EAAE07C,QAE9C37C,EAAE27C,QAAQlb,GAAKxgC,EAAE07C,QAAQlb,GAErBzgC,EAAE8hC,SAASrB,KAAOxgC,EAAE6hC,SAASrB,GAEjCzgC,EAAE8hC,SAASrB,GAAKxgC,EAAE6hC,SAASrB,GAEvBzgC,EAAEpO,IAAMqO,EAAErO,EAEdoO,EAAEpO,EAAIqO,EAAErO,EAIRoO,EAAEygC,GAAKxgC,EAAEwgC,GAMlB,SAASwxB,GAA0BjyD,EAAGC,GAErC,OAAKD,EAAEw+B,cAAgBv+B,EAAEu+B,YAEjBx+B,EAAEw+B,YAAcv+B,EAAEu+B,YAEnBx+B,EAAEpO,IAAMqO,EAAErO,EAETqO,EAAErO,EAAIoO,EAAEpO,EAIRoO,EAAEygC,GAAKxgC,EAAEwgC,GAMlB,SAASyxB,KAER,IAAIC,EAAc,GACdC,EAAmB,EAEnBC,EAAS,GACT1hB,EAAc,GAwDlB,MAAO,CACN0hB,OAAQA,EACR1hB,YAAaA,EAEbmI,KA1DD,WAECsZ,EAAmB,EAEnBC,EAAO71D,OAAS,EAChBm0C,EAAYn0C,OAAS,GAsDrBqB,KAlDD,SAAekc,EAAQW,EAAUonB,EAAUlwC,EAAGy0C,GAE7C,IAAIisB,EAAaH,EAAaC,QAEVn1D,IAAfq1D,GAEJA,EAAa,CACZ7xB,GAAI1mB,EAAO0mB,GACX1mB,OAAQA,EACRW,SAAUA,EACVonB,SAAUA,EACV6Z,QAAS7Z,EAAS6Z,QAClBnd,YAAazkB,EAAOykB,YACpB5sC,EAAGA,EACHy0C,MAAOA,GAGR8rB,EAAaC,GAAqBE,IAIlCA,EAAW7xB,GAAK1mB,EAAO0mB,GACvB6xB,EAAWv4C,OAASA,EACpBu4C,EAAW53C,SAAWA,EACtB43C,EAAWxwB,SAAWA,EACtBwwB,EAAW3W,QAAU7Z,EAAS6Z,QAC9B2W,EAAW9zB,YAAczkB,EAAOykB,YAChC8zB,EAAW1gE,EAAIA,EACf0gE,EAAWjsB,MAAQA,KAIO,IAAzBvE,EAAS6O,YAAuBA,EAAc0hB,GAASx0D,KAAMy0D,GAE/DF,KAkBAhpB,KAdD,WAEMipB,EAAO71D,OAAS,GAAI61D,EAAOjpB,KAAM4oB,IACjCrhB,EAAYn0C,OAAS,GAAIm0C,EAAYvH,KAAM6oB,MAgBlD,SAASM,KAER,IAAIC,EAAQ,GA0BZ,MAAO,CACN5zD,IAzBD,SAAc+1C,EAAO5iC,GAEpB,IAAIs4B,EAAOsK,EAAMlU,GAAK,IAAM1uB,EAAO0uB,GAC/BgyB,EAAOD,EAAOnoB,GAWlB,YATcptC,IAATw1D,IAIJA,EAAO,IAAIP,GACXM,EAAOnoB,GAASooB,GAIVA,GAYP/5C,QARD,WAEC85C,EAAQ,KCzIV,SAASE,KAER,IAAI78B,EAAS,GAEb,MAAO,CAENj3B,IAAK,SAAW+zD,GAEf,QAA4B11D,IAAvB44B,EAAQ88B,EAAMlyB,IAElB,OAAO5K,EAAQ88B,EAAMlyB,IAItB,IAAIvZ,EAEJ,OAASyrC,EAAMn1D,MAEd,IAAK,mBACJ0pB,EAAW,CACV5J,UAAW,IAAIpgB,GACf20B,MAAO,IAAIZ,GAEXgF,QAAQ,EACRC,WAAY,EACZC,aAAc,EACdC,cAAe,IAAIj6B,IAEpB,MAED,IAAK,YACJ+qB,EAAW,CACVzb,SAAU,IAAIvO,GACdogB,UAAW,IAAIpgB,GACf20B,MAAO,IAAIZ,GACXyF,SAAU,EACVC,QAAS,EACTC,YAAa,EACbC,MAAO,EAEPZ,QAAQ,EACRC,WAAY,EACZC,aAAc,EACdC,cAAe,IAAIj6B,IAEpB,MAED,IAAK,aACJ+qB,EAAW,CACVzb,SAAU,IAAIvO,GACd20B,MAAO,IAAIZ,GACXyF,SAAU,EACVG,MAAO,EAEPZ,QAAQ,EACRC,WAAY,EACZC,aAAc,EACdC,cAAe,IAAIj6B,GACnBg7B,iBAAkB,EAClBC,gBAAiB,KAElB,MAED,IAAK,kBACJlQ,EAAW,CACV5J,UAAW,IAAIpgB,GACfs6B,SAAU,IAAIvG,GACdwG,YAAa,IAAIxG,IAElB,MAED,IAAK,gBACJ/J,EAAW,CACV2K,MAAO,IAAIZ,GACXxlB,SAAU,IAAIvO,GACd01D,UAAW,IAAI11D,GACf21D,WAAY,IAAI31D,IASnB,OAFA24B,EAAQ88B,EAAMlyB,IAAOvZ,EAEdA,IAQV,IC9DMzJ,GACAI,GCfFi1C,GAAcC,GA4Cbr3D,GADAyP,GFiCD5B,GAAQ,EAEZ,SAASypD,KAER,IAAI/wB,EAAQ,IAAIywB,GAEZ5e,EAAQ,CAEXrT,GAAIl3B,KAEJ8gC,KAAM,GAEN4oB,QAAS,CAAE,EAAG,EAAG,GACjB7B,YAAa,GACb/6B,qBAAsB,GACtBC,wBAAyB,GACzBC,eAAgB,GAChB86B,KAAM,GACNv6B,cAAe,GACfC,iBAAkB,GAClBC,aAAc,GACdC,iBAAkB,GAClBT,wBAAyB,GACzB86B,SAAU,GACV15B,gBAAiB,GACjBC,cAAe,GACfzd,MAAO,GACPid,eAAgB,GAChBC,kBAAmB,GACnBi6B,KAAM,IAIH2B,EAAU,IAAIh2D,GACd4W,EAAU,IAAIzX,GACd82D,EAAW,IAAI92D,GA8MnB,MAAO,CACN+2D,MA7MD,SAAgBv9B,EAAQq6B,EAASn+C,GAYhC,IAVA,IAAIpC,EAAI,EAAGiE,EAAI,EAAG3T,EAAI,EAElBozD,EAAoB,EACpBC,EAAc,EACdC,EAAa,EACbC,EAAiB,EACjBC,EAAa,EAEb7a,EAAa7mC,EAAO4sB,mBAEdjlC,EAAI,EAAG8E,EAAIq3B,EAAOr5B,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAEjD,IAAIi5D,EAAQ98B,EAAQn8B,GAEhBm4B,EAAQ8gC,EAAM9gC,MACd6hC,EAAYf,EAAMe,UAClBh9B,EAAWi8B,EAAMj8B,SAEjB86B,EAAcmB,EAAM18B,QAAU08B,EAAM18B,OAAO5C,IAAQs/B,EAAM18B,OAAO5C,IAAI28B,QAAU,KAElF,GAAK2C,EAAMgB,eAEVhkD,GAAKkiB,EAAMliB,EAAI+jD,EACf9/C,GAAKie,EAAMje,EAAI8/C,EACfzzD,GAAK4xB,EAAM5xB,EAAIyzD,OAET,GAAKf,EAAMiB,mBAAqB,CAYtC,IAVI1sC,EAAW+a,EAAMrjC,IAAK+zD,IAEjB9gC,MAAMpyB,KAAMkzD,EAAM9gC,OAAQtxB,eAAgBoyD,EAAMe,WACzDxsC,EAAS5J,UAAU9J,sBAAuBm/C,EAAM1gD,aAChDihD,EAAQ1/C,sBAAuBm/C,EAAMt0D,OAAO4T,aAC5CiV,EAAS5J,UAAUnd,IAAK+yD,GACxBhsC,EAAS5J,UAAUnL,mBAAoBymC,GAEvC1xB,EAAS+O,OAAS08B,EAAMt0B,WAEnBs0B,EAAMt0B,WAAa,CAEvB,IAAIpI,EAAS08B,EAAM18B,OAEnB/O,EAASgP,WAAaD,EAAO49B,KAC7B3sC,EAASiP,aAAeF,EAAO3iB,OAC/B4T,EAASkP,cAAgBH,EAAO69B,QAIjChgB,EAAMzd,qBAAsBg9B,GAAsB7B,EAClD1d,EAAMxd,wBAAyB+8B,GAAsBV,EAAM18B,OAAOxkC,OAClEqiD,EAAMvd,eAAgB88B,GAAsBnsC,EAAS5J,UACrDw2B,EAAMtd,wBAAyB68B,GAAsBV,EAAMt0B,WAAas0B,EAAM18B,OAAO89B,aAAe,EAEpGjgB,EAAMsd,YAAaiC,GAAsBnsC,EAEzCmsC,SAEM,GAAKV,EAAMqB,aAEb9sC,EAAW+a,EAAMrjC,IAAK+zD,IAEjBlnD,SAAS+H,sBAAuBm/C,EAAM1gD,aAC/CiV,EAASzb,SAAShC,aAAcmvC,GAEhC1xB,EAAS2K,MAAMpyB,KAAMoyB,GAAQtxB,eAAgBmzD,GAC7CxsC,EAASwP,SAAWA,EAEpBxP,EAAS5J,UAAU9J,sBAAuBm/C,EAAM1gD,aAChDihD,EAAQ1/C,sBAAuBm/C,EAAMt0D,OAAO4T,aAC5CiV,EAAS5J,UAAUnd,IAAK+yD,GACxBhsC,EAAS5J,UAAUnL,mBAAoBymC,GAEvC1xB,EAASyP,QAAUt9B,KAAK0J,IAAK4vD,EAAMlxD,OACnCylB,EAAS0P,YAAcv9B,KAAK0J,IAAK4vD,EAAMlxD,OAAU,EAAIkxD,EAAMsB,WAC3D/sC,EAAS2P,MAA6B,IAAnB87B,EAAMj8B,SAAmB,EAAMi8B,EAAM97B,MAExD3P,EAAS+O,OAAS08B,EAAMt0B,WAEnBs0B,EAAMt0B,aAENpI,EAAS08B,EAAM18B,OAEnB/O,EAASgP,WAAaD,EAAO49B,KAC7B3sC,EAASiP,aAAeF,EAAO3iB,OAC/B4T,EAASkP,cAAgBH,EAAO69B,SAIjChgB,EAAMhd,cAAey8B,GAAe/B,EACpC1d,EAAM/c,iBAAkBw8B,GAAeZ,EAAM18B,OAAOxkC,OACpDqiD,EAAM9c,aAAcu8B,GAAersC,EAASzb,SAC5CqoC,EAAM7c,iBAAkBs8B,GAAeZ,EAAMt0B,WAAas0B,EAAM18B,OAAO89B,aAAe,EACtFjgB,EAAMud,KAAMkC,GAAersC,EAE3BqsC,SAEM,GAAKZ,EAAMuB,iBAEbhtC,EAAW+a,EAAMrjC,IAAK+zD,IAMjB9gC,MAAMpyB,KAAMoyB,GAAQtxB,eAAgBmzD,GAE7CxsC,EAASzb,SAAS+H,sBAAuBm/C,EAAM1gD,aAC/CiV,EAASzb,SAAShC,aAAcmvC,GAGhCua,EAAShvD,WACT2P,EAAQrU,KAAMkzD,EAAM1gD,aACpB6B,EAAQzM,YAAauxC,GACrBua,EAASvuD,gBAAiBkP,GAE1BoT,EAAS0rC,UAAU/zD,IAAmB,GAAd8zD,EAAMh0D,MAAa,EAAK,GAChDuoB,EAAS2rC,WAAWh0D,IAAK,EAAoB,GAAf8zD,EAAM7zD,OAAc,GAElDooB,EAAS0rC,UAAUnpD,aAAc0pD,GACjCjsC,EAAS2rC,WAAWppD,aAAc0pD,GAIlCjsC,EAAS+O,OAAS08B,EAAMt0B,WACnBs0B,EAAMt0B,aACVyV,EAAMjc,cAAe27B,GAAmBhC,GAEzCtqC,EAASyQ,gBAAiB,EACvBg7B,EAAMwB,cACRjtC,EAASyQ,gBAAiB,GAE3Bmc,EAAMwd,SAAUkC,GAAmBtsC,EAEnC4sB,EAAMwd,SAAUkC,GAAmBtsC,EACnC4sB,EAAMlc,gBAAiB47B,GAAmBb,EAAMwB,YAEhDX,SAEM,GAAKb,EAAMyB,cAEbltC,EAAW+a,EAAMrjC,IAAK+zD,IAEjBlnD,SAAS+H,sBAAuBm/C,EAAM1gD,aAC/CiV,EAASzb,SAAShC,aAAcmvC,GAEhC1xB,EAAS2K,MAAMpyB,KAAMkzD,EAAM9gC,OAAQtxB,eAAgBoyD,EAAMe,WACzDxsC,EAASwP,SAAWi8B,EAAMj8B,SAC1BxP,EAAS2P,MAA6B,IAAnB87B,EAAMj8B,SAAmB,EAAMi8B,EAAM97B,MAExD3P,EAAS+O,OAAS08B,EAAMt0B,WAEnBs0B,EAAMt0B,aAENpI,EAAS08B,EAAM18B,OAEnB/O,EAASgP,WAAaD,EAAO49B,KAC7B3sC,EAASiP,aAAeF,EAAO3iB,OAC/B4T,EAASkP,cAAgBH,EAAO69B,QAChC5sC,EAASiQ,iBAAmBlB,EAAOlkB,OAAOxF,KAC1C2a,EAASkQ,gBAAkBnB,EAAOlkB,OAAOvF,KAI1CsnC,EAAMzc,eAAgBi8B,GAAgB9B,EACtC1d,EAAMxc,kBAAmBg8B,GAAgBX,EAAM18B,OAAOxkC,OACtDqiD,EAAM15B,MAAOk5C,GAAgBpsC,EAE7BosC,SAEM,GAAKX,EAAM0B,kBAAoB,CAErC,IAAIntC,GAAAA,EAAW+a,EAAMrjC,IAAK+zD,IAEjBr1C,UAAU9J,sBAAuBm/C,EAAM1gD,aAChDiV,EAAS5J,UAAUnL,mBAAoBymC,GACvC1xB,EAAS5J,UAAU9b,YAEnB0lB,EAASsQ,SAAS/3B,KAAMkzD,EAAM9gC,OAAQtxB,eAAgBmzD,GACtDxsC,EAASuQ,YAAYh4B,KAAMkzD,EAAMl7B,aAAcl3B,eAAgBmzD,GAE/D5f,EAAMyd,KAAMkC,GAAevsC,EAE3BusC,KAMF3f,EAAMmf,QAAS,GAAMtjD,EACrBmkC,EAAMmf,QAAS,GAAMr/C,EACrBkgC,EAAMmf,QAAS,GAAMhzD,EAErB6zC,EAAMsd,YAAY50D,OAAS62D,EAC3Bvf,EAAMud,KAAK70D,OAAS+2D,EACpBzf,EAAMwd,SAAS90D,OAASg3D,EACxB1f,EAAM15B,MAAM5d,OAAS82D,EACrBxf,EAAMyd,KAAK/0D,OAASi3D,EAEpB3f,EAAMzJ,KAAOyJ,EAAMrT,GAAK,IAAM4yB,EAAoB,IAAMC,EAAc,IAAMC,EAAa,IAAMC,EAAiB,IAAMC,EAAa,IAAMvD,EAAQ1zD,QAMjJs3C,MAAOA,GGnVT,SAASwgB,KAER,IAAIz+B,EAAS,IAAIm9B,GAEbuB,EAAc,GACdC,EAAe,GACfC,EAAe,GA0CnB,MAAO,CACN3b,KAzCD,WAECyb,EAAY/3D,OAAS,EACrBg4D,EAAah4D,OAAS,EACtBi4D,EAAaj4D,OAAS,GAsCtBs3C,MAVW,CACXygB,YAAaA,EACbC,aAAcA,EACdC,aAAcA,EAEd5+B,OAAQA,GAMR6+B,YAjBD,SAAsB3iD,GAErB8jB,EAAOu9B,MAAOmB,EAAaC,EAAcziD,IAiBzC4iD,UArCD,SAAoBhC,GAEnB4B,EAAY12D,KAAM80D,IAoClBiC,WAhCD,SAAqBC,GAEpBL,EAAa32D,KAAMg3D,IA+BnBC,WA3BD,SAAqBD,GAEpBJ,EAAa52D,KAAMg3D,KA8BrB,SAASE,KAER,IAAIC,EAAe,GAyBnB,MAAO,CACNp2D,IAxBD,SAAc+1C,EAAO5iC,GAEpB,IAAIs4B,EAAOsK,EAAMlU,GAAK,IAAM1uB,EAAO0uB,GAE/Bw0B,EAAcD,EAAc3qB,GAShC,YAPqBptC,IAAhBg4D,IAEJA,EAAc,IAAIX,GAClBU,EAAc3qB,GAAS4qB,GAIjBA,GAYPv8C,QARD,WAECs8C,EAAe,KCzEjB,SAASE,GAAmBv2D,EAAOG,EAAQq2D,GAE1C/4D,KAAKuC,MAAQA,EACbvC,KAAK0C,OAASA,EAEd1C,KAAKg5D,QAAU,IAAI57B,GAAS,EAAG,EAAG76B,EAAOG,GACzC1C,KAAKi5D,aAAc,EAEnBj5D,KAAKk5D,SAAW,IAAI97B,GAAS,EAAG,EAAG76B,EAAOG,QAIf7B,KAF3Bk4D,EAAUA,GAAW,IAERhgD,YAA0BggD,EAAQhgD,UAAYxf,IAE3DyG,KAAK4zD,QAAU,IAAIn7C,QAAS5X,OAAWA,EAAWk4D,EAAQngD,MAAOmgD,EAAQlgD,MAAOkgD,EAAQjgD,UAAWigD,EAAQhgD,UAAWggD,EAAQ//C,OAAQ+/C,EAAQ33D,KAAM23D,EAAQ9/C,WAAY8/C,EAAQ7/C,UAEhLlZ,KAAKm5D,iBAAsCt4D,IAAxBk4D,EAAQI,aAA4BJ,EAAQI,YAC/Dn5D,KAAKo5D,mBAA0Cv4D,IAA1Bk4D,EAAQK,eAA8BL,EAAQK,cACnEp5D,KAAKq5D,kBAAwCx4D,IAAzBk4D,EAAQM,aAA6BN,EAAQM,aAAe,KCRjF,SAASzG,GAAmBptB,GAE3B2O,GAAS9xC,KAAMrC,MAEfA,KAAKoB,KAAO,oBAEZpB,KAAK0wD,aAAe7zD,GAEpBmD,KAAKm2C,UAAW,EAChBn2C,KAAKqnC,cAAe,EAEpBrnC,KAAKi3B,IAAM,KAEXj3B,KAAKm3B,SAAW,KAEhBn3B,KAAK24B,gBAAkB,KACvB34B,KAAK44B,kBAAoB,EACzB54B,KAAK64B,iBAAmB,EAExB74B,KAAK+1C,WAAY,EACjB/1C,KAAKg2C,mBAAqB,EAE1Bh2C,KAAKo5B,KAAM,EACXp5B,KAAKy5B,QAAS,EAEdz5B,KAAKo2C,UAAW5Q,GCzBjB,SAASqtB,GAAsBrtB,GAE9B2O,GAAS9xC,KAAMrC,MAEfA,KAAKoB,KAAO,uBAEZpB,KAAKi9B,kBAAoB,IAAIn8B,GAC7Bd,KAAKk9B,aAAe,EACpBl9B,KAAKm9B,YAAc,IAEnBn9B,KAAKm2C,UAAW,EAChBn2C,KAAKqnC,cAAe,EAEpBrnC,KAAKi3B,IAAM,KAEXj3B,KAAKm3B,SAAW,KAEhBn3B,KAAK24B,gBAAkB,KACvB34B,KAAK44B,kBAAoB,EACzB54B,KAAK64B,iBAAmB,EAExB74B,KAAKo5B,KAAM,EACXp5B,KAAKy5B,QAAS,EAEdz5B,KAAKo2C,UAAW5Q,GCnCjB,SAAS8zB,GAAgBC,EAAWC,EAAUhf,GAwC7C,IAtCA,IAAIif,EAAW,IAAIl/C,GAClBm/C,EAAoB,IAAIz5D,GAExB05D,EAAiB,IAAI55D,GACrB65D,EAAoB,IAAI75D,GAASy6C,EAAgBA,GAEjDqf,EAAc,IAAI/4D,GAClBg5D,EAAsB,IAAIh5D,GAE1Bi5D,EAAgB,EAChBC,EAAgB,EAEhBC,EAAgE,GAAlCF,EAAgBC,GAE9CE,EAAkB,IAAI5uC,MAAO2uC,GAC7BE,EAAqB,IAAI7uC,MAAO2uC,GAEhCG,EAAiB,GAEdhlB,EAAa,CAAEilB,EAAGpkE,EAAUqkE,EAAGtkE,EAAWukE,EAAGrkE,GAE7CskE,EAAiB,CACpB,IAAI15D,GAAS,EAAG,EAAG,GAAK,IAAIA,IAAW,EAAG,EAAG,GAAK,IAAIA,GAAS,EAAG,EAAG,GACrE,IAAIA,GAAS,EAAG,GAAK,GAAK,IAAIA,GAAS,EAAG,EAAG,GAAK,IAAIA,GAAS,GAAK,EAAG,IAGpE25D,EAAU,CACb,IAAI35D,GAAS,EAAG,EAAG,GAAK,IAAIA,GAAS,EAAG,EAAG,GAAK,IAAIA,GAAS,EAAG,EAAG,GACnE,IAAIA,GAAS,EAAG,EAAG,GAAK,IAAIA,GAAS,EAAG,EAAG,GAAK,IAAIA,GAAS,EAAG,GAAK,IAGlE45D,EAAkB,CACrB,IAAIt9B,GAAW,IAAIA,GAAW,IAAIA,GAClC,IAAIA,GAAW,IAAIA,GAAW,IAAIA,IAKzB9/B,EAAI,EAAGA,IAAM28D,IAA8B38D,EAAI,CAExD,IAAIq9D,EAAwC,IAAxBr9D,EAAIy8D,GACpBa,EAAwC,IAAxBt9D,EAAI08D,GAEpBa,EAAgB,IAAIjI,GAAmB,CAE1ClC,aAAc5zD,GAEduqC,aAAcszB,EACdxkB,SAAUykB,IAIXV,EAAiB58D,GAAMu9D,EAIvB,IAAIC,EAAmB,IAAIjI,GAAsB,CAEhDxrB,aAAcszB,EACdxkB,SAAUykB,IAIXT,EAAoB78D,GAAMw9D,EAM3B,IAAI38C,EAAQne,KAqLZ,SAAS+6D,EAAkBp9C,EAAQ+nB,EAAUsyB,EAAcgD,EAAoBjgC,EAAkBC,GAEhG,IAAI1c,EAAWX,EAAOW,SAElB28C,EAAS,KAETC,EAAmBhB,EACnBiB,EAAiBx9C,EAAOy9C,oBAS5B,GAPKpD,IAEJkD,EAAmBf,EACnBgB,EAAiBx9C,EAAO09C,wBAIlBF,EAmCNF,EAASE,MAnCc,CAEvB,IAAIR,GAAc,EAEbj1B,EAAS2B,eAER/oB,GAAYA,EAASG,iBAEzBk8C,EAAcr8C,EAAS8xB,iBAAmB9xB,EAAS8xB,gBAAgB/gC,UAAYiP,EAAS8xB,gBAAgB/gC,SAASjP,OAAS,EAE/Gke,GAAYA,EAASC,aAEhCo8C,EAAcr8C,EAAS+oB,cAAgB/oB,EAAS+oB,aAAajnC,OAAS,IAMnEud,EAAOu2C,gBAAuC,IAAtBxuB,EAASyQ,UAErC91C,QAAQmD,KAAM,+EAAgFma,GAI/F,IAAIi9C,EAAcj9C,EAAOu2C,eAAiBxuB,EAASyQ,SAE/CmlB,EAAe,EAEdX,IAAcW,GAAgBvB,GAC9Ba,IAAcU,GAAgBtB,GAEnCiB,EAASC,EAAkBI,GAQ5B,GAAK/B,EAAU3d,uBACY,IAAzBlW,EAASyP,aAC0B,IAAnCzP,EAASuP,eAAe70C,OAAe,CAKxC,IAAIm7D,EAAON,EAAO7hD,KAAMoiD,EAAO91B,EAAStsB,KAEpCqiD,EAAsBrB,EAAgBmB,QAEb16D,IAAxB46D,IAEJA,EAAsB,GACtBrB,EAAgBmB,GAASE,GAI1B,IAAIC,EAAiBD,EAAqBD,QAElB36D,IAAnB66D,IAEJA,EAAiBT,EAAO93D,QACxBs4D,EAAqBD,GAASE,GAI/BT,EAASS,EAwBV,OApBAT,EAAOj5B,QAAU0D,EAAS1D,QAC1Bi5B,EAAOllB,UAAYrQ,EAASqQ,UAE5BklB,EAAO5mB,KAAgC,MAAvB3O,EAAS0P,WAAuB1P,EAAS0P,WAAaA,EAAY1P,EAAS2O,MAE3F4mB,EAAO9lB,YAAczP,EAASyP,YAC9B8lB,EAAOhmB,eAAiBvP,EAASuP,eACjCgmB,EAAO/lB,iBAAmBxP,EAASwP,iBAEnC+lB,EAAOjlB,mBAAqBtQ,EAASsQ,mBACrCilB,EAAO1kB,UAAY7Q,EAAS6Q,UAEvByhB,GAAgBiD,EAAOU,yBAE3BV,EAAOh+B,kBAAkB55B,KAAM23D,GAC/BC,EAAO/9B,aAAenC,EACtBkgC,EAAO99B,YAAcnC,GAIfigC,EAIR,SAASW,EAAcj+C,EAAQhI,EAAQkmD,EAAc7D,GAEpD,IAAwB,IAAnBr6C,EAAOqkB,QAAZ,CAIA,GAFcrkB,EAAO0jB,OAAOD,KAAMzrB,EAAO0rB,UAEvB1jB,EAAO0uB,QAAU1uB,EAAOi1B,QAAUj1B,EAAOg1B,WAErDh1B,EAAOskB,cAAkBtkB,EAAOwkB,eAAiBs3B,EAASx2C,iBAAkBtF,IAAa,CAE7FA,EAAOkkB,gBAAgB72B,iBAAkB6wD,EAAat5B,mBAAoB5kB,EAAO9H,aAEjF,IAAIyI,EAAWk7C,EAASrnD,OAAQwL,GAC5B+nB,EAAW/nB,EAAO+nB,SAEtB,GAAKpa,MAAMC,QAASma,GAInB,IAFA,IAAI0D,EAAS9qB,EAAS8qB,OAEZ8E,EAAI,EAAGC,EAAK/E,EAAOhpC,OAAQ8tC,EAAIC,EAAID,IAAO,CAEnD,IAAIjE,EAAQb,EAAQ8E,GAChB4tB,EAAgBp2B,EAAUuE,EAAMpH,eAEpC,GAAKi5B,GAAiBA,EAAc95B,QAAU,CAE7C,IAAI64B,EAAgBE,EAAkBp9C,EAAQm+C,EAAe9D,EAAc8B,EAAqB+B,EAAa1rD,KAAM0rD,EAAazrD,KAChImpD,EAAUvgB,mBAAoB6iB,EAAc,KAAMv9C,EAAUu8C,EAAel9C,EAAQssB,SAM1EvE,EAAS1D,UAEhB64B,EAAgBE,EAAkBp9C,EAAQ+nB,EAAUsyB,EAAc8B,EAAqB+B,EAAa1rD,KAAM0rD,EAAazrD,KAC3HmpD,EAAUvgB,mBAAoB6iB,EAAc,KAAMv9C,EAAUu8C,EAAel9C,EAAQ,OAUtF,IAFA,IAAI+jB,EAAW/jB,EAAO+jB,SAEZpkC,EAAI,EAAG8E,EAAIs/B,EAASthC,OAAQ9C,EAAI8E,EAAG9E,IAE5Cs+D,EAAcl6B,EAAUpkC,GAAKqY,EAAQkmD,EAAc7D,IAjVrDh4D,KAAKumC,SAAU,EAEfvmC,KAAK+7D,YAAa,EAClB/7D,KAAK0yC,aAAc,EAEnB1yC,KAAKoB,KAAOtL,EAEZkK,KAAKq4C,OAAS,SAAW5e,EAAQ8e,EAAO5iC,GAEvC,IAAuB,IAAlBwI,EAAMooB,WACe,IAArBpoB,EAAM49C,aAA8C,IAAtB59C,EAAMu0B,cAElB,IAAlBjZ,EAAOr5B,OAAZ,CAGA,IAWI47D,EAXAC,EAAM1C,EAAUx9C,QAChBmgD,EAAS3C,EAAU7hB,MAGvBwkB,EAAO/6B,QAAS86B,EAAIE,OACpBD,EAAO3+B,QAAQ9H,MAAMuiB,SAAU,EAAG,EAAG,EAAG,GACxCkkB,EAAO3+B,QAAQb,MAAM0/B,SAAS,GAC9BF,EAAOG,gBAAgB,GAMvB,IAAM,IAAI/+D,EAAI,EAAG+f,EAAKoc,EAAOr5B,OAAQ9C,EAAI+f,EAAI/f,IAAO,CAEnD,IAAIi5D,EAAQ98B,EAAQn8B,GAEpB,GAAKi5D,EAAMuB,gBACN,OAGL,IAAIj+B,EAAS08B,EAAM18B,OACfm+B,EAAezB,GAASA,EAAMyB,aAElC,QAAgBn3D,IAAXg5B,EAAL,CAOA,IAAIgiC,EAAehiC,EAAOlkB,OAK1B,GAHAgkD,EAAet2D,KAAMw2B,EAAO69B,SAC5BiC,EAAezkE,IAAK0kE,GAEf5B,EAAe,CAEnB,IAAIsE,EAAU3C,EAAerkE,EACzBinE,EAAW5C,EAAepkE,EAgB9BmlE,EAAiB,GAAIj4D,IAAe,EAAV65D,EAAaC,EAAUD,EAASC,GAE1D7B,EAAiB,GAAIj4D,IAAK,EAAG85D,EAAUD,EAASC,GAEhD7B,EAAiB,GAAIj4D,IAAe,EAAV65D,EAAaC,EAAUD,EAASC,GAE1D7B,EAAiB,GAAIj4D,IAAK65D,EAASC,EAAUD,EAASC,GAEtD7B,EAAiB,GAAIj4D,IAAe,EAAV65D,EAAa,EAAGA,EAASC,GAEnD7B,EAAiB,GAAIj4D,IAAK65D,EAAS,EAAGA,EAASC,GAE/C5C,EAAerkE,GAAK,EACpBqkE,EAAepkE,GAAK,EAIrB,GAAoB,OAAfskC,EAAO5C,IAAe,CAE1B,IAAIulC,EAAO,CAAEzjD,UAAW3f,GAAe0f,UAAW1f,GAAe4f,OAAQxe,IAEzEq/B,EAAO5C,IAAM,IAAI6hC,GAAmBa,EAAerkE,EAAGqkE,EAAepkE,EAAGinE,GACxE3iC,EAAO5C,IAAI28B,QAAQv6C,KAAOk9C,EAAMl9C,KAAO,aAEvCwiD,EAAal5B,yBAIT9I,EAAO4iC,mBAEX5iC,EAAO1nB,OAAQokD,GAIhB,IAAInB,EAAYv7B,EAAO5C,IACnBylC,EAAe7iC,EAAOxkC,OAE1BykE,EAAoB1iD,sBAAuBm/C,EAAM1gD,aACjDgmD,EAAaxsD,SAAShM,KAAMy2D,GAEvB9B,GAEJgE,EAAY,EAKZU,EAAajuD,iBAAmBqrD,EAAoBxkE,GAAKwkE,EAAoBvkE,GAAKukE,EAAoBtkE,KAItGwmE,EAAY,EAEZnC,EAAYziD,sBAAuBm/C,EAAMt0D,OAAO4T,aAChDgmD,EAAajxD,OAAQivD,GACrBgC,EAAal9C,oBAIb+9C,EAAaj6D,IACZ,GAAK,EAAK,EAAK,GACf,EAAK,GAAK,EAAK,GACf,EAAK,EAAK,GAAK,GACf,EAAK,EAAK,EAAK,GAGhBi6D,EAAax4D,SAAU23D,EAAajmD,kBACpC8mD,EAAax4D,SAAU23D,EAAat5B,qBAIrCg3B,EAAUoD,gBAAiBvH,GAC3BmE,EAAU5gB,QAKV,IAAM,IAAIrP,EAAO,EAAGA,EAAO0yB,EAAW1yB,IAAU,CAE/C,GAAK0uB,EAAe,CAEnB6B,EAAYx2D,KAAMw4D,EAAaxsD,UAC/BwqD,EAAYt2D,IAAKi3D,EAAgBlxB,IACjCuyB,EAAa/wD,GAAGzH,KAAMo3D,EAASnxB,IAC/BuyB,EAAajxD,OAAQivD,GACrBgC,EAAal9C,oBAEb,IAAIi+C,EAAelC,EAAiBpxB,GACpC4yB,EAAOhD,SAAU0D,GAMlBlD,EAAkB1uD,iBAAkB6wD,EAAajmD,iBAAkBimD,EAAat5B,oBAChFk3B,EAASz3C,cAAe03C,GAIxBkC,EAAcrjB,EAAO5iC,EAAQkmD,EAAc7D,SAhI3C33D,QAAQmD,KAAM,wBAAyB+yD,EAAO,kBAsIhDp4C,EAAMu0B,aAAc,ICjQtB,SAASmqB,GAAelhD,EAAQhD,EAASC,EAAOC,EAAOC,EAAWC,EAAWC,EAAQ5X,EAAM6X,GAE1FR,GAAQpW,KAAMrC,KAAM2b,EAAQhD,EAASC,EAAOC,EAAOC,EAAWC,EAAWC,EAAQ5X,EAAM6X,GAEvFjZ,KAAK0yC,aAAc,ECDpB,SAASoqB,GAAqBrlB,EAAUna,EAAIoa,EAAOt8B,EAAUs3C,GAE5D,IAAIqK,EAAcC,EACdzd,EAAS7gC,EAAYoM,EAErB8oC,EAIAqJ,EAAiB,IAAIn8D,GACrBo8D,EAAiB,IAAI38D,GACrB48D,EAAc,IAAIr8D,GAyVtB,SAAS80D,EAAmBhyD,EAAGC,GAE9B,OAAKD,EAAEw+B,cAAgBv+B,EAAEu+B,YAEjBx+B,EAAEw+B,YAAcv+B,EAAEu+B,YAEdx+B,EAAEpO,IAAMqO,EAAErO,EAEdqO,EAAErO,EAAIoO,EAAEpO,EAIRqO,EAAEwgC,GAAKzgC,EAAEygC,GAhSlBrkC,KAAKq4C,OAAS,SAAW+kB,EAAS7kB,EAAO5iC,GAExC,GAAwB,IAAnBynD,EAAQh9D,OAAb,MAIiBS,IAAZ0+C,GAzEN,WAEC,IAAI/gC,EAAW,IAAIggB,aAAc,EAC9B,IAAO,GAAK,EAAG,EACf,IAAO,GAAK,EAAG,EACf,GAAK,GAAK,EAAG,GACb,GAAK,GAAK,EAAG,IAGZ2I,EAAQ,IAAIzI,YAAa,CAC5B,EAAG,EAAG,EACN,EAAG,EAAG,IAGPq+B,EAAez/B,EAAGa,eAClB6+B,EAAgB1/B,EAAGa,eAEnBb,EAAGc,WAAYd,EAAGugB,aAAckf,GAChCz/B,EAAGe,WAAYf,EAAGugB,aAAcr/B,EAAU8e,EAAGY,aAE7CZ,EAAGc,WAAYd,EAAGsgB,qBAAsBof,GACxC1/B,EAAGe,WAAYf,EAAGsgB,qBAAsBzW,EAAO7J,EAAGY,aAElDqhB,EA8MD,WAEC,IAAIA,EAAUjiB,EAAGkyB,gBAEb5zB,EAAe0B,EAAG+uB,aAAc/uB,EAAGwc,eACnCje,EAAiByB,EAAG+uB,aAAc/uB,EAAG0c,iBAyGzC,OAvGA1c,EAAGgvB,aAAc1wB,EAAc,CAE9B,aAAe82B,EAAahmB,UAAY,UAExC,qCAEA,gCACA,iCACA,0BACA,uBACA,sBACA,yBACA,wBAEA,2BACA,qBAEA,oBACA,0BAEA,gBAEA,mCAEA,0DAEA,0BACA,mGACA,mGAEA,qBAEA,+DACA,sCAEA,iDAEA,+BAEA,KAECkgB,KAAM,OAERtvB,EAAGgvB,aAAczwB,EAAgB,CAEhC,aAAe62B,EAAahmB,UAAY,UAExC,qCAEA,sBACA,yBACA,yBAEA,uBACA,yBACA,4BACA,yBACA,wBACA,2BAEA,oBACA,0BAEA,gBAEA,0CAEA,qEAEA,+CAEA,yBAEA,6BAEA,4BAEA,6DAEA,eAEA,qCACA,oFACA,wDAEA,QAEA,uEAEA,MAEA,KAECkgB,KAAM,OAERtvB,EAAGivB,cAAe3wB,GAClB0B,EAAGivB,cAAe1wB,GAElByB,EAAGyzB,aAAcxR,EAAS3jB,GAC1B0B,EAAGyzB,aAAcxR,EAAS1jB,GAE1ByB,EAAG2zB,YAAa1R,GAETA,EA5TGiQ,GAEV9wC,EAAa,CACZrP,SAAUiuB,EAAG80B,kBAAmB7S,EAAS,YACzC/iC,GAAI8gB,EAAG80B,kBAAmB7S,EAAS,OAGpCz0B,EAAW,CACVuyC,SAAU//B,EAAG4uB,mBAAoB3M,EAAS,YAC1C+d,QAAShgC,EAAG4uB,mBAAoB3M,EAAS,WAEzC1nC,SAAUylB,EAAG4uB,mBAAoB3M,EAAS,YAC1C94C,OAAQ62B,EAAG4uB,mBAAoB3M,EAAS,UACxCnxC,MAAOkvB,EAAG4uB,mBAAoB3M,EAAS,SAEvC9pB,MAAO6H,EAAG4uB,mBAAoB3M,EAAS,SACvCtoB,IAAKqG,EAAG4uB,mBAAoB3M,EAAS,OACrCvoB,QAASsG,EAAG4uB,mBAAoB3M,EAAS,WAEzC1d,gBAAiBvE,EAAG4uB,mBAAoB3M,EAAS,mBACjD3pC,iBAAkB0nB,EAAG4uB,mBAAoB3M,EAAS,oBAElDge,QAASjgC,EAAG4uB,mBAAoB3M,EAAS,WACzClmB,WAAYiE,EAAG4uB,mBAAoB3M,EAAS,cAC5CjmB,QAASgE,EAAG4uB,mBAAoB3M,EAAS,WACzChmB,OAAQ+D,EAAG4uB,mBAAoB3M,EAAS,UACxC/lB,SAAU8D,EAAG4uB,mBAAoB3M,EAAS,YAC1Cie,SAAUlgC,EAAG4uB,mBAAoB3M,EAAS,YAE1C7J,UAAWpY,EAAG4uB,mBAAoB3M,EAAS,cAG5C,IAAI5jC,EAASE,SAASC,gBAAiB,+BAAgC,UACvEH,EAAOpZ,MAAQ,EACfoZ,EAAOjZ,OAAS,EAEhB,IAAIqZ,EAAUJ,EAAOK,WAAY,MACjCD,EAAQ0hD,UAAY,QACpB1hD,EAAQ2hD,SAAU,EAAG,EAAG,EAAG,GAE3B9J,EAAU,IAAIiJ,GAAelhD,GAY5B+gC,GAIDhF,EAAMimB,WAAYpe,GAElB7H,EAAMkmB,iBACNlmB,EAAMmmB,gBAAiBn/C,EAAWrP,UAClCqoC,EAAMmmB,gBAAiBn/C,EAAWlC,IAClCk7B,EAAMomB,0BAENpmB,EAAMvW,QAAS7D,EAAGygC,WAClBrmB,EAAMzW,OAAQ3D,EAAG6+B,OAEjB7+B,EAAGc,WAAYd,EAAGugB,aAAckf,GAChCz/B,EAAG0gC,oBAAqBt/C,EAAWrP,SAAU,EAAGiuB,EAAGiB,OAAO,EAAO,GAAO,GACxEjB,EAAG0gC,oBAAqBt/C,EAAWlC,GAAI,EAAG8gB,EAAGiB,OAAO,EAAO,GAAO,GAElEjB,EAAGc,WAAYd,EAAGsgB,qBAAsBof,GAExC1/B,EAAG4rB,iBAAkBp+B,EAASlV,kBAAkB,EAAOD,EAAOC,iBAAiB1V,UAE/Ew3C,EAAMumB,cAAe3gC,EAAG4gC,UACxB5gC,EAAG6qB,UAAWr9B,EAASmM,IAAK,GAE5B,IAAIknC,EAAa,EACbC,EAAe,EACfhlC,EAAMmf,EAAMnf,IAEXA,GAEJkE,EAAGkrB,UAAW19B,EAAS0O,SAAUJ,EAAI3D,MAAMliB,EAAG6lB,EAAI3D,MAAMje,EAAG4hB,EAAI3D,MAAM5xB,GAEhEu1B,EAAIilC,OAER/gC,EAAG0qB,UAAWl9B,EAASwO,QAASF,EAAIjpB,MACpCmtB,EAAG0qB,UAAWl9B,EAASyO,OAAQH,EAAIhpB,KAEnCktB,EAAG6qB,UAAWr9B,EAASyyC,QAAS,GAChCY,EAAa,EACbC,EAAe,GAEJhlC,EAAIy7B,YAEfv3B,EAAG0qB,UAAWl9B,EAASuO,WAAYD,EAAIklC,SAEvChhC,EAAG6qB,UAAWr9B,EAASyyC,QAAS,GAChCY,EAAa,EACbC,EAAe,KAMhB9gC,EAAG6qB,UAAWr9B,EAASyyC,QAAS,GAChCY,EAAa,EACbC,EAAe,GAOhB,IAAM,IAAI9gE,EAAI,EAAG8E,EAAIg7D,EAAQh9D,OAAQ9C,EAAI8E,EAAG9E,KAEvC+lB,EAAS+5C,EAAS9/D,IAEfukC,gBAAgB72B,iBAAkB2K,EAAO4sB,mBAAoBlf,EAAOxN,aAC3EwN,EAAO7tB,GAAM6tB,EAAOwe,gBAAgB3hC,SAAU,IAI/Ck9D,EAAQpwB,KAAM4oB,GAId,IAAIxnD,EAAQ,GACR3H,EAAS,GAEb,IAAUnJ,EAAI,EAAG8E,EAAIg7D,EAAQh9D,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAElD,IAAI+lB,EACAqiB,GADAriB,EAAS+5C,EAAS9/D,IACAooC,SAEtB,IAA0B,IAArBA,EAAS1D,QAAd,CAEA3e,EAAO4f,eAAgBwU,EAAUc,EAAO5iC,OAAQ9U,EAAW6kC,OAAU7kC,GAErEy8B,EAAG0qB,UAAWl9B,EAAS4qB,UAAWhQ,EAASgQ,WAC3CpY,EAAG4rB,iBAAkBp+B,EAAS+W,iBAAiB,EAAOxe,EAAOwe,gBAAgB3hC,UAE7EmjB,EAAOxN,YAAYvG,UAAW2tD,EAAgBC,EAAgBC,GAE9D/uD,EAAO,GAAM+uD,EAAY7nE,EACzB8Y,EAAO,GAAM+uD,EAAY5nE,EAEzBkR,EAAQ,GAAM4c,EAAO5c,OAAOnR,EAAI,GAChCmR,EAAQ,GAAM4c,EAAO5c,OAAOlR,EAAI,GAEhC,IAAIgoE,EAAU,EAEThlB,EAAMnf,KAAOsM,EAAStM,MAE1BmkC,EAAUa,GAIND,IAAeZ,IAEnBjgC,EAAG6qB,UAAWr9B,EAASyyC,QAASA,GAChCY,EAAaZ,GAIQ,OAAjB73B,EAASzO,KAEbqG,EAAGgrB,UAAWx9B,EAASuyC,SAAU33B,EAASzO,IAAI/wB,OAAO5Q,EAAGowC,EAASzO,IAAI/wB,OAAO3Q,GAC5E+nC,EAAGgrB,UAAWx9B,EAASwyC,QAAS53B,EAASzO,IAAIxd,OAAOnkB,EAAGowC,EAASzO,IAAIxd,OAAOlkB,KAI3E+nC,EAAGgrB,UAAWx9B,EAASuyC,SAAU,EAAG,GACpC//B,EAAGgrB,UAAWx9B,EAASwyC,QAAS,EAAG,IAIpChgC,EAAG0qB,UAAWl9B,EAASkM,QAAS0O,EAAS1O,SACzCsG,EAAGkrB,UAAW19B,EAAS2K,MAAOiQ,EAASjQ,MAAMliB,EAAGmyB,EAASjQ,MAAMje,EAAGkuB,EAASjQ,MAAM5xB,GAEjFy5B,EAAG0qB,UAAWl9B,EAASjT,SAAU6tB,EAAS7tB,UAC1CylB,EAAG+qB,WAAYv9B,EAASrkB,OAAQA,GAChC62B,EAAG+qB,WAAYv9B,EAAS1c,MAAOA,GAE/BspC,EAAM6mB,YAAa74B,EAAS0O,SAAU1O,EAASgP,cAAehP,EAAS8O,SAAU9O,EAAS+O,SAAU/O,EAASmP,mBAAoBnP,EAASiP,cAAejP,EAASkP,cAAelP,EAASiQ,oBAC1L+B,EAAMna,QAAQb,MAAM0/B,QAAS12B,EAASqP,WACtC2C,EAAMna,QAAQb,MAAM8hC,QAAS94B,EAASsP,YACtC0C,EAAMna,QAAQ9H,MAAM+oC,QAAS94B,EAAS2P,YAEtCj6B,EAASiuC,aAAc3jB,EAASzO,KAAO28B,EAAS,GAEhDt2B,EAAG2gB,aAAc3gB,EAAGshB,UAAW,EAAGthB,EAAGqB,eAAgB,GAErDtb,EAAO6f,cAAeuU,EAAUc,EAAO5iC,OAAQ9U,EAAW6kC,OAAU7kC,IAMrE62C,EAAMzW,OAAQ3D,EAAGygC,WAEjBrmB,EAAMgH,UChPR,SAAS+f,GAAYnhC,EAAImZ,EAAYioB,GA+SpC,IAAIC,EAAc,IA7SlB,WAEC,IAAIC,GAAS,EAETnpC,EAAQ,IAAI2H,GACZyhC,EAAmB,KACnBC,EAAoB,IAAI1hC,GAAS,EAAG,EAAG,EAAG,GAE9C,MAAO,CAENohC,QAAS,SAAWO,GAEdF,IAAqBE,GAAeH,IAExCthC,EAAGyhC,UAAWA,EAAWA,EAAWA,EAAWA,GAC/CF,EAAmBE,IAMrBC,UAAW,SAAWC,GAErBL,EAASK,GAIVjnB,SAAU,SAAWzkC,EAAGiE,EAAG3T,EAAGD,EAAG+xC,IAEJ,IAAvBA,IAEJpiC,GAAK3P,EAAG4T,GAAK5T,EAAGC,GAAKD,GAItB6xB,EAAMhzB,IAAK8Q,EAAGiE,EAAG3T,EAAGD,IAEuB,IAAtCk7D,EAAkB94D,OAAQyvB,KAE9B6H,EAAGwa,WAAYvkC,EAAGiE,EAAG3T,EAAGD,GACxBk7D,EAAkBz7D,KAAMoyB,KAM1BipB,MAAO,WAENkgB,GAAS,EAETC,EAAmB,KACnBC,EAAkBr8D,KAAO,EAAG,EAAG,EAAG,MA2PjC02D,EAAc,IAnPlB,WAEC,IAAIyF,GAAS,EAETM,EAAmB,KACnBC,EAAmB,KACnBC,EAAoB,KAExB,MAAO,CAENhD,QAAS,SAAWrnB,GAEdA,EAEJ9T,GAAQ3D,EAAG+hC,YAIXl+B,GAAS7D,EAAG+hC,aAMdb,QAAS,SAAWc,GAEdJ,IAAqBI,GAAeV,IAExCthC,EAAGgiC,UAAWA,GACdJ,EAAmBI,IAMrBC,QAAS,SAAWzqB,GAEnB,GAAKqqB,IAAqBrqB,EAAY,CAErC,GAAKA,EAEJ,OAASA,GAER,KAAKp9C,EAEJ4lC,EAAGwX,UAAWxX,EAAGkiC,OACjB,MAED,KAAK7nE,EAEJ2lC,EAAGwX,UAAWxX,EAAGmiC,QACjB,MAED,KAAK7nE,EAEJ0lC,EAAGwX,UAAWxX,EAAGoiC,MACjB,MAED,KAAK7nE,EAEJylC,EAAGwX,UAAWxX,EAAGqiC,QACjB,MAED,KAAK7nE,EAEJwlC,EAAGwX,UAAWxX,EAAGsiC,OACjB,MAED,KAAK7nE,EAEJulC,EAAGwX,UAAWxX,EAAGuiC,QACjB,MAED,KAAK7nE,EAEJslC,EAAGwX,UAAWxX,EAAGwiC,SACjB,MAED,KAAK7nE,EAEJqlC,EAAGwX,UAAWxX,EAAGyiC,UACjB,MAED,QAECziC,EAAGwX,UAAWxX,EAAGqiC,aAMnBriC,EAAGwX,UAAWxX,EAAGqiC,QAIlBR,EAAmBrqB,IAMrBkqB,UAAW,SAAWC,GAErBL,EAASK,GAIVjnB,SAAU,SAAWtb,GAEf0iC,IAAsB1iC,IAE1BY,EAAG0iC,WAAYtjC,GACf0iC,EAAoB1iC,IAMtBgiB,MAAO,WAENkgB,GAAS,EAETM,EAAmB,KACnBC,EAAmB,KACnBC,EAAoB,QAwHnBhG,EAAgB,IAhHpB,WAEC,IAAIwF,GAAS,EAETqB,EAAqB,KACrBC,EAAqB,KACrBC,EAAoB,KACpBC,EAAyB,KACzBC,EAAqB,KACrBC,EAAsB,KACtBC,EAAsB,KACtBC,EAAsB,KAE1B,MAAO,CAENpE,QAAS,SAAWqE,GAEdA,EAEJx/B,GAAQ3D,EAAGojC,cAIXv/B,GAAS7D,EAAGojC,eAMdlC,QAAS,SAAWmC,GAEdV,IAAuBU,GAAiB/B,IAE5CthC,EAAGqjC,YAAaA,GAChBV,EAAqBU,IAMvBpB,QAAS,SAAWqB,EAAaC,EAAYF,GAEvCT,IAAuBU,GACvBT,IAAuBU,GACvBT,IAA2BO,IAE/BrjC,EAAGsjC,YAAaA,EAAaC,EAAYF,GAEzCT,EAAqBU,EACrBT,EAAoBU,EACpBT,EAAyBO,IAM3BG,MAAO,SAAWC,EAAaC,EAAcC,GAEvCZ,IAAwBU,GACxBT,IAAwBU,GACxBT,IAAwBU,IAE5B3jC,EAAG4jC,UAAWH,EAAaC,EAAcC,GAEzCZ,EAAqBU,EACrBT,EAAsBU,EACtBT,EAAsBU,IAMxBjC,UAAW,SAAWC,GAErBL,EAASK,GAIVjnB,SAAU,SAAWmpB,GAEfX,IAAwBW,IAE5B7jC,EAAG8jC,aAAcD,GACjBX,EAAsBW,IAMxBziB,MAAO,WAENkgB,GAAS,EAETqB,EAAqB,KACrBC,EAAqB,KACrBC,EAAoB,KACpBC,EAAyB,KACzBC,EAAqB,KACrBC,EAAsB,KACtBC,EAAsB,KACtBC,EAAsB,QAcrBa,EAAsB/jC,EAAGxe,aAAcwe,EAAGud,oBAC1CymB,EAAgB,IAAIliC,WAAYiiC,GAChCE,EAAoB,IAAIniC,WAAYiiC,GACpCG,EAAoB,IAAIpiC,WAAYiiC,GAEpC3O,EAAe,GAEf+O,EAA2B,KAE3BC,EAAiB,KAEjBC,EAAkB,KAClBC,EAAuB,KACvBC,EAAkB,KAClBC,EAAkB,KAClBC,EAA4B,KAC5BC,EAAuB,KACvBC,EAAuB,KACvBC,GAA2B,EAE3BC,EAAmB,KACnBC,EAAkB,KAElBC,EAAmB,KAEnBC,EAA6B,KAC7BC,EAA4B,KAE5BnoB,EAAc9c,EAAGxe,aAAcwe,EAAGklC,kCAElCC,GAAqB,EACrB1oD,EAAU,EACV2oD,EAAYplC,EAAGxe,aAAcwe,EAAGqlC,UAEI,IAAnCD,EAAUlhE,QAAS,UAEvBuY,EAAUwb,WAAY,kBAAkBC,KAAMktC,GAAa,IAC3DD,EAAuB1oD,GAAW,IAEgB,IAAvC2oD,EAAUlhE,QAAS,eAE9BuY,EAAUwb,WAAY,uBAAuBC,KAAMktC,GAAa,IAChED,EAAuB1oD,GAAW,GAInC,IAAI6oD,EAAqB,KACrBC,EAAuB,GAEvBC,EAAiB,IAAI1lC,GACrB2lC,EAAkB,IAAI3lC,GAE1B,SAAS4lC,EAAe5hE,EAAMa,EAAQkL,GAErC,IAAI+M,EAAO,IAAIklB,WAAY,GACvBw0B,EAAUt2B,EAAG0lC,gBAEjB1lC,EAAG2lC,YAAa7hE,EAAMwyD,GACtBt2B,EAAG4lC,cAAe9hE,EAAMk8B,EAAG6lC,mBAAoB7lC,EAAG8lC,SAClD9lC,EAAG4lC,cAAe9hE,EAAMk8B,EAAG+lC,mBAAoB/lC,EAAG8lC,SAElD,IAAM,IAAI9lE,EAAI,EAAGA,EAAI6P,EAAO7P,IAE3BggC,EAAGgmC,WAAYrhE,EAAS3E,EAAG,EAAGggC,EAAGimC,KAAM,EAAG,EAAG,EAAGjmC,EAAGimC,KAAMjmC,EAAG+B,cAAenlB,GAI5E,OAAO05C,EAIR,IAAI4P,GAAgB,GA2FpB,SAASviC,GAAQoD,IAEY,IAAvBquB,EAAcruB,KAElB/G,EAAG2D,OAAQoD,GACXquB,EAAcruB,IAAO,GAMvB,SAASlD,GAASkD,IAEW,IAAvBquB,EAAcruB,KAElB/G,EAAG6D,QAASkD,GACZquB,EAAcruB,IAAO,GAiDvB,SAASk6B,GAAanqB,EAAUM,EAAeF,EAAUC,EAAUI,EAAoBF,EAAeC,EAAee,GAYpH,GAVKvB,IAAah+C,EAEjB6qC,GAAQ3D,EAAG6+B,OAIXh7B,GAAS7D,EAAG6+B,OAIR/nB,IAAa39C,EAAiB,CAElC,GAAK29C,IAAautB,GAAmBhsB,IAAuBusB,EAE3D,OAAS9tB,GAER,KAAK99C,EAECq/C,GAEJrY,EAAGmmC,sBAAuBnmC,EAAGomC,SAAUpmC,EAAGomC,UAC1CpmC,EAAGqmC,kBAAmBrmC,EAAGsmC,IAAKtmC,EAAGsmC,IAAKtmC,EAAGsmC,IAAKtmC,EAAGsmC,OAIjDtmC,EAAGoX,cAAepX,EAAGomC,UACrBpmC,EAAGumC,UAAWvmC,EAAGwmC,UAAWxmC,EAAGsmC,MAGhC,MAED,KAAKrtE,EAECo/C,GAEJrY,EAAGmmC,sBAAuBnmC,EAAGomC,SAAUpmC,EAAGomC,UAC1CpmC,EAAGqmC,kBAAmBrmC,EAAGymC,KAAMzmC,EAAGymC,KAAMzmC,EAAG0mC,oBAAqB1mC,EAAG2mC,uBAInE3mC,EAAGoX,cAAepX,EAAGomC,UACrBpmC,EAAGumC,UAAWvmC,EAAGymC,KAAMzmC,EAAG0mC,sBAG3B,MAED,KAAKxtE,EAECm/C,GAEJrY,EAAGmmC,sBAAuBnmC,EAAGomC,SAAUpmC,EAAGomC,UAC1CpmC,EAAGqmC,kBAAmBrmC,EAAGymC,KAAMzmC,EAAG4mC,UAAW5mC,EAAGymC,KAAMzmC,EAAGwmC,aAIzDxmC,EAAGoX,cAAepX,EAAGomC,UACrBpmC,EAAGumC,UAAWvmC,EAAGymC,KAAMzmC,EAAG4mC,YAG3B,MAED,QAEMvuB,GAEJrY,EAAGmmC,sBAAuBnmC,EAAGomC,SAAUpmC,EAAGomC,UAC1CpmC,EAAGqmC,kBAAmBrmC,EAAGsmC,IAAKtmC,EAAG2mC,oBAAqB3mC,EAAGsmC,IAAKtmC,EAAG2mC,uBAIjE3mC,EAAGmmC,sBAAuBnmC,EAAGomC,SAAUpmC,EAAGomC,UAC1CpmC,EAAGqmC,kBAAmBrmC,EAAGwmC,UAAWxmC,EAAG2mC,oBAAqB3mC,EAAGsmC,IAAKtmC,EAAG2mC,sBAQ3ErC,EAAuB,KACvBC,EAAkB,KAClBC,EAAkB,KAClBC,EAA4B,KAC5BC,EAAuB,KACvBC,EAAuB,UAIvBptB,EAAqBA,GAAsBH,EAC3CC,EAAgBA,GAAiBH,EACjCI,EAAgBA,GAAiBH,EAE5BC,IAAkBktB,GAAwB/sB,IAAuBktB,IAErEzkC,EAAGmmC,sBAAuB/E,EAAMyF,QAASzvB,GAAiBgqB,EAAMyF,QAAStvB,IAEzE+sB,EAAuBltB,EACvBqtB,EAA4BltB,GAIxBL,IAAaqtB,GAAmBptB,IAAaqtB,GAAmBntB,IAAkBqtB,GAAwBptB,IAAkBqtB,IAEhI3kC,EAAGqmC,kBAAmBjF,EAAMyF,QAAS3vB,GAAYkqB,EAAMyF,QAAS1vB,GAAYiqB,EAAMyF,QAASxvB,GAAiB+pB,EAAMyF,QAASvvB,IAE3HitB,EAAkBrtB,EAClBstB,EAAkBrtB,EAClButB,EAAuBrtB,EACvBstB,EAAuBrtB,GAMzB+sB,EAAkBvtB,EAClB8tB,EAA2BvsB,EA8B5B,SAASyuB,GAAcpU,GAEjBmS,IAAqBnS,IAEpBA,EAEJ1yB,EAAG+mC,UAAW/mC,EAAGgnC,IAIjBhnC,EAAG+mC,UAAW/mC,EAAGinC,KAIlBpC,EAAmBnS,GAMrB,SAASwU,GAAaC,GAEhBA,IAAa9uE,GAEjBsrC,GAAQ3D,EAAGygC,WAEN0G,IAAarC,IAEZqC,IAAa7uE,EAEjB0nC,EAAGmnC,SAAUnnC,EAAGonC,MAELD,IAAa5uE,EAExBynC,EAAGmnC,SAAUnnC,EAAGqnC,OAIhBrnC,EAAGmnC,SAAUnnC,EAAGsnC,kBAQlBzjC,GAAS7D,EAAGygC,WAIbqE,EAAkBqC,EAgBnB,SAASI,GAAkBvvB,EAAewvB,EAAQra,GAE5CnV,GAEJrU,GAAQ3D,EAAGynC,qBAENzC,IAA+BwC,GAAUvC,IAA8B9X,IAE3EntB,EAAGgY,cAAewvB,EAAQra,GAE1B6X,EAA6BwC,EAC7BvC,EAA4B9X,IAM7BtpB,GAAS7D,EAAGynC,qBAsBd,SAAS9G,GAAe+G,QAEJnkE,IAAdmkE,IAA0BA,EAAY1nC,EAAG4gC,SAAW9jB,EAAc,GAElEwoB,IAAuBoC,IAE3B1nC,EAAG2gC,cAAe+G,GAClBpC,EAAqBoC,GAyHvB,OAvhBAxB,GAAelmC,EAAG2nC,YAAejC,EAAe1lC,EAAG2nC,WAAY3nC,EAAG2nC,WAAY,GAC9EzB,GAAelmC,EAAG4nC,kBAAqBlC,EAAe1lC,EAAG4nC,iBAAkB5nC,EAAG6nC,4BAA6B,GAI3GxG,EAAY3mB,SAAU,EAAG,EAAG,EAAG,GAC/BmhB,EAAYnhB,SAAU,GACtBohB,EAAcphB,SAAU,GAExB/W,GAAQ3D,EAAG+hC,YACXlG,EAAYoG,QAAS1nE,GAErBusE,IAAc,GACdI,GAAa5uE,GACbqrC,GAAQ3D,EAAGygC,WAEX98B,GAAQ3D,EAAG6+B,OACXoC,GAAaloE,GAsgBN,CAENknC,QAAS,CACR9H,MAAOkpC,EACPjiC,MAAOy8B,EACPgI,QAAS/H,GAGVwE,eA1gBD,WAEC,IAAM,IAAItgE,EAAI,EAAG8E,EAAIk/D,EAAclhE,OAAQ9C,EAAI8E,EAAG9E,IAEjDgkE,EAAehkE,GAAM,GAugBtBugE,gBAjgBD,SAA0Bx3D,GAEzBi7D,EAAej7D,GAAc,EAEW,IAAnCk7D,EAAmBl7D,KAEvBi3B,EAAG8nC,wBAAyB/+D,GAC5Bk7D,EAAmBl7D,GAAc,GAIM,IAAnCm7D,EAAmBn7D,KAEPowC,EAAWj0C,IAAK,0BAEtB6iE,yBAA0Bh/D,EAAW,GAC/Cm7D,EAAmBn7D,GAAc,IAkflCi/D,0BA5eD,SAAoCj/D,EAAWk/D,GAE9CjE,EAAej7D,GAAc,EAEW,IAAnCk7D,EAAmBl7D,KAEvBi3B,EAAG8nC,wBAAyB/+D,GAC5Bk7D,EAAmBl7D,GAAc,GAI7Bm7D,EAAmBn7D,KAAgBk/D,IAEvB9uB,EAAWj0C,IAAK,0BAEtB6iE,yBAA0Bh/D,EAAWk/D,GAC/C/D,EAAmBn7D,GAAck/D,IA6dlCzH,wBAvdD,WAEC,IAAM,IAAIxgE,EAAI,EAAG8E,EAAIm/D,EAAkBnhE,OAAQ9C,IAAM8E,IAAM9E,EAErDikE,EAAmBjkE,KAAQgkE,EAAehkE,KAE9CggC,EAAGkoC,yBAA0BloE,GAC7BikE,EAAmBjkE,GAAM,IAid3B2jC,OAAQA,GACRE,QAASA,GACTskC,4BArbD,WAEC,GAAkC,OAA7BhE,IAEJA,EAA2B,GAEtBhrB,EAAWj0C,IAAK,mCAChBi0C,EAAWj0C,IAAK,kCAChBi0C,EAAWj0C,IAAK,kCAChBi0C,EAAWj0C,IAAK,kCAIpB,IAFA,IAAIkjE,EAAUpoC,EAAGxe,aAAcwe,EAAGqoC,4BAExBroE,EAAI,EAAGA,EAAIooE,EAAQtlE,OAAQ9C,IAEpCmkE,EAAyBhgE,KAAMikE,EAASpoE,IAQ3C,OAAOmkE,GAgaP9D,WA5ZD,SAAqBpe,GAEpB,OAAKmiB,IAAmBniB,IAEvBjiB,EAAGqgC,WAAYpe,GAEfmiB,EAAiBniB,GAEV,IAsZRgf,YAAaA,GACbqH,YAtRD,SAAsBlgC,EAAUmgC,GAE/BngC,EAAS2O,OAASn+C,EACfirC,GAAS7D,EAAGygC,WACZ98B,GAAQ3D,EAAGygC,WAEd,IAAI/N,EAActqB,EAAS2O,OAASp+C,EAC/B4vE,IAAc7V,GAAcA,GAEjCoU,GAAcpU,IAEW,IAAzBtqB,EAAS6O,YACNgqB,GAAa74B,EAAS0O,SAAU1O,EAASgP,cAAehP,EAAS8O,SAAU9O,EAAS+O,SAAU/O,EAASmP,mBAAoBnP,EAASiP,cAAejP,EAASkP,cAAelP,EAASiQ,oBACpL4oB,GAAanoE,GAEhB+iE,EAAYoG,QAAS75B,EAASoP,WAC9BqkB,EAAYiD,QAAS12B,EAASqP,WAC9BokB,EAAYqF,QAAS94B,EAASsP,YAC9B2pB,EAAYH,QAAS94B,EAAS2P,YAE9BwvB,GAAkBn/B,EAAS4P,cAAe5P,EAAS6P,oBAAqB7P,EAAS8P,qBAoQjF4uB,aAAcA,GACdI,YAAaA,GAEbsB,aA3MD,SAAuBvjE,GAEjBA,IAAU8/D,IAETI,GAAqBnlC,EAAGyoC,UAAWxjE,GAExC8/D,EAAmB9/D,IAsMpBsiE,iBAAkBA,GAElBxI,eA3KD,SAAyBpD,GAEnBA,EAEJh4B,GAAQ3D,EAAG0oC,cAIX7kC,GAAS7D,EAAG0oC,eAqKb/H,cAAeA,GACfgF,YAjJD,SAAsBgD,EAAWC,GAEJ,OAAvBtD,GAEJ3E,KAID,IAAIkI,EAAetD,EAAsBD,QAEnB/hE,IAAjBslE,IAEJA,EAAe,CAAE/kE,UAAMP,EAAW+yD,aAAS/yD,GAC3CgiE,EAAsBD,GAAuBuD,GAIzCA,EAAa/kE,OAAS6kE,GAAaE,EAAavS,UAAYsS,IAEhE5oC,EAAG2lC,YAAagD,EAAWC,GAAgB1C,GAAeyC,IAE1DE,EAAa/kE,KAAO6kE,EACpBE,EAAavS,QAAUsS,IA4HxBE,qBAtHD,WAEC,IAEC9oC,EAAG8oC,qBAAqBC,MAAO/oC,EAAIn9B,WAElC,MAAQG,GAETD,QAAQC,MAAO,oBAAqBA,KA+GrCgjE,WAzGD,WAEC,IAEChmC,EAAGgmC,WAAW+C,MAAO/oC,EAAIn9B,WAExB,MAAQG,GAETD,QAAQC,MAAO,oBAAqBA,KAmGrC04D,QA3FD,SAAkBA,IAEyB,IAArC8J,EAAe98D,OAAQgzD,KAE3B17B,EAAG07B,QAASA,EAAQ1jE,EAAG0jE,EAAQzjE,EAAGyjE,EAAQxjE,EAAGwjE,EAAQx4D,GACrDsiE,EAAez/D,KAAM21D,KAuFtBE,SAjFD,SAAmBA,IAE0B,IAAvC6J,EAAgB/8D,OAAQkzD,KAE5B57B,EAAG47B,SAAUA,EAAS5jE,EAAG4jE,EAAS3jE,EAAG2jE,EAAS1jE,EAAG0jE,EAAS14D,GAC1DuiE,EAAgB1/D,KAAM61D,KA8EvBxa,MAtED,WAEC,IAAM,IAAIphD,EAAI,EAAGA,EAAIikE,EAAkBnhE,OAAQ9C,IAEd,IAA3BikE,EAAmBjkE,KAEvBggC,EAAGkoC,yBAA0BloE,GAC7BikE,EAAmBjkE,GAAM,GAM3Bo1D,EAAe,GAEf+O,EAA2B,KAE3BmB,EAAqB,KACrBC,EAAuB,GAEvBnB,EAAiB,KAEjBC,EAAkB,KAElBQ,EAAmB,KACnBC,EAAkB,KAElBzD,EAAYjgB,QACZya,EAAYza,QACZ0a,EAAc1a,UC94BhB,SAAS4nB,GAAerK,EAAKxlB,EAAYiB,EAAO9d,EAAY84B,EAAcgM,EAAOxlB,GAEhF,IAEIqtB,EAFAC,EAAgD,oBAA3BC,wBAA0CxK,aAAewK,uBAC9EC,EAAiB,GAKrB,SAASC,EAAgBjuD,EAAOkuD,GAE/B,GAAKluD,EAAMnW,MAAQqkE,GAAWluD,EAAMhW,OAASkkE,EAAU,CAEtD,GAAK,SAAUluD,EAGd,YADArY,QAAQmD,KAAM,yDAA2DkV,EAAMnW,MAAQ,IAAMmW,EAAMhW,OAAS,MAQ7G,IAAI0L,EAAQw4D,EAAU3pE,KAAK9H,IAAKujB,EAAMnW,MAAOmW,EAAMhW,QAE/CiZ,EAASE,SAASC,gBAAiB,+BAAgC,UASvE,OARAH,EAAOpZ,MAAQtF,KAAK8B,MAAO2Z,EAAMnW,MAAQ6L,GACzCuN,EAAOjZ,OAASzF,KAAK8B,MAAO2Z,EAAMhW,OAAS0L,GAE7BuN,EAAOK,WAAY,MACzBG,UAAWzD,EAAO,EAAG,EAAGA,EAAMnW,MAAOmW,EAAMhW,OAAQ,EAAG,EAAGiZ,EAAOpZ,MAAOoZ,EAAOjZ,QAEtFrC,QAAQmD,KAAM,0CAA4CkV,EAAMnW,MAAQ,IAAMmW,EAAMhW,OAAS,iBAAmBiZ,EAAOpZ,MAAQ,IAAMoZ,EAAOjZ,OAAQgW,GAE7IiD,EAIR,OAAOjD,EAIR,SAASnZ,EAAcmZ,GAEtB,OAAO3b,GAAMwC,aAAcmZ,EAAMnW,QAAWxF,GAAMwC,aAAcmZ,EAAMhW,QAiCvE,SAASmkE,EAA6BjT,EAASr0D,GAE9C,OAAOq0D,EAAQj6C,iBAAmBpa,GACjCq0D,EAAQ76C,YAAc3f,IAAiBw6D,EAAQ76C,YAAcxf,GAI/D,SAASutE,EAAgB7kE,EAAQ2xD,EAASrxD,EAAOG,GAEhDu5D,EAAI6K,eAAgB7kE,GAEI23B,EAAWp3B,IAAKoxD,GAGtBmT,cAAgB9pE,KAAK0C,IAAK1C,KAAK9H,IAAKoN,EAAOG,IAAazF,KAAK+pE,MAMhF,SAASC,EAAgBj+D,GAExB,OAAKA,IAAM5P,IAAiB4P,IAAM3P,IAA8B2P,IAAM1P,GAE9D2iE,EAAImH,QAILnH,EAAIiL,OAMZ,SAASC,EAAkBnlE,GAE1B,IAAI4xD,EAAU5xD,EAAMC,OAEpB2xD,EAAQjyD,oBAAqB,UAAWwlE,GA4BzC,SAA4BvT,GAE3B,IAAIwT,EAAoBxtC,EAAWp3B,IAAKoxD,GAExC,GAAKA,EAAQl7C,OAAS0uD,EAAkBC,0BAIvCpL,EAAIqL,cAAeF,EAAkBC,+BAE/B,CAIN,QAAuCxmE,IAAlCumE,EAAkBG,YAA4B,OAEnDtL,EAAIqL,cAAeF,EAAkBI,gBAKtC5tC,EAAW8D,OAAQk2B,GA/CnB6T,CAAmB7T,GAEdA,EAAQ8T,uBAELhB,EAAgB9S,EAAQvvB,IAIhC6U,EAAKuE,OAAOriC,WAIb,SAASusD,EAAuB3lE,GAE/B,IAAI4lE,EAAe5lE,EAAMC,OAEzB2lE,EAAajmE,oBAAqB,UAAWgmE,GAmC9C,SAAiCC,GAEhC,IAAIC,EAAyBjuC,EAAWp3B,IAAKolE,GACzCR,EAAoBxtC,EAAWp3B,IAAKolE,EAAahU,SAErD,GAAOgU,EAAP,CAcA,QAZ0C/mE,IAArCumE,EAAkBI,gBAEtBvL,EAAIqL,cAAeF,EAAkBI,gBAIjCI,EAAavO,cAEjBuO,EAAavO,aAAa/8C,UAItBsrD,EAAaE,wBAEjB,IAAM,IAAIxqE,EAAI,EAAGA,EAAI,EAAGA,IAEvB2+D,EAAI8L,kBAAmBF,EAAuBG,mBAAoB1qE,IAC7DuqE,EAAuBI,oBAAqBhM,EAAIiM,mBAAoBL,EAAuBI,mBAAoB3qE,SAMrH2+D,EAAI8L,kBAAmBF,EAAuBG,oBACzCH,EAAuBI,oBAAqBhM,EAAIiM,mBAAoBL,EAAuBI,oBAIjGruC,EAAW8D,OAAQkqC,EAAahU,SAChCh6B,EAAW8D,OAAQkqC,IArEnBO,CAAwBP,GAExB1uB,EAAKuE,OAAOriC,WA2Eb,SAASiuC,EAAcuK,EAASwU,GAE/B,IAAIhB,EAAoBxtC,EAAWp3B,IAAKoxD,GAIxC,GAFKA,EAAQ8T,gBAinBd,SAA6B9T,GAE5B,IAAIvvB,EAAKuvB,EAAQvvB,GACb+Z,EAAQlF,EAAKb,OAAO+F,MAInBsoB,EAAgBriC,KAAS+Z,IAE7BsoB,EAAgBriC,GAAO+Z,EACvBwV,EAAQzhD,UA3nBqBk2D,CAAoBzU,GAE7CA,EAAQ75C,QAAU,GAAKqtD,EAAkBkB,YAAc1U,EAAQ75C,QAAU,CAE7E,IAAIrB,EAAQk7C,EAAQl7C,MAEpB,QAAe7X,IAAV6X,EAEJrY,QAAQmD,KAAM,wEAAyEowD,OAEjF,CAAA,IAAwB,IAAnBl7C,EAAM6vD,SAOjB,YAqMH,SAAwBnB,EAAmBxT,EAASwU,QAEZvnE,IAAlCumE,EAAkBG,cAEtBH,EAAkBG,aAAc,EAEhC3T,EAAQzyD,iBAAkB,UAAWgmE,GAErCC,EAAkBI,eAAiBvL,EAAI+G,gBAEvC9pB,EAAKuE,OAAOriC,YAIbs8B,EAAMumB,cAAehC,EAAIiC,SAAWkK,GACpC1wB,EAAMurB,YAAahH,EAAIgJ,WAAYmC,EAAkBI,gBAErDvL,EAAIuM,YAAavM,EAAIwM,oBAAqB7U,EAAQ/5C,OAClDoiD,EAAIuM,YAAavM,EAAIyM,+BAAgC9U,EAAQh6C,kBAC7DqiD,EAAIuM,YAAavM,EAAI0M,iBAAkB/U,EAAQ95C,iBAE/C,IAAIpB,EAAQiuD,EAAgB/S,EAAQl7C,MAAOg6C,EAAalY,iBA7XzD,SAAiCoZ,GAEhC,OAASA,EAAQh7C,QAAU1f,IAAuB06D,EAAQ/6C,QAAU3f,IACjE06D,EAAQ76C,YAAc3f,IAAiBw6D,EAAQ76C,YAAcxf,IA4X3DqvE,CAAwBhV,KAAuC,IAA1Br0D,EAAcmZ,KAEvDA,EAvZF,SAAyBA,GAExB,OAAKA,aAAiBmwD,kBAAoBnwD,aAAiBkD,mBAAqBlD,aAAiBowD,kBAE/EjoE,IAAZ0lE,IAAwBA,EAAU1qD,SAASC,gBAAiB,+BAAgC,WAEjGyqD,EAAQhkE,MAAQxF,GAAM8C,gBAAiB6Y,EAAMnW,OAC7CgkE,EAAQ7jE,OAAS3F,GAAM8C,gBAAiB6Y,EAAMhW,QAEhC6jE,EAAQvqD,WAAY,MAC1BG,UAAWzD,EAAO,EAAG,EAAG6tD,EAAQhkE,MAAOgkE,EAAQ7jE,QAEvDrC,QAAQmD,KAAM,mDAAqDkV,EAAMnW,MAAQ,IAAMmW,EAAMhW,OAAS,iBAAmB6jE,EAAQhkE,MAAQ,IAAMgkE,EAAQ7jE,OAAQgW,GAExJ6tD,GAID7tD,EAqYEqwD,CAAgBrwD,IAIzB,IAAIswD,EAAoBzpE,EAAcmZ,GACrCuwD,EAAWvK,EAAMyF,QAASvQ,EAAQ56C,QAClCkwD,EAASxK,EAAMyF,QAASvQ,EAAQxyD,MAEjC+nE,EAAsBlN,EAAIgJ,WAAYrR,EAASoV,GAE/C,IAAII,EAAQ7vD,EAAUq6C,EAAQr6C,QAE9B,GAAKq6C,EAAQyV,eAAiB,CAI7B,IAAIC,EAAiBrN,EAAIsN,gBAEzB,GAAK3V,EAAQxyD,OAASpH,GAAY,CAEjC,IAAOwsE,EAAY,MAAM,IAAIvjE,MAAO,kDACpCqmE,EAAiBrN,EAAIuN,wBAEVhD,IAGX8C,EAAiBrN,EAAIwN,mBAIjB7V,EAAQ56C,SAAWpe,IAAe0uE,IAAmBrN,EAAIsN,iBAKxD3V,EAAQxyD,OAASvH,IAAqB+5D,EAAQxyD,OAASrH,KAE3DsG,QAAQmD,KAAM,+FAEdowD,EAAQxyD,KAAOvH,GACfqvE,EAASxK,EAAMyF,QAASvQ,EAAQxyD,OAQ7BwyD,EAAQ56C,SAAWne,KAEvByuE,EAAiBrN,EAAIyN,cAKhB9V,EAAQxyD,OAAS/G,KAErBgG,QAAQmD,KAAM,oFAEdowD,EAAQxyD,KAAO/G,GACf6uE,EAASxK,EAAMyF,QAASvQ,EAAQxyD,QAMlCs2C,EAAM4rB,WAAYrH,EAAIgJ,WAAY,EAAGqE,EAAgB5wD,EAAMnW,MAAOmW,EAAMhW,OAAQ,EAAGumE,EAAUC,EAAQ,WAE/F,GAAKtV,EAAQn3C,cAMnB,GAAKlD,EAAQnZ,OAAS,GAAK4oE,EAAoB,CAE9C,IAAM,IAAI1rE,EAAI,EAAG+f,EAAK9D,EAAQnZ,OAAQ9C,EAAI+f,EAAI/f,IAE7C8rE,EAAS7vD,EAASjc,GAClBo6C,EAAM4rB,WAAYrH,EAAIgJ,WAAY3nE,EAAG2rE,EAAUG,EAAO7mE,MAAO6mE,EAAO1mE,OAAQ,EAAGumE,EAAUC,EAAQE,EAAOlvD,MAIzG05C,EAAQj6C,iBAAkB,EAC1BytD,EAAkBL,cAAgBxtD,EAAQnZ,OAAS,OAInDs3C,EAAM4rB,WAAYrH,EAAIgJ,WAAY,EAAGgE,EAAUvwD,EAAMnW,MAAOmW,EAAMhW,OAAQ,EAAGumE,EAAUC,EAAQxwD,EAAMwB,MACrGktD,EAAkBL,cAAgB,OAI7B,GAAKnT,EAAQ+V,oBAAsB,CAEzC,IAAUrsE,EAAI,EAAG+f,EAAK9D,EAAQnZ,OAAQ9C,EAAI+f,EAAI/f,IAE7C8rE,EAAS7vD,EAASjc,GAEbs2D,EAAQ56C,SAAWxe,IAAco5D,EAAQ56C,SAAWze,GAEnDm9C,EAAM+tB,8BAA8BjkE,QAASynE,IAAe,EAEhEvxB,EAAM0uB,qBAAsBnK,EAAIgJ,WAAY3nE,EAAG2rE,EAAUG,EAAO7mE,MAAO6mE,EAAO1mE,OAAQ,EAAG0mE,EAAOlvD,MAIhG7Z,QAAQmD,KAAM,kGAMfk0C,EAAM4rB,WAAYrH,EAAIgJ,WAAY3nE,EAAG2rE,EAAUG,EAAO7mE,MAAO6mE,EAAO1mE,OAAQ,EAAGumE,EAAUC,EAAQE,EAAOlvD,MAM1GktD,EAAkBL,cAAgBxtD,EAAQnZ,OAAS,OAUnD,GAAKmZ,EAAQnZ,OAAS,GAAK4oE,EAAoB,CAE9C,IAAU1rE,EAAI,EAAG+f,EAAK9D,EAAQnZ,OAAQ9C,EAAI+f,EAAI/f,IAE7C8rE,EAAS7vD,EAASjc,GAClBo6C,EAAM4rB,WAAYrH,EAAIgJ,WAAY3nE,EAAG2rE,EAAUA,EAAUC,EAAQE,GAIlExV,EAAQj6C,iBAAkB,EAC1BytD,EAAkBL,cAAgBxtD,EAAQnZ,OAAS,OAInDs3C,EAAM4rB,WAAYrH,EAAIgJ,WAAY,EAAGgE,EAAUA,EAAUC,EAAQxwD,GACjE0uD,EAAkBL,cAAgB,EAM/BF,EAA6BjT,EAASoV,IAE1ClC,EAAgB7K,EAAIgJ,WAAYrR,EAASl7C,EAAMnW,MAAOmW,EAAMhW,QAI7D0kE,EAAkBkB,UAAY1U,EAAQ75C,QAEjC65C,EAAQ55C,UAAW45C,EAAQ55C,SAAU45C,GA7XxCgW,CAAexC,EAAmBxT,EAASwU,GAJ3C/nE,QAAQmD,KAAM,yEAA0EowD,IAW1Flc,EAAMumB,cAAehC,EAAIiC,SAAWkK,GACpC1wB,EAAMurB,YAAahH,EAAIgJ,WAAYmC,EAAkBI,gBA0ItD,SAAS2B,EAAsBU,EAAajW,EAASoV,GAEpD,IAAIzvB,EAkCJ,GAhCKyvB,GAEJ/M,EAAIiH,cAAe2G,EAAa5N,EAAI6N,eAAgBpL,EAAMyF,QAASvQ,EAAQh7C,QAC3EqjD,EAAIiH,cAAe2G,EAAa5N,EAAI8N,eAAgBrL,EAAMyF,QAASvQ,EAAQ/6C,QAE3EojD,EAAIiH,cAAe2G,EAAa5N,EAAIoH,mBAAoB3E,EAAMyF,QAASvQ,EAAQ96C,YAC/EmjD,EAAIiH,cAAe2G,EAAa5N,EAAIkH,mBAAoBzE,EAAMyF,QAASvQ,EAAQ76C,cAI/EkjD,EAAIiH,cAAe2G,EAAa5N,EAAI6N,eAAgB7N,EAAI+N,eACxD/N,EAAIiH,cAAe2G,EAAa5N,EAAI8N,eAAgB9N,EAAI+N,eAEnDpW,EAAQh7C,QAAU1f,IAAuB06D,EAAQ/6C,QAAU3f,IAE/DmH,QAAQmD,KAAM,gIAAiIowD,GAIhJqI,EAAIiH,cAAe2G,EAAa5N,EAAIoH,mBAAoB4D,EAAgBrT,EAAQ96C,YAChFmjD,EAAIiH,cAAe2G,EAAa5N,EAAIkH,mBAAoB8D,EAAgBrT,EAAQ76C,YAE3E66C,EAAQ76C,YAAc3f,IAAiBw6D,EAAQ76C,YAAcxf,IAEjE8G,QAAQmD,KAAM,kIAAmIowD,IAMnJra,EAAY9C,EAAWj0C,IAAK,kCAEX,CAEhB,GAAKoxD,EAAQxyD,OAASpH,IAA8D,OAAjDy8C,EAAWj0C,IAAK,4BAAwC,OAC3F,GAAKoxD,EAAQxyD,OAASnH,IAAuE,OAAtDw8C,EAAWj0C,IAAK,iCAA6C,QAE/FoxD,EAAQ36C,WAAa,GAAK2gB,EAAWp3B,IAAKoxD,GAAUqW,uBAExDhO,EAAIiO,cAAeL,EAAatwB,EAAU4wB,2BAA4BltE,KAAK/H,IAAK0+D,EAAQ36C,WAAYy5C,EAAapX,qBACjH1hB,EAAWp3B,IAAKoxD,GAAUqW,oBAAsBrW,EAAQ36C,aAsM3D,SAASmxD,EAAyBC,EAAazC,EAAc0C,EAAYC,GAExE,IAAItB,EAAWvK,EAAMyF,QAASyD,EAAahU,QAAQ56C,QAC/CkwD,EAASxK,EAAMyF,QAASyD,EAAahU,QAAQxyD,MACjDs2C,EAAM4rB,WAAYiH,EAAe,EAAGtB,EAAUrB,EAAarlE,MAAOqlE,EAAallE,OAAQ,EAAGumE,EAAUC,EAAQ,MAC5GjN,EAAIuO,gBAAiBvO,EAAIwO,YAAaJ,GACtCpO,EAAIyO,qBAAsBzO,EAAIwO,YAAaH,EAAYC,EAAe3wC,EAAWp3B,IAAKolE,EAAahU,SAAU4T,eAAgB,GAC7HvL,EAAIuO,gBAAiBvO,EAAIwO,YAAa,MAKvC,SAASE,EAA0BC,EAAchD,GAEhD3L,EAAI4O,iBAAkB5O,EAAI6O,aAAcF,GAEnChD,EAAazO,cAAiByO,EAAaxO,eAE/C6C,EAAI8O,oBAAqB9O,EAAI6O,aAAc7O,EAAIwN,kBAAmB7B,EAAarlE,MAAOqlE,EAAallE,QACnGu5D,EAAI+O,wBAAyB/O,EAAIwO,YAAaxO,EAAIgP,iBAAkBhP,EAAI6O,aAAcF,IAE3EhD,EAAazO,aAAeyO,EAAaxO,eAEpD6C,EAAI8O,oBAAqB9O,EAAI6O,aAAc7O,EAAIyN,cAAe9B,EAAarlE,MAAOqlE,EAAallE,QAC/Fu5D,EAAI+O,wBAAyB/O,EAAIwO,YAAaxO,EAAIiP,yBAA0BjP,EAAI6O,aAAcF,IAK9F3O,EAAI8O,oBAAqB9O,EAAI6O,aAAc7O,EAAIkP,MAAOvD,EAAarlE,MAAOqlE,EAAallE,QAIxFu5D,EAAI4O,iBAAkB5O,EAAI6O,aAAc,MA4MzC9qE,KAAKqpD,aAAeA,EACpBrpD,KAAKupD,eAtmBL,SAAyBqK,EAASwU,GAEjC,IAAIhB,EAAoBxtC,EAAWp3B,IAAKoxD,GAExC,GAA8B,IAAzBA,EAAQl7C,MAAMtY,OAElB,GAAKwzD,EAAQ75C,QAAU,GAAKqtD,EAAkBkB,YAAc1U,EAAQ75C,QAAU,CAEtEqtD,EAAkBC,4BAExBzT,EAAQzyD,iBAAkB,UAAWgmE,GAErCC,EAAkBC,0BAA4BpL,EAAI+G,gBAElD9pB,EAAKuE,OAAOriC,YAIbs8B,EAAMumB,cAAehC,EAAIiC,SAAWkK,GACpC1wB,EAAMurB,YAAahH,EAAIiJ,iBAAkBkC,EAAkBC,2BAE3DpL,EAAIuM,YAAavM,EAAIwM,oBAAqB7U,EAAQ/5C,OAOlD,IALA,IAAIuxD,EAAiBxX,GAAWA,EAAQ+V,oBACpCltD,EAAkBm3C,EAAQl7C,MAAO,IAAOk7C,EAAQl7C,MAAO,GAAI+D,cAE3D4uD,EAAY,GAEN/tE,EAAI,EAAGA,EAAI,EAAGA,IAQtB+tE,EAAW/tE,GANL8tE,GAAkB3uD,EAMPA,EAAgBm3C,EAAQl7C,MAAOpb,GAAIob,MAAQk7C,EAAQl7C,MAAOpb,GAJ1DqpE,EAAgB/S,EAAQl7C,MAAOpb,GAAKo1D,EAAahY,gBAUpE,IAAIhiC,EAAQ2yD,EAAW,GACtBrC,EAAoBzpE,EAAcmZ,GAClCuwD,EAAWvK,EAAMyF,QAASvQ,EAAQ56C,QAClCkwD,EAASxK,EAAMyF,QAASvQ,EAAQxyD,MAIjC,IAFA+nE,EAAsBlN,EAAIiJ,iBAAkBtR,EAASoV,GAE3C1rE,EAAI,EAAGA,EAAI,EAAGA,IAEvB,GAAO8tE,EAgBN,IAFA,IAAIhC,EAAQ7vD,EAAU8xD,EAAW/tE,GAAIic,QAE3BuG,EAAI,EAAGypB,EAAKhwB,EAAQnZ,OAAQ0f,EAAIypB,EAAIzpB,IAE7CspD,EAAS7vD,EAASuG,GAEb8zC,EAAQ56C,SAAWxe,IAAco5D,EAAQ56C,SAAWze,GAEnDm9C,EAAM+tB,8BAA8BjkE,QAASynE,IAAe,EAEhEvxB,EAAM0uB,qBAAsBnK,EAAIkJ,4BAA8B7nE,EAAGwiB,EAAGmpD,EAAUG,EAAO7mE,MAAO6mE,EAAO1mE,OAAQ,EAAG0mE,EAAOlvD,MAIrH7Z,QAAQmD,KAAM,mGAMfk0C,EAAM4rB,WAAYrH,EAAIkJ,4BAA8B7nE,EAAGwiB,EAAGmpD,EAAUG,EAAO7mE,MAAO6mE,EAAO1mE,OAAQ,EAAGumE,EAAUC,EAAQE,EAAOlvD,WAhC1HuC,EAEJi7B,EAAM4rB,WAAYrH,EAAIkJ,4BAA8B7nE,EAAG,EAAG2rE,EAAUoC,EAAW/tE,GAAIiF,MAAO8oE,EAAW/tE,GAAIoF,OAAQ,EAAGumE,EAAUC,EAAQmC,EAAW/tE,GAAI4c,MAIrJw9B,EAAM4rB,WAAYrH,EAAIkJ,4BAA8B7nE,EAAG,EAAG2rE,EAAUA,EAAUC,EAAQmC,EAAW/tE,IA0CnG8pE,EAAkBL,cANZqE,EAM4B7xD,EAAQnZ,OAAS,EAJjB,EAQ9BymE,EAA6BjT,EAASoV,IAG1ClC,EAAgB7K,EAAIiJ,iBAAkBtR,EAASl7C,EAAMnW,MAAOmW,EAAMhW,QAInE0kE,EAAkBkB,UAAY1U,EAAQ75C,QAEjC65C,EAAQ55C,UAAW45C,EAAQ55C,SAAU45C,QAI1Clc,EAAMumB,cAAehC,EAAIiC,SAAWkK,GACpC1wB,EAAMurB,YAAahH,EAAIiJ,iBAAkBkC,EAAkBC,4BAgf9DrnE,KAAKsrE,sBAxeL,SAAgC1X,EAASwU,GAExC1wB,EAAMumB,cAAehC,EAAIiC,SAAWkK,GACpC1wB,EAAMurB,YAAahH,EAAIiJ,iBAAkBtrC,EAAWp3B,IAAKoxD,GAAU4T,iBAsepExnE,KAAKurE,kBApHL,SAA4B3D,GAE3B,IAAIC,EAAyBjuC,EAAWp3B,IAAKolE,GACzCR,EAAoBxtC,EAAWp3B,IAAKolE,EAAahU,SAErDgU,EAAazmE,iBAAkB,UAAWwmE,GAE1CP,EAAkBI,eAAiBvL,EAAI+G,gBAEvC9pB,EAAKuE,OAAOriC,WAEZ,IAAIowD,GAAoD,IAAzC5D,EAAaE,wBACxB2D,EAAqBlsE,EAAcqoE,GAIvC,GAAK4D,EAAS,CAEb3D,EAAuBG,mBAAqB,GAE5C,IAAM,IAAI1qE,EAAI,EAAGA,EAAI,EAAGA,IAEvBuqE,EAAuBG,mBAAoB1qE,GAAM2+D,EAAIyP,yBAMtD7D,EAAuBG,mBAAqB/L,EAAIyP,oBAMjD,GAAKF,EAAS,CAKb,IAHA9zB,EAAMurB,YAAahH,EAAIiJ,iBAAkBkC,EAAkBI,gBAC3D2B,EAAsBlN,EAAIiJ,iBAAkB0C,EAAahU,QAAS6X,GAExDnuE,EAAI,EAAGA,EAAI,EAAGA,IAEvB8sE,EAAyBvC,EAAuBG,mBAAoB1qE,GAAKsqE,EAAc3L,EAAI0P,kBAAmB1P,EAAIkJ,4BAA8B7nE,GAI5IupE,EAA6Be,EAAahU,QAAS6X,IAEvD3E,EAAgB7K,EAAIiJ,iBAAkB0C,EAAahU,QAASgU,EAAarlE,MAAOqlE,EAAallE,QAI9Fg1C,EAAMurB,YAAahH,EAAIiJ,iBAAkB,WAIzCxtB,EAAMurB,YAAahH,EAAIgJ,WAAYmC,EAAkBI,gBACrD2B,EAAsBlN,EAAIgJ,WAAY2C,EAAahU,QAAS6X,GAC5DrB,EAAyBvC,EAAuBG,mBAAoBJ,EAAc3L,EAAI0P,kBAAmB1P,EAAIgJ,YAExG4B,EAA6Be,EAAahU,QAAS6X,IAEvD3E,EAAgB7K,EAAIgJ,WAAY2C,EAAahU,QAASgU,EAAarlE,MAAOqlE,EAAallE,QAIxFg1C,EAAMurB,YAAahH,EAAIgJ,WAAY,MAM/B2C,EAAazO,aAhHnB,SAAiCyO,GAEhC,IAAIC,EAAyBjuC,EAAWp3B,IAAKolE,GAEzC4D,GAAoD,IAAzC5D,EAAaE,wBAE5B,GAAKF,EAAavO,aAAe,CAEhC,GAAKmS,EAAS,MAAM,IAAIvoE,MAAO,6DArDjC,SAA4BonE,EAAazC,GAGxC,GADeA,GAAgBA,EAAaE,wBAC9B,MAAM,IAAI7kE,MAAO,2DAI/B,GAFAg5D,EAAIuO,gBAAiBvO,EAAIwO,YAAaJ,IAE7BzC,EAAavO,eAAgBuO,EAAavO,aAAagQ,eAE/D,MAAM,IAAIpmE,MAAO,uEAKX22B,EAAWp3B,IAAKolE,EAAavO,cAAemO,gBACjDI,EAAavO,aAAa3gD,MAAMnW,QAAUqlE,EAAarlE,OACvDqlE,EAAavO,aAAa3gD,MAAMhW,SAAWklE,EAAallE,SAEzDklE,EAAavO,aAAa3gD,MAAMnW,MAAQqlE,EAAarlE,MACrDqlE,EAAavO,aAAa3gD,MAAMhW,OAASklE,EAAallE,OACtDklE,EAAavO,aAAa3mB,aAAc,GAIzC2W,EAAcue,EAAavO,aAAc,GAEzC,IAAIuS,EAAoBhyC,EAAWp3B,IAAKolE,EAAavO,cAAemO,eAEpE,GAAKI,EAAavO,aAAargD,SAAWpe,GAEzCqhE,EAAIyO,qBAAsBzO,EAAIwO,YAAaxO,EAAIgP,iBAAkBhP,EAAIgJ,WAAY2G,EAAmB,OAE9F,CAAA,GAAKhE,EAAavO,aAAargD,SAAWne,GAMhD,MAAM,IAAIoI,MAAO,+BAJjBg5D,EAAIyO,qBAAsBzO,EAAIwO,YAAaxO,EAAIiP,yBAA0BjP,EAAIgJ,WAAY2G,EAAmB,IAqB5GC,CAAmBhE,EAAuBG,mBAAoBJ,QAI9D,GAAK4D,EAAS,CAEb3D,EAAuBI,mBAAqB,GAE5C,IAAM,IAAI3qE,EAAI,EAAGA,EAAI,EAAGA,IAEvB2+D,EAAIuO,gBAAiBvO,EAAIwO,YAAa5C,EAAuBG,mBAAoB1qE,IACjFuqE,EAAuBI,mBAAoB3qE,GAAM2+D,EAAI6P,qBACrDnB,EAA0B9C,EAAuBI,mBAAoB3qE,GAAKsqE,QAM3E3L,EAAIuO,gBAAiBvO,EAAIwO,YAAa5C,EAAuBG,oBAC7DH,EAAuBI,mBAAqBhM,EAAI6P,qBAChDnB,EAA0B9C,EAAuBI,mBAAoBL,GAMvE3L,EAAIuO,gBAAiBvO,EAAIwO,YAAa,MA8ErCsB,CAAwBnE,IA4C1B5nE,KAAKgsE,yBAtCL,SAAmCpE,GAElC,IAAIhU,EAAUgU,EAAahU,QAG3B,GAAKiT,EAA6BjT,EAFTr0D,EAAcqoE,IAE2B,CAEjE,IAAI3lE,EAAS2lE,EAAaE,wBAA0B7L,EAAIiJ,iBAAmBjJ,EAAIgJ,WAC3EiB,EAAetsC,EAAWp3B,IAAKoxD,GAAU4T,eAE7C9vB,EAAMurB,YAAahhE,EAAQikE,GAC3BY,EAAgB7kE,EAAQ2xD,EAASgU,EAAarlE,MAAOqlE,EAAallE,QAClEg1C,EAAMurB,YAAahhE,EAAQ,QCn0B9B,SAASgqE,GAAY3uC,EAAImZ,GAgJxB,MAAO,CAAE0tB,QA9IT,SAAkB5zD,GAEjB,IAAIgpC,EAEJ,GAAKhpC,IAAMtX,GAAiB,OAAOqkC,EAAG4uC,OACtC,GAAK37D,IAAMrX,GAAsB,OAAOokC,EAAG0sC,cAC3C,GAAKz5D,IAAMpX,GAAyB,OAAOmkC,EAAG6uC,gBAE9C,GAAK57D,IAAMnX,GAAgB,OAAOkkC,EAAG8lC,QACrC,GAAK7yD,IAAMlX,GAA6B,OAAOikC,EAAG8uC,uBAClD,GAAK77D,IAAMjX,GAA4B,OAAOgkC,EAAG+uC,sBAEjD,GAAK97D,IAAMhX,GAAe,OAAO+jC,EAAG4pC,OACpC,GAAK32D,IAAM/W,GAA4B,OAAO8jC,EAAGgvC,sBACjD,GAAK/7D,IAAM9W,GAA2B,OAAO6jC,EAAGivC,qBAEhD,GAAKh8D,IAAM7W,GAAmB,OAAO4jC,EAAG+B,cACxC,GAAK9uB,IAAMrW,GAAwB,OAAOojC,EAAGkvC,uBAC7C,GAAKj8D,IAAMpW,GAAwB,OAAOmjC,EAAGmvC,uBAC7C,GAAKl8D,IAAMnW,GAAuB,OAAOkjC,EAAGovC,qBAE5C,GAAKn8D,IAAM5W,GAAW,OAAO2jC,EAAG6B,KAChC,GAAK5uB,IAAM3W,GAAY,OAAO0jC,EAAGuB,MACjC,GAAKtuB,IAAM1W,GAAoB,OAAOyjC,EAAGqB,eACzC,GAAKpuB,IAAMzW,GAAU,OAAOwjC,EAAG2B,IAC/B,GAAK1uB,IAAMxW,GAAkB,OAAOujC,EAAGyB,aACvC,GAAKxuB,IAAMvW,GAAY,OAAOsjC,EAAGiB,MAEjC,GAAKhuB,IAAMtW,IAIS,QAFnBs/C,EAAY9C,EAAWj0C,IAAK,2BAEF,OAAO+2C,EAAUozB,eAI5C,GAAKp8D,IAAMjW,GAAc,OAAOgjC,EAAGsvC,MACnC,GAAKr8D,IAAMhW,GAAY,OAAO+iC,EAAGuvC,IACjC,GAAKt8D,IAAM/V,GAAa,OAAO8iC,EAAGimC,KAClC,GAAKhzD,IAAM9V,GAAkB,OAAO6iC,EAAGwvC,UACvC,GAAKv8D,IAAM7V,GAAuB,OAAO4iC,EAAGyvC,gBAC5C,GAAKx8D,IAAM3V,GAAc,OAAO0iC,EAAGisC,gBACnC,GAAKh5D,IAAM1V,GAAqB,OAAOyiC,EAAGosC,cAE1C,GAAKn5D,IAAM7Z,EAAc,OAAO4mC,EAAGomC,SACnC,GAAKnzD,IAAM5Z,EAAmB,OAAO2mC,EAAG0vC,cACxC,GAAKz8D,IAAM3Z,EAA0B,OAAO0mC,EAAG2vC,sBAE/C,GAAK18D,IAAMxZ,EAAa,OAAOumC,EAAGymC,KAClC,GAAKxzD,IAAMvZ,EAAY,OAAOsmC,EAAGsmC,IACjC,GAAKrzD,IAAMtZ,EAAiB,OAAOqmC,EAAG4mC,UACtC,GAAK3zD,IAAMrZ,EAAyB,OAAOomC,EAAG0mC,oBAC9C,GAAKzzD,IAAMpZ,EAAiB,OAAOmmC,EAAGwmC,UACtC,GAAKvzD,IAAMnZ,EAAyB,OAAOkmC,EAAG2mC,oBAC9C,GAAK1zD,IAAMlZ,EAAiB,OAAOimC,EAAG4vC,UACtC,GAAK38D,IAAMjZ,EAAyB,OAAOgmC,EAAG6vC,oBAE9C,GAAK58D,IAAMhZ,EAAiB,OAAO+lC,EAAG8vC,UACtC,GAAK78D,IAAM/Y,EAAyB,OAAO8lC,EAAG+vC,oBAC9C,GAAK98D,IAAM9Y,EAAyB,OAAO6lC,EAAGgwC,mBAE9C,IAAK/8D,IAAMzV,IAAwByV,IAAMxV,IACxCwV,IAAMvV,IAAyBuV,IAAMtV,KAIlB,QAFnBs+C,EAAY9C,EAAWj0C,IAAK,kCAEF,CAEzB,GAAK+N,IAAMzV,GAAuB,OAAOy+C,EAAUg0B,6BACnD,GAAKh9D,IAAMxV,GAAwB,OAAOw+C,EAAUi0B,8BACpD,GAAKj9D,IAAMvV,GAAwB,OAAOu+C,EAAUk0B,8BACpD,GAAKl9D,IAAMtV,GAAwB,OAAOs+C,EAAUm0B,8BAMtD,IAAKn9D,IAAMrV,IAA2BqV,IAAMpV,IAC3CoV,IAAMnV,IAA4BmV,IAAMlV,KAIrB,QAFnBk+C,EAAY9C,EAAWj0C,IAAK,mCAEF,CAEzB,GAAK+N,IAAMrV,GAA0B,OAAOq+C,EAAUo0B,gCACtD,GAAKp9D,IAAMpV,GAA0B,OAAOo+C,EAAUq0B,gCACtD,GAAKr9D,IAAMnV,GAA2B,OAAOm+C,EAAUs0B,iCACvD,GAAKt9D,IAAMlV,GAA2B,OAAOk+C,EAAUu0B,iCAMzD,GAAKv9D,IAAMjV,IAIS,QAFnBi+C,EAAY9C,EAAWj0C,IAAK,kCAEF,OAAO+2C,EAAUw0B,0BAI5C,IAAKx9D,IAAMhV,IAAwBgV,IAAM/U,IAAwB+U,IAAM9U,IACtE8U,IAAM7U,IAAwB6U,IAAM5U,IAAwB4U,IAAM3U,IAClE2U,IAAM1U,IAAwB0U,IAAMzU,IAAwByU,IAAMxU,IAClEwU,IAAMvU,IAAyBuU,IAAMtU,IAAyBsU,IAAMrU,IACpEqU,IAAMpU,IAA0BoU,IAAMnU,KAInB,QAFnBm9C,EAAY9C,EAAWj0C,IAAK,kCAI3B,OAAO+N,EAMT,IAAKA,IAAM1Z,GAAe0Z,IAAMzZ,IAIZ,QAFnByiD,EAAY9C,EAAWj0C,IAAK,qBAEF,CAEzB,GAAK+N,IAAM1Z,EAAc,OAAO0iD,EAAUy0B,QAC1C,GAAKz9D,IAAMzZ,EAAc,OAAOyiD,EAAU00B,QAM5C,OAAK19D,IAAMlW,IAIS,QAFnBk/C,EAAY9C,EAAWj0C,IAAK,wBAEK+2C,EAAU20B,wBAIrC,ICvIT,SAASC,GAAmBC,EAAKC,EAAQl+D,EAAMC,GAE9CkyB,GAAOjgC,KAAMrC,MAEbA,KAAKoB,KAAO,oBAEZpB,KAAKouE,SAAcvtE,IAARutE,EAAoBA,EAAM,GACrCpuE,KAAKyiC,KAAO,EAEZziC,KAAKmQ,UAAgBtP,IAATsP,EAAqBA,EAAO,GACxCnQ,KAAKoQ,SAAcvP,IAARuP,EAAoBA,EAAM,IACrCpQ,KAAKsuE,MAAQ,GAEbtuE,KAAKquE,YAAoBxtE,IAAXwtE,EAAuBA,EAAS,EAC9CruE,KAAK0iC,KAAO,KAEZ1iC,KAAKuuE,UAAY,GACjBvuE,KAAKwuE,WAAa,EAElBxuE,KAAK2iC,yBCxBN,SAAS8rC,GAAavsE,GAErBisE,GAAkB9rE,KAAMrC,MAExBA,KAAK0uE,QAAUxsE,GAAS,GCCzB,SAASysE,GAAcl3B,GAEtB,IAAIt5B,EAAQne,KAER4uE,EAAS,KACTC,EAAY,KAEZC,EAAa,KAEbC,EAAiB,IAAI9uE,GACrB+uE,EAAwB,IAAI/uE,GAET,oBAAXgvE,QAA0B,gBAAiBA,SAEtDJ,EAAY,IAAII,OAAOC,YACvBD,OAAO9tE,iBAAkB,yBAA0BguE,GAA0B,IAI9E,IAAI5sC,EAAqB,IAAItiC,GACzBmvE,EAAiB,IAAI7uE,GACrB8uE,EAAe,IAAIvuE,GAEnBwuE,EAAU,IAAInB,GAClBmB,EAAQC,OAAS,IAAInyC,GAAS,EAAK,EAAK,GAAK,GAC7CkyC,EAAQjuC,OAAOJ,OAAQ,GAEvB,IAAIuuC,EAAU,IAAIrB,GAClBqB,EAAQD,OAAS,IAAInyC,GAAS,GAAK,EAAK,GAAK,GAC7CoyC,EAAQnuC,OAAOJ,OAAQ,GAEvB,IAYIwuC,EAAaC,EAZbC,EAAW,IAAIlB,GAAa,CAAEa,EAASE,IAM3C,SAASI,IAER,OAAkB,OAAXhB,IAA2C,IAAxBA,EAAOgB,aAMlC,SAAST,IAER,GAAKS,IAAiB,CAErB,IAAIC,EAAgBjB,EAAOkB,iBAAkB,QACzCC,EAAcF,EAAcE,YAC5BC,EAAeH,EAAcG,aAEjCN,EAAoBj4B,EAASw4B,gBAC7BR,EAAch4B,EAAS15B,UAEvB05B,EAASy4B,qBAAoC,EAAdH,EAAiBC,EAAc,QAEnD7xD,EAAMooB,SAEjBkR,EAASy4B,qBAAsBT,EAAYltE,MAAOktE,EAAY/sE,OAAQgtE,GA5BxEC,EAAStuC,OAAOJ,OAAQ,GACxB0uC,EAAStuC,OAAOJ,OAAQ,GAmCxBjhC,KAAKumC,SAAU,EACfvmC,KAAKmwE,WAAa,IAElBnwE,KAAKowE,UAAY,WAEhB,OAAOxB,GAIR5uE,KAAKqwE,UAAY,SAAWtyE,QAEZ8C,IAAV9C,IAAsB6wE,EAAS7wE,IAIrCiC,KAAKswE,cAAgB,SAAW3yD,QAEf9c,IAAX8c,IAAuBmxD,EAAanxD,IAI1C3d,KAAKuwE,UAAY,SAAW56D,GAE3B,GAAgB,OAAXi5D,EAAkB,OAAOj5D,EAE9Bi5D,EAAO4B,UAAY76D,EAAOxF,KAC1By+D,EAAO6B,SAAW96D,EAAOvF,IAEzBw+D,EAAO8B,aAAc7B,GAIrB,IAAI8B,EAAkB/B,EAAO+B,gBAExBA,EAEJ5B,EAAe9oE,UAAW0qE,EAAgBC,4BAI1C7B,EAAetgE,gBAAiB,EAAG0P,EAAMgyD,WAAY,GAKtD,IAAIU,EAAOhC,EAAUgC,KACjBC,EAA4B,OAAfhC,EAAsBA,EAAan5D,EAwBpD,GArBAm7D,EAAWz7E,OAAOgO,KAAM0rE,GACxB+B,EAAWz7E,OAAOia,UAAWwhE,EAAWzhE,SAAUyhE,EAAWp7E,WAAYo7E,EAAW1iE,OAE1D,OAArByiE,EAAKE,cAET3B,EAAenpE,UAAW4qE,EAAKE,aAC/BD,EAAWp7E,WAAWwO,SAAUkrE,IAIV,OAAlByB,EAAKxhE,WAET+/D,EAAev/D,sBAAuBk/D,GACtCM,EAAappE,UAAW4qE,EAAKxhE,UAC7BggE,EAAar6D,gBAAiBo6D,GAC9B0B,EAAWzhE,SAAS9L,IAAK8rE,IAI1ByB,EAAWnyD,qBAEkB,IAAxBiwD,EAAOgB,aAAyB,OAAOj6D,EAI5C25D,EAAQn/D,KAAOwF,EAAOxF,KACtBq/D,EAAQr/D,KAAOwF,EAAOxF,KAEtBm/D,EAAQl/D,IAAMuF,EAAOvF,IACrBo/D,EAAQp/D,IAAMuF,EAAOvF,IAErBu/D,EAAS95D,YAAYxS,KAAMsS,EAAOE,aAClC85D,EAASptC,mBAAmBl/B,KAAMsS,EAAO4sB,oBAEzC+sC,EAAQ/sC,mBAAmBt8B,UAAW4oE,EAAUmC,gBAChDxB,EAAQjtC,mBAAmBt8B,UAAW4oE,EAAUoC,iBAIhDjC,EAAsBrhE,WAAYohE,GAElCO,EAAQ/sC,mBAAmBr+B,SAAU8qE,GACrCQ,EAAQjtC,mBAAmBr+B,SAAU8qE,GAErC,IAAIvtC,EAASqvC,EAAWrvC,OAER,OAAXA,IAEJc,EAAmB50B,WAAY8zB,EAAO5rB,aAEtCy5D,EAAQ/sC,mBAAmBr+B,SAAUq+B,GACrCitC,EAAQjtC,mBAAmBr+B,SAAUq+B,IAMtC+sC,EAAQz5D,YAAYlI,WAAY2hE,EAAQ/sC,oBACxCitC,EAAQ35D,YAAYlI,WAAY6hE,EAAQjtC,oBAExC+sC,EAAQ15D,iBAAiB3P,UAAW4oE,EAAUqC,sBAC9C1B,EAAQ55D,iBAAiB3P,UAAW4oE,EAAUsC,uBAK9CxB,EAAS/5D,iBAAiBvS,KAAMisE,EAAQ15D,kBAIxC,IAAIyrB,EAASutC,EAAOwC,YAEpB,GAAK/vC,EAAOjhC,OAAS,CAEpB,IAAIixE,EAAQhwC,EAAQ,GAEM,OAArBgwC,EAAMC,YAAmD,IAA5BD,EAAMC,WAAWlxE,QAElDkvE,EAAQC,OAAOtpE,UAAWorE,EAAMC,YAIN,OAAtBD,EAAME,aAAqD,IAA7BF,EAAME,YAAYnxE,QAEpDovE,EAAQD,OAAOtpE,UAAWorE,EAAME,aAMlC,OAAO5B,GAIR3vE,KAAKwxE,kBAAoB,WAExB,OAAOzC,GAIR/uE,KAAKyxE,YAAc,WAEb7B,KAAiBhB,EAAO6C,eAI9BzxE,KAAKsc,QAAU,WAES,oBAAX2yD,QAEXA,OAAOttE,oBAAqB,yBAA0BwtE,ICxOzD,SAASuC,KAERlwC,GAASn/B,KAAMrC,MAEfA,KAAKoB,KAAO,QAEZpB,KAAKy4C,WAAa,KAClBz4C,KAAKo5B,IAAM,KACXp5B,KAAK2xE,iBAAmB,KAExB3xE,KAAK+7D,YAAa,ECHnB,SAAS6V,GAAkBC,EAAWC,EAAcpvE,EAAQqvE,EAAgBthC,EAAgBuhC,EAAWC,EAAYC,GAElHjrC,GAAS5kC,KAAMrC,MAEfA,KAAKoB,KAAO,mBAEZpB,KAAKwlC,WAAa,CACjBqsC,UAAWA,EACXC,aAAcA,EACdpvE,OAAQA,EACRqvE,eAAgBA,EAChBthC,eAAgBA,EAChBuhC,UAAWA,EACXC,WAAYA,EACZC,YAAaA,GAGdlyE,KAAKypC,mBAAoB,IAAI0oC,GAAwBN,EAAWC,EAAcpvE,EAAQqvE,EAAgBthC,EAAgBuhC,EAAWC,EAAYC,IAC7IlyE,KAAKssC,gBASN,SAAS6lC,GAAwBN,EAAWC,EAAcpvE,EAAQqvE,EAAgBthC,EAAgBuhC,EAAWC,EAAYC,GAExH/hC,GAAe9tC,KAAMrC,MAErBA,KAAKoB,KAAO,yBAEZpB,KAAKwlC,WAAa,CACjBqsC,UAAWA,EACXC,aAAcA,EACdpvE,OAAQA,EACRqvE,eAAgBA,EAChBthC,eAAgBA,EAChBuhC,UAAWA,EACXC,WAAYA,EACZC,YAAaA,GAGd,IAAI/zD,EAAQne,KAEZ6xE,OAA0BhxE,IAAdgxE,EAA0BA,EAAY,EAClDC,OAAgCjxE,IAAjBixE,EAA6BA,EAAe,EAC3DpvE,EAASA,GAAU,EAEnBqvE,EAAiB90E,KAAK8B,MAAOgzE,IAAoB,EACjDthC,EAAiBxzC,KAAK8B,MAAO0xC,IAAoB,EAEjDuhC,OAA0BnxE,IAAdmxE,GAA0BA,EACtCC,OAA4BpxE,IAAfoxE,EAA2BA,EAAa,EACrDC,OAA8BrxE,IAAhBqxE,EAA4BA,EAAwB,EAAVj1E,KAAKC,GAI7D,IAAIwsC,EAAU,GACVlrB,EAAW,GACXyqB,EAAU,GACVC,EAAM,GAINrnC,EAAQ,EACRuwE,EAAa,GACb3b,EAAa/zD,EAAS,EACtBmuC,EAAa,EAoHjB,SAASwhC,EAAapiE,GAErB,IAAI3a,EAAGg9E,EAAkBC,EAErB/1D,EAAK,IAAIzc,GACTotC,EAAS,IAAIrsC,GAEb6wC,EAAa,EAEbz6B,GAAmB,IAARjH,EAAiB4hE,EAAYC,EACxC1uB,GAAiB,IAARnzC,EAAiB,GAAM,EASpC,IANAqiE,EAAmBzwE,EAMbvM,EAAI,EAAGA,GAAKy8E,EAAgBz8E,IAIjCkpB,EAAS/c,KAAM,EAAGg1D,EAAarT,EAAM,GAIrCna,EAAQxnC,KAAM,EAAG2hD,EAAM,GAIvBla,EAAIznC,KAAM,GAAK,IAIfI,IAUD,IAJA0wE,EAAiB1wE,EAIXvM,EAAI,EAAGA,GAAKy8E,EAAgBz8E,IAAO,CAExC,IACIqZ,EADIrZ,EAAIy8E,EACIG,EAAcD,EAE1BO,EAAWv1E,KAAK0J,IAAKgI,GACrB8jE,EAAWx1E,KAAK2J,IAAK+H,GAIzBw+B,EAAO73C,EAAI4hB,EAASu7D,EACpBtlC,EAAO53C,EAAIkhE,EAAarT,EACxBjW,EAAO33C,EAAI0hB,EAASs7D,EACpBh0D,EAAS/c,KAAM0rC,EAAO73C,EAAG63C,EAAO53C,EAAG43C,EAAO33C,GAI1CyzC,EAAQxnC,KAAM,EAAG2hD,EAAM,GAIvB5mC,EAAGlnB,EAAiB,GAAXk9E,EAAmB,GAC5Bh2D,EAAGjnB,EAAiB,GAAXk9E,EAAiBrvB,EAAS,GACnCla,EAAIznC,KAAM+a,EAAGlnB,EAAGknB,EAAGjnB,GAInBsM,IAMD,IAAMvM,EAAI,EAAGA,EAAIy8E,EAAgBz8E,IAAO,CAEvC,IAAIoR,EAAI4rE,EAAmBh9E,EACvBgI,EAAIi1E,EAAiBj9E,GAEZ,IAAR2a,EAIJy5B,EAAQjoC,KAAMnE,EAAGA,EAAI,EAAGoJ,GAMxBgjC,EAAQjoC,KAAMnE,EAAI,EAAGA,EAAGoJ,GAIzBirC,GAAc,EAMfxzB,EAAMyzB,SAAUf,EAAYc,GAAoB,IAAR1hC,EAAe,EAAI,GAI3D4gC,GAAcc,GA3Mf,WAEC,IAAIr8C,EAAGC,EACHohB,EAAS,IAAI7V,GACbqsC,EAAS,IAAIrsC,GAEb6wC,EAAa,EAGb+gC,GAAUZ,EAAeD,GAAcnvE,EAI3C,IAAMnN,EAAI,EAAGA,GAAKk7C,EAAgBl7C,IAAO,CAExC,IAAIo9E,EAAW,GAEXrvE,EAAI/N,EAAIk7C,EAIRv5B,EAAS5T,GAAMwuE,EAAeD,GAAcA,EAEhD,IAAMv8E,EAAI,EAAGA,GAAKy8E,EAAgBz8E,IAAO,CAExC,IAAI01B,EAAI11B,EAAIy8E,EAERpjE,EAAQqc,EAAIknD,EAAcD,EAE1BQ,EAAWx1E,KAAK2J,IAAK+H,GACrB6jE,EAAWv1E,KAAK0J,IAAKgI,GAIzBw+B,EAAO73C,EAAI4hB,EAASu7D,EACpBtlC,EAAO53C,GAAM+N,EAAIZ,EAAS+zD,EAC1BtpB,EAAO33C,EAAI0hB,EAASs7D,EACpBh0D,EAAS/c,KAAM0rC,EAAO73C,EAAG63C,EAAO53C,EAAG43C,EAAO33C,GAI1CmhB,EAAOlU,IAAKgwE,EAAUC,EAAOF,GAAWptE,YACxC6jC,EAAQxnC,KAAMkV,EAAOrhB,EAAGqhB,EAAOphB,EAAGohB,EAAOnhB,GAIzC0zC,EAAIznC,KAAMupB,EAAG,EAAI1nB,GAIjBqvE,EAASlxE,KAAMI,KAMhBuwE,EAAW3wE,KAAMkxE,GAMlB,IAAMr9E,EAAI,EAAGA,EAAIy8E,EAAgBz8E,IAEhC,IAAMC,EAAI,EAAGA,EAAIk7C,EAAgBl7C,IAAO,CAIvC,IAAIqO,EAAIwuE,EAAY78E,GAAKD,GACrBuO,EAAIuuE,EAAY78E,EAAI,GAAKD,GACzBoR,EAAI0rE,EAAY78E,EAAI,GAAKD,EAAI,GAC7ByT,EAAIqpE,EAAY78E,GAAKD,EAAI,GAI7Bo0C,EAAQjoC,KAAMmC,EAAGC,EAAGkF,GACpB2gC,EAAQjoC,KAAMoC,EAAG6C,EAAGqC,GAIpB4oC,GAAc,EAQhBxzB,EAAMyzB,SAAUf,EAAYc,EAAY,GAIxCd,GAAcc,EA5GfihC,IAEmB,IAAdZ,IAECH,EAAY,GAAIQ,GAAa,GAC7BP,EAAe,GAAIO,GAAa,IAMtCryE,KAAK6xC,SAAUnI,GACf1pC,KAAK8xC,aAAc,WAAY,IAAIhJ,GAAwBtqB,EAAU,IACrExe,KAAK8xC,aAAc,SAAU,IAAIhJ,GAAwBG,EAAS,IAClEjpC,KAAK8xC,aAAc,KAAM,IAAIhJ,GAAwBI,EAAK,IChG3D,SAAS2pC,GAAOC,GAEf9yE,KAAK8yE,eAA4BjyE,IAAdiyE,GAA4BA,EAE/C9yE,KAAK+yE,UAAY,EACjB/yE,KAAKgzE,QAAU,EACfhzE,KAAKizE,YAAc,EAEnBjzE,KAAKkzE,SAAU,ECJhB,SAASC,GAAWj8B,EAAQh2B,EAAW/Q,EAAMC,GAE5CpQ,KAAK6gD,IAAM,IAAI5J,GAAKC,EAAQh2B,GAG5BlhB,KAAKmQ,KAAOA,GAAQ,EACpBnQ,KAAKoQ,IAAMA,GAAOkgC,EAAAA,EAElBtwC,KAAKozE,OAAS,CACb/7B,KAAM,GACNg8B,KAAM,GACNC,IAAK,GACLC,OAAQ,CAAEC,UAAW,GACrBC,OAAQ,IAGTzyE,OAAOsB,iBAAkBtC,KAAKozE,OAAQ,CACrCM,WAAY,CACXlxE,IAAK,WAGJ,OADAnC,QAAQmD,KAAM,yEACPxD,KAAKuzE,WAQhB,SAASI,GAAS/vE,EAAGC,GAEpB,OAAOD,EAAE02B,SAAWz2B,EAAEy2B,SAIvB,SAASs5C,GAAiBj2D,EAAQyoC,EAAWI,EAAYxgB,GAExD,IAAwB,IAAnBroB,EAAOqkB,UAEZrkB,EAAOinB,QAASwhB,EAAWI,IAER,IAAdxgB,GAIJ,IAFA,IAAItE,EAAW/jB,EAAO+jB,SAEZpkC,EAAI,EAAG8E,EAAIs/B,EAASthC,OAAQ9C,EAAI8E,EAAG9E,IAE5Cs2E,GAAiBlyC,EAAUpkC,GAAK8oD,EAAWI,GAAY,GCtC1D,SAAS4M,GAAmB5tB,GAE3B2O,GAAS9xC,KAAMrC,MAEfA,KAAKoB,KAAO,oBAEZpB,KAAKy1B,MAAQ,IAAIZ,GAAO,UAExB70B,KAAKu2C,UAAY,EACjBv2C,KAAK6zE,QAAU,QACf7zE,KAAK8zE,SAAW,QAEhB9zE,KAAKy5B,QAAS,EAEdz5B,KAAKo2C,UAAW5Q,GnBjBjB,SAAS6tC,GAAM/0D,EAAUonB,EAAUyT,GAElC,GAAc,IAATA,EAGJ,OADA94C,QAAQmD,KAAM,mGACP,IAAIuwE,GAAcz1D,EAAUonB,GAIpClE,GAASn/B,KAAMrC,MAEfA,KAAKoB,KAAO,OAEZpB,KAAKse,cAAwBzd,IAAbyd,EAAyBA,EAAW,IAAI6xB,GACxDnwC,KAAK0lC,cAAwB7kC,IAAb6kC,EAAyBA,EAAW,IAAI0tB,GAAmB,CAAE39B,MAAuB,SAAhBx4B,KAAKQ,WoBpB1F,SAASs2E,GAAcz1D,EAAUonB,GAEhC2tC,GAAKhxE,KAAMrC,KAAMse,EAAUonB,GAE3B1lC,KAAKoB,KAAO,eC2Cb,SAAS8xD,GAAsB1tB,GAE9B2O,GAAS9xC,KAAMrC,MAEfA,KAAKs2C,QAAU,CAAE09B,SAAY,IAE7Bh0E,KAAKoB,KAAO,uBAEZpB,KAAKy1B,MAAQ,IAAIZ,GAAO,UACxB70B,KAAKo8B,UAAY,GACjBp8B,KAAKq8B,UAAY,GAEjBr8B,KAAKi3B,IAAM,KAEXj3B,KAAKg4B,SAAW,KAChBh4B,KAAKi4B,kBAAoB,EAEzBj4B,KAAK63B,MAAQ,KACb73B,KAAK83B,eAAiB,EAEtB93B,KAAK+7B,SAAW,IAAIlH,GAAO,GAC3B70B,KAAKsgD,kBAAoB,EACzBtgD,KAAKm4B,YAAc,KAEnBn4B,KAAKq4B,QAAU,KACfr4B,KAAKs4B,UAAY,EAEjBt4B,KAAKw4B,UAAY,KACjBx4B,KAAKy4B,YAAc,IAAI14B,GAAS,EAAG,GAEnCC,KAAK24B,gBAAkB,KACvB34B,KAAK44B,kBAAoB,EACzB54B,KAAK64B,iBAAmB,EAExB74B,KAAK+4B,aAAe,KAEpB/4B,KAAKi5B,aAAe,KAEpBj5B,KAAKm3B,SAAW,KAEhBn3B,KAAKu3B,OAAS,KACdv3B,KAAKs8B,gBAAkB,EAEvBt8B,KAAK03B,gBAAkB,IAEvB13B,KAAK+1C,WAAY,EACjB/1C,KAAKg2C,mBAAqB,EAC1Bh2C,KAAKi2C,iBAAmB,QACxBj2C,KAAKk2C,kBAAoB,QAEzBl2C,KAAKm2C,UAAW,EAChBn2C,KAAKqnC,cAAe,EACpBrnC,KAAKsnC,cAAe,EAEpBtnC,KAAKo2C,UAAW5Q,GCnGjB,SAAS2tB,GAAsB3tB,GAE9B0tB,GAAqB7wD,KAAMrC,MAE3BA,KAAKs2C,QAAU,CAAE29B,SAAY,IAE7Bj0E,KAAKoB,KAAO,uBAEZpB,KAAKy3B,aAAe,GAEpBz3B,KAAKkgC,UAAY,EACjBlgC,KAAKmgC,mBAAqB,EAE1BngC,KAAKo2C,UAAW5Q,GCZjB,SAAS+tB,GAAgB/tB,GAExB2O,GAAS9xC,KAAMrC,MAEfA,KAAKoB,KAAO,iBAEZpB,KAAKy1B,MAAQ,IAAIZ,GAAO,GACxB70B,KAAKu0C,aAAc,EAEnBv0C,KAAKo2C,UAAW5Q,GCHjB,SAAS6tB,GAAoB7tB,GAE5B4tB,GAAkB/wD,KAAMrC,MAExBA,KAAKoB,KAAO,qBAEZpB,KAAKoO,MAAQ,EACbpO,KAAKw8B,SAAW,EAChBx8B,KAAKwgD,QAAU,EAEfxgD,KAAKo2C,UAAW5Q,GvBCjB,SAAS0uC,GAAaviE,EAAKulC,EAAQ92C,EAAQq1B,EAAO0+C,EAAYC,GAI7D5yC,GAASn/B,KAAMrC,WAEAa,IAAV40B,IAAsBA,EAAQ,eACnB50B,IAAXT,IAAuBA,EAAS,QACjBS,IAAfszE,IAA2BA,EAAa,GAAM/zE,QAChCS,IAAduzE,IAA0BA,EAAY,GAAMD,QAE3BtzE,IAAjB61D,MAEJA,GAAe,IAAIvmB,IACN2B,aAAc,WAAY,IAAIhJ,GAAwB,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,GAAK,KAEzF6tB,GAAe,IAAIwb,GAAwB,EAAG,GAAK,EAAG,EAAG,IAC5Cl6D,UAAW,GAAK,GAAK,IAInCjY,KAAKqP,SAAShM,KAAM6zC,GAEpBl3C,KAAKihB,KAAO,IAAIoyD,GAAM3c,GAAc,IAAItD,GAAmB,CAAE39B,MAAOA,KACpEz1B,KAAKihB,KAAKvH,kBAAmB,EAC7B1Z,KAAKuD,IAAKvD,KAAKihB,MAEfjhB,KAAKq0E,KAAO,IAAIh9B,GAAMsf,GAAc,IAAI9gB,GAAmB,CAAEpgB,MAAOA,KACpEz1B,KAAKq0E,KAAK36D,kBAAmB,EAC7B1Z,KAAKuD,IAAKvD,KAAKq0E,MAEfr0E,KAAKs0E,aAAc3iE,GACnB3R,KAAK4F,UAAWxF,EAAQ+zE,EAAYC,GwBpDrC,SAASG,GAAO9+C,EAAO6hC,GAEtB91B,GAASn/B,KAAMrC,MAEfA,KAAKoB,KAAO,QAEZpB,KAAKy1B,MAAQ,IAAIZ,GAAOY,GACxBz1B,KAAKs3D,eAA0Bz2D,IAAdy2D,EAA0BA,EAAY,EAEvDt3D,KAAKkiC,mBAAgBrhC,ECVtB,SAAS2zE,GAAa7+D,GAErB3V,KAAK2V,OAASA,EAEd3V,KAAKy3D,KAAO,EACZz3D,KAAK23D,aAAe,EACpB33D,KAAKkX,OAAS,EAEdlX,KAAK03D,QAAU,IAAI33D,GAAS,IAAK,KAEjCC,KAAKi3B,IAAM,KACXj3B,KAAK3K,OAAS,IAAI4K,GCXnB,SAASw0E,KAERD,GAAYnyE,KAAMrC,KAAM,IAAIwiC,IAAsB,EAAG,EAAG,GAAK,EAAG,GAAK,MCAtE,SAASkyC,GAAkBj/C,EAAO6hC,GAEjCid,GAAMlyE,KAAMrC,KAAMy1B,EAAO6hC,GAEzBt3D,KAAKoB,KAAO,mBAEZpB,KAAKqP,SAAShM,KAAMm+B,GAASG,WAC7B3hC,KAAK+a,eAEL/a,KAAKiC,OAAS,IAAIu/B,GAElBxhC,KAAK65B,OAAS,IAAI46C,GCdnB,SAASE,GAAcl/C,EAAO6hC,GAE7Bid,GAAMlyE,KAAMrC,KAAMy1B,EAAO6hC,GAEzBt3D,KAAKoB,KAAO,eAEZpB,KAAKiiC,gBAAaphC,ECJnB,SAAS+zE,GAAiBx5C,EAAUC,EAAai8B,GAEhDid,GAAMlyE,KAAMrC,KAAMo7B,EAAUk8B,GAE5Bt3D,KAAKoB,KAAO,kBAEZpB,KAAKiiC,gBAAaphC,EAElBb,KAAKqP,SAAShM,KAAMm+B,GAASG,WAC7B3hC,KAAK+a,eAEL/a,KAAKq7B,YAAc,IAAIxG,GAAOwG,G3BmB/By9B,GAAkB53D,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ/a,GAAgBoB,WAAa,CAExFkC,YAAa01D,GAEbnF,qBAAqB,EAErBkhB,QAAS,SAAWtyE,EAAOG,GAErB1C,KAAKuC,QAAUA,GAASvC,KAAK0C,SAAWA,IAE5C1C,KAAKuC,MAAQA,EACbvC,KAAK0C,OAASA,EAEd1C,KAAKsc,WAINtc,KAAKk5D,SAASz2D,IAAK,EAAG,EAAGF,EAAOG,GAChC1C,KAAKg5D,QAAQv2D,IAAK,EAAG,EAAGF,EAAOG,IAIhCS,MAAO,WAEN,OAAO,IAAInD,KAAKoD,aAAcC,KAAMrD,OAIrCqD,KAAM,SAAW2X,GAahB,OAXAhb,KAAKuC,MAAQyY,EAAOzY,MACpBvC,KAAK0C,OAASsY,EAAOtY,OAErB1C,KAAKk5D,SAAS71D,KAAM2X,EAAOk+C,UAE3Bl5D,KAAK4zD,QAAU54C,EAAO44C,QAAQzwD,QAE9BnD,KAAKm5D,YAAcn+C,EAAOm+C,YAC1Bn5D,KAAKo5D,cAAgBp+C,EAAOo+C,cAC5Bp5D,KAAKq5D,aAAer+C,EAAOq+C,aAEpBr5D,MAIRsc,QAAS,WAERtc,KAAK+B,cAAe,CAAEX,KAAM,eC9B9BwxD,GAAkB1xD,UAAYF,OAAO6Z,OAAQs5B,GAASjzC,WACtD0xD,GAAkB1xD,UAAUkC,YAAcwvD,GAE1CA,GAAkB1xD,UAAU4zE,qBAAsB,EAElDliB,GAAkB1xD,UAAUmC,KAAO,SAAW2X,GAoB7C,OAlBAm5B,GAASjzC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEpChb,KAAK0wD,aAAe11C,EAAO01C,aAE3B1wD,KAAKm2C,SAAWn7B,EAAOm7B,SACvBn2C,KAAKqnC,aAAersB,EAAOqsB,aAE3BrnC,KAAKi3B,IAAMjc,EAAOic,IAElBj3B,KAAKm3B,SAAWnc,EAAOmc,SAEvBn3B,KAAK24B,gBAAkB3d,EAAO2d,gBAC9B34B,KAAK44B,kBAAoB5d,EAAO4d,kBAChC54B,KAAK64B,iBAAmB7d,EAAO6d,iBAE/B74B,KAAK+1C,UAAY/6B,EAAO+6B,UACxB/1C,KAAKg2C,mBAAqBh7B,EAAOg7B,mBAE1Bh2C,MC1BR6yD,GAAqB3xD,UAAYF,OAAO6Z,OAAQs5B,GAASjzC,WACzD2xD,GAAqB3xD,UAAUkC,YAAcyvD,GAE7CA,GAAqB3xD,UAAUy6D,wBAAyB,EAExD9I,GAAqB3xD,UAAUmC,KAAO,SAAW2X,GAmBhD,OAjBAm5B,GAASjzC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEpChb,KAAKi9B,kBAAkB55B,KAAM2X,EAAOiiB,mBACpCj9B,KAAKk9B,aAAeliB,EAAOkiB,aAC3Bl9B,KAAKm9B,YAAcniB,EAAOmiB,YAE1Bn9B,KAAKm2C,SAAWn7B,EAAOm7B,SACvBn2C,KAAKqnC,aAAersB,EAAOqsB,aAE3BrnC,KAAKi3B,IAAMjc,EAAOic,IAElBj3B,KAAKm3B,SAAWnc,EAAOmc,SAEvBn3B,KAAK24B,gBAAkB3d,EAAO2d,gBAC9B34B,KAAK44B,kBAAoB5d,EAAO4d,kBAChC54B,KAAK64B,iBAAmB7d,EAAO6d,iBAExB74B,MEhER68D,GAAc37D,UAAYF,OAAO6Z,OAAQpC,GAAQvX,WACjD27D,GAAc37D,UAAUkC,YAAcy5D,GKmBtCsR,GAAkBjtE,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQynB,GAAOphC,WAAa,CAE/EkC,YAAa+qE,GAEb4G,qBAAqB,EAErB1xE,KAAM,SAAW2X,EAAQgrB,GAiBxB,OAfA1D,GAAOphC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,EAAQgrB,GAE1ChmC,KAAKouE,IAAMpzD,EAAOozD,IAClBpuE,KAAKyiC,KAAOznB,EAAOynB,KAEnBziC,KAAKmQ,KAAO6K,EAAO7K,KACnBnQ,KAAKoQ,IAAM4K,EAAO5K,IAClBpQ,KAAKsuE,MAAQtzD,EAAOszD,MAEpBtuE,KAAKquE,OAASrzD,EAAOqzD,OACrBruE,KAAK0iC,KAAuB,OAAhB1nB,EAAO0nB,KAAgB,KAAO1hC,OAAOC,OAAQ,GAAI+Z,EAAO0nB,MAEpE1iC,KAAKuuE,UAAYvzD,EAAOuzD,UACxBvuE,KAAKwuE,WAAaxzD,EAAOwzD,WAElBxuE,MAYRg1E,eAAgB,SAAWC,GAG1B,IAAIC,EAAe,GAAMl1E,KAAKm1E,gBAAkBF,EAEhDj1E,KAAKouE,IAAsB,EAAhBrxE,GAAMI,QAAcF,KAAKm4E,KAAMF,GAC1Cl1E,KAAK2iC,0BAON0yC,eAAgB,WAEf,IAAIH,EAAej4E,KAAKi3B,IAAqB,GAAhBn3B,GAAMC,QAAgBgD,KAAKouE,KAExD,MAAO,GAAMpuE,KAAKm1E,gBAAkBD,GAIrCI,gBAAiB,WAEhB,OAAuB,EAAhBv4E,GAAMI,QAAcF,KAAKm4E,KAC/Bn4E,KAAKi3B,IAAqB,GAAhBn3B,GAAMC,QAAgBgD,KAAKouE,KAAQpuE,KAAKyiC,OAIpD8yC,aAAc,WAGb,OAAOv1E,KAAKuuE,UAAYtxE,KAAK/H,IAAK8K,KAAKquE,OAAQ,IAIhD8G,cAAe,WAGd,OAAOn1E,KAAKuuE,UAAYtxE,KAAK9H,IAAK6K,KAAKquE,OAAQ,IAuChDjoC,cAAe,SAAWC,EAAWC,EAAYhxC,EAAGC,EAAGgN,EAAOG,GAE7D1C,KAAKquE,OAAShoC,EAAYC,EAEP,OAAdtmC,KAAK0iC,OAET1iC,KAAK0iC,KAAO,CACX6D,SAAS,EACTF,UAAW,EACXC,WAAY,EACZE,QAAS,EACTC,QAAS,EACTlkC,MAAO,EACPG,OAAQ,IAKV1C,KAAK0iC,KAAK6D,SAAU,EACpBvmC,KAAK0iC,KAAK2D,UAAYA,EACtBrmC,KAAK0iC,KAAK4D,WAAaA,EACvBtmC,KAAK0iC,KAAK8D,QAAUlxC,EACpB0K,KAAK0iC,KAAK+D,QAAUlxC,EACpByK,KAAK0iC,KAAKngC,MAAQA,EAClBvC,KAAK0iC,KAAKhgC,OAASA,EAEnB1C,KAAK2iC,0BAIN+D,gBAAiB,WAEG,OAAd1mC,KAAK0iC,OAET1iC,KAAK0iC,KAAK6D,SAAU,GAIrBvmC,KAAK2iC,0BAINA,uBAAwB,WAEvB,IAAIxyB,EAAOnQ,KAAKmQ,KACfF,EAAME,EAAOlT,KAAKi3B,IACD,GAAhBn3B,GAAMC,QAAgBgD,KAAKouE,KAAQpuE,KAAKyiC,KACzC//B,EAAS,EAAIuN,EACb1N,EAAQvC,KAAKquE,OAAS3rE,EACtBqN,GAAS,GAAMxN,EACfmgC,EAAO1iC,KAAK0iC,KAEb,GAAmB,OAAd1iC,KAAK0iC,MAAiB1iC,KAAK0iC,KAAK6D,QAAU,CAE9C,IAAIF,EAAY3D,EAAK2D,UACpBC,EAAa5D,EAAK4D,WAEnBv2B,GAAQ2yB,EAAK8D,QAAUjkC,EAAQ8jC,EAC/Bp2B,GAAOyyB,EAAK+D,QAAU/jC,EAAS4jC,EAC/B/jC,GAASmgC,EAAKngC,MAAQ8jC,EACtB3jC,GAAUggC,EAAKhgC,OAAS4jC,EAIzB,IAAIkvC,EAAOx1E,KAAKwuE,WACF,IAATgH,IAAazlE,GAAQI,EAAOqlE,EAAOx1E,KAAKu1E,gBAE7Cv1E,KAAK4V,iBAAiB9F,gBAAiBC,EAAMA,EAAOxN,EAAO0N,EAAKA,EAAMvN,EAAQyN,EAAMnQ,KAAKoQ,MAI1F6K,OAAQ,SAAWC,GAElB,IAAIhB,EAAOsnB,GAAStgC,UAAU+Z,OAAO5Y,KAAMrC,KAAMkb,GAgBjD,OAdAhB,EAAKyD,OAAOywD,IAAMpuE,KAAKouE,IACvBl0D,EAAKyD,OAAO8kB,KAAOziC,KAAKyiC,KAExBvoB,EAAKyD,OAAOxN,KAAOnQ,KAAKmQ,KACxB+J,EAAKyD,OAAOvN,IAAMpQ,KAAKoQ,IACvB8J,EAAKyD,OAAO2wD,MAAQtuE,KAAKsuE,MAEzBp0D,EAAKyD,OAAO0wD,OAASruE,KAAKquE,OAEP,OAAdruE,KAAK0iC,OAAgBxoB,EAAKyD,OAAO+kB,KAAO1hC,OAAOC,OAAQ,GAAIjB,KAAK0iC,OAErExoB,EAAKyD,OAAO4wD,UAAYvuE,KAAKuuE,UAC7Br0D,EAAKyD,OAAO6wD,WAAaxuE,KAAKwuE,WAEvBt0D,KC7NTu0D,GAAYvtE,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQszD,GAAkBjtE,WAAa,CAEpFkC,YAAaqrE,GAEbgH,eAAe,IEEhB/D,GAAMxwE,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ2mB,GAAStgC,WAAa,CAErEkC,YAAasuE,GAEbruE,KAAM,SAAW2X,EAAQgrB,GAWxB,OATAxE,GAAStgC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,EAAQgrB,GAEjB,OAAtBhrB,EAAOy9B,aAAsBz4C,KAAKy4C,WAAaz9B,EAAOy9B,WAAWt1C,SAClD,OAAf6X,EAAOoe,MAAep5B,KAAKo5B,IAAMpe,EAAOoe,IAAIj2B,SAChB,OAA5B6X,EAAO22D,mBAA4B3xE,KAAK2xE,iBAAmB32D,EAAO22D,iBAAiBxuE,SAExFnD,KAAK+7D,WAAa/gD,EAAO+gD,WACzB/7D,KAAK0Z,iBAAmBsB,EAAOtB,iBAExB1Z,MAIRib,OAAQ,SAAWC,GAElB,IAAIhB,EAAOsnB,GAAStgC,UAAU+Z,OAAO5Y,KAAMrC,KAAMkb,GAKjD,OAHyB,OAApBlb,KAAKy4C,aAAsBv+B,EAAKyD,OAAO86B,WAAaz4C,KAAKy4C,WAAWx9B,OAAQC,IAC/D,OAAblb,KAAKo5B,MAAelf,EAAKyD,OAAOyb,IAAMp5B,KAAKo5B,IAAIne,UAE7Cf,KCXT03D,GAAiB1wE,UAAYF,OAAO6Z,OAAQosB,GAAS/lC,WACrD0wE,GAAiB1wE,UAAUkC,YAAcwuE,GAmRzCO,GAAuBjxE,UAAYF,OAAO6Z,OAAQs1B,GAAejvC,WACjEixE,GAAuBjxE,UAAUkC,YAAc+uE,GCxS/CnxE,OAAOC,OAAQ4xE,GAAM3xE,UAAW,CAE/BmgB,MAAO,WAENrhB,KAAK+yE,WAAqC,oBAAhB2C,YAA8BC,KAAOD,aAAcE,MAE7E51E,KAAKgzE,QAAUhzE,KAAK+yE,UACpB/yE,KAAKizE,YAAc,EACnBjzE,KAAKkzE,SAAU,GAIhB2C,KAAM,WAEL71E,KAAK81E,iBACL91E,KAAKkzE,SAAU,EACflzE,KAAK8yE,WAAY,GAIlBgD,eAAgB,WAGf,OADA91E,KAAK+1E,WACE/1E,KAAKizE,aAIb8C,SAAU,WAET,IAAIlpC,EAAO,EAEX,GAAK7sC,KAAK8yE,YAAe9yE,KAAKkzE,QAG7B,OADAlzE,KAAKqhB,QACE,EAIR,GAAKrhB,KAAKkzE,QAAU,CAEnB,IAAI8C,GAAmC,oBAAhBN,YAA8BC,KAAOD,aAAcE,MAE1E/oC,GAASmpC,EAAUh2E,KAAKgzE,SAAY,IACpChzE,KAAKgzE,QAAUgD,EAEfh2E,KAAKizE,aAAepmC,EAIrB,OAAOA,KCFT7rC,OAAOC,OAAQkyE,GAAUjyE,UAAW,CAEnC+0E,cAAe,EAEfxzE,IAAK,SAAWy0C,EAAQh2B,GAIvBlhB,KAAK6gD,IAAIp+C,IAAKy0C,EAAQh2B,IAIvBg1D,cAAe,SAAWC,EAAQxgE,GAE1BA,GAAUA,EAAOo/D,qBAEvB/0E,KAAK6gD,IAAI3J,OAAO9/B,sBAAuBzB,EAAOE,aAC9C7V,KAAK6gD,IAAI3/B,UAAUze,IAAK0zE,EAAO7gF,EAAG6gF,EAAO5gF,EAAG,IAAMugB,UAAWH,GAAS5R,IAAK/D,KAAK6gD,IAAI3J,QAAS9xC,aAEhFuQ,GAAUA,EAAOwwB,sBAE9BnmC,KAAK6gD,IAAI3J,OAAOz0C,IAAK0zE,EAAO7gF,EAAG6gF,EAAO5gF,GAAKogB,EAAOxF,KAAOwF,EAAOvF,MAAUuF,EAAOxF,KAAOwF,EAAOvF,MAAQ0F,UAAWH,GAClH3V,KAAK6gD,IAAI3/B,UAAUze,IAAK,EAAG,GAAK,GAAIsT,mBAAoBJ,EAAOE,cAI/DxV,QAAQC,MAAO,8CAMjBszE,gBAAiB,SAAWj2D,EAAQqoB,EAAWowC,GAE9C,IAAI5vB,EAAa4vB,GAAkB,GAMnC,OAJAxC,GAAiBj2D,EAAQ3d,KAAMwmD,EAAYxgB,GAE3CwgB,EAAWxZ,KAAM2mC,IAEVntB,GAIR6vB,iBAAkB,SAAWC,EAAStwC,EAAWowC,GAEhD,IAAI5vB,EAAa4vB,GAAkB,GAEnC,IAAkC,IAA7B9qD,MAAMC,QAAS+qD,GAGnB,OADAj2E,QAAQmD,KAAM,8DACPgjD,EAIR,IAAM,IAAIlpD,EAAI,EAAG8E,EAAIk0E,EAAQl2E,OAAQ9C,EAAI8E,EAAG9E,IAE3Cs2E,GAAiB0C,EAASh5E,GAAK0C,KAAMwmD,EAAYxgB,GAMlD,OAFAwgB,EAAWxZ,KAAM2mC,IAEVntB,KC3FT4M,GAAkBlyD,UAAYF,OAAO6Z,OAAQs5B,GAASjzC,WACtDkyD,GAAkBlyD,UAAUkC,YAAcgwD,GAE1CA,GAAkBlyD,UAAUq1E,qBAAsB,EAElDnjB,GAAkBlyD,UAAUmC,KAAO,SAAW2X,GAU7C,OARAm5B,GAASjzC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEpChb,KAAKy1B,MAAMpyB,KAAM2X,EAAOya,OAExBz1B,KAAKu2C,UAAYv7B,EAAOu7B,UACxBv2C,KAAK6zE,QAAU74D,EAAO64D,QACtB7zE,KAAK8zE,SAAW94D,EAAO84D,SAEhB9zE,MnBlBRqzE,GAAKnyE,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ2mB,GAAStgC,WAAa,CAEpEkC,YAAaiwE,GAEbzgC,QAAQ,EAER4jC,sBAEKn1D,GAAQ,IAAIvgB,GACZ2gB,GAAM,IAAI3gB,GAEP,WAEN,IAAIwd,EAAWte,KAAKse,SAEpB,GAAKA,EAASG,iBAIb,GAAwB,OAAnBH,EAASzc,MAAiB,CAK9B,IAHA,IAAI40E,EAAoBn4D,EAASI,WAAWrP,SACxCo4B,EAAgB,CAAE,GAEZnqC,EAAI,EAAG8E,EAAIq0E,EAAkBtpE,MAAO7P,EAAI8E,EAAG9E,IAEpD+jB,GAAMjb,oBAAqBqwE,EAAmBn5E,EAAI,GAClDmkB,GAAIrb,oBAAqBqwE,EAAmBn5E,GAE5CmqC,EAAenqC,GAAMmqC,EAAenqC,EAAI,GACxCmqC,EAAenqC,IAAO+jB,GAAM9b,WAAYkc,IAIzCnD,EAASwzB,aAAc,eAAgB,IAAIhJ,GAAwBrB,EAAe,SAIlFpnC,QAAQmD,KAAM,sGAIT,GAAK8a,EAASC,WAAa,CAEjC,IAAIC,EAAWF,EAASE,SAKxB,KAJIipB,EAAgBnpB,EAASmpB,eAEd,GAAM,EAEXnqC,EAAI,EAAG8E,EAAIoc,EAASpe,OAAQ9C,EAAI8E,EAAG9E,IAE5CmqC,EAAenqC,GAAMmqC,EAAenqC,EAAI,GACxCmqC,EAAenqC,IAAOkhB,EAAUlhB,EAAI,GAAIiI,WAAYiZ,EAAUlhB,IAMhE,OAAO0C,OAMT4kC,QAAW,WAEV,IAAI0gB,EAAgB,IAAIrlD,GACpB4gD,EAAM,IAAI5J,GACV1+B,EAAS,IAAI6B,GAEjB,OAAO,SAAkBgsC,EAAWI,GAEnC,IAAI9Z,EAAY0Z,EAAU6vB,cACtBS,EAAchqC,EAAYA,EAE1BpuB,EAAWte,KAAKse,SAChBzI,EAAc7V,KAAK6V,YASvB,GALiC,OAA5ByI,EAAS4E,gBAA0B5E,EAAS6E,wBAEjD5K,EAAOlV,KAAMib,EAAS4E,gBACtB3K,EAAOlL,aAAcwI,IAE6B,IAA7CuwC,EAAUvF,IAAI7hC,iBAAkBzG,GAArC,CAIA+sC,EAAc33C,WAAYkI,GAC1BgrC,EAAIx9C,KAAM+iD,EAAUvF,KAAMxzC,aAAci4C,GAExC,IAAIqxB,EAAS,IAAI71E,GACb81E,EAAO,IAAI91E,GACX+1E,EAAe,IAAI/1E,GACnBg2E,EAAW,IAAIh2E,GACfi2E,EAAS/2E,MAAQA,KAAKg3E,eAAmB,EAAI,EAEjD,GAAK14D,EAASG,iBAAmB,CAEhC,IAAI5c,EAAQyc,EAASzc,MAEjB8nC,EADarrB,EAASI,WACCrP,SAASnN,MAEpC,GAAe,OAAVL,EAIJ,IAFA,IAAI6nC,EAAU7nC,EAAMK,MAEV5E,EAAI,EAAG8E,EAAIsnC,EAAQtpC,OAAS,EAAG9C,EAAI8E,EAAG9E,GAAKy5E,EAAO,CAE3D,IAAInzE,EAAI8lC,EAASpsC,GACbuG,EAAI6lC,EAASpsC,EAAI,GAErBq5E,EAAO1wE,UAAW0jC,EAAe,EAAJ/lC,GAC7BgzE,EAAK3wE,UAAW0jC,EAAe,EAAJ9lC,GAEdg9C,EAAIM,oBAAqBw1B,EAAQC,EAAME,EAAUD,GAEhDH,IAEdI,EAASzpE,aAAcrN,KAAK6V,cAExBykB,EAAW8rB,EAAUvF,IAAI3J,OAAO3xC,WAAYuxE,IAEhC1wB,EAAUj2C,MAAQmqB,EAAW8rB,EAAUh2C,KAEvDo2C,EAAW/kD,KAAM,CAEhB64B,SAAUA,EAGVtc,MAAO64D,EAAa1zE,QAAQkK,aAAcrN,KAAK6V,aAC/ChU,MAAOvE,EACPgsC,KAAM,KACNid,UAAW,KACX5oC,OAAQ3d,aAQV,IAAU1C,EAAI,EAAG8E,EAAIunC,EAAUvpC,OAAS,EAAI,EAAG9C,EAAI8E,EAAG9E,GAAKy5E,EAE1DJ,EAAO1wE,UAAW0jC,EAAW,EAAIrsC,GACjCs5E,EAAK3wE,UAAW0jC,EAAW,EAAIrsC,EAAI,GAEtBujD,EAAIM,oBAAqBw1B,EAAQC,EAAME,EAAUD,GAEhDH,IAEdI,EAASzpE,aAAcrN,KAAK6V,cAExBykB,EAAW8rB,EAAUvF,IAAI3J,OAAO3xC,WAAYuxE,IAEhC1wB,EAAUj2C,MAAQmqB,EAAW8rB,EAAUh2C,KAEvDo2C,EAAW/kD,KAAM,CAEhB64B,SAAUA,EAGVtc,MAAO64D,EAAa1zE,QAAQkK,aAAcrN,KAAK6V,aAC/ChU,MAAOvE,EACPgsC,KAAM,KACNid,UAAW,KACX5oC,OAAQ3d,aAQL,GAAKse,EAASC,WAEpB,CAAA,IAAIC,EAAWF,EAASE,SACpBy4D,EAAaz4D,EAASpe,OAE1B,IAAU9C,EAAI,EAAGA,EAAI25E,EAAa,EAAG35E,GAAKy5E,EAAO,CAEhD,IAMIz8C,EANSumB,EAAIM,oBAAqB3iC,EAAUlhB,GAAKkhB,EAAUlhB,EAAI,GAAKw5E,EAAUD,GAEpEH,IAEdI,EAASzpE,aAAcrN,KAAK6V,cAExBykB,EAAW8rB,EAAUvF,IAAI3J,OAAO3xC,WAAYuxE,IAEhC1wB,EAAUj2C,MAAQmqB,EAAW8rB,EAAUh2C,KAEvDo2C,EAAW/kD,KAAM,CAEhB64B,SAAUA,EAGVtc,MAAO64D,EAAa1zE,QAAQkK,aAAcrN,KAAK6V,aAC/ChU,MAAOvE,EACPgsC,KAAM,KACNid,UAAW,KACX5oC,OAAQ3d,eAYbmD,MAAO,WAEN,OAAO,IAAInD,KAAKoD,YAAapD,KAAKse,SAAUte,KAAK0lC,UAAWriC,KAAMrD,SoBvOpE+zE,GAAa7yE,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQw4D,GAAKnyE,WAAa,CAExEkC,YAAa2wE,GAEbiD,gBAAgB,EAEhBR,qBAAwB,WAEvB,IAAIn1D,EAAQ,IAAIvgB,GACZ2gB,EAAM,IAAI3gB,GAEd,OAAO,WAEN,IAAIwd,EAAWte,KAAKse,SAEpB,GAAKA,EAASG,iBAIb,GAAwB,OAAnBH,EAASzc,MAAiB,CAK9B,IAHA,IAAI40E,EAAoBn4D,EAASI,WAAWrP,SACxCo4B,EAAgB,GAEVnqC,EAAI,EAAG8E,EAAIq0E,EAAkBtpE,MAAO7P,EAAI8E,EAAG9E,GAAK,EAEzD+jB,EAAMjb,oBAAqBqwE,EAAmBn5E,GAC9CmkB,EAAIrb,oBAAqBqwE,EAAmBn5E,EAAI,GAEhDmqC,EAAenqC,GAAc,IAANA,EAAY,EAAImqC,EAAenqC,EAAI,GAC1DmqC,EAAenqC,EAAI,GAAMmqC,EAAenqC,GAAM+jB,EAAM9b,WAAYkc,GAIjEnD,EAASwzB,aAAc,eAAgB,IAAIhJ,GAAwBrB,EAAe,SAIlFpnC,QAAQmD,KAAM,8GAIT,GAAK8a,EAASC,WAEpB,CAAA,IAAIC,EAAWF,EAASE,SAGxB,IAFIipB,EAAgBnpB,EAASmpB,cAEnBnqC,EAAI,EAAG8E,EAAIoc,EAASpe,OAAQ9C,EAAI8E,EAAG9E,GAAK,EAEjD+jB,EAAMhe,KAAMmb,EAAUlhB,IACtBmkB,EAAIpe,KAAMmb,EAAUlhB,EAAI,IAExBmqC,EAAenqC,GAAc,IAANA,EAAY,EAAImqC,EAAenqC,EAAI,GAC1DmqC,EAAenqC,EAAI,GAAMmqC,EAAenqC,GAAM+jB,EAAM9b,WAAYkc,GAMlE,OAAOzhB,WCsCVkzD,GAAqBhyD,UAAYF,OAAO6Z,OAAQs5B,GAASjzC,WACzDgyD,GAAqBhyD,UAAUkC,YAAc8vD,GAE7CA,GAAqBhyD,UAAUg2E,wBAAyB,EAExDhkB,GAAqBhyD,UAAUmC,KAAO,SAAW2X,GAoDhD,OAlDAm5B,GAASjzC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEpChb,KAAKs2C,QAAU,CAAE09B,SAAY,IAE7Bh0E,KAAKy1B,MAAMpyB,KAAM2X,EAAOya,OACxBz1B,KAAKo8B,UAAYphB,EAAOohB,UACxBp8B,KAAKq8B,UAAYrhB,EAAOqhB,UAExBr8B,KAAKi3B,IAAMjc,EAAOic,IAElBj3B,KAAKg4B,SAAWhd,EAAOgd,SACvBh4B,KAAKi4B,kBAAoBjd,EAAOid,kBAEhCj4B,KAAK63B,MAAQ7c,EAAO6c,MACpB73B,KAAK83B,eAAiB9c,EAAO8c,eAE7B93B,KAAK+7B,SAAS14B,KAAM2X,EAAO+gB,UAC3B/7B,KAAKm4B,YAAcnd,EAAOmd,YAC1Bn4B,KAAKsgD,kBAAoBtlC,EAAOslC,kBAEhCtgD,KAAKq4B,QAAUrd,EAAOqd,QACtBr4B,KAAKs4B,UAAYtd,EAAOsd,UAExBt4B,KAAKw4B,UAAYxd,EAAOwd,UACxBx4B,KAAKy4B,YAAYp1B,KAAM2X,EAAOyd,aAE9Bz4B,KAAK24B,gBAAkB3d,EAAO2d,gBAC9B34B,KAAK44B,kBAAoB5d,EAAO4d,kBAChC54B,KAAK64B,iBAAmB7d,EAAO6d,iBAE/B74B,KAAK+4B,aAAe/d,EAAO+d,aAE3B/4B,KAAKi5B,aAAeje,EAAOie,aAE3Bj5B,KAAKm3B,SAAWnc,EAAOmc,SAEvBn3B,KAAKu3B,OAASvc,EAAOuc,OACrBv3B,KAAKs8B,gBAAkBthB,EAAOshB,gBAE9Bt8B,KAAK03B,gBAAkB1c,EAAO0c,gBAE9B13B,KAAK+1C,UAAY/6B,EAAO+6B,UACxB/1C,KAAKg2C,mBAAqBh7B,EAAOg7B,mBACjCh2C,KAAKi2C,iBAAmBj7B,EAAOi7B,iBAC/Bj2C,KAAKk2C,kBAAoBl7B,EAAOk7B,kBAEhCl2C,KAAKm2C,SAAWn7B,EAAOm7B,SACvBn2C,KAAKqnC,aAAersB,EAAOqsB,aAC3BrnC,KAAKsnC,aAAetsB,EAAOssB,aAEpBtnC,MC/IRmzD,GAAqBjyD,UAAYF,OAAO6Z,OAAQq4C,GAAqBhyD,WACrEiyD,GAAqBjyD,UAAUkC,YAAc+vD,GAE7CA,GAAqBjyD,UAAUi2E,wBAAyB,EAExDhkB,GAAqBjyD,UAAUmC,KAAO,SAAW2X,GAWhD,OATAk4C,GAAqBhyD,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEhDhb,KAAKs2C,QAAU,CAAE29B,SAAY,IAE7Bj0E,KAAKy3B,aAAezc,EAAOyc,aAE3Bz3B,KAAKkgC,UAAYllB,EAAOklB,UACxBlgC,KAAKmgC,mBAAqBnlB,EAAOmlB,mBAE1BngC,MCnBRuzD,GAAeryD,UAAYF,OAAO6Z,OAAQs5B,GAASjzC,WACnDqyD,GAAeryD,UAAUkC,YAAcmwD,GAEvCA,GAAeryD,UAAUk2E,kBAAmB,EAE5C7jB,GAAeryD,UAAUmC,KAAO,SAAW2X,GAM1C,OAJAm5B,GAASjzC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEpChb,KAAKy1B,MAAMpyB,KAAM2X,EAAOya,OAEjBz1B,MCJRqzD,GAAmBnyD,UAAYF,OAAO6Z,OAAQu4C,GAAkBlyD,WAChEmyD,GAAmBnyD,UAAUkC,YAAciwD,GAE3CA,GAAmBnyD,UAAUm2E,sBAAuB,EAEpDhkB,GAAmBnyD,UAAUmC,KAAO,SAAW2X,GAQ9C,OANAo4C,GAAkBlyD,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAE7Chb,KAAKoO,MAAQ4M,EAAO5M,MACpBpO,KAAKw8B,SAAWxhB,EAAOwhB,SACvBx8B,KAAKwgD,QAAUxlC,EAAOwlC,QAEfxgD,MvBoBRk0E,GAAYhzE,UAAYF,OAAO6Z,OAAQ2mB,GAAStgC,WAChDgzE,GAAYhzE,UAAUkC,YAAc8wE,GAEpCA,GAAYhzE,UAAUozE,cAEjBvlE,GAAO,IAAIjO,GAGR,SAAuB6Q,GAIxBA,EAAIpc,EAAI,OAEZyK,KAAKtK,WAAW+M,IAAK,EAAG,EAAG,EAAG,GAEnBkP,EAAIpc,GAAM,OAErByK,KAAKtK,WAAW+M,IAAK,EAAG,EAAG,EAAG,IAI9BsM,GAAKtM,IAAKkP,EAAInc,EAAG,GAAKmc,EAAIrc,GAAI8P,YAE9B9F,GAAUrC,KAAK4Z,KAAMlF,EAAIpc,GAEzByK,KAAKtK,WAAWgd,iBAAkB3D,GAAMzP,OAQ3C40E,GAAYhzE,UAAU0E,UAAY,SAAWxF,EAAQ+zE,EAAYC,QAE5CvzE,IAAfszE,IAA2BA,EAAa,GAAM/zE,QAChCS,IAAduzE,IAA0BA,EAAY,GAAMD,GAEjDn0E,KAAKihB,KAAK7S,MAAM3L,IAAK,EAAGxF,KAAK9H,IAAK,EAAGiL,EAAS+zE,GAAc,GAC5Dn0E,KAAKihB,KAAKlG,eAEV/a,KAAKq0E,KAAKjmE,MAAM3L,IAAK2xE,EAAWD,EAAYC,GAC5Cp0E,KAAKq0E,KAAKhlE,SAAS9Z,EAAI6K,EACvBJ,KAAKq0E,KAAKt5D,gBAIXm5D,GAAYhzE,UAAUo2E,SAAW,SAAW7hD,GAE3Cz1B,KAAKihB,KAAKykB,SAASjQ,MAAMpyB,KAAMoyB,GAC/Bz1B,KAAKq0E,KAAK3uC,SAASjQ,MAAMpyB,KAAMoyB,IwB9FhC8+C,GAAMrzE,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ2mB,GAAStgC,WAAa,CAErEkC,YAAamxE,GAEbgD,SAAS,EAETl0E,KAAM,SAAW2X,GAOhB,OALAwmB,GAAStgC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEpChb,KAAKy1B,MAAMpyB,KAAM2X,EAAOya,OACxBz1B,KAAKs3D,UAAYt8C,EAAOs8C,UAEjBt3D,MAIRib,OAAQ,SAAWC,GAElB,IAAIhB,EAAOsnB,GAAStgC,UAAU+Z,OAAO5Y,KAAMrC,KAAMkb,GAcjD,OAZAhB,EAAKyD,OAAO8X,MAAQz1B,KAAKy1B,MAAMU,SAC/Bjc,EAAKyD,OAAO25C,UAAYt3D,KAAKs3D,eAEHz2D,IAArBb,KAAKq7B,cAA4BnhB,EAAKyD,OAAO0d,YAAcr7B,KAAKq7B,YAAYlF,eAE1Dt1B,IAAlBb,KAAKs6B,WAAyBpgB,EAAKyD,OAAO2c,SAAWt6B,KAAKs6B,eAC3Cz5B,IAAfb,KAAKqF,QAAsB6U,EAAKyD,OAAOtY,MAAQrF,KAAKqF,YACrCxE,IAAfb,KAAKy6B,QAAsBvgB,EAAKyD,OAAO8c,MAAQz6B,KAAKy6B,YAClC55B,IAAlBb,KAAK63D,WAAyB39C,EAAKyD,OAAOk6C,SAAW73D,KAAK63D,eAE1Ch3D,IAAhBb,KAAK65B,SAAuB3f,EAAKyD,OAAOkc,OAAS75B,KAAK65B,OAAO5e,UAE3Df,KChCTlZ,OAAOC,OAAQuzE,GAAYtzE,UAAW,CAErCmC,KAAM,SAAW2X,GAShB,OAPAhb,KAAK2V,OAASqF,EAAOrF,OAAOxS,QAE5BnD,KAAKy3D,KAAOz8C,EAAOy8C,KACnBz3D,KAAKkX,OAAS8D,EAAO9D,OAErBlX,KAAK03D,QAAQr0D,KAAM2X,EAAO08C,SAEnB13D,MAIRmD,MAAO,WAEN,OAAO,IAAInD,KAAKoD,aAAcC,KAAMrD,OAIrCib,OAAQ,WAEP,IAAI0C,EAAS,GASb,OAPmB,IAAd3d,KAAKy3D,OAAa95C,EAAO85C,KAAOz3D,KAAKy3D,MACrB,IAAhBz3D,KAAKkX,SAAeyG,EAAOzG,OAASlX,KAAKkX,QACtB,MAAnBlX,KAAK03D,QAAQpiE,GAAgC,MAAnB0K,KAAK03D,QAAQniE,IAAYooB,EAAO+5C,QAAU13D,KAAK03D,QAAQvxD,WAEtFwX,EAAOhI,OAAS3V,KAAK2V,OAAOsF,QAAQ,GAAQ0C,cACrCA,EAAOhI,OAAOtgB,OAEdsoB,KCzCT82D,GAAuBvzE,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ25D,GAAYtzE,WAAa,CAEzFkC,YAAaqxE,KCSdC,GAAiBxzE,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ05D,GAAMrzE,WAAa,CAE7EkC,YAAasxE,GAEbld,oBAAoB,EAEpBn0D,KAAM,SAAW2X,GAQhB,OANAu5D,GAAMrzE,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEjChb,KAAKiC,OAAS+Y,EAAO/Y,OAAOkB,QAE5BnD,KAAK65B,OAAS7e,EAAO6e,OAAO12B,QAErBnD,QCtBT20E,GAAazzE,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ05D,GAAMrzE,WAAa,CAEzEkC,YAAauxE,GAEbpd,gBAAgB,ICGjBqd,GAAgB1zE,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ05D,GAAMrzE,WAAa,CAE5EkC,YAAawxE,GAEb3c,mBAAmB,EAEnB50D,KAAM,SAAW2X,GAMhB,OAJAu5D,GAAMrzE,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEjChb,KAAKq7B,YAAYh4B,KAAM2X,EAAOqgB,aAEvBr7B,QC/BT,IAAIw3E,GAAQ,CAEXjxC,SAAS,EAETkxC,MAAO,GAEPl0E,IAAK,SAAWwiC,EAAK2xC,IAEE,IAAjB13E,KAAKumC,UAIVvmC,KAAKy3E,MAAO1xC,GAAQ2xC,IAIrBl1E,IAAK,SAAWujC,GAEf,IAAsB,IAAjB/lC,KAAKumC,QAIV,OAAOvmC,KAAKy3E,MAAO1xC,IAIpBrI,OAAQ,SAAWqI,UAEX/lC,KAAKy3E,MAAO1xC,IAIpB4S,MAAO,WAEN34C,KAAKy3E,MAAQ,KCqDXE,GAAwB,IAvF5B,SAAyBC,EAAQC,EAAYC,GAE5C,IAAI35D,EAAQne,KAER+3E,GAAY,EACZC,EAAc,EACdC,EAAa,EACbC,OAAcr3E,EAElBb,KAAKm4E,aAAUt3E,EACfb,KAAK43E,YA6EsB,EA5E3B53E,KAAK63E,gBA4EsB,EA3E3B73E,KAAK83E,aA2EsB,EAzE3B93E,KAAKo4E,UAAY,SAAW18D,GAE3Bu8D,KAEmB,IAAdF,QAEmBl3E,IAAlBsd,EAAMg6D,SAEVh6D,EAAMg6D,QAASz8D,EAAKs8D,EAAaC,GAMnCF,GAAY,GAIb/3E,KAAKq4E,QAAU,SAAW38D,GAEzBs8D,SAE0Bn3E,IAArBsd,EAAM05D,YAEV15D,EAAM05D,WAAYn8D,EAAKs8D,EAAaC,GAIhCD,IAAgBC,IAEpBF,GAAY,OAEUl3E,IAAjBsd,EAAMy5D,QAEVz5D,EAAMy5D,WAQT53E,KAAKs4E,UAAY,SAAW58D,QAEJ7a,IAAlBsd,EAAM25D,SAEV35D,EAAM25D,QAASp8D,IAMjB1b,KAAKu4E,WAAa,SAAW78D,GAE5B,OAAKw8D,EAEGA,EAAax8D,GAIdA,GAIR1b,KAAKw4E,eAAiB,SAAWC,GAGhC,OADAP,EAAcO,EACPz4E,OC7ET,SAAS04E,GAAaC,GAErB34E,KAAK24E,aAAwB93E,IAAZ83E,EAA0BA,EAAUhB,GCAtD,SAASiB,GAAeD,GAEvB34E,KAAK24E,aAAwB93E,IAAZ83E,EAA0BA,EAAUhB,GCHtD,SAASkB,GAAmBF,GAE3B34E,KAAK24E,aAAwB93E,IAAZ83E,EAA0BA,EAAUhB,GC4BtD,SAASmB,KAER94E,KAAKoB,KAAO,QAEZpB,KAAK+4E,mBAAqB,ICvC3B,SAASC,GAAcC,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAEpFV,GAAMz2E,KAAMrC,MAEZA,KAAKoB,KAAO,eAEZpB,KAAKi5E,GAAKA,GAAM,EAChBj5E,KAAKk5E,GAAKA,GAAM,EAEhBl5E,KAAKm5E,QAAUA,GAAW,EAC1Bn5E,KAAKo5E,QAAUA,GAAW,EAE1Bp5E,KAAKq5E,YAAcA,GAAe,EAClCr5E,KAAKs5E,UAAYA,GAAa,EAAIr8E,KAAKC,GAEvC8C,KAAKu5E,WAAaA,IAAc,EAEhCv5E,KAAKw5E,UAAYA,GAAa,EClB/B,SAASC,GAAUR,EAAIC,EAAIQ,EAASL,EAAaC,EAAWC,GAE3DP,GAAa32E,KAAMrC,KAAMi5E,EAAIC,EAAIQ,EAASA,EAASL,EAAaC,EAAWC,GAE3Ev5E,KAAKoB,KAAO,WCkBb,SAASu4E,KAER,IAAIC,EAAK,EAAGxnE,EAAK,EAAGC,EAAK,EAAGC,EAAK,EAUjC,SAASoqC,EAAMvrC,EAAII,EAAI0wC,EAAIC,GAE1B03B,EAAKzoE,EACLiB,EAAK6vC,EACL5vC,GAAO,EAAIlB,EAAK,EAAII,EAAK,EAAI0wC,EAAKC,EAClC5vC,EAAK,EAAInB,EAAK,EAAII,EAAK0wC,EAAKC,EAI7B,MAAO,CAEN23B,eAAgB,SAAW1oE,EAAII,EAAIvH,EAAI8vE,EAAIC,GAE1Cr9B,EAAMnrC,EAAIvH,EAAI+vE,GAAY/vE,EAAKmH,GAAM4oE,GAAYD,EAAKvoE,KAIvDyoE,yBAA0B,SAAW7oE,EAAII,EAAIvH,EAAI8vE,EAAIG,EAAKC,EAAKC,GAG9D,IAAIj4B,GAAO3wC,EAAKJ,GAAO8oE,GAAQjwE,EAAKmH,IAAS8oE,EAAMC,IAAUlwE,EAAKuH,GAAO2oE,EACrEE,GAAOpwE,EAAKuH,GAAO2oE,GAAQJ,EAAKvoE,IAAS2oE,EAAMC,IAAUL,EAAK9vE,GAAOmwE,EAMzEz9B,EAAMnrC,EAAIvH,EAHVk4C,GAAMg4B,EACNE,GAAMF,IAMPG,KAAM,SAAW57E,GAEhB,IAAI27E,EAAK37E,EAAIA,EAEb,OAAOm7E,EAAKxnE,EAAK3T,EAAI4T,EAAK+nE,EAAK9nE,GADtB8nE,EAAK37E,KNzDjBuC,OAAOC,OAAQy3E,GAAYx3E,UAAW,CAErCo5E,YAAa,YAEbC,KAAM,SAAW7+D,EAAKk8D,EAAQC,EAAYC,QAE5Bj3E,IAAR6a,IAAoBA,EAAM,SAEZ7a,IAAdb,KAAKsrD,OAAqB5vC,EAAM1b,KAAKsrD,KAAO5vC,GAEjDA,EAAM1b,KAAK24E,QAAQJ,WAAY78D,GAE/B,IAAIyC,EAAQne,KAERw6E,EAAShD,GAAMh1E,IAAKkZ,GAExB,QAAgB7a,IAAX25E,EAYJ,OAVAr8D,EAAMw6D,QAAQP,UAAW18D,GAEzB++D,WAAY,WAEN7C,GAASA,EAAQ4C,GAEtBr8D,EAAMw6D,QAAQN,QAAS38D,IAErB,GAEI8+D,EAIR,IAAI9hE,EAAQmD,SAASC,gBAAiB,+BAAgC,OAuCtE,OArCApD,EAAMvX,iBAAkB,OAAQ,WAE/Bq2E,GAAMj0E,IAAKmY,EAAK1b,MAEX43E,GAASA,EAAQ53E,MAEtBme,EAAMw6D,QAAQN,QAAS38D,KAErB,GAUHhD,EAAMvX,iBAAkB,QAAS,SAAWa,GAEtC81E,GAAUA,EAAS91E,GAExBmc,EAAMw6D,QAAQN,QAAS38D,GACvByC,EAAMw6D,QAAQL,UAAW58D,KAEvB,GAEyB,UAAvBA,EAAIg/D,OAAQ,EAAG,SAEO75E,IAArBb,KAAKs6E,cAA4B5hE,EAAM4hE,YAAct6E,KAAKs6E,aAIhEn8D,EAAMw6D,QAAQP,UAAW18D,GAEzBhD,EAAMiiE,IAAMj/D,EAELhD,GAIRkiE,eAAgB,SAAW78E,GAG1B,OADAiC,KAAKs6E,YAAcv8E,EACZiC,MAIR66E,QAAS,SAAW98E,GAGnB,OADAiC,KAAKsrD,KAAOvtD,EACLiC,QCnFTgB,OAAOC,OAAQ23E,GAAc13E,UAAW,CAEvCo5E,YAAa,YAEbC,KAAM,SAAW7+D,EAAKk8D,EAAQC,EAAYC,GAEzC,IAAIlkB,EAAU,IAAIn7C,GAEdqiE,EAAS,IAAIpC,GAAa14E,KAAK24E,SAsBnC,OArBAmC,EAAOF,eAAgB56E,KAAKs6E,aAC5BQ,EAAOD,QAAS76E,KAAKsrD,MAErBwvB,EAAOP,KAAM7+D,EAAK,SAAWhD,GAE5Bk7C,EAAQl7C,MAAQA,EAGhB,IAAIqiE,EAASr/D,EAAIs/D,OAAQ,iBAAoB,GAA4C,IAAvCt/D,EAAIs/D,OAAQ,sBAE9DpnB,EAAQ56C,OAAS+hE,EAASxgF,GAAYC,GACtCo5D,EAAQlhB,aAAc,OAEN7xC,IAAX+2E,GAEJA,EAAQhkB,IAIPikB,EAAYC,GAERlkB,GAIRgnB,eAAgB,SAAW78E,GAG1B,OADAiC,KAAKs6E,YAAcv8E,EACZiC,MAIR66E,QAAS,SAAW98E,GAGnB,OADAiC,KAAKsrD,KAAOvtD,EACLiC,QC7CTgB,OAAOC,OAAQ43E,GAAkB33E,UAAW,CAE3Co5E,YAAa,YAEbC,KAAM,SAAWU,EAAMrD,EAAQC,EAAYC,GAE1C,IAAIlkB,EAAU,IAAI5T,GAEd86B,EAAS,IAAIpC,GAAa14E,KAAK24E,SACnCmC,EAAOF,eAAgB56E,KAAKs6E,aAC5BQ,EAAOD,QAAS76E,KAAKsrD,MAErB,IAAI4vB,EAAS,EAEb,SAASC,EAAa79E,GAErBw9E,EAAOP,KAAMU,EAAM39E,GAAK,SAAWob,GAElCk7C,EAAQn4C,OAAQne,GAAMob,EAIN,KAFhBwiE,IAICtnB,EAAQlhB,aAAc,EAEjBklC,GAASA,EAAQhkB,UAIrB/yD,EAAWi3E,GAIf,IAAM,IAAIx6E,EAAI,EAAGA,EAAI29E,EAAK76E,SAAW9C,EAEpC69E,EAAa79E,GAId,OAAOs2D,GAIRgnB,eAAgB,SAAW78E,GAG1B,OADAiC,KAAKs6E,YAAcv8E,EACZiC,MAIR66E,QAAS,SAAW98E,GAGnB,OADAiC,KAAKsrD,KAAOvtD,EACLiC,QCtBTgB,OAAOC,OAAQ63E,GAAM53E,UAAW,CAK/Bk6E,SAAU,WAGT,OADA/6E,QAAQmD,KAAM,6CACP,MAOR63E,WAAY,SAAWrwD,EAAGorD,GAEzB,IAAI33E,EAAIuB,KAAKs7E,eAAgBtwD,GAC7B,OAAOhrB,KAAKo7E,SAAU38E,EAAG23E,IAM1BmF,UAAW,SAAWC,QAEF36E,IAAd26E,IAA0BA,EAAY,GAI3C,IAFA,IAAItjE,EAAS,GAEHnP,EAAI,EAAGA,GAAKyyE,EAAWzyE,IAEhCmP,EAAOzW,KAAMzB,KAAKo7E,SAAUryE,EAAIyyE,IAIjC,OAAOtjE,GAMRujE,gBAAiB,SAAWD,QAER36E,IAAd26E,IAA0BA,EAAY,GAI3C,IAFA,IAAItjE,EAAS,GAEHnP,EAAI,EAAGA,GAAKyyE,EAAWzyE,IAEhCmP,EAAOzW,KAAMzB,KAAKq7E,WAAYtyE,EAAIyyE,IAInC,OAAOtjE,GAMRwjE,UAAW,WAEV,IAAIC,EAAU37E,KAAK47E,aACnB,OAAOD,EAASA,EAAQv7E,OAAS,IAMlCw7E,WAAY,SAAWJ,GAItB,QAFmB36E,IAAd26E,IAA0BA,EAAYx7E,KAAK+4E,oBAE3C/4E,KAAK67E,iBACP77E,KAAK67E,gBAAgBz7E,SAAWo7E,EAAY,IAC5Cx7E,KAAK0yC,YAEP,OAAO1yC,KAAK67E,gBAIb77E,KAAK0yC,aAAc,EAEnB,IACIopC,EACAvrE,EAFAs1B,EAAQ,GACCk2C,EAAO/7E,KAAKo7E,SAAU,GAC5BY,EAAM,EAIb,IAFAn2C,EAAMpkC,KAAM,GAEN8O,EAAI,EAAGA,GAAKirE,EAAWjrE,IAG5ByrE,IADAF,EAAU97E,KAAKo7E,SAAU7qE,EAAIirE,IACdj2E,WAAYw2E,GAC3Bl2C,EAAMpkC,KAAMu6E,GACZD,EAAOD,EAMR,OAFA97E,KAAK67E,gBAAkBh2C,EAEhBA,GAIRo2C,iBAAkB,WAEjBj8E,KAAK0yC,aAAc,EACnB1yC,KAAK47E,cAMNN,eAAgB,SAAWtwD,EAAGsP,GAE7B,IAII4hD,EAJAC,EAAan8E,KAAK47E,aAElBt+E,EAAI,EAAG+f,EAAK8+D,EAAW/7E,OAM1B87E,EAFI5hD,GAMctP,EAAImxD,EAAY9+D,EAAK,GAQxC,IAFA,IAA4B++D,EAAxBv9E,EAAM,EAAGC,EAAOue,EAAK,EAEjBxe,GAAOC,GAMd,IAFAs9E,EAAaD,EAFb7+E,EAAIL,KAAK8B,MAAOF,GAAQC,EAAOD,GAAQ,IAERq9E,GAEb,EAEjBr9E,EAAMvB,EAAI,MAEJ,CAAA,KAAK8+E,EAAa,GAIlB,CAENt9E,EAAOxB,EACP,MALAwB,EAAOxB,EAAI,EAeb,GAAK6+E,EAFL7+E,EAAIwB,KAEqBo9E,EAExB,OAAO5+E,GAAM+f,EAAK,GAMnB,IAAIg/D,EAAeF,EAAY7+E,GAa/B,OAFUA,GAJc4+E,EAAkBG,IANxBF,EAAY7+E,EAAI,GAEA++E,KAQEh/D,EAAK,IAW1Ci/D,WAAY,SAAW79E,GAEtB,IACIyjD,EAAKzjD,EADG,KAER27E,EAAK37E,EAFG,KAMPyjD,EAAK,IAAIA,EAAK,GACdk4B,EAAK,IAAIA,EAAK,GAEnB,IAAImC,EAAMv8E,KAAKo7E,SAAUl5B,GAIzB,OAHUliD,KAAKo7E,SAAUhB,GAEXj3E,QAAQY,IAAKw4E,GAChBn3E,aAIZo3E,aAAc,SAAWxxD,GAExB,5//DAAIvsB,EAAIuB,KAAKs7E,eAAgBtwD,GAC7B,OAAOhrB,KAAKs8E,WAAY79E,IAIzBg+E,oBAAqB,SAAWC,EAAUC,GAIzC,IASIr/E,EAAG0tB,EAAGrc,EATNgI,EAAS,IAAI7V,GAEb87E,EAAW,GACX3zC,EAAU,GACV4zC,EAAY,GAEZC,EAAM,IAAIh8E,GACVi8E,EAAM,IAAI98E,GAMd,IAAM3C,EAAI,EAAGA,GAAKo/E,EAAUp/E,IAE3B0tB,EAAI1tB,EAAIo/E,EAERE,EAAUt/E,GAAM0C,KAAKw8E,aAAcxxD,GACnC4xD,EAAUt/E,GAAI8H,YAOf6jC,EAAS,GAAM,IAAInoC,GACnB+7E,EAAW,GAAM,IAAI/7E,GACrB,IAAI5L,EAAM2c,OAAOmrE,UACbhuE,EAAK/R,KAAKkI,IAAKy3E,EAAU,GAAItnF,GAC7B2Z,EAAKhS,KAAKkI,IAAKy3E,EAAU,GAAIrnF,GAC7B0nF,EAAKhgF,KAAKkI,IAAKy3E,EAAU,GAAIpnF,GA8BjC,IA5BKwZ,GAAM9Z,IAEVA,EAAM8Z,EACN2H,EAAOlU,IAAK,EAAG,EAAG,IAIdwM,GAAM/Z,IAEVA,EAAM+Z,EACN0H,EAAOlU,IAAK,EAAG,EAAG,IAIdw6E,GAAM/nF,GAEVyhB,EAAOlU,IAAK,EAAG,EAAG,GAInBq6E,EAAI/xE,aAAc6xE,EAAU,GAAKjmE,GAASvR,YAE1C6jC,EAAS,GAAIl+B,aAAc6xE,EAAU,GAAKE,GAC1CD,EAAW,GAAI9xE,aAAc6xE,EAAU,GAAK3zC,EAAS,IAK/C3rC,EAAI,EAAGA,GAAKo/E,EAAUp/E,IAE3B2rC,EAAS3rC,GAAM2rC,EAAS3rC,EAAI,GAAI6F,QAEhC05E,EAAWv/E,GAAMu/E,EAAWv/E,EAAI,GAAI6F,QAEpC25E,EAAI/xE,aAAc6xE,EAAUt/E,EAAI,GAAKs/E,EAAUt/E,IAE1Cw/E,EAAI18E,SAAWyR,OAAOC,UAE1BgrE,EAAI13E,YAEJuJ,EAAQ1R,KAAK4Z,KAAM9Z,GAAMe,MAAO8+E,EAAUt/E,EAAI,GAAIyH,IAAK63E,EAAUt/E,KAAS,EAAG,IAE7E2rC,EAAS3rC,GAAI+P,aAAc0vE,EAAIjuE,iBAAkBguE,EAAKnuE,KAIvDkuE,EAAWv/E,GAAIyN,aAAc6xE,EAAUt/E,GAAK2rC,EAAS3rC,IAMtD,IAAgB,IAAXq/E,EAWJ,IATAhuE,EAAQ1R,KAAK4Z,KAAM9Z,GAAMe,MAAOmrC,EAAS,GAAIlkC,IAAKkkC,EAASyzC,KAAgB,EAAG,IAC9E/tE,GAAS+tE,EAEJE,EAAU,GAAI73E,IAAK+3E,EAAI/xE,aAAck+B,EAAS,GAAKA,EAASyzC,KAAiB,IAEjF/tE,GAAUA,GAILrR,EAAI,EAAGA,GAAKo/E,EAAUp/E,IAG3B2rC,EAAS3rC,GAAI+P,aAAc0vE,EAAIjuE,iBAAkB8tE,EAAUt/E,GAAKqR,EAAQrR,IACxEu/E,EAAWv/E,GAAIyN,aAAc6xE,EAAUt/E,GAAK2rC,EAAS3rC,IAMvD,MAAO,CACNs/E,SAAUA,EACV3zC,QAASA,EACT4zC,UAAWA,IAKb15E,MAAO,WAEN,OAAO,IAAInD,KAAKoD,aAAcC,KAAMrD,OAIrCqD,KAAM,SAAW2X,GAIhB,OAFAhb,KAAK+4E,mBAAqB/9D,EAAO+9D,mBAE1B/4E,MAIRib,OAAQ,WAEP,IAAIf,EAAO,CACVoB,SAAU,CACTvB,QAAS,IACT3Y,KAAM,QACNma,UAAW,iBAOb,OAHArB,EAAK6+D,mBAAqB/4E,KAAK+4E,mBAC/B7+D,EAAK9Y,KAAOpB,KAAKoB,KAEV8Y,GAIRgjE,SAAU,SAAWC,GAIpB,OAFAn9E,KAAK+4E,mBAAqBoE,EAAKpE,mBAExB/4E,QCxYTg5E,GAAa93E,UAAYF,OAAO6Z,OAAQi+D,GAAM53E,WAC9C83E,GAAa93E,UAAUkC,YAAc41E,GAErCA,GAAa93E,UAAUk8E,gBAAiB,EAExCpE,GAAa93E,UAAUk6E,SAAW,SAAW38E,EAAG23E,GAS/C,IAPA,IAAIp4D,EAAQo4D,GAAkB,IAAIr2E,GAE9Bs9E,EAAkB,EAAVpgF,KAAKC,GACbogF,EAAat9E,KAAKs5E,UAAYt5E,KAAKq5E,YACnCkE,EAAatgF,KAAKkI,IAAKm4E,GAAezrE,OAAOC,QAGzCwrE,EAAa,GAAIA,GAAcD,EACvC,KAAQC,EAAaD,GAAQC,GAAcD,EAEtCC,EAAazrE,OAAOC,UAIvBwrE,EAFIC,EAES,EAIAF,IAMU,IAApBr9E,KAAKu5E,YAAyBgE,IAE7BD,IAAeD,EAEnBC,GAAeD,EAIfC,GAA0BD,GAM5B,IAAIh4E,EAAQrF,KAAKq5E,YAAc56E,EAAI6+E,EAC/BhoF,EAAI0K,KAAKi5E,GAAKj5E,KAAKm5E,QAAUl8E,KAAK0J,IAAKtB,GACvC9P,EAAIyK,KAAKk5E,GAAKl5E,KAAKo5E,QAAUn8E,KAAK2J,IAAKvB,GAE3C,GAAwB,IAAnBrF,KAAKw5E,UAAkB,CAE3B,IAAI7yE,EAAM1J,KAAK0J,IAAK3G,KAAKw5E,WACrB5yE,EAAM3J,KAAK2J,IAAK5G,KAAKw5E,WAErBxqE,EAAK1Z,EAAI0K,KAAKi5E,GACdhqE,EAAK1Z,EAAIyK,KAAKk5E,GAGlB5jF,EAAI0Z,EAAKrI,EAAMsI,EAAKrI,EAAM5G,KAAKi5E,GAC/B1jF,EAAIyZ,EAAKpI,EAAMqI,EAAKtI,EAAM3G,KAAKk5E,GAIhC,OAAOl7D,EAAMvb,IAAKnN,EAAGC,IAItByjF,GAAa93E,UAAUmC,KAAO,SAAW2X,GAiBxC,OAfA89D,GAAM53E,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEjChb,KAAKi5E,GAAKj+D,EAAOi+D,GACjBj5E,KAAKk5E,GAAKl+D,EAAOk+D,GAEjBl5E,KAAKm5E,QAAUn+D,EAAOm+D,QACtBn5E,KAAKo5E,QAAUp+D,EAAOo+D,QAEtBp5E,KAAKq5E,YAAcr+D,EAAOq+D,YAC1Br5E,KAAKs5E,UAAYt+D,EAAOs+D,UAExBt5E,KAAKu5E,WAAav+D,EAAOu+D,WAEzBv5E,KAAKw5E,UAAYx+D,EAAOw+D,UAEjBx5E,MAKRg5E,GAAa93E,UAAU+Z,OAAS,WAE/B,IAAIf,EAAO4+D,GAAM53E,UAAU+Z,OAAO5Y,KAAMrC,MAexC,OAbAka,EAAK++D,GAAKj5E,KAAKi5E,GACf/+D,EAAKg/D,GAAKl5E,KAAKk5E,GAEfh/D,EAAKi/D,QAAUn5E,KAAKm5E,QACpBj/D,EAAKk/D,QAAUp5E,KAAKo5E,QAEpBl/D,EAAKm/D,YAAcr5E,KAAKq5E,YACxBn/D,EAAKo/D,UAAYt5E,KAAKs5E,UAEtBp/D,EAAKq/D,WAAav5E,KAAKu5E,WAEvBr/D,EAAKs/D,UAAYx5E,KAAKw5E,UAEft/D,GAIR8+D,GAAa93E,UAAUg8E,SAAW,SAAWC,GAiB5C,OAfArE,GAAM53E,UAAUg8E,SAAS76E,KAAMrC,KAAMm9E,GAErCn9E,KAAKi5E,GAAKkE,EAAKlE,GACfj5E,KAAKk5E,GAAKiE,EAAKjE,GAEfl5E,KAAKm5E,QAAUgE,EAAKhE,QACpBn5E,KAAKo5E,QAAU+D,EAAK/D,QAEpBp5E,KAAKq5E,YAAc8D,EAAK9D,YACxBr5E,KAAKs5E,UAAY6D,EAAK7D,UAEtBt5E,KAAKu5E,WAAa4D,EAAK5D,WAEvBv5E,KAAKw5E,UAAY2D,EAAK3D,UAEfx5E,MC7IRy5E,GAASv4E,UAAYF,OAAO6Z,OAAQm+D,GAAa93E,WACjDu4E,GAASv4E,UAAUkC,YAAcq2E,GAEjCA,GAASv4E,UAAUs8E,YAAa,ECoEhC,IAAI/vE,GAAM,IAAI3M,GACV28E,GAAK,IAAI9D,GAAa+D,GAAK,IAAI/D,GAAagE,GAAK,IAAIhE,GAEzD,SAASiE,GAAkB1lE,EAAQykE,EAAQkB,EAAW9D,GAErDjB,GAAMz2E,KAAMrC,MAEZA,KAAKoB,KAAO,mBAEZpB,KAAKkY,OAASA,GAAU,GACxBlY,KAAK28E,OAASA,IAAU,EACxB38E,KAAK69E,UAAYA,GAAa,cAC9B79E,KAAK+5E,QAAUA,GAAW,GCvF3B,SAAS+D,GAAYr/E,EAAG+b,EAAInC,EAAIC,EAAImC,GAEnC,IAAI4E,EAAmB,IAAZ/G,EAAKkC,GACZ/kB,EAAmB,IAAZglB,EAAKpC,GACZ+hE,EAAK37E,EAAIA,EAEb,OAAS,EAAI4Z,EAAK,EAAIC,EAAK+G,EAAK5pB,IADvBgJ,EAAI27E,KACmC,EAAI/hE,EAAK,EAAIC,EAAK,EAAI+G,EAAK5pB,GAAO2kF,EAAK/6D,EAAK5gB,EAAI4Z,EAyBjG,SAAS0lE,GAAiBt/E,EAAG+b,EAAInC,EAAIC,GAEpC,OArBD,SAA4B7Z,EAAG8R,GAE9B,IAAI29B,EAAI,EAAIzvC,EACZ,OAAOyvC,EAAIA,EAkBkB1zB,EAAtBwjE,CAAmBv/E,GAd3B,SAA4BA,EAAG8R,GAE9B,OAAO,GAAM,EAAI9R,GAAMA,EAYmC4Z,EAAtB4lE,CAAmBx/E,GARxD,SAA4BA,EAAG8R,GAE9B,OAAO9R,EAAIA,EAOY6Z,EAAtB4lE,CAAmBz/E,GAgCrB,SAAS0/E,GAAa1/E,EAAG+b,EAAInC,EAAIC,EAAImC,GAEpC,OA5BD,SAAwBhc,EAAG8R,GAE1B,IAAI29B,EAAI,EAAIzvC,EACZ,OAAOyvC,EAAIA,EAAIA,EAyBU1zB,EAAlB4jE,CAAe3/E,GArBvB,SAAwBA,EAAG8R,GAE1B,IAAI29B,EAAI,EAAIzvC,EACZ,OAAO,EAAIyvC,EAAIA,EAAIzvC,EAkB+B4Z,EAAlBgmE,CAAe5/E,GAdhD,SAAwBA,EAAG8R,GAE1B,OAAO,GAAM,EAAI9R,GAAMA,EAAIA,EAYgD6Z,EAAlBgmE,CAAe7/E,GARzE,SAAwBA,EAAG8R,GAE1B,OAAO9R,EAAIA,EAAIA,EAOIgc,EAAlB8jE,CAAe9/E,GCvEjB,SAAS+/E,GAAkBn/D,EAAI5pB,EAAIsQ,EAAI04E,GAEtC3F,GAAMz2E,KAAMrC,MAEZA,KAAKoB,KAAO,mBAEZpB,KAAKqf,GAAKA,GAAM,IAAItf,GACpBC,KAAKvK,GAAKA,GAAM,IAAIsK,GACpBC,KAAK+F,GAAKA,GAAM,IAAIhG,GACpBC,KAAKy+E,GAAKA,GAAM,IAAI1+E,GCTrB,SAAS2+E,GAAmBr/D,EAAI5pB,EAAIsQ,EAAI04E,GAEvC3F,GAAMz2E,KAAMrC,MAEZA,KAAKoB,KAAO,oBAEZpB,KAAKqf,GAAKA,GAAM,IAAIve,GACpBd,KAAKvK,GAAKA,GAAM,IAAIqL,GACpBd,KAAK+F,GAAKA,GAAM,IAAIjF,GACpBd,KAAKy+E,GAAKA,GAAM,IAAI39E,GCVrB,SAAS69E,GAAWlpF,EAAIsQ,GAEvB+yE,GAAMz2E,KAAMrC,MAEZA,KAAKoB,KAAO,YAEZpB,KAAKvK,GAAKA,GAAM,IAAIsK,GACpBC,KAAK+F,GAAKA,GAAM,IAAIhG,GCPrB,SAAS6+E,GAAYnpF,EAAIsQ,GAExB+yE,GAAMz2E,KAAMrC,MAEZA,KAAKoB,KAAO,aAEZpB,KAAKvK,GAAKA,GAAM,IAAIqL,GACpBd,KAAK+F,GAAKA,GAAM,IAAIjF,GCNrB,SAAS+9E,GAAsBx/D,EAAI5pB,EAAIsQ,GAEtC+yE,GAAMz2E,KAAMrC,MAEZA,KAAKoB,KAAO,uBAEZpB,KAAKqf,GAAKA,GAAM,IAAItf,GACpBC,KAAKvK,GAAKA,GAAM,IAAIsK,GACpBC,KAAK+F,GAAKA,GAAM,IAAIhG,GCRrB,SAAS++E,GAAuBz/D,EAAI5pB,EAAIsQ,GAEvC+yE,GAAMz2E,KAAMrC,MAEZA,KAAKoB,KAAO,wBAEZpB,KAAKqf,GAAKA,GAAM,IAAIve,GACpBd,KAAKvK,GAAKA,GAAM,IAAIqL,GACpBd,KAAK+F,GAAKA,GAAM,IAAIjF,GCRrB,SAASi+E,GAAa7mE,GAErB4gE,GAAMz2E,KAAMrC,MAEZA,KAAKoB,KAAO,cAEZpB,KAAKkY,OAASA,GAAU,GRuFzB0lE,GAAiB18E,UAAYF,OAAO6Z,OAAQi+D,GAAM53E,WAClD08E,GAAiB18E,UAAUkC,YAAcw6E,GAEzCA,GAAiB18E,UAAU89E,oBAAqB,EAEhDpB,GAAiB18E,UAAUk6E,SAAW,SAAW38E,EAAG23E,GAEnD,IAoBI57D,EAAInC,EAAIC,EAAImC,EApBZuD,EAAQo4D,GAAkB,IAAIt1E,GAE9BoX,EAASlY,KAAKkY,OACd9V,EAAI8V,EAAO9X,OAEXmQ,GAAMnO,GAAMpC,KAAK28E,OAAS,EAAI,IAAQl+E,EACtCwgF,EAAWhiF,KAAK8B,MAAOwR,GACvB2uE,EAAS3uE,EAAI0uE,EA0CjB,GAxCKj/E,KAAK28E,OAETsC,GAAYA,EAAW,EAAI,GAAMhiF,KAAK8B,MAAO9B,KAAKkI,IAAK85E,GAAa78E,GAAM,GAAMA,EAE1D,IAAX88E,GAAgBD,IAAa78E,EAAI,IAE5C68E,EAAW78E,EAAI,EACf88E,EAAS,GAMLl/E,KAAK28E,QAAUsC,EAAW,EAE9BzkE,EAAKtC,GAAU+mE,EAAW,GAAM78E,IAKhCqL,GAAIzJ,WAAYkU,EAAQ,GAAKA,EAAQ,IAAM3U,IAAK2U,EAAQ,IACxDsC,EAAK/M,IAIN4K,EAAKH,EAAQ+mE,EAAW78E,GACxBkW,EAAKJ,GAAU+mE,EAAW,GAAM78E,GAE3BpC,KAAK28E,QAAUsC,EAAW,EAAI78E,EAElCqY,EAAKvC,GAAU+mE,EAAW,GAAM78E,IAKhCqL,GAAIzJ,WAAYkU,EAAQ9V,EAAI,GAAK8V,EAAQ9V,EAAI,IAAMmB,IAAK2U,EAAQ9V,EAAI,IACpEqY,EAAKhN,IAIkB,gBAAnBzN,KAAK69E,WAAkD,YAAnB79E,KAAK69E,UAA0B,CAGvE,IAAIp+E,EAAyB,YAAnBO,KAAK69E,UAA0B,GAAM,IAC3C5D,EAAMh9E,KAAKwC,IAAK+a,EAAGhV,kBAAmB6S,GAAM5Y,GAC5Cy6E,EAAMj9E,KAAKwC,IAAK4Y,EAAG7S,kBAAmB8S,GAAM7Y,GAC5C06E,EAAMl9E,KAAKwC,IAAK6Y,EAAG9S,kBAAmBiV,GAAMhb,GAG3Cy6E,EAAM,OAAOA,EAAM,GACnBD,EAAM,OAAOA,EAAMC,GACnBC,EAAM,OAAOA,EAAMD,GAExBuD,GAAGzD,yBAA0Bx/D,EAAGllB,EAAG+iB,EAAG/iB,EAAGgjB,EAAGhjB,EAAGmlB,EAAGnlB,EAAG2kF,EAAKC,EAAKC,GAC/DuD,GAAG1D,yBAA0Bx/D,EAAGjlB,EAAG8iB,EAAG9iB,EAAG+iB,EAAG/iB,EAAGklB,EAAGllB,EAAG0kF,EAAKC,EAAKC,GAC/DwD,GAAG3D,yBAA0Bx/D,EAAGhlB,EAAG6iB,EAAG7iB,EAAG8iB,EAAG9iB,EAAGilB,EAAGjlB,EAAGykF,EAAKC,EAAKC,OAEjC,eAAnBn6E,KAAK69E,YAEhBJ,GAAG5D,eAAgBr/D,EAAGllB,EAAG+iB,EAAG/iB,EAAGgjB,EAAGhjB,EAAGmlB,EAAGnlB,EAAG0K,KAAK+5E,SAChD2D,GAAG7D,eAAgBr/D,EAAGjlB,EAAG8iB,EAAG9iB,EAAG+iB,EAAG/iB,EAAGklB,EAAGllB,EAAGyK,KAAK+5E,SAChD4D,GAAG9D,eAAgBr/D,EAAGhlB,EAAG6iB,EAAG7iB,EAAG8iB,EAAG9iB,EAAGilB,EAAGjlB,EAAGwK,KAAK+5E,UAUjD,OANA/7D,EAAMvb,IACLg7E,GAAGpD,KAAM6E,GACTxB,GAAGrD,KAAM6E,GACTvB,GAAGtD,KAAM6E,IAGHlhE,GAIR4/D,GAAiB18E,UAAUmC,KAAO,SAAW2X,GAE5C89D,GAAM53E,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEjChb,KAAKkY,OAAS,GAEd,IAAM,IAAI5a,EAAI,EAAG8E,EAAI4Y,EAAO9C,OAAO9X,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAExD,IAAI0gB,EAAQhD,EAAO9C,OAAQ5a,GAE3B0C,KAAKkY,OAAOzW,KAAMuc,EAAM7a,SAQzB,OAJAnD,KAAK28E,OAAS3hE,EAAO2hE,OACrB38E,KAAK69E,UAAY7iE,EAAO6iE,UACxB79E,KAAK+5E,QAAU/+D,EAAO++D,QAEf/5E,MAIR49E,GAAiB18E,UAAU+Z,OAAS,WAEnC,IAAIf,EAAO4+D,GAAM53E,UAAU+Z,OAAO5Y,KAAMrC,MAExCka,EAAKhC,OAAS,GAEd,IAAM,IAAI5a,EAAI,EAAG8E,EAAIpC,KAAKkY,OAAO9X,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAEtD,IAAI0gB,EAAQhe,KAAKkY,OAAQ5a,GACzB4c,EAAKhC,OAAOzW,KAAMuc,EAAM7X,WAQzB,OAJA+T,EAAKyiE,OAAS38E,KAAK28E,OACnBziE,EAAK2jE,UAAY79E,KAAK69E,UACtB3jE,EAAK6/D,QAAU/5E,KAAK+5E,QAEb7/D,GAIR0jE,GAAiB18E,UAAUg8E,SAAW,SAAWC,GAEhDrE,GAAM53E,UAAUg8E,SAAS76E,KAAMrC,KAAMm9E,GAErCn9E,KAAKkY,OAAS,GAEd,IAAM,IAAI5a,EAAI,EAAG8E,EAAI+6E,EAAKjlE,OAAO9X,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAEtD,IAAI0gB,EAAQm/D,EAAKjlE,OAAQ5a,GACzB0C,KAAKkY,OAAOzW,MAAM,IAAIX,IAAUmF,UAAW+X,IAQ5C,OAJAhe,KAAK28E,OAASQ,EAAKR,OACnB38E,KAAK69E,UAAYV,EAAKU,UACtB79E,KAAK+5E,QAAUoD,EAAKpD,QAEb/5E,MEvORw+E,GAAiBt9E,UAAYF,OAAO6Z,OAAQi+D,GAAM53E,WAClDs9E,GAAiBt9E,UAAUkC,YAAco7E,GAEzCA,GAAiBt9E,UAAUi+E,oBAAqB,EAEhDX,GAAiBt9E,UAAUk6E,SAAW,SAAW38E,EAAG23E,GAEnD,IAAIp4D,EAAQo4D,GAAkB,IAAIr2E,GAE9Bsf,EAAKrf,KAAKqf,GAAI5pB,EAAKuK,KAAKvK,GAAIsQ,EAAK/F,KAAK+F,GAAI04E,EAAKz+E,KAAKy+E,GAOxD,OALAzgE,EAAMvb,IACL07E,GAAa1/E,EAAG4gB,EAAG/pB,EAAGG,EAAGH,EAAGyQ,EAAGzQ,EAAGmpF,EAAGnpF,GACrC6oF,GAAa1/E,EAAG4gB,EAAG9pB,EAAGE,EAAGF,EAAGwQ,EAAGxQ,EAAGkpF,EAAGlpF,IAG/ByoB,GAIRwgE,GAAiBt9E,UAAUmC,KAAO,SAAW2X,GAS5C,OAPA89D,GAAM53E,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEjChb,KAAKqf,GAAGhc,KAAM2X,EAAOqE,IACrBrf,KAAKvK,GAAG4N,KAAM2X,EAAOvlB,IACrBuK,KAAK+F,GAAG1C,KAAM2X,EAAOjV,IACrB/F,KAAKy+E,GAAGp7E,KAAM2X,EAAOyjE,IAEdz+E,MAIRw+E,GAAiBt9E,UAAU+Z,OAAS,WAEnC,IAAIf,EAAO4+D,GAAM53E,UAAU+Z,OAAO5Y,KAAMrC,MAOxC,OALAka,EAAKmF,GAAKrf,KAAKqf,GAAGlZ,UAClB+T,EAAKzkB,GAAKuK,KAAKvK,GAAG0Q,UAClB+T,EAAKnU,GAAK/F,KAAK+F,GAAGI,UAClB+T,EAAKukE,GAAKz+E,KAAKy+E,GAAGt4E,UAEX+T,GAIRskE,GAAiBt9E,UAAUg8E,SAAW,SAAWC,GAShD,OAPArE,GAAM53E,UAAUg8E,SAAS76E,KAAMrC,KAAMm9E,GAErCn9E,KAAKqf,GAAGpZ,UAAWk3E,EAAK99D,IACxBrf,KAAKvK,GAAGwQ,UAAWk3E,EAAK1nF,IACxBuK,KAAK+F,GAAGE,UAAWk3E,EAAKp3E,IACxB/F,KAAKy+E,GAAGx4E,UAAWk3E,EAAKsB,IAEjBz+E,MCvDR0+E,GAAkBx9E,UAAYF,OAAO6Z,OAAQi+D,GAAM53E,WACnDw9E,GAAkBx9E,UAAUkC,YAAcs7E,GAE1CA,GAAkBx9E,UAAUk+E,qBAAsB,EAElDV,GAAkBx9E,UAAUk6E,SAAW,SAAW38E,EAAG23E,GAEpD,IAAIp4D,EAAQo4D,GAAkB,IAAIt1E,GAE9Bue,EAAKrf,KAAKqf,GAAI5pB,EAAKuK,KAAKvK,GAAIsQ,EAAK/F,KAAK+F,GAAI04E,EAAKz+E,KAAKy+E,GAQxD,OANAzgE,EAAMvb,IACL07E,GAAa1/E,EAAG4gB,EAAG/pB,EAAGG,EAAGH,EAAGyQ,EAAGzQ,EAAGmpF,EAAGnpF,GACrC6oF,GAAa1/E,EAAG4gB,EAAG9pB,EAAGE,EAAGF,EAAGwQ,EAAGxQ,EAAGkpF,EAAGlpF,GACrC4oF,GAAa1/E,EAAG4gB,EAAG7pB,EAAGC,EAAGD,EAAGuQ,EAAGvQ,EAAGipF,EAAGjpF,IAG/BwoB,GAIR0gE,GAAkBx9E,UAAUmC,KAAO,SAAW2X,GAS7C,OAPA89D,GAAM53E,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEjChb,KAAKqf,GAAGhc,KAAM2X,EAAOqE,IACrBrf,KAAKvK,GAAG4N,KAAM2X,EAAOvlB,IACrBuK,KAAK+F,GAAG1C,KAAM2X,EAAOjV,IACrB/F,KAAKy+E,GAAGp7E,KAAM2X,EAAOyjE,IAEdz+E,MAIR0+E,GAAkBx9E,UAAU+Z,OAAS,WAEpC,IAAIf,EAAO4+D,GAAM53E,UAAU+Z,OAAO5Y,KAAMrC,MAOxC,OALAka,EAAKmF,GAAKrf,KAAKqf,GAAGlZ,UAClB+T,EAAKzkB,GAAKuK,KAAKvK,GAAG0Q,UAClB+T,EAAKnU,GAAK/F,KAAK+F,GAAGI,UAClB+T,EAAKukE,GAAKz+E,KAAKy+E,GAAGt4E,UAEX+T,GAIRwkE,GAAkBx9E,UAAUg8E,SAAW,SAAWC,GASjD,OAPArE,GAAM53E,UAAUg8E,SAAS76E,KAAMrC,KAAMm9E,GAErCn9E,KAAKqf,GAAGpZ,UAAWk3E,EAAK99D,IACxBrf,KAAKvK,GAAGwQ,UAAWk3E,EAAK1nF,IACxBuK,KAAK+F,GAAGE,UAAWk3E,EAAKp3E,IACxB/F,KAAKy+E,GAAGx4E,UAAWk3E,EAAKsB,IAEjBz+E,MC3DR2+E,GAAUz9E,UAAYF,OAAO6Z,OAAQi+D,GAAM53E,WAC3Cy9E,GAAUz9E,UAAUkC,YAAcu7E,GAElCA,GAAUz9E,UAAUm+E,aAAc,EAElCV,GAAUz9E,UAAUk6E,SAAW,SAAW38E,EAAG23E,GAE5C,IAAIp4D,EAAQo4D,GAAkB,IAAIr2E,GAalC,OAXW,IAANtB,EAEJuf,EAAM3a,KAAMrD,KAAK+F,KAIjBiY,EAAM3a,KAAMrD,KAAK+F,IAAKhC,IAAK/D,KAAKvK,IAChCuoB,EAAM7Z,eAAgB1F,GAAI8E,IAAKvD,KAAKvK,KAI9BuoB,GAMR2gE,GAAUz9E,UAAUm6E,WAAa,SAAWrwD,EAAGorD,GAE9C,OAAOp2E,KAAKo7E,SAAUpwD,EAAGorD,IAI1BuI,GAAUz9E,UAAUo7E,WAAa,WAIhC,OAFct8E,KAAK+F,GAAG5C,QAAQY,IAAK/D,KAAKvK,IAEzB2P,aAIhBu5E,GAAUz9E,UAAUmC,KAAO,SAAW2X,GAOrC,OALA89D,GAAM53E,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEjChb,KAAKvK,GAAG4N,KAAM2X,EAAOvlB,IACrBuK,KAAK+F,GAAG1C,KAAM2X,EAAOjV,IAEd/F,MAIR2+E,GAAUz9E,UAAU+Z,OAAS,WAE5B,IAAIf,EAAO4+D,GAAM53E,UAAU+Z,OAAO5Y,KAAMrC,MAKxC,OAHAka,EAAKzkB,GAAKuK,KAAKvK,GAAG0Q,UAClB+T,EAAKnU,GAAK/F,KAAK+F,GAAGI,UAEX+T,GAIRykE,GAAUz9E,UAAUg8E,SAAW,SAAWC,GAOzC,OALArE,GAAM53E,UAAUg8E,SAAS76E,KAAMrC,KAAMm9E,GAErCn9E,KAAKvK,GAAGwQ,UAAWk3E,EAAK1nF,IACxBuK,KAAK+F,GAAGE,UAAWk3E,EAAKp3E,IAEjB/F,MCrER4+E,GAAW19E,UAAYF,OAAO6Z,OAAQi+D,GAAM53E,WAC5C09E,GAAW19E,UAAUkC,YAAcw7E,GAEnCA,GAAW19E,UAAUo+E,cAAe,EAEpCV,GAAW19E,UAAUk6E,SAAW,SAAW38E,EAAG23E,GAE7C,IAAIp4D,EAAQo4D,GAAkB,IAAIt1E,GAalC,OAXW,IAANrC,EAEJuf,EAAM3a,KAAMrD,KAAK+F,KAIjBiY,EAAM3a,KAAMrD,KAAK+F,IAAKhC,IAAK/D,KAAKvK,IAChCuoB,EAAM7Z,eAAgB1F,GAAI8E,IAAKvD,KAAKvK,KAI9BuoB,GAMR4gE,GAAW19E,UAAUm6E,WAAa,SAAWrwD,EAAGorD,GAE/C,OAAOp2E,KAAKo7E,SAAUpwD,EAAGorD,IAI1BwI,GAAW19E,UAAUmC,KAAO,SAAW2X,GAOtC,OALA89D,GAAM53E,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEjChb,KAAKvK,GAAG4N,KAAM2X,EAAOvlB,IACrBuK,KAAK+F,GAAG1C,KAAM2X,EAAOjV,IAEd/F,MAIR4+E,GAAW19E,UAAU+Z,OAAS,WAE7B,IAAIf,EAAO4+D,GAAM53E,UAAU+Z,OAAO5Y,KAAMrC,MAKxC,OAHAka,EAAKzkB,GAAKuK,KAAKvK,GAAG0Q,UAClB+T,EAAKnU,GAAK/F,KAAK+F,GAAGI,UAEX+T,GAIR0kE,GAAW19E,UAAUg8E,SAAW,SAAWC,GAO1C,OALArE,GAAM53E,UAAUg8E,SAAS76E,KAAMrC,KAAMm9E,GAErCn9E,KAAKvK,GAAGwQ,UAAWk3E,EAAK1nF,IACxBuK,KAAK+F,GAAGE,UAAWk3E,EAAKp3E,IAEjB/F,MC3DR6+E,GAAqB39E,UAAYF,OAAO6Z,OAAQi+D,GAAM53E,WACtD29E,GAAqB39E,UAAUkC,YAAcy7E,GAE7CA,GAAqB39E,UAAUq+E,wBAAyB,EAExDV,GAAqB39E,UAAUk6E,SAAW,SAAW38E,EAAG23E,GAEvD,IAAIp4D,EAAQo4D,GAAkB,IAAIr2E,GAE9Bsf,EAAKrf,KAAKqf,GAAI5pB,EAAKuK,KAAKvK,GAAIsQ,EAAK/F,KAAK+F,GAO1C,OALAiY,EAAMvb,IACLs7E,GAAiBt/E,EAAG4gB,EAAG/pB,EAAGG,EAAGH,EAAGyQ,EAAGzQ,GACnCyoF,GAAiBt/E,EAAG4gB,EAAG9pB,EAAGE,EAAGF,EAAGwQ,EAAGxQ,IAG7ByoB,GAIR6gE,GAAqB39E,UAAUmC,KAAO,SAAW2X,GAQhD,OANA89D,GAAM53E,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEjChb,KAAKqf,GAAGhc,KAAM2X,EAAOqE,IACrBrf,KAAKvK,GAAG4N,KAAM2X,EAAOvlB,IACrBuK,KAAK+F,GAAG1C,KAAM2X,EAAOjV,IAEd/F,MAIR6+E,GAAqB39E,UAAU+Z,OAAS,WAEvC,IAAIf,EAAO4+D,GAAM53E,UAAU+Z,OAAO5Y,KAAMrC,MAMxC,OAJAka,EAAKmF,GAAKrf,KAAKqf,GAAGlZ,UAClB+T,EAAKzkB,GAAKuK,KAAKvK,GAAG0Q,UAClB+T,EAAKnU,GAAK/F,KAAK+F,GAAGI,UAEX+T,GAIR2kE,GAAqB39E,UAAUg8E,SAAW,SAAWC,GAQpD,OANArE,GAAM53E,UAAUg8E,SAAS76E,KAAMrC,KAAMm9E,GAErCn9E,KAAKqf,GAAGpZ,UAAWk3E,EAAK99D,IACxBrf,KAAKvK,GAAGwQ,UAAWk3E,EAAK1nF,IACxBuK,KAAK+F,GAAGE,UAAWk3E,EAAKp3E,IAEjB/F,MCpDR8+E,GAAsB59E,UAAYF,OAAO6Z,OAAQi+D,GAAM53E,WACvD49E,GAAsB59E,UAAUkC,YAAc07E,GAE9CA,GAAsB59E,UAAUs+E,yBAA0B,EAE1DV,GAAsB59E,UAAUk6E,SAAW,SAAW38E,EAAG23E,GAExD,IAAIp4D,EAAQo4D,GAAkB,IAAIt1E,GAE9Bue,EAAKrf,KAAKqf,GAAI5pB,EAAKuK,KAAKvK,GAAIsQ,EAAK/F,KAAK+F,GAQ1C,OANAiY,EAAMvb,IACLs7E,GAAiBt/E,EAAG4gB,EAAG/pB,EAAGG,EAAGH,EAAGyQ,EAAGzQ,GACnCyoF,GAAiBt/E,EAAG4gB,EAAG9pB,EAAGE,EAAGF,EAAGwQ,EAAGxQ,GACnCwoF,GAAiBt/E,EAAG4gB,EAAG7pB,EAAGC,EAAGD,EAAGuQ,EAAGvQ,IAG7BwoB,GAIR8gE,GAAsB59E,UAAUmC,KAAO,SAAW2X,GAQjD,OANA89D,GAAM53E,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEjChb,KAAKqf,GAAGhc,KAAM2X,EAAOqE,IACrBrf,KAAKvK,GAAG4N,KAAM2X,EAAOvlB,IACrBuK,KAAK+F,GAAG1C,KAAM2X,EAAOjV,IAEd/F,MAIR8+E,GAAsB59E,UAAU+Z,OAAS,WAExC,IAAIf,EAAO4+D,GAAM53E,UAAU+Z,OAAO5Y,KAAMrC,MAMxC,OAJAka,EAAKmF,GAAKrf,KAAKqf,GAAGlZ,UAClB+T,EAAKzkB,GAAKuK,KAAKvK,GAAG0Q,UAClB+T,EAAKnU,GAAK/F,KAAK+F,GAAGI,UAEX+T,GAIR4kE,GAAsB59E,UAAUg8E,SAAW,SAAWC,GAQrD,OANArE,GAAM53E,UAAUg8E,SAAS76E,KAAMrC,KAAMm9E,GAErCn9E,KAAKqf,GAAGpZ,UAAWk3E,EAAK99D,IACxBrf,KAAKvK,GAAGwQ,UAAWk3E,EAAK1nF,IACxBuK,KAAK+F,GAAGE,UAAWk3E,EAAKp3E,IAEjB/F,MCvDR++E,GAAY79E,UAAYF,OAAO6Z,OAAQi+D,GAAM53E,WAC7C69E,GAAY79E,UAAUkC,YAAc27E,GAEpCA,GAAY79E,UAAUu+E,eAAgB,EAEtCV,GAAY79E,UAAUk6E,SAAW,SAAW38E,EAAG23E,GAE9C,IAAIp4D,EAAQo4D,GAAkB,IAAIr2E,GAE9BmY,EAASlY,KAAKkY,OACd3H,GAAM2H,EAAO9X,OAAS,GAAM3B,EAE5BwgF,EAAWhiF,KAAK8B,MAAOwR,GACvB2uE,EAAS3uE,EAAI0uE,EAEbzkE,EAAKtC,EAAqB,IAAb+mE,EAAiBA,EAAWA,EAAW,GACpD5mE,EAAKH,EAAQ+mE,GACb3mE,EAAKJ,EAAQ+mE,EAAW/mE,EAAO9X,OAAS,EAAI8X,EAAO9X,OAAS,EAAI6+E,EAAW,GAC3ExkE,EAAKvC,EAAQ+mE,EAAW/mE,EAAO9X,OAAS,EAAI8X,EAAO9X,OAAS,EAAI6+E,EAAW,GAO/E,OALAjhE,EAAMvb,IACLq7E,GAAYoB,EAAQ1kE,EAAGllB,EAAG+iB,EAAG/iB,EAAGgjB,EAAGhjB,EAAGmlB,EAAGnlB,GACzCwoF,GAAYoB,EAAQ1kE,EAAGjlB,EAAG8iB,EAAG9iB,EAAG+iB,EAAG/iB,EAAGklB,EAAGllB,IAGnCyoB,GAIR+gE,GAAY79E,UAAUmC,KAAO,SAAW2X,GAEvC89D,GAAM53E,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEjChb,KAAKkY,OAAS,GAEd,IAAM,IAAI5a,EAAI,EAAG8E,EAAI4Y,EAAO9C,OAAO9X,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAExD,IAAI0gB,EAAQhD,EAAO9C,OAAQ5a,GAE3B0C,KAAKkY,OAAOzW,KAAMuc,EAAM7a,SAIzB,OAAOnD,MAIR++E,GAAY79E,UAAU+Z,OAAS,WAE9B,IAAIf,EAAO4+D,GAAM53E,UAAU+Z,OAAO5Y,KAAMrC,MAExCka,EAAKhC,OAAS,GAEd,IAAM,IAAI5a,EAAI,EAAG8E,EAAIpC,KAAKkY,OAAO9X,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAEtD,IAAI0gB,EAAQhe,KAAKkY,OAAQ5a,GACzB4c,EAAKhC,OAAOzW,KAAMuc,EAAM7X,WAIzB,OAAO+T,GAIR6kE,GAAY79E,UAAUg8E,SAAW,SAAWC,GAE3CrE,GAAM53E,UAAUg8E,SAAS76E,KAAMrC,KAAMm9E,GAErCn9E,KAAKkY,OAAS,GAEd,IAAM,IAAI5a,EAAI,EAAG8E,EAAI+6E,EAAKjlE,OAAO9X,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAEtD,IAAI0gB,EAAQm/D,EAAKjlE,OAAQ5a,GACzB0C,KAAKkY,OAAOzW,MAAM,IAAI1B,IAAUkG,UAAW+X,IAI5C,OAAOhe,kNC/ER,SAAS0/E,KAER5G,GAAMz2E,KAAMrC,MAEZA,KAAKoB,KAAO,YAEZpB,KAAK2/E,OAAS,GACd3/E,KAAK4/E,WAAY,ECPlB,SAASC,GAAM3nE,GAEdwnE,GAAUr9E,KAAMrC,MAEhBA,KAAKoB,KAAO,OAEZpB,KAAK8/E,aAAe,IAAI//E,GAEnBmY,GAEJlY,KAAKmd,cAAejF,GCTtB,SAAS6nE,GAAO7nE,GAEf2nE,GAAKx9E,KAAMrC,KAAMkY,GAEjBlY,KAAKoZ,KAAOrc,GAAMK,eAElB4C,KAAKoB,KAAO,QAEZpB,KAAKggF,MAAQ,GCmCd,SAASC,GAAY/lE,EAAMmH,EAAOI,EAAKy+D,EAAKC,GAE3C,IAAI7iF,EAAGy+E,EAEP,GAAKoE,IA6tBN,SAAqBjmE,EAAMmH,EAAOI,EAAKy+D,GAItC,IAFA,IAAIlE,EAAM,EAEA1+E,EAAI+jB,EAAOvB,EAAI2B,EAAMy+D,EAAK5iF,EAAImkB,EAAKnkB,GAAK4iF,EAEjDlE,IAAS9hE,EAAM4F,GAAM5F,EAAM5c,KAAU4c,EAAM5c,EAAI,GAAM4c,EAAM4F,EAAI,IAC/DA,EAAIxiB,EAIL,OAAO0+E,EAxuBcoE,CAAYlmE,EAAMmH,EAAOI,EAAKy+D,GAAQ,EAE1D,IAAM5iF,EAAI+jB,EAAO/jB,EAAImkB,EAAKnkB,GAAK4iF,EAAMnE,EAAOsE,GAAY/iF,EAAG4c,EAAM5c,GAAK4c,EAAM5c,EAAI,GAAKy+E,QAIrF,IAAMz+E,EAAImkB,EAAMy+D,EAAK5iF,GAAK+jB,EAAO/jB,GAAK4iF,EAAMnE,EAAOsE,GAAY/iF,EAAG4c,EAAM5c,GAAK4c,EAAM5c,EAAI,GAAKy+E,GAW7F,OAPKA,GAAQ/1E,GAAQ+1E,EAAMA,EAAKlwB,QAE/By0B,GAAYvE,GACZA,EAAOA,EAAKlwB,MAINkwB,EAMR,SAASwE,GAAcl/D,EAAOI,GAE7B,IAAOJ,EAAQ,OAAOA,EACfI,IAAMA,EAAMJ,GAEnB,IAAem/D,EAAXjwE,EAAI8Q,EAER,GAIC,GAFAm/D,GAAQ,EAEDjwE,EAAEkwE,UAAaz6E,GAAQuK,EAAGA,EAAEs7C,OAAwC,IAA9B60B,GAAMnwE,EAAEowE,KAAMpwE,EAAGA,EAAEs7C,MAS/Dt7C,EAAIA,EAAEs7C,SAT0E,CAIhF,GAFAy0B,GAAY/vE,IACZA,EAAIkR,EAAMlR,EAAEowE,QACDpwE,EAAEs7C,KAAO,MACpB20B,GAAQ,SAQAA,GAASjwE,IAAMkR,GAEzB,OAAOA,EAMR,SAASm/D,GAAcC,EAAKviC,EAAW4hC,EAAKtjE,EAAMC,EAAMikE,EAASC,GAEhE,GAAOF,EAAP,EAIOE,GAAQD,GAkWhB,SAAqBz/D,EAAOzE,EAAMC,EAAMikE,GAEvC,IAAIvwE,EAAI8Q,EAER,GAEc,OAAR9Q,EAAE/a,IAAa+a,EAAE/a,EAAIwrF,GAAQzwE,EAAEjb,EAAGib,EAAEhb,EAAGqnB,EAAMC,EAAMikE,IACxDvwE,EAAE0wE,MAAQ1wE,EAAEowE,KACZpwE,EAAE2wE,MAAQ3wE,EAAEs7C,KACZt7C,EAAIA,EAAEs7C,WAEGt7C,IAAM8Q,GAEhB9Q,EAAE0wE,MAAMC,MAAQ,KAChB3wE,EAAE0wE,MAAQ,KASX,SAAqB5qB,GAEpB,IAAI/4D,EAAGiT,EAAGxG,EAAGxF,EAAG48E,EAAMC,EAAWC,EAAOC,EAAOC,EAAS,EAExD,EAAG,CAOF,IALAhxE,EAAI8lD,EACJA,EAAO,KACP8qB,EAAO,KACPC,EAAY,EAEJ7wE,GAAI,CAMX,IAJA6wE,IACAr3E,EAAIwG,EACJ8wE,EAAQ,EAEF/jF,EAAI,EAAGA,EAAIikF,IAEhBF,IACAt3E,EAAIA,EAAEm3E,OAHkB5jF,KAUzB,IAFAgkF,EAAQC,EAEAF,EAAQ,GAAOC,EAAQ,GAAKv3E,GAEpB,IAAVs3E,IAA2B,IAAVC,IAAiBv3E,GAAKwG,EAAE/a,GAAKuU,EAAEvU,IAEpD+O,EAAIgM,EACJA,EAAIA,EAAE2wE,MACNG,MAIA98E,EAAIwF,EACJA,EAAIA,EAAEm3E,MACNI,KAIIH,EAAOA,EAAKD,MAAQ38E,EACpB8xD,EAAO9xD,EAEZA,EAAE08E,MAAQE,EACVA,EAAO58E,EAIRgM,EAAIxG,EAILo3E,EAAKD,MAAQ,KACbK,GAAU,QAEDH,EAAY,GAjEtBI,CAAYjxE,GAlXakxE,CAAYZ,EAAKjkE,EAAMC,EAAMikE,GAMtD,IAJA,IAAgBH,EAAM90B,EAAlBgqB,EAAOgL,EAIHA,EAAIF,OAASE,EAAIh1B,MAKxB,GAHA80B,EAAOE,EAAIF,KACX90B,EAAOg1B,EAAIh1B,KAENi1B,EAAUY,GAAab,EAAKjkE,EAAMC,EAAMikE,GAAYa,GAAOd,GAG/DviC,EAAU78C,KAAMk/E,EAAKrjF,EAAI4iF,GACzB5hC,EAAU78C,KAAMo/E,EAAIvjF,EAAI4iF,GACxB5hC,EAAU78C,KAAMoqD,EAAKvuD,EAAI4iF,GAEzBI,GAAYO,GAGZA,EAAMh1B,EAAKA,KACXgqB,EAAOhqB,EAAKA,UAUb,IAJAg1B,EAAMh1B,KAIOgqB,EAAO,CAIZkL,EAMc,IAATA,EAGXH,GADAC,EAAMe,GAAwBf,EAAKviC,EAAW4hC,GAC3B5hC,EAAW4hC,EAAKtjE,EAAMC,EAAMikE,EAAS,GAIpC,IAATC,GAEXc,GAAahB,EAAKviC,EAAW4hC,EAAKtjE,EAAMC,EAAMikE,GAb9CF,GAAcL,GAAcM,GAAOviC,EAAW4hC,EAAKtjE,EAAMC,EAAMikE,EAAS,GAiBzE,QAUH,SAASa,GAAOd,GAEf,IAAIj9E,EAAIi9E,EAAIF,KACX98E,EAAIg9E,EACJn6E,EAAIm6E,EAAIh1B,KAET,GAAK60B,GAAM98E,EAAGC,EAAG6C,IAAO,EAAI,OAAO,EAKnC,IAFA,IAAI6J,EAAIswE,EAAIh1B,KAAKA,KAETt7C,IAAMswE,EAAIF,MAAO,CAExB,GAAKmB,GAAiBl+E,EAAEtO,EAAGsO,EAAErO,EAAGsO,EAAEvO,EAAGuO,EAAEtO,EAAGmR,EAAEpR,EAAGoR,EAAEnR,EAAGgb,EAAEjb,EAAGib,EAAEhb,IAAOmrF,GAAMnwE,EAAEowE,KAAMpwE,EAAGA,EAAEs7C,OAAU,EAE9F,OAAO,EAIRt7C,EAAIA,EAAEs7C,KAIP,OAAO,EAIR,SAAS61B,GAAab,EAAKjkE,EAAMC,EAAMikE,GAEtC,IAAIl9E,EAAIi9E,EAAIF,KACX98E,EAAIg9E,EACJn6E,EAAIm6E,EAAIh1B,KAET,GAAK60B,GAAM98E,EAAGC,EAAG6C,IAAO,EAAI,OAAO,EAkBnC,IAdA,IAAIq7E,EAAQn+E,EAAEtO,EAAIuO,EAAEvO,EAAMsO,EAAEtO,EAAIoR,EAAEpR,EAAIsO,EAAEtO,EAAIoR,EAAEpR,EAAQuO,EAAEvO,EAAIoR,EAAEpR,EAAIuO,EAAEvO,EAAIoR,EAAEpR,EACzE0sF,EAAQp+E,EAAErO,EAAIsO,EAAEtO,EAAMqO,EAAErO,EAAImR,EAAEnR,EAAIqO,EAAErO,EAAImR,EAAEnR,EAAQsO,EAAEtO,EAAImR,EAAEnR,EAAIsO,EAAEtO,EAAImR,EAAEnR,EACtE0sF,EAAQr+E,EAAEtO,EAAIuO,EAAEvO,EAAMsO,EAAEtO,EAAIoR,EAAEpR,EAAIsO,EAAEtO,EAAIoR,EAAEpR,EAAQuO,EAAEvO,EAAIoR,EAAEpR,EAAIuO,EAAEvO,EAAIoR,EAAEpR,EACtE4sF,EAAQt+E,EAAErO,EAAIsO,EAAEtO,EAAMqO,EAAErO,EAAImR,EAAEnR,EAAIqO,EAAErO,EAAImR,EAAEnR,EAAQsO,EAAEtO,EAAImR,EAAEnR,EAAIsO,EAAEtO,EAAImR,EAAEnR,EAInEunB,EAAOkkE,GAAQe,EAAOC,EAAOplE,EAAMC,EAAMikE,GAC5C7jE,EAAO+jE,GAAQiB,EAAOC,EAAOtlE,EAAMC,EAAMikE,GAItCvwE,EAAIswE,EAAIK,MAEJ3wE,GAAKA,EAAE/a,GAAKynB,GAAO,CAE1B,GAAK1M,IAAMswE,EAAIF,MAAQpwE,IAAMswE,EAAIh1B,MAC/Bi2B,GAAiBl+E,EAAEtO,EAAGsO,EAAErO,EAAGsO,EAAEvO,EAAGuO,EAAEtO,EAAGmR,EAAEpR,EAAGoR,EAAEnR,EAAGgb,EAAEjb,EAAGib,EAAEhb,IACtDmrF,GAAMnwE,EAAEowE,KAAMpwE,EAAGA,EAAEs7C,OAAU,EAAI,OAAO,EAC1Ct7C,EAAIA,EAAE2wE,MAQP,IAFA3wE,EAAIswE,EAAII,MAEA1wE,GAAKA,EAAE/a,GAAKsnB,GAAO,CAE1B,GAAKvM,IAAMswE,EAAIF,MAAQpwE,IAAMswE,EAAIh1B,MAC/Bi2B,GAAiBl+E,EAAEtO,EAAGsO,EAAErO,EAAGsO,EAAEvO,EAAGuO,EAAEtO,EAAGmR,EAAEpR,EAAGoR,EAAEnR,EAAGgb,EAAEjb,EAAGib,EAAEhb,IACtDmrF,GAAMnwE,EAAEowE,KAAMpwE,EAAGA,EAAEs7C,OAAU,EAAI,OAAO,EAE1Ct7C,EAAIA,EAAE0wE,MAIP,OAAO,EAMR,SAASW,GAAwBvgE,EAAOi9B,EAAW4hC,GAElD,IAAI3vE,EAAI8Q,EAER,EAAG,CAEF,IAAIzd,EAAI2M,EAAEowE,KAAM98E,EAAI0M,EAAEs7C,KAAKA,MAEpB7lD,GAAQpC,EAAGC,IAAO2iD,GAAY5iD,EAAG2M,EAAGA,EAAEs7C,KAAMhoD,IAAOs+E,GAAev+E,EAAGC,IAAOs+E,GAAet+E,EAAGD,KAEpG06C,EAAU78C,KAAMmC,EAAEtG,EAAI4iF,GACtB5hC,EAAU78C,KAAM8O,EAAEjT,EAAI4iF,GACtB5hC,EAAU78C,KAAMoC,EAAEvG,EAAI4iF,GAItBI,GAAY/vE,GACZ+vE,GAAY/vE,EAAEs7C,MAEdt7C,EAAI8Q,EAAQxd,GAIb0M,EAAIA,EAAEs7C,WAEGt7C,IAAM8Q,GAEhB,OAAO9Q,EAMR,SAASsxE,GAAaxgE,EAAOi9B,EAAW4hC,EAAKtjE,EAAMC,EAAMikE,GAIxD,IAAIl9E,EAAIyd,EAER,EAAG,CAIF,IAFA,IAAIxd,EAAID,EAAEioD,KAAKA,KAEPhoD,IAAMD,EAAE+8E,MAAO,CAEtB,GAAK/8E,EAAEtG,IAAMuG,EAAEvG,GAAK8kF,GAAiBx+E,EAAGC,GAAM,CAI7C,IAAI6C,EAAI27E,GAAcz+E,EAAGC,GAWzB,OAPAD,EAAI28E,GAAc38E,EAAGA,EAAEioD,MACvBnlD,EAAI65E,GAAc75E,EAAGA,EAAEmlD,MAIvB+0B,GAAch9E,EAAG06C,EAAW4hC,EAAKtjE,EAAMC,EAAMikE,QAC7CF,GAAcl6E,EAAG43C,EAAW4hC,EAAKtjE,EAAMC,EAAMikE,GAK9Cj9E,EAAIA,EAAEgoD,KAIPjoD,EAAIA,EAAEioD,WAEGjoD,IAAMyd,GAmCjB,SAASihE,GAAU1+E,EAAGC,GAErB,OAAOD,EAAEtO,EAAIuO,EAAEvO,EAMhB,SAASitF,GAAeC,EAAMC,GAI7B,GAFAA,EAcD,SAAyBD,EAAMC,GAE9B,IAICvkF,EAJGqS,EAAIkyE,EACPC,EAAKF,EAAKltF,EACVqtF,EAAKH,EAAKjtF,EACV2f,GAAK,EAAA,EAMN,EAAG,CAEF,GAAKytE,GAAMpyE,EAAEhb,GAAKotF,GAAMpyE,EAAEs7C,KAAKt2D,GAAKgb,EAAEs7C,KAAKt2D,IAAMgb,EAAEhb,EAAI,CAEtD,IAAID,EAAIib,EAAEjb,GAAMqtF,EAAKpyE,EAAEhb,IAAQgb,EAAEs7C,KAAKv2D,EAAIib,EAAEjb,IAAQib,EAAEs7C,KAAKt2D,EAAIgb,EAAEhb,GAEjE,GAAKD,GAAKotF,GAAMptF,EAAI4f,EAAK,CAIxB,GAFAA,EAAK5f,EAEAA,IAAMotF,EAAK,CAEf,GAAKC,IAAOpyE,EAAEhb,EAAI,OAAOgb,EACzB,GAAKoyE,IAAOpyE,EAAEs7C,KAAKt2D,EAAI,OAAOgb,EAAEs7C,KAIjC3tD,EAAIqS,EAAEjb,EAAIib,EAAEs7C,KAAKv2D,EAAIib,EAAIA,EAAEs7C,MAM7Bt7C,EAAIA,EAAEs7C,WAEGt7C,IAAMkyE,GAEhB,IAAOvkF,EAAI,OAAO,KAElB,GAAKwkF,IAAOxtE,EAAK,OAAOhX,EAAEyiF,KAM1B,IAICzsD,EAJG2hD,EAAO33E,EACV0kF,EAAK1kF,EAAE5I,EACPutF,EAAK3kF,EAAE3I,EACPutF,EAASxyC,EAAAA,EAKV,IAFA//B,EAAIrS,EAAE2tD,KAEEt7C,IAAMslE,GAER6M,GAAMnyE,EAAEjb,GAAKib,EAAEjb,GAAKstF,GAAMF,IAAOnyE,EAAEjb,GACpCwsF,GAAiBa,EAAKE,EAAKH,EAAKxtE,EAAIytE,EAAIC,EAAIC,EAAIF,EAAKE,EAAK3tE,EAAKwtE,EAAIC,EAAIpyE,EAAEjb,EAAGib,EAAEhb,MAEjF2+B,EAAMj3B,KAAKkI,IAAKw9E,EAAKpyE,EAAEhb,IAAQmtF,EAAKnyE,EAAEjb,IAEzBwtF,GAAY5uD,IAAQ4uD,GAAUvyE,EAAEjb,EAAI4I,EAAE5I,IAAS6sF,GAAe5xE,EAAGiyE,KAE7EtkF,EAAIqS,EACJuyE,EAAS5uD,GAMX3jB,EAAIA,EAAEs7C,KAIP,OAAO3tD,EAxFK6kF,CAAgBP,EAAMC,GAEjB,CAEhB,IAAI5+E,EAAIw+E,GAAcI,EAAWD,GAEjCjC,GAAc18E,EAAGA,EAAEgoD,OAiLrB,SAASm1B,GAAQ1rF,EAAGC,EAAGqnB,EAAMC,EAAMikE,GAiBlC,OAPAxrF,EAAyB,aADzBA,EAAyB,YADzBA,EAAyB,YADzBA,EAAyB,WAHzBA,EAAI,OAAUA,EAAIsnB,GAASkkE,GAGfxrF,GAAK,IACLA,GAAK,IACLA,GAAK,IACLA,GAAK,KAKjBC,EAAyB,aADzBA,EAAyB,YADzBA,EAAyB,YADzBA,EAAyB,WAPzBA,EAAI,OAAUA,EAAIsnB,GAASikE,GAOfvrF,GAAK,IACLA,GAAK,IACLA,GAAK,IACLA,GAAK,KAEC,EAMnB,SAASytF,GAAa3hE,GAErB,IAAI9Q,EAAI8Q,EAAO4hE,EAAW5hE,EAE1B,GAEM9Q,EAAEjb,EAAI2tF,EAAS3tF,IAAI2tF,EAAW1yE,GACnCA,EAAIA,EAAEs7C,WAEGt7C,IAAM8Q,GAEhB,OAAO4hE,EAMR,SAASnB,GAAiB7rE,EAAIC,EAAIE,EAAIC,EAAIyB,EAAIC,EAAI0lE,EAAIC,GAErD,OAAS5lE,EAAK2lE,IAASvnE,EAAKwnE,IAASznE,EAAKwnE,IAAS1lE,EAAK2lE,IAAQ,IAC7DznE,EAAKwnE,IAASpnE,EAAKqnE,IAAStnE,EAAKqnE,IAASvnE,EAAKwnE,IAAQ,IACvDtnE,EAAKqnE,IAAS1lE,EAAK2lE,IAAS5lE,EAAK2lE,IAASpnE,EAAKqnE,IAAQ,EAM3D,SAAS0E,GAAiBx+E,EAAGC,GAE5B,OAAOD,EAAEioD,KAAKvuD,IAAMuG,EAAEvG,GAAKsG,EAAE+8E,KAAKrjF,IAAMuG,EAAEvG,IAmC3C,SAA4BsG,EAAGC,GAE9B,IAAI0M,EAAI3M,EAER,EAAG,CAEF,GAAK2M,EAAEjT,IAAMsG,EAAEtG,GAAKiT,EAAEs7C,KAAKvuD,IAAMsG,EAAEtG,GAAKiT,EAAEjT,IAAMuG,EAAEvG,GAAKiT,EAAEs7C,KAAKvuD,IAAMuG,EAAEvG,GAClEkpD,GAAYj2C,EAAGA,EAAEs7C,KAAMjoD,EAAGC,GAE7B,OAAO,EAIR0M,EAAIA,EAAEs7C,WAEGt7C,IAAM3M,GAEhB,OAAO,EApD0Cs/E,CAAmBt/E,EAAGC,IACtEs+E,GAAev+E,EAAGC,IAAOs+E,GAAet+E,EAAGD,IAmE7C,SAAuBA,EAAGC,GAEzB,IAAI0M,EAAI3M,EACPu/E,GAAS,EACT1F,GAAO75E,EAAEtO,EAAIuO,EAAEvO,GAAM,EACrBooF,GAAO95E,EAAErO,EAAIsO,EAAEtO,GAAM,EAEtB,GAEUgb,EAAEhb,EAAImoF,GAAWntE,EAAEs7C,KAAKt2D,EAAImoF,GAAUntE,EAAEs7C,KAAKt2D,IAAMgb,EAAEhb,GACxDkoF,GAAOltE,EAAEs7C,KAAKv2D,EAAIib,EAAEjb,IAAQooF,EAAKntE,EAAEhb,IAAQgb,EAAEs7C,KAAKt2D,EAAIgb,EAAEhb,GAAMgb,EAAEjb,IAErE6tF,GAAWA,GAIZ5yE,EAAIA,EAAEs7C,WAEGt7C,IAAM3M,GAEhB,OAAOu/E,EAvF4CC,CAAcx/E,EAAGC,GAMrE,SAAS68E,GAAMnwE,EAAGxG,EAAGwJ,GAEpB,OAASxJ,EAAExU,EAAIgb,EAAEhb,IAAQge,EAAEje,EAAIyU,EAAEzU,IAAQyU,EAAEzU,EAAIib,EAAEjb,IAAQie,EAAEhe,EAAIwU,EAAExU,GAMlE,SAASyQ,GAAQqS,EAAIC,GAEpB,OAAOD,EAAG/iB,IAAMgjB,EAAGhjB,GAAK+iB,EAAG9iB,IAAM+iB,EAAG/iB,EAMrC,SAASixD,GAAYnuC,EAAIipB,EAAIhpB,EAAI+qE,GAEhC,SAAOr9E,GAAQqS,EAAIipB,IAAQt7B,GAAQsS,EAAI+qE,IACnCr9E,GAAQqS,EAAIgrE,IAAQr9E,GAAQsS,EAAIgpB,KAE7Bo/C,GAAMroE,EAAIipB,EAAIhpB,GAAO,GAAMooE,GAAMroE,EAAIipB,EAAI+hD,GAAO,GACnD3C,GAAMpoE,EAAI+qE,EAAIhrE,GAAO,GAAMqoE,GAAMpoE,EAAI+qE,EAAI/hD,GAAO,EA6BrD,SAAS6gD,GAAev+E,EAAGC,GAE1B,OAAO68E,GAAM98E,EAAE+8E,KAAM/8E,EAAGA,EAAEioD,MAAS,EAClC60B,GAAM98E,EAAGC,EAAGD,EAAEioD,OAAU,GAAK60B,GAAM98E,EAAGA,EAAE+8E,KAAM98E,IAAO,EACrD68E,GAAM98E,EAAGC,EAAGD,EAAE+8E,MAAS,GAAKD,GAAM98E,EAAGA,EAAEioD,KAAMhoD,GAAM,EAiCrD,SAASw+E,GAAcz+E,EAAGC,GAEzB,IAAIxF,EAAK,IAAIilF,GAAM1/E,EAAEtG,EAAGsG,EAAEtO,EAAGsO,EAAErO,GAC9BgJ,EAAK,IAAI+kF,GAAMz/E,EAAEvG,EAAGuG,EAAEvO,EAAGuO,EAAEtO,GAC3BguF,EAAK3/E,EAAEioD,KACP23B,EAAK3/E,EAAE88E,KAcR,OAZA/8E,EAAEioD,KAAOhoD,EACTA,EAAE88E,KAAO/8E,EAETvF,EAAGwtD,KAAO03B,EACVA,EAAG5C,KAAOtiF,EAEVE,EAAGstD,KAAOxtD,EACVA,EAAGsiF,KAAOpiF,EAEVilF,EAAG33B,KAAOttD,EACVA,EAAGoiF,KAAO6C,EAEHjlF,EAMR,SAAS8hF,GAAY/iF,EAAGhI,EAAGC,EAAGwmF,GAE7B,IAAIxrE,EAAI,IAAI+yE,GAAMhmF,EAAGhI,EAAGC,GAgBxB,OAdOwmF,GAONxrE,EAAEs7C,KAAOkwB,EAAKlwB,KACdt7C,EAAEowE,KAAO5E,EACTA,EAAKlwB,KAAK80B,KAAOpwE,EACjBwrE,EAAKlwB,KAAOt7C,IARZA,EAAEowE,KAAOpwE,EACTA,EAAEs7C,KAAOt7C,GAWHA,EAIR,SAAS+vE,GAAY/vE,GAEpBA,EAAEs7C,KAAK80B,KAAOpwE,EAAEowE,KAChBpwE,EAAEowE,KAAK90B,KAAOt7C,EAAEs7C,KAEXt7C,EAAE0wE,QAAQ1wE,EAAE0wE,MAAMC,MAAQ3wE,EAAE2wE,OAC5B3wE,EAAE2wE,QAAQ3wE,EAAE2wE,MAAMD,MAAQ1wE,EAAE0wE,OAIlC,SAASqC,GAAMhmF,EAAGhI,EAAGC,GAGpByK,KAAK1C,EAAIA,EAGT0C,KAAK1K,EAAIA,EACT0K,KAAKzK,EAAIA,EAGTyK,KAAK2gF,KAAO,KACZ3gF,KAAK6rD,KAAO,KAGZ7rD,KAAKxK,EAAI,KAGTwK,KAAKihF,MAAQ,KACbjhF,KAAKkhF,MAAQ,KAGblhF,KAAKygF,SAAU,EH9vBhBf,GAAUx+E,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQi+D,GAAM53E,WAAa,CAEtEkC,YAAas8E,GAEbn8E,IAAK,SAAWkgF,GAEfzjF,KAAK2/E,OAAOl+E,KAAMgiF,IAInBC,UAAW,WAGV,IAAIC,EAAa3jF,KAAK2/E,OAAQ,GAAIvE,SAAU,GACxCwI,EAAW5jF,KAAK2/E,OAAQ3/E,KAAK2/E,OAAOv/E,OAAS,GAAIg7E,SAAU,GAExDuI,EAAW39E,OAAQ49E,IAEzB5jF,KAAK2/E,OAAOl+E,KAAM,IAAIoiF,GAAuBD,EAAUD,KAezDvI,SAAU,SAAW38E,GAQpB,IANA,IAAIsK,EAAItK,EAAIuB,KAAK07E,YACboI,EAAe9jF,KAAK+jF,kBACpBzmF,EAAI,EAIAA,EAAIwmF,EAAa1jF,QAAS,CAEjC,GAAK0jF,EAAcxmF,IAAOyL,EAAI,CAE7B,IAAI8jC,EAAOi3C,EAAcxmF,GAAMyL,EAC3B06E,EAAQzjF,KAAK2/E,OAAQriF,GAErB0mF,EAAgBP,EAAM/H,YACtB1wD,EAAsB,IAAlBg5D,EAAsB,EAAI,EAAIn3C,EAAOm3C,EAE7C,OAAOP,EAAMpI,WAAYrwD,GAI1B1tB,IAID,OAAO,MAURo+E,UAAW,WAEV,IAAIuI,EAAOjkF,KAAK+jF,kBAChB,OAAOE,EAAMA,EAAK7jF,OAAS,IAK5B67E,iBAAkB,WAEjBj8E,KAAK0yC,aAAc,EACnB1yC,KAAKkkF,aAAe,KACpBlkF,KAAK+jF,mBAONA,gBAAiB,WAIhB,GAAK/jF,KAAKkkF,cAAgBlkF,KAAKkkF,aAAa9jF,SAAWJ,KAAK2/E,OAAOv/E,OAElE,OAAOJ,KAAKkkF,aASb,IAFA,IAAIvI,EAAU,GAAIwI,EAAO,EAEf7mF,EAAI,EAAG8E,EAAIpC,KAAK2/E,OAAOv/E,OAAQ9C,EAAI8E,EAAG9E,IAE/C6mF,GAAQnkF,KAAK2/E,OAAQriF,GAAIo+E,YACzBC,EAAQl6E,KAAM0iF,GAMf,OAFAnkF,KAAKkkF,aAAevI,EAEbA,GAIRF,gBAAiB,SAAWD,QAER36E,IAAd26E,IAA0BA,EAAY,IAI3C,IAFA,IAAItjE,EAAS,GAEH5a,EAAI,EAAGA,GAAKk+E,EAAWl+E,IAEhC4a,EAAOzW,KAAMzB,KAAKo7E,SAAU99E,EAAIk+E,IAUjC,OANKx7E,KAAK4/E,WAET1nE,EAAOzW,KAAMyW,EAAQ,IAIfA,GAIRqjE,UAAW,SAAWC,GAErBA,EAAYA,GAAa,GAIzB,IAFA,IAAiBO,EAAb7jE,EAAS,GAEH5a,EAAI,EAAGqiF,EAAS3/E,KAAK2/E,OAAQriF,EAAIqiF,EAAOv/E,OAAQ9C,IAUzD,IARA,IAAImmF,EAAQ9D,EAAQriF,GAChB8mF,EAAeX,GAASA,EAAMrG,eAA+B,EAAZ5B,EAChDiI,GAASA,EAAMpE,YAAgB,EAC9BoE,GAASA,EAAMhE,cAAkBjE,EAAYiI,EAAMvrE,OAAO9X,OAC3Do7E,EAED6I,EAAMZ,EAAMlI,UAAW6I,GAEjBtkE,EAAI,EAAGA,EAAIukE,EAAIjkF,OAAQ0f,IAAO,CAEvC,IAAI9B,EAAQqmE,EAAKvkE,GAEZi8D,GAAQA,EAAK/1E,OAAQgY,KAE1B9F,EAAOzW,KAAMuc,GACb+9D,EAAO/9D,GAYT,OANKhe,KAAK4/E,WAAa1nE,EAAO9X,OAAS,IAAO8X,EAAQA,EAAO9X,OAAS,GAAI4F,OAAQkS,EAAQ,KAEzFA,EAAOzW,KAAMyW,EAAQ,IAIfA,GAIR7U,KAAM,SAAW2X,GAEhB89D,GAAM53E,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEjChb,KAAK2/E,OAAS,GAEd,IAAM,IAAIriF,EAAI,EAAG8E,EAAI4Y,EAAO2kE,OAAOv/E,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAExD,IAAImmF,EAAQzoE,EAAO2kE,OAAQriF,GAE3B0C,KAAK2/E,OAAOl+E,KAAMgiF,EAAMtgF,SAMzB,OAFAnD,KAAK4/E,UAAY5kE,EAAO4kE,UAEjB5/E,MAIRib,OAAQ,WAEP,IAAIf,EAAO4+D,GAAM53E,UAAU+Z,OAAO5Y,KAAMrC,MAExCka,EAAK0lE,UAAY5/E,KAAK4/E,UACtB1lE,EAAKylE,OAAS,GAEd,IAAM,IAAIriF,EAAI,EAAG8E,EAAIpC,KAAK2/E,OAAOv/E,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAEtD,IAAImmF,EAAQzjF,KAAK2/E,OAAQriF,GACzB4c,EAAKylE,OAAOl+E,KAAMgiF,EAAMxoE,UAIzB,OAAOf,GAIRgjE,SAAU,SAAWC,GAEpBrE,GAAM53E,UAAUg8E,SAAS76E,KAAMrC,KAAMm9E,GAErCn9E,KAAK4/E,UAAYzC,EAAKyC,UACtB5/E,KAAK2/E,OAAS,GAEd,IAAM,IAAIriF,EAAI,EAAG8E,EAAI+6E,EAAKwC,OAAOv/E,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAEtD,IAAImmF,EAAQtG,EAAKwC,OAAQriF,GACzB0C,KAAK2/E,OAAOl+E,MAAM,IAAI6iF,GAAQb,EAAMriF,OAAS87E,SAAUuG,IAIxD,OAAOzjF,QChOT6/E,GAAK3+E,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ6kE,GAAUx+E,WAAa,CAErEkC,YAAay8E,GAEb1iE,cAAe,SAAWjF,GAEzBlY,KAAKukF,OAAQrsE,EAAQ,GAAI5iB,EAAG4iB,EAAQ,GAAI3iB,GAExC,IAAM,IAAI+H,EAAI,EAAG8E,EAAI8V,EAAO9X,OAAQ9C,EAAI8E,EAAG9E,IAE1C0C,KAAKwkF,OAAQtsE,EAAQ5a,GAAIhI,EAAG4iB,EAAQ5a,GAAI/H,IAM1CgvF,OAAQ,SAAWjvF,EAAGC,GAErByK,KAAK8/E,aAAar9E,IAAKnN,EAAGC,IAI3BivF,OAAQ,SAAWlvF,EAAGC,GAErB,IAAIkuF,EAAQ,IAAI9E,GAAW3+E,KAAK8/E,aAAa38E,QAAS,IAAIpD,GAASzK,EAAGC,IACtEyK,KAAK2/E,OAAOl+E,KAAMgiF,GAElBzjF,KAAK8/E,aAAar9E,IAAKnN,EAAGC,IAI3BkvF,iBAAkB,SAAWC,EAAMC,EAAM1L,EAAIC,GAE5C,IAAIuK,EAAQ,IAAI5E,GACf7+E,KAAK8/E,aAAa38E,QAClB,IAAIpD,GAAS2kF,EAAMC,GACnB,IAAI5kF,GAASk5E,EAAIC,IAGlBl5E,KAAK2/E,OAAOl+E,KAAMgiF,GAElBzjF,KAAK8/E,aAAar9E,IAAKw2E,EAAIC,IAI5B0L,cAAe,SAAWC,EAAOC,EAAOC,EAAOC,EAAO/L,EAAIC,GAEzD,IAAIuK,EAAQ,IAAIjF,GACfx+E,KAAK8/E,aAAa38E,QAClB,IAAIpD,GAAS8kF,EAAOC,GACpB,IAAI/kF,GAASglF,EAAOC,GACpB,IAAIjlF,GAASk5E,EAAIC,IAGlBl5E,KAAK2/E,OAAOl+E,KAAMgiF,GAElBzjF,KAAK8/E,aAAar9E,IAAKw2E,EAAIC,IAI5B+L,WAAY,SAAWZ,GAEtB,IAEIZ,EAAQ,IAAI1E,GAFL,CAAE/+E,KAAK8/E,aAAa38E,SAAU+hF,OAAQb,IAGjDrkF,KAAK2/E,OAAOl+E,KAAMgiF,GAElBzjF,KAAK8/E,aAAaz8E,KAAMghF,EAAKA,EAAIjkF,OAAS,KAI3C+kF,IAAK,SAAWlM,EAAIC,EAAIQ,EAASL,EAAaC,EAAWC,GAExD,IAAIpoE,EAAKnR,KAAK8/E,aAAaxqF,EACvB8b,EAAKpR,KAAK8/E,aAAavqF,EAE3ByK,KAAKolF,OAAQnM,EAAK9nE,EAAI+nE,EAAK9nE,EAAIsoE,EAC9BL,EAAaC,EAAWC,IAI1B6L,OAAQ,SAAWnM,EAAIC,EAAIQ,EAASL,EAAaC,EAAWC,GAE3Dv5E,KAAKqlF,WAAYpM,EAAIC,EAAIQ,EAASA,EAASL,EAAaC,EAAWC,IAIpE+L,QAAS,SAAWrM,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAEjF,IAAIroE,EAAKnR,KAAK8/E,aAAaxqF,EACvB8b,EAAKpR,KAAK8/E,aAAavqF,EAE3ByK,KAAKqlF,WAAYpM,EAAK9nE,EAAI+nE,EAAK9nE,EAAI+nE,EAASC,EAASC,EAAaC,EAAWC,EAAYC,IAI1F6L,WAAY,SAAWpM,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAEpF,IAAIiK,EAAQ,IAAIzK,GAAcC,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAE5F,GAAKx5E,KAAK2/E,OAAOv/E,OAAS,EAAI,CAG7B,IAAImlF,EAAa9B,EAAMrI,SAAU,GAE1BmK,EAAWv/E,OAAQhG,KAAK8/E,eAE9B9/E,KAAKwkF,OAAQe,EAAWjwF,EAAGiwF,EAAWhwF,GAMxCyK,KAAK2/E,OAAOl+E,KAAMgiF,GAElB,IAAI+B,EAAY/B,EAAMrI,SAAU,GAChCp7E,KAAK8/E,aAAaz8E,KAAMmiF,IAIzBniF,KAAM,SAAW2X,GAMhB,OAJA0kE,GAAUx+E,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAErChb,KAAK8/E,aAAaz8E,KAAM2X,EAAO8kE,cAExB9/E,MAIRib,OAAQ,WAEP,IAAIf,EAAOwlE,GAAUx+E,UAAU+Z,OAAO5Y,KAAMrC,MAI5C,OAFAka,EAAK4lE,aAAe9/E,KAAK8/E,aAAa35E,UAE/B+T,GAIRgjE,SAAU,SAAWC,GAMpB,OAJAuC,GAAUx+E,UAAUg8E,SAAS76E,KAAMrC,KAAMm9E,GAEzCn9E,KAAK8/E,aAAa75E,UAAWk3E,EAAK2C,cAE3B9/E,QCrJT+/E,GAAM7+E,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQglE,GAAK3+E,WAAa,CAEjEkC,YAAa28E,GAEb0F,eAAgB,SAAWjK,GAI1B,IAFA,IAAIkK,EAAW,GAELpoF,EAAI,EAAG8E,EAAIpC,KAAKggF,MAAM5/E,OAAQ9C,EAAI8E,EAAG9E,IAE9CooF,EAAUpoF,GAAM0C,KAAKggF,MAAO1iF,GAAIi+E,UAAWC,GAI5C,OAAOkK,GAMRC,cAAe,SAAWnK,GAEzB,MAAO,CAEN/1C,MAAOzlC,KAAKu7E,UAAWC,GACvBwE,MAAOhgF,KAAKylF,eAAgBjK,KAM9Bn4E,KAAM,SAAW2X,GAEhB6kE,GAAK3+E,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEhChb,KAAKggF,MAAQ,GAEb,IAAM,IAAI1iF,EAAI,EAAG8E,EAAI4Y,EAAOglE,MAAM5/E,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAEvD,IAAIklF,EAAOxnE,EAAOglE,MAAO1iF,GAEzB0C,KAAKggF,MAAMv+E,KAAM+gF,EAAKr/E,SAIvB,OAAOnD,MAIRib,OAAQ,WAEP,IAAIf,EAAO2lE,GAAK3+E,UAAU+Z,OAAO5Y,KAAMrC,MAEvCka,EAAKd,KAAOpZ,KAAKoZ,KACjBc,EAAK8lE,MAAQ,GAEb,IAAM,IAAI1iF,EAAI,EAAG8E,EAAIpC,KAAKggF,MAAM5/E,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAErD,IAAIklF,EAAOxiF,KAAKggF,MAAO1iF,GACvB4c,EAAK8lE,MAAMv+E,KAAM+gF,EAAKvnE,UAIvB,OAAOf,GAIRgjE,SAAU,SAAWC,GAEpB0C,GAAK3+E,UAAUg8E,SAAS76E,KAAMrC,KAAMm9E,GAEpCn9E,KAAKoZ,KAAO+jE,EAAK/jE,KACjBpZ,KAAKggF,MAAQ,GAEb,IAAM,IAAI1iF,EAAI,EAAG8E,EAAI+6E,EAAK6C,MAAM5/E,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAErD,IAAIklF,EAAOrF,EAAK6C,MAAO1iF,GACvB0C,KAAKggF,MAAMv+E,MAAM,IAAIo+E,IAAO3C,SAAUsF,IAIvC,OAAOxiF,QErGT,IAAI4lF,GAAa,CAIhBlF,KAAM,SAAWmF,GAKhB,IAHA,IAAI5nF,EAAI4nF,EAAQzlF,OACZwD,EAAI,EAEE2M,EAAItS,EAAI,EAAG8L,EAAI,EAAGA,EAAI9L,EAAGsS,EAAIxG,IAEtCnG,GAAKiiF,EAASt1E,GAAIjb,EAAIuwF,EAAS97E,GAAIxU,EAAIswF,EAAS97E,GAAIzU,EAAIuwF,EAASt1E,GAAIhb,EAItE,MAAW,GAAJqO,GAIRkiF,YAAa,SAAWzB,GAEvB,OAAOuB,GAAWlF,KAAM2D,GAAQ,GAIjC0B,iBAAkB,SAAWF,EAAS7F,GAErC,IAAIxhE,EAAW,GACXwnE,EAAc,GACd7+C,EAAQ,GAEZ8+C,GAAiBJ,GACjBK,GAAY1nE,EAAUqnE,GAItB,IAAIM,EAAYN,EAAQzlF,OAExB4/E,EAAMoG,QAASH,IAEf,IAAM,IAAI3oF,EAAI,EAAGA,EAAI0iF,EAAM5/E,OAAQ9C,IAElC0oF,EAAYvkF,KAAM0kF,GAClBA,GAAanG,EAAO1iF,GAAI8C,OACxB8lF,GAAY1nE,EAAUwhE,EAAO1iF,IAM9B,IAAIghD,EDjDQ,SAAWpkC,EAAM8rE,EAAa9F,GAE1CA,EAAMA,GAAO,EAEb,IAOItjE,EAAMC,EAAME,EAAMC,EAAM1nB,EAAGC,EAAGurF,EAP9BuF,EAAWL,GAAeA,EAAY5lF,OACzCkmF,EAAWD,EAAWL,EAAa,GAAM9F,EAAMhmE,EAAK9Z,OACpDqiF,EAAYxC,GAAY/lE,EAAM,EAAGosE,EAAUpG,GAAK,GAChD5hC,EAAY,GAEb,IAAOmkC,EAAY,OAAOnkC,EAQ1B,GAJK+nC,IAAW5D,EAmUlB,SAAyBvoE,EAAM8rE,EAAavD,EAAWvC,GAEtD,IAAgB5iF,EAAGyU,EAAiBskD,EAAhCkwB,EAAQ,GAEZ,IAAMjpF,EAAI,EAAGyU,EAAMi0E,EAAY5lF,OAAQ9C,EAAIyU,EAAKzU,KAI/C+4D,EAAO4pB,GAAY/lE,EAFX8rE,EAAa1oF,GAAM4iF,EACrB5iF,EAAIyU,EAAM,EAAIi0E,EAAa1oF,EAAI,GAAM4iF,EAAMhmE,EAAK9Z,OACjB8/E,GAAK,MAC5B7pB,EAAKxK,OAAOwK,EAAKoqB,SAAU,GACzC8F,EAAM9kF,KAAMuhF,GAAa3sB,IAQ1B,IAJAkwB,EAAMv5C,KAAMs1C,IAINhlF,EAAI,EAAGA,EAAIipF,EAAMnmF,OAAQ9C,IAE9BilF,GAAegE,EAAOjpF,GAAKmlF,GAC3BA,EAAYlC,GAAckC,EAAWA,EAAU52B,MAIhD,OAAO42B,EA5VsB+D,CAAgBtsE,EAAM8rE,EAAavD,EAAWvC,IAIrEhmE,EAAK9Z,OAAS,GAAK8/E,EAAM,CAE7BtjE,EAAOG,EAAO7C,EAAM,GACpB2C,EAAOG,EAAO9C,EAAM,GAEpB,IAAM,IAAI5c,EAAI4iF,EAAK5iF,EAAIgpF,EAAUhpF,GAAK4iF,GAErC5qF,EAAI4kB,EAAM5c,IAEDsf,IAAOA,EAAOtnB,IADvBC,EAAI2kB,EAAM5c,EAAI,IAELuf,IAAOA,EAAOtnB,GAClBD,EAAIynB,IAAOA,EAAOznB,GAClBC,EAAIynB,IAAOA,EAAOznB,GAOxBurF,EAAsB,KADtBA,EAAU7jF,KAAK9H,IAAK4nB,EAAOH,EAAMI,EAAOH,IACd,EAAIikE,EAAU,EAMzC,OAFAF,GAAc6B,EAAWnkC,EAAW4hC,EAAKtjE,EAAMC,EAAMikE,GAE9CxiC,ECOSmoC,CAAoBjoE,EAAUwnE,GAI9C,IAAU1oF,EAAI,EAAGA,EAAIghD,EAAUl+C,OAAQ9C,GAAK,EAE3C6pC,EAAM1lC,KAAM68C,EAAUn8C,MAAO7E,EAAGA,EAAI,IAIrC,OAAO6pC,IAMT,SAAS8+C,GAAiB/tE,GAEzB,IAAI9V,EAAI8V,EAAO9X,OAEVgC,EAAI,GAAK8V,EAAQ9V,EAAI,GAAI4D,OAAQkS,EAAQ,KAE7CA,EAAOw9C,MAMT,SAASwwB,GAAY1nE,EAAUqnE,GAE9B,IAAM,IAAIvoF,EAAI,EAAGA,EAAIuoF,EAAQzlF,OAAQ9C,IAEpCkhB,EAAS/c,KAAMokF,EAASvoF,GAAIhI,GAC5BkpB,EAAS/c,KAAMokF,EAASvoF,GAAI/H,GC/E9B,SAASmxF,KAER1mF,KAAKoB,KAAO,YAEZpB,KAAKy1B,MAAQ,IAAIZ,GAEjB70B,KAAK2mF,SAAW,GAChB3mF,KAAK4mF,YAAc,KCTpB,SAASC,GAAM3sE,GAEdla,KAAKoB,KAAO,OAEZpB,KAAKka,KAAOA,EA6Db,SAAS4sE,GAAYC,EAAMvL,EAAWptE,EAAOo4B,EAASC,EAASvsB,GAE9D,IAAI8sE,EAAQ9sE,EAAK+sE,OAAQF,IAAU7sE,EAAK+sE,OAAQ,KAEhD,GAAOD,EAAP,CAEA,IAEI1xF,EAAGC,EAAG2xF,EAAKC,EAAKC,EAAMC,EAAMC,EAAMC,EAFlCj8B,EAAO,IAAIo7B,GAIf,GAAKM,EAAMQ,EAIV,IAFA,IAAIC,EAAUT,EAAMU,iBAAoBV,EAAMU,eAAiBV,EAAMQ,EAAE76B,MAAO,MAEpErvD,EAAI,EAAG8E,EAAIqlF,EAAQrnF,OAAQ9C,EAAI8E,GAIxC,OAFaqlF,EAASnqF,MAIrB,IAAK,IAEJhI,EAAImyF,EAASnqF,KAAS8Q,EAAQo4B,EAC9BjxC,EAAIkyF,EAASnqF,KAAS8Q,EAAQq4B,EAE9B6kB,EAAKi5B,OAAQjvF,EAAGC,GAEhB,MAED,IAAK,IAEJD,EAAImyF,EAASnqF,KAAS8Q,EAAQo4B,EAC9BjxC,EAAIkyF,EAASnqF,KAAS8Q,EAAQq4B,EAE9B6kB,EAAKk5B,OAAQlvF,EAAGC,GAEhB,MAED,IAAK,IAEJ2xF,EAAMO,EAASnqF,KAAS8Q,EAAQo4B,EAChC2gD,EAAMM,EAASnqF,KAAS8Q,EAAQq4B,EAChC2gD,EAAOK,EAASnqF,KAAS8Q,EAAQo4B,EACjC6gD,EAAOI,EAASnqF,KAAS8Q,EAAQq4B,EAEjC6kB,EAAKm5B,iBAAkB2C,EAAMC,EAAMH,EAAKC,GAExC,MAED,IAAK,IAEJD,EAAMO,EAASnqF,KAAS8Q,EAAQo4B,EAChC2gD,EAAMM,EAASnqF,KAAS8Q,EAAQq4B,EAChC2gD,EAAOK,EAASnqF,KAAS8Q,EAAQo4B,EACjC6gD,EAAOI,EAASnqF,KAAS8Q,EAAQq4B,EACjC6gD,EAAOG,EAASnqF,KAAS8Q,EAAQo4B,EACjC+gD,EAAOE,EAASnqF,KAAS8Q,EAAQq4B,EAEjC6kB,EAAKs5B,cAAewC,EAAMC,EAAMC,EAAMC,EAAML,EAAKC,GAUrD,MAAO,CAAE3gD,QAASwgD,EAAMW,GAAKv5E,EAAOk9C,KAAMA,IDxH3CtqD,OAAOC,OAAQylF,GAAUxlF,UAAW,CAEnCqjF,OAAQ,SAAWjvF,EAAGC,GAErByK,KAAK4mF,YAAc,IAAI/G,GACvB7/E,KAAK2mF,SAASllF,KAAMzB,KAAK4mF,aACzB5mF,KAAK4mF,YAAYrC,OAAQjvF,EAAGC,IAI7BivF,OAAQ,SAAWlvF,EAAGC,GAErByK,KAAK4mF,YAAYpC,OAAQlvF,EAAGC,IAI7BkvF,iBAAkB,SAAWC,EAAMC,EAAM1L,EAAIC,GAE5Cl5E,KAAK4mF,YAAYnC,iBAAkBC,EAAMC,EAAM1L,EAAIC,IAIpD0L,cAAe,SAAWC,EAAOC,EAAOC,EAAOC,EAAO/L,EAAIC,GAEzDl5E,KAAK4mF,YAAYhC,cAAeC,EAAOC,EAAOC,EAAOC,EAAO/L,EAAIC,IAIjE+L,WAAY,SAAWZ,GAEtBrkF,KAAK4mF,YAAY3B,WAAYZ,IAI9BuD,SAAU,SAAWC,EAAOC,GAE3B,SAASC,EAAiBC,GAIzB,IAFA,IAAI9iD,EAAS,GAEH5nC,EAAI,EAAG8E,EAAI4lF,EAAW5nF,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAErD,IAAI2qF,EAAUD,EAAY1qF,GAEtB4qF,EAAW,IAAInI,GACnBmI,EAASvI,OAASsI,EAAQtI,OAE1Bz6C,EAAOzjC,KAAMymF,GAId,OAAOhjD,EAIR,SAASijD,EAAsBC,EAAMC,GASpC,IAPA,IAAIC,EAAUD,EAAUjoF,OAMpB+iF,GAAS,EACH5yE,EAAI+3E,EAAU,EAAGv+E,EAAI,EAAGA,EAAIu+E,EAAS/3E,EAAIxG,IAAO,CAEzD,IAAIw+E,EAAYF,EAAW93E,GACvBi4E,EAAaH,EAAWt+E,GAExB0+E,EAASD,EAAWlzF,EAAIizF,EAAUjzF,EAClCozF,EAASF,EAAWjzF,EAAIgzF,EAAUhzF,EAEtC,GAAK0H,KAAKkI,IAAKujF,GAAW72E,OAAOC,QAAU,CAS1C,GANK42E,EAAS,IAEbH,EAAYF,EAAWt+E,GAAK0+E,GAAWA,EACvCD,EAAaH,EAAW93E,GAAKm4E,GAAWA,GAGlCN,EAAK7yF,EAAIgzF,EAAUhzF,GAAS6yF,EAAK7yF,EAAIizF,EAAWjzF,EAAQ,SAE/D,GAAK6yF,EAAK7yF,IAAMgzF,EAAUhzF,GAEzB,GAAK6yF,EAAK9yF,IAAMizF,EAAUjzF,EAAK,OAAO,MAGhC,CAEN,IAAIqzF,EAAWD,GAAWN,EAAK9yF,EAAIizF,EAAUjzF,GAAMmzF,GAAWL,EAAK7yF,EAAIgzF,EAAUhzF,GACjF,GAAkB,IAAbozF,EAAoB,OAAO,EAChC,GAAKA,EAAW,EAAQ,SACxBxF,GAAWA,OAIN,CAGN,GAAKiF,EAAK7yF,IAAMgzF,EAAUhzF,EAAM,SAEhC,GAASizF,EAAWlzF,GAAK8yF,EAAK9yF,GAAS8yF,EAAK9yF,GAAKizF,EAAUjzF,GACrDizF,EAAUjzF,GAAK8yF,EAAK9yF,GAAS8yF,EAAK9yF,GAAKkzF,EAAWlzF,EAAS,OAAO,GAO1E,OAAO6tF,EAIR,IAAI2C,EAAcF,GAAWE,YAEzBa,EAAW3mF,KAAK2mF,SACpB,GAAyB,IAApBA,EAASvmF,OAAe,MAAO,GAEpC,IAAiB,IAAZ0nF,EAAmB,OAAOC,EAAiBpB,GAGhD,IAAIiC,EAAOX,EAASC,EAAUhjD,EAAS,GAEvC,GAAyB,IAApByhD,EAASvmF,OAMb,OAJA6nF,EAAUtB,EAAU,IACpBuB,EAAW,IAAInI,IACNJ,OAASsI,EAAQtI,OAC1Bz6C,EAAOzjC,KAAMymF,GACNhjD,EAIR,IAAI2jD,GAAe/C,EAAaa,EAAU,GAAIpL,aAC9CsN,EAAahB,GAAUgB,EAAaA,EAIpC,IAIIC,EAgGAC,EApGAC,EAAmB,GACnBC,EAAY,GACZC,EAAgB,GAChBC,EAAU,EAGdF,EAAWE,QAAYtoF,EACvBqoF,EAAeC,GAAY,GAE3B,IAAM,IAAI7rF,EAAI,EAAG8E,EAAIukF,EAASvmF,OAAQ9C,EAAI8E,EAAG9E,IAI5CsrF,EAAQ9C,EADRgD,GADAb,EAAUtB,EAAUrpF,IACAi+E,cAEpBqN,EAAQf,GAAUe,EAAQA,KAIhBC,GAAkBI,EAAWE,IAAcA,IAEpDF,EAAWE,GAAY,CAAExlF,EAAG,IAAIo8E,GAASxvE,EAAGu4E,GAC5CG,EAAWE,GAAUxlF,EAAEg8E,OAASsI,EAAQtI,OAEnCkJ,GAAaM,IAClBD,EAAeC,GAAY,IAM3BD,EAAeC,GAAU1nF,KAAM,CAAE6O,EAAG23E,EAAS13E,EAAGu4E,EAAW,KAS7D,IAAOG,EAAW,GAAM,OAAOlB,EAAiBpB,GAGhD,GAAKsC,EAAU7oF,OAAS,EAAI,CAK3B,IAHA,IAAIgpF,GAAY,EACZC,EAAW,GAELC,EAAO,EAAGC,EAAON,EAAU7oF,OAAQkpF,EAAOC,EAAMD,IAEzDN,EAAkBM,GAAS,GAI5B,IAAUA,EAAO,EAAGC,EAAON,EAAU7oF,OAAQkpF,EAAOC,EAAMD,IAIzD,IAFA,IAAIE,EAAMN,EAAeI,GAEfG,EAAO,EAAGA,EAAOD,EAAIppF,OAAQqpF,IAAU,CAKhD,IAHA,IAAIC,EAAKF,EAAKC,GACVE,GAAkB,EAEZC,EAAQ,EAAGA,EAAQX,EAAU7oF,OAAQwpF,IAEzCzB,EAAsBuB,EAAGn5E,EAAG04E,EAAWW,GAAQr5E,KAE9C+4E,IAASM,GAAQP,EAAS5nF,KAAM,CAAEooF,MAAOP,EAAMQ,IAAKF,EAAOpH,KAAMiH,IACjEE,GAEJA,GAAkB,EAClBX,EAAkBY,GAAQnoF,KAAMioF,IAIhCN,GAAY,GAOVO,GAEJX,EAAkBM,GAAO7nF,KAAMioF,GAQ7BL,EAASjpF,OAAS,IAGfgpF,IAAYF,EAAgBF,IAQ3B1rF,EAAI,EAAd,IAAM,IAAW+f,EAAK4rE,EAAU7oF,OAAQ9C,EAAI+f,EAAI/f,IAAO,CAEtD4qF,EAAWe,EAAW3rF,GAAIqG,EAC1BuhC,EAAOzjC,KAAMymF,GAGb,IAAM,IAAIpoE,EAAI,EAAGypB,GAFjBw/C,EAAWG,EAAe5rF,IAEK8C,OAAQ0f,EAAIypB,EAAIzpB,IAE9CooE,EAASlI,MAAMv+E,KAAMsnF,EAAUjpE,GAAIxP,GAQrC,OAAO40B,KCtQTlkC,OAAOC,OAAQ4lF,GAAK3lF,UAAW,CAE9B6oF,QAAQ,EAERC,eAAgB,SAAWC,EAAMzsE,EAAMg+D,QAExB36E,IAAT2c,IAAqBA,EAAO,UACd3c,IAAd26E,IAA0BA,EAAY,GAK3C,IAHA,IAAIt2C,EAAS,GACTglD,EAcN,SAAsBD,EAAMzsE,EAAMg+D,EAAWthE,GAU5C,IARA,IAAIiwE,EAAQ9kC,OAAQ4kC,GAAOt9B,MAAO,IAC9Bv+C,EAAQoP,EAAOtD,EAAKkqE,WACpBgG,GAAgBlwE,EAAKwtB,YAAY2iD,KAAOnwE,EAAKwtB,YAAY4iD,KAAOpwE,EAAKqwE,oBAAuBn8E,EAE5F87E,EAAQ,GAER1jD,EAAU,EAAGC,EAAU,EAEjBnpC,EAAI,EAAGA,EAAI6sF,EAAM/pF,OAAQ9C,IAAO,CAEzC,IAAIypF,EAAOoD,EAAO7sF,GAElB,GAAc,OAATypF,EAEJvgD,EAAU,EACVC,GAAW2jD,MAEL,CAEN,IAAII,EAAM1D,GAAYC,EAAMvL,EAAWptE,EAAOo4B,EAASC,EAASvsB,GAChEssB,GAAWgkD,EAAIhkD,QACf0jD,EAAMzoF,KAAM+oF,EAAIl/B,OAMlB,OAAO4+B,EA3CMO,CAAaR,EAAMzsE,EAAMg+D,EAAWx7E,KAAKka,MAE3C3J,EAAI,EAAGglD,EAAK20B,EAAM9pF,OAAQmQ,EAAIglD,EAAIhlD,IAE3C+a,MAAMpqB,UAAUO,KAAK4kE,MAAOnhC,EAAQglD,EAAO35E,GAAIq3E,YAIhD,OAAO1iD,KC3BT,IAAIwlD,GAAU,GAEd,SAASC,GAAYhS,GAEpB34E,KAAK24E,aAAwB93E,IAAZ83E,EAA0BA,EAAUhB,GCHtD,SAASiT,GAAYjS,GAEpB34E,KAAK24E,aAAwB93E,IAAZ83E,EAA0BA,EAAUhB,GCsBtD,SAASkT,GAAiB3lD,EAAQ6zB,GAEjC9xB,GAAS5kC,KAAMrC,MAEfA,KAAKoB,KAAO,kBAEZpB,KAAKwlC,WAAa,CACjBN,OAAQA,EACR6zB,QAASA,GAGV/4D,KAAKypC,mBAAoB,IAAIqhD,GAAuB5lD,EAAQ6zB,IAC5D/4D,KAAKssC,gBASN,SAASw+C,GAAuB5lD,EAAQ6zB,GAEvC5oB,GAAe9tC,KAAMrC,MAErBA,KAAKoB,KAAO,wBAEZpB,KAAKwlC,WAAa,CACjBN,OAAQA,EACR6zB,QAASA,GAGV7zB,EAAS5Z,MAAMC,QAAS2Z,GAAWA,EAAS,CAAEA,GAO9C,IALA,IAAI/mB,EAAQne,KAER+qF,EAAgB,GAChBC,EAAU,GAEJ1tF,EAAI,EAAG8E,EAAI8iC,EAAO9kC,OAAQ9C,EAAI8E,EAAG9E,IAG1C2tF,EADY/lD,EAAQ5nC,IAcrB,SAAS2tF,EAAUxlD,GAElB,IAmBIylD,EACAC,EAAYC,EAAUz0E,EAAQ00E,EAmC9BC,EAAOh7E,EAAGi7E,EAvDVC,EAAc,GAIdC,OAA0C5qF,IAA1Bk4D,EAAQ0yB,cAA8B1yB,EAAQ0yB,cAAgB,GAC9EC,OAA0B7qF,IAAlBk4D,EAAQ2yB,MAAsB3yB,EAAQ2yB,MAAQ,EACtDC,OAA4B9qF,IAAnBk4D,EAAQ4yB,OAAuB5yB,EAAQ4yB,OAAS,IAEzDC,OAAwC/qF,IAAzBk4D,EAAQ6yB,cAA6B7yB,EAAQ6yB,aAC5DC,OAA4ChrF,IAA3Bk4D,EAAQ8yB,eAA+B9yB,EAAQ8yB,eAAiB,EACjFC,OAAkCjrF,IAAtBk4D,EAAQ+yB,UAA0B/yB,EAAQ+yB,UAAYD,EAAiB,EACnFE,OAA0ClrF,IAA1Bk4D,EAAQgzB,cAA8BhzB,EAAQgzB,cAAgB,EAE9EC,EAAcjzB,EAAQizB,YAEtBC,OAAgCprF,IAAxBk4D,EAAQmzB,YAA4BnzB,EAAQmzB,YAAcC,GAItDC,GAAgB,EAG3BJ,IAEJd,EAAac,EAAYvQ,gBAAiBiQ,GAE1CU,GAAgB,EAChBR,GAAe,EAMfT,EAAaa,EAAYvP,oBAAqBiP,GAAO,GAIrDN,EAAW,IAAItqF,GACf6V,EAAS,IAAI7V,GACbuqF,EAAY,IAAIvqF,IAMV8qF,IAENG,EAAgB,EAChBF,EAAiB,EACjBC,EAAY,GAQb,IAAIO,EAAc5mD,EAAMkgD,cAAe8F,GAEnCjtE,EAAW6tE,EAAY5mD,MACvBu6C,EAAQqM,EAAYrM,MAIxB,IAFgB4F,GAAWE,YAAatnE,GAQvC,IAJAA,EAAWA,EAAS8tE,UAIdh8E,EAAI,EAAGi7E,EAAKvL,EAAM5/E,OAAQkQ,EAAIi7E,EAAIj7E,IAEvCg7E,EAAQtL,EAAO1vE,GAEVs1E,GAAWE,YAAawF,KAE5BtL,EAAO1vE,GAAMg7E,EAAMgB,WAStB,IAAInlD,EAAQy+C,GAAWG,iBAAkBvnE,EAAUwhE,GAI/C6F,EAAUrnE,EAEd,IAAMlO,EAAI,EAAGi7E,EAAKvL,EAAM5/E,OAAQkQ,EAAIi7E,EAAIj7E,IAEvCg7E,EAAQtL,EAAO1vE,GAEfkO,EAAWA,EAAS0mE,OAAQoG,GAK7B,SAASiB,EAAUC,EAAI1P,EAAKt/D,GAI3B,OAFOs/D,GAAMz8E,QAAQC,MAAO,6CAErBw8E,EAAI35E,QAAQgB,eAAgBqZ,GAAOja,IAAKipF,GAIhD,IAAI3oF,EAAG4oF,EAAIhuF,EAAGjJ,EACbk3F,EACApjD,EADMqjD,EAAOnuE,EAASpe,OAChBwsF,EAAOzlD,EAAM/mC,OAMpB,SAASysF,EAAazE,EAAM0E,EAAQC,GASnC,IAAIC,EAAWC,EAAWC,EAKtBC,EAAW/E,EAAK9yF,EAAIw3F,EAAOx3F,EAC9B83F,EAAWhF,EAAK7yF,EAAIu3F,EAAOv3F,EACxB83F,EAAWN,EAAOz3F,EAAI8yF,EAAK9yF,EAC9Bg4F,EAAWP,EAAOx3F,EAAI6yF,EAAK7yF,EAExBg4F,EAAiBJ,EAAWA,EAAWC,EAAWA,EAGlDI,EAAeL,EAAWG,EAAWF,EAAWC,EAEpD,GAAKpwF,KAAKkI,IAAKqoF,GAAe37E,OAAOC,QAAU,CAM9C,IAAI27E,EAAaxwF,KAAKgI,KAAMsoF,GACxBG,EAAazwF,KAAKgI,KAAMooF,EAAWA,EAAWC,EAAWA,GAIzDK,EAAkBb,EAAOx3F,EAAI83F,EAAWK,EACxCG,EAAkBd,EAAOv3F,EAAI43F,EAAWM,EAOxCI,IALkBd,EAAOz3F,EAAIg4F,EAAWI,EAKfC,GAAkBL,GAJzBP,EAAOx3F,EAAI83F,EAAWK,EAKxBE,GAAkBP,IACnCF,EAAWG,EAAWF,EAAWC,GAShCS,GALJd,EAAcW,EAAgBR,EAAWU,EAAKzF,EAAK9yF,GAKjB03F,GAJlCC,EAAcW,EAAgBR,EAAWS,EAAKzF,EAAK7yF,GAIO03F,EAC1D,GAAKa,GAAiB,EAErB,OAAO,IAAI/tF,GAASitF,EAAWC,GAI/BC,EAAYjwF,KAAKgI,KAAM6oF,EAAgB,OAIlC,CAIN,IAAIC,GAAe,EACdZ,EAAWt7E,OAAOC,QAEjBu7E,EAAWx7E,OAAOC,UAEtBi8E,GAAe,GAMXZ,GAAat7E,OAAOC,QAEnBu7E,GAAax7E,OAAOC,UAExBi8E,GAAe,GAMX9wF,KAAKmmD,KAAMgqC,KAAenwF,KAAKmmD,KAAMkqC,KAEzCS,GAAe,GAQbA,GAGJf,GAAcI,EACdH,EAAYE,EACZD,EAAYjwF,KAAKgI,KAAMsoF,KAKvBP,EAAYG,EACZF,EAAYG,EACZF,EAAYjwF,KAAKgI,KAAMsoF,EAAe,IAMxC,OAAO,IAAIxtF,GAASitF,EAAYE,EAAWD,EAAYC,GAOxD,IAFA,IAAIc,EAAmB,GAEb1wF,EAAI,EAAG+f,EAAKwoE,EAAQzlF,OAAQ0f,EAAIzC,EAAK,EAAG6wB,EAAI5wC,EAAI,EAAGA,EAAI+f,EAAI/f,IAAMwiB,IAAMouB,IAE3EpuB,IAAMzC,IAAKyC,EAAI,GACfouB,IAAM7wB,IAAK6wB,EAAI,GAKpB8/C,EAAkB1wF,GAAMuvF,EAAahH,EAASvoF,GAAKuoF,EAAS/lE,GAAK+lE,EAAS33C,IAI3E,IACC+/C,EA6FGtqF,EA9FAuqF,EAAiB,GACFC,EAAoBH,EAAiB9I,SAExD,IAAM50E,EAAI,EAAGi7E,EAAKvL,EAAM5/E,OAAQkQ,EAAIi7E,EAAIj7E,IAAO,CAM9C,IAJAg7E,EAAQtL,EAAO1vE,GAEf29E,EAAmB,GAEb3wF,EAAI,EAAsBwiB,GAAnBzC,EAAKiuE,EAAMlrF,QAAiB,EAAG8tC,EAAI5wC,EAAI,EAAGA,EAAI+f,EAAI/f,IAAMwiB,IAAMouB,IAErEpuB,IAAMzC,IAAKyC,EAAI,GACfouB,IAAM7wB,IAAK6wB,EAAI,GAGpB+/C,EAAkB3wF,GAAMuvF,EAAavB,EAAOhuF,GAAKguF,EAAOxrE,GAAKwrE,EAAOp9C,IAIrEggD,EAAezsF,KAAMwsF,GACrBE,EAAoBA,EAAkBjJ,OAAQ+I,GAO/C,IAAMpqF,EAAI,EAAGA,EAAIkoF,EAAeloF,IAAO,CAUtC,IANApF,EAAIoF,EAAIkoF,EACRv2F,EAAIq2F,EAAiB5uF,KAAK0J,IAAKlI,EAAIxB,KAAKC,GAAK,GAC7CuvF,EAAKX,EAAY7uF,KAAK2J,IAAKnI,EAAIxB,KAAKC,GAAK,GAInCI,EAAI,EAAG+f,EAAKwoE,EAAQzlF,OAAQ9C,EAAI+f,EAAI/f,IAIzCgG,GAFAopF,EAAOH,EAAU1G,EAASvoF,GAAK0wF,EAAkB1wF,GAAKmvF,IAE9Cn3F,EAAGo3F,EAAKn3F,GAAKC,GAMtB,IAAM8a,EAAI,EAAGi7E,EAAKvL,EAAM5/E,OAAQkQ,EAAIi7E,EAAIj7E,IAKvC,IAHAg7E,EAAQtL,EAAO1vE,GACf29E,EAAmBC,EAAgB59E,GAE7BhT,EAAI,EAAG+f,EAAKiuE,EAAMlrF,OAAQ9C,EAAI+f,EAAI/f,IAIvCgG,GAFAopF,EAAOH,EAAUjB,EAAOhuF,GAAK2wF,EAAkB3wF,GAAKmvF,IAE5Cn3F,EAAGo3F,EAAKn3F,GAAKC,GAYxB,IAJAi3F,EAAKX,EAICxuF,EAAI,EAAGA,EAAIqvF,EAAMrvF,IAEtBovF,EAAOd,EAAeW,EAAU/tE,EAAUlhB,GAAK6wF,EAAmB7wF,GAAKmvF,GAAOjuE,EAAUlhB,GAEjF8uF,GAQNz1E,EAAOtT,KAAM8nF,EAAWliD,QAAS,IAAM9kC,eAAgBuoF,EAAKp3F,GAC5D81F,EAAS/nF,KAAM8nF,EAAWtO,UAAW,IAAM14E,eAAgBuoF,EAAKn3F,GAEhE81F,EAAUhoF,KAAM6nF,EAAY,IAAM3nF,IAAKoT,GAASpT,IAAK6nF,GAErD9nF,EAAG+nF,EAAU/1F,EAAG+1F,EAAU91F,EAAG81F,EAAU71F,IAXvC8N,EAAGopF,EAAKp3F,EAAGo3F,EAAKn3F,EAAG,GAsBrB,IAAMoO,EAAI,EAAGA,GAAK+nF,EAAO/nF,IAExB,IAAMrG,EAAI,EAAGA,EAAIqvF,EAAMrvF,IAEtBovF,EAAOd,EAAeW,EAAU/tE,EAAUlhB,GAAK6wF,EAAmB7wF,GAAKmvF,GAAOjuE,EAAUlhB,GAEjF8uF,GAQNz1E,EAAOtT,KAAM8nF,EAAWliD,QAAStlC,IAAMQ,eAAgBuoF,EAAKp3F,GAC5D81F,EAAS/nF,KAAM8nF,EAAWtO,UAAWl5E,IAAMQ,eAAgBuoF,EAAKn3F,GAEhE81F,EAAUhoF,KAAM6nF,EAAYvnF,IAAMJ,IAAKoT,GAASpT,IAAK6nF,GAErD9nF,EAAG+nF,EAAU/1F,EAAG+1F,EAAU91F,EAAG81F,EAAU71F,IAXvC8N,EAAGopF,EAAKp3F,EAAGo3F,EAAKn3F,EAAGo2F,EAASD,EAAQ/nF,GAuBvC,IAAME,EAAIkoF,EAAgB,EAAGloF,GAAK,EAAGA,IAAO,CAQ3C,IANApF,EAAIoF,EAAIkoF,EACRv2F,EAAIq2F,EAAiB5uF,KAAK0J,IAAKlI,EAAIxB,KAAKC,GAAK,GAC7CuvF,EAAKX,EAAY7uF,KAAK2J,IAAKnI,EAAIxB,KAAKC,GAAK,GAInCI,EAAI,EAAG+f,EAAKwoE,EAAQzlF,OAAQ9C,EAAI+f,EAAI/f,IAGzCgG,GADAopF,EAAOH,EAAU1G,EAASvoF,GAAK0wF,EAAkB1wF,GAAKmvF,IAC9Cn3F,EAAGo3F,EAAKn3F,EAAGo2F,EAASn2F,GAM7B,IAAM8a,EAAI,EAAGi7E,EAAKvL,EAAM5/E,OAAQkQ,EAAIi7E,EAAIj7E,IAKvC,IAHAg7E,EAAQtL,EAAO1vE,GACf29E,EAAmBC,EAAgB59E,GAE7BhT,EAAI,EAAG+f,EAAKiuE,EAAMlrF,OAAQ9C,EAAI+f,EAAI/f,IAEvCovF,EAAOH,EAAUjB,EAAOhuF,GAAK2wF,EAAkB3wF,GAAKmvF,GAE7CL,EAMN9oF,EAAGopF,EAAKp3F,EAAGo3F,EAAKn3F,EAAI21F,EAAYQ,EAAQ,GAAIn2F,EAAG21F,EAAYQ,EAAQ,GAAIp2F,EAAIE,GAJ3E8N,EAAGopF,EAAKp3F,EAAGo3F,EAAKn3F,EAAGo2F,EAASn2F,GA4GhC,SAAS44F,EAAWvI,EAASwI,GAE5B,IAAIvuE,EAAGouB,EAGP,IAFA5wC,EAAIuoF,EAAQzlF,SAED9C,GAAK,GAAI,CAEnBwiB,EAAIxiB,GACJ4wC,EAAI5wC,EAAI,GACC,IAAI4wC,EAAI23C,EAAQzlF,OAAS,GAIlC,IAAIuD,EAAI,EACP2qF,EAAK5C,EAAwB,EAAhBK,EAEd,IAAMpoF,EAAI,EAAGA,EAAI2qF,EAAI3qF,IAAO,CAE3B,IAAI4qF,EAAQ5B,EAAOhpF,EACf6qF,EAAQ7B,GAAShpF,EAAI,GAOzB8qF,EALQJ,EAAcvuE,EAAIyuE,EACrBF,EAAcngD,EAAIqgD,EAClBF,EAAcngD,EAAIsgD,EAClBH,EAAcvuE,EAAI0uE,KAU1B,SAASlrF,EAAGhO,EAAGC,EAAGC,GAEjBg2F,EAAY/pF,KAAMnM,GAClBk2F,EAAY/pF,KAAMlM,GAClBi2F,EAAY/pF,KAAMjM,GAKnB,SAASk5F,EAAI9qF,EAAGC,EAAG6C,GAElBioF,EAAW/qF,GACX+qF,EAAW9qF,GACX8qF,EAAWjoF,GAEX,IAAIkoF,EAAY7D,EAAc3qF,OAAS,EACnC8oC,EAAM+iD,EAAM4C,cAAe1wE,EAAO4sE,EAAe6D,EAAY,EAAGA,EAAY,EAAGA,EAAY,GAE/FE,EAAO5lD,EAAK,IACZ4lD,EAAO5lD,EAAK,IACZ4lD,EAAO5lD,EAAK,IAIb,SAASulD,EAAI7qF,EAAGC,EAAG6C,EAAGqC,GAErB4lF,EAAW/qF,GACX+qF,EAAW9qF,GACX8qF,EAAW5lF,GAEX4lF,EAAW9qF,GACX8qF,EAAWjoF,GACXioF,EAAW5lF,GAGX,IAAI6lF,EAAY7D,EAAc3qF,OAAS,EACnC8oC,EAAM+iD,EAAM8C,mBAAoB5wE,EAAO4sE,EAAe6D,EAAY,EAAGA,EAAY,EAAGA,EAAY,EAAGA,EAAY,GAEnHE,EAAO5lD,EAAK,IACZ4lD,EAAO5lD,EAAK,IACZ4lD,EAAO5lD,EAAK,IAEZ4lD,EAAO5lD,EAAK,IACZ4lD,EAAO5lD,EAAK,IACZ4lD,EAAO5lD,EAAK,IAIb,SAASylD,EAAW9sF,GAEnBkpF,EAActpF,KAAM+pF,EAAqB,EAAR3pF,EAAY,IAC7CkpF,EAActpF,KAAM+pF,EAAqB,EAAR3pF,EAAY,IAC7CkpF,EAActpF,KAAM+pF,EAAqB,EAAR3pF,EAAY,IAK9C,SAASitF,EAAOE,GAEfhE,EAAQvpF,KAAMutF,EAAQ15F,GACtB01F,EAAQvpF,KAAMutF,EAAQz5F,IA/KvB,WAEC,IAAI8rB,EAAQ0pE,EAAc3qF,OAAS,EAEnC,GAAKwrF,EAAe,CAEnB,IAAIva,EAAQ,EACRnrE,EAASymF,EAAOtb,EAIpB,IAAM/zE,EAAI,EAAGA,EAAIsvF,EAAMtvF,IAGtBoxF,GADAplD,EAAOnC,EAAO7pC,IACJ,GAAM4I,EAAQojC,EAAM,GAAMpjC,EAAQojC,EAAM,GAAMpjC,GASzD,IAJAA,EAASymF,GADTtb,EAAQqa,EAAwB,EAAhBK,GAKVzuF,EAAI,EAAGA,EAAIsvF,EAAMtvF,IAGtBoxF,GADAplD,EAAOnC,EAAO7pC,IACJ,GAAM4I,EAAQojC,EAAM,GAAMpjC,EAAQojC,EAAM,GAAMpjC,OAInD,CAIN,IAAM5I,EAAI,EAAGA,EAAIsvF,EAAMtvF,IAGtBoxF,GADAplD,EAAOnC,EAAO7pC,IACJ,GAAKgsC,EAAM,GAAKA,EAAM,IAMjC,IAAMhsC,EAAI,EAAGA,EAAIsvF,EAAMtvF,IAGtBoxF,GADAplD,EAAOnC,EAAO7pC,IACJ,GAAMqvF,EAAOjB,EAAOpiD,EAAM,GAAMqjD,EAAOjB,EAAOpiD,EAAM,GAAMqjD,EAAOjB,GAM7EvtE,EAAMyzB,SAAUvwB,EAAO0pE,EAAc3qF,OAAS,EAAIihB,EAAO,GA7D1D4tE,GAmEA,WAEC,IAAI5tE,EAAQ0pE,EAAc3qF,OAAS,EAC/BiuF,EAAc,EAIlB,IAHAD,EAAWvI,EAASwI,GACpBA,GAAexI,EAAQzlF,OAEjBkQ,EAAI,EAAGi7E,EAAKvL,EAAM5/E,OAAQkQ,EAAIi7E,EAAIj7E,IAGvC89E,EADA9C,EAAQtL,EAAO1vE,GACG+9E,GAGlBA,GAAe/C,EAAMlrF,OAKtB+d,EAAMyzB,SAAUvwB,EAAO0pE,EAAc3qF,OAAS,EAAIihB,EAAO,GAjF1D6tE,GAvbDlvF,KAAK8xC,aAAc,WAAY,IAAIhJ,GAAwBiiD,EAAe,IAC1E/qF,KAAK8xC,aAAc,KAAM,IAAIhJ,GAAwBkiD,EAAS,IAE9DhrF,KAAKyqC,uBFpENzpC,OAAOC,OAAQ0pF,GAAWzpF,UAAW,CAEpCq5E,KAAM,SAAW7+D,EAAKk8D,EAAQC,EAAYC,QAE5Bj3E,IAAR6a,IAAoBA,EAAM,SAEZ7a,IAAdb,KAAKsrD,OAAqB5vC,EAAM1b,KAAKsrD,KAAO5vC,GAEjDA,EAAM1b,KAAK24E,QAAQJ,WAAY78D,GAE/B,IAAIyC,EAAQne,KAERw6E,EAAShD,GAAMh1E,IAAKkZ,GAExB,QAAgB7a,IAAX25E,EAYJ,OAVAr8D,EAAMw6D,QAAQP,UAAW18D,GAEzB++D,WAAY,WAEN7C,GAASA,EAAQ4C,GAEtBr8D,EAAMw6D,QAAQN,QAAS38D,IAErB,GAEI8+D,EAMR,QAAwB35E,IAAnB6pF,GAAShvE,GAAd,CAeA,IACIyzE,EAAqBzzE,EAAI+vC,MADV,+BAInB,GAAK0jC,EAAqB,CAEzB,IAAIC,EAAWD,EAAoB,GAC/BE,IAAcF,EAAoB,GAClCj1E,EAAOi1E,EAAoB,GAE/Bj1E,EAAO+0D,OAAOqgB,mBAAoBp1E,GAE7Bm1E,IAAWn1E,EAAO+0D,OAAOsgB,KAAMr1E,IAEpC,IAEC,IAAIs1E,EACAC,GAAiBzvF,KAAKyvF,cAAgB,IAAKC,cAE/C,OAASD,GAER,IAAK,cACL,IAAK,OAIJ,IAFA,IAAI/sD,EAAO,IAAItD,WAAYllB,EAAK9Z,QAEtB9C,EAAI,EAAGA,EAAI4c,EAAK9Z,OAAQ9C,IAEjColC,EAAMplC,GAAM4c,EAAKy1E,WAAYryF,GAM7BkyF,EAFqB,SAAjBC,EAEO,IAAIG,KAAM,CAAEltD,EAAK9E,QAAU,CAAEx8B,KAAMguF,IAInC1sD,EAAK9E,OAIjB,MAED,IAAK,WAEJ,IAAIiyD,EAAS,IAAIC,UACjBN,EAAWK,EAAOE,gBAAiB71E,EAAMk1E,GAEzC,MAED,IAAK,OAEJI,EAAWlqD,KAAKW,MAAO/rB,GAEvB,MAED,QAECs1E,EAAWt1E,EAOb+0D,OAAOwL,WAAY,WAEb7C,GAASA,EAAQ4X,GAEtBrxE,EAAMw6D,QAAQN,QAAS38D,IAErB,GAEF,MAAQpb,GAGT2uE,OAAOwL,WAAY,WAEb3C,GAAUA,EAASx3E,GAExB6d,EAAMw6D,QAAQN,QAAS38D,GACvByC,EAAMw6D,QAAQL,UAAW58D,IAEvB,QAIE,CAINgvE,GAAShvE,GAAQ,GAEjBgvE,GAAShvE,GAAMja,KAAM,CAEpBm2E,OAAQA,EACRC,WAAYA,EACZC,QAASA,IAIV,IAAIkY,EAAU,IAAIC,eA6FlB,IAAM,IAAIC,KA3FVF,EAAQG,KAAM,MAAOz0E,GAAK,GAE1Bs0E,EAAQ7uF,iBAAkB,OAAQ,SAAWa,GAE5C,IAAIwtF,EAAWxvF,KAAKwvF,SAEpBhY,GAAMj0E,IAAKmY,EAAK8zE,GAEhB,IAAIY,EAAY1F,GAAShvE,GAIzB,UAFOgvE,GAAShvE,GAEK,MAAhB1b,KAAKqwF,OAAiB,CAE1B,IAAM,IAAI/yF,EAAI,EAAG+f,EAAK+yE,EAAUhwF,OAAQ9C,EAAI+f,EAAI/f,KAE3CqX,EAAWy7E,EAAW9yF,IACZs6E,QAASjjE,EAASijE,OAAQ4X,GAIzCrxE,EAAMw6D,QAAQN,QAAS38D,QAEjB,GAAqB,IAAhB1b,KAAKqwF,OAAe,CAO/B,IAFAhwF,QAAQmD,KAAM,6CAEJlG,EAAI,EAAG+f,EAAK+yE,EAAUhwF,OAAQ9C,EAAI+f,EAAI/f,KAE3CqX,EAAWy7E,EAAW9yF,IACZs6E,QAASjjE,EAASijE,OAAQ4X,GAIzCrxE,EAAMw6D,QAAQN,QAAS38D,OAEjB,CAEN,IAAUpe,EAAI,EAAG+f,EAAK+yE,EAAUhwF,OAAQ9C,EAAI+f,EAAI/f,IAAO,CAEtD,IAAIqX,GAAAA,EAAWy7E,EAAW9yF,IACZw6E,SAAUnjE,EAASmjE,QAAS91E,GAI3Cmc,EAAMw6D,QAAQN,QAAS38D,GACvByC,EAAMw6D,QAAQL,UAAW58D,MAIxB,GAEHs0E,EAAQ7uF,iBAAkB,WAAY,SAAWa,GAIhD,IAFA,IAAIouF,EAAY1F,GAAShvE,GAEfpe,EAAI,EAAG+f,EAAK+yE,EAAUhwF,OAAQ9C,EAAI+f,EAAI/f,IAAO,CAEtD,IAAIqX,EAAWy7E,EAAW9yF,GACrBqX,EAASkjE,YAAaljE,EAASkjE,WAAY71E,MAI/C,GAEHguF,EAAQ7uF,iBAAkB,QAAS,SAAWa,GAE7C,IAAIouF,EAAY1F,GAAShvE,UAElBgvE,GAAShvE,GAEhB,IAAM,IAAIpe,EAAI,EAAG+f,EAAK+yE,EAAUhwF,OAAQ9C,EAAI+f,EAAI/f,IAAO,CAEtD,IAAIqX,EAAWy7E,EAAW9yF,GACrBqX,EAASmjE,SAAUnjE,EAASmjE,QAAS91E,GAI3Cmc,EAAMw6D,QAAQN,QAAS38D,GACvByC,EAAMw6D,QAAQL,UAAW58D,KAEvB,QAEwB7a,IAAtBb,KAAKyvF,eAA6BO,EAAQP,aAAezvF,KAAKyvF,mBACrC5uF,IAAzBb,KAAKswF,kBAAgCN,EAAQM,gBAAkBtwF,KAAKswF,iBAEpEN,EAAQO,kBAAmBP,EAAQO,sBAAoC1vF,IAAlBb,KAAKovF,SAAyBpvF,KAAKovF,SAAW,cAEpFpvF,KAAKwwF,cAExBR,EAAQS,iBAAkBP,EAAQlwF,KAAKwwF,cAAeN,IAIvDF,EAAQU,KAAM,MAMf,OAFAvyE,EAAMw6D,QAAQP,UAAW18D,GAElBs0E,EA5NNtF,GAAShvE,GAAMja,KAAM,CAEpBm2E,OAAQA,EACRC,WAAYA,EACZC,QAASA,KA4NZ+C,QAAS,SAAW98E,GAGnB,OADAiC,KAAKsrD,KAAOvtD,EACLiC,MAIR2wF,gBAAiB,SAAW5yF,GAG3B,OADAiC,KAAKyvF,aAAe1xF,EACbiC,MAIR4wF,mBAAoB,SAAW7yF,GAG9B,OADAiC,KAAKswF,gBAAkBvyF,EAChBiC,MAIR6wF,YAAa,SAAW9yF,GAGvB,OADAiC,KAAKovF,SAAWrxF,EACTiC,MAIRywF,iBAAkB,SAAW1yF,GAG5B,OADAiC,KAAKwwF,cAAgBzyF,EACdiC,QClSTgB,OAAOC,OAAQ2pF,GAAW1pF,UAAW,CAEpCq5E,KAAM,SAAW7+D,EAAKk8D,EAAQC,EAAYC,GAEzC,IAAI35D,EAAQne,KAER86E,EAAS,IAAI6P,GAAY3qF,KAAK24E,SAClCmC,EAAOD,QAAS76E,KAAKsrD,MACrBwvB,EAAOP,KAAM7+D,EAAK,SAAWuuE,GAE5B,IAAI9M,EAEJ,IAECA,EAAO73C,KAAKW,MAAOgkD,GAElB,MAAQ1lF,GAETlE,QAAQmD,KAAM,yFACd25E,EAAO73C,KAAKW,MAAOgkD,EAAK6G,UAAW,GAAI7G,EAAK7pF,OAAS,IAItD,IAAI2wF,EAAO5yE,EAAM8nB,MAAOk3C,GAEnBvF,GAASA,EAAQmZ,IAEpBlZ,EAAYC,IAIhB7xC,MAAO,SAAWk3C,GAEjB,OAAO,IAAI0J,GAAM1J,IAIlBtC,QAAS,SAAW98E,GAGnB,OADAiC,KAAKsrD,KAAOvtD,EACLiC,QCNT6qF,GAAgB3pF,UAAYF,OAAO6Z,OAAQosB,GAAS/lC,WACpD2pF,GAAgB3pF,UAAUkC,YAAcynF,GAkpBxCC,GAAsB5pF,UAAYF,OAAO6Z,OAAQs1B,GAAejvC,WAChE4pF,GAAsB5pF,UAAUkC,YAAc0nF,GAE9C,IAAIqB,GAAmB,CAEtB0C,cAAe,SAAWvwE,EAAUE,EAAUwyE,EAAQC,EAAQC,GAE7D,IAAIC,EAAM3yE,EAAmB,EAATwyE,GAChBI,EAAM5yE,EAAmB,EAATwyE,EAAa,GAC7BK,EAAM7yE,EAAmB,EAATyyE,GAChBK,EAAM9yE,EAAmB,EAATyyE,EAAa,GAC7BM,EAAM/yE,EAAmB,EAAT0yE,GAChBM,EAAMhzE,EAAmB,EAAT0yE,EAAa,GAEjC,MAAO,CACN,IAAInxF,GAASoxF,EAAKC,GAClB,IAAIrxF,GAASsxF,EAAKC,GAClB,IAAIvxF,GAASwxF,EAAKC,KAKpBzC,mBAAoB,SAAWzwE,EAAUE,EAAUwyE,EAAQC,EAAQC,EAAQO,GAE1E,IAAIN,EAAM3yE,EAAmB,EAATwyE,GAChBI,EAAM5yE,EAAmB,EAATwyE,EAAa,GAC7BU,EAAMlzE,EAAmB,EAATwyE,EAAa,GAC7BK,EAAM7yE,EAAmB,EAATyyE,GAChBK,EAAM9yE,EAAmB,EAATyyE,EAAa,GAC7BU,EAAMnzE,EAAmB,EAATyyE,EAAa,GAC7BM,EAAM/yE,EAAmB,EAAT0yE,GAChBM,EAAMhzE,EAAmB,EAAT0yE,EAAa,GAC7BU,EAAMpzE,EAAmB,EAAT0yE,EAAa,GAC7BW,EAAMrzE,EAAmB,EAATizE,GAChBK,EAAMtzE,EAAmB,EAATizE,EAAa,GAC7BM,EAAMvzE,EAAmB,EAATizE,EAAa,GAEjC,OAAKx0F,KAAKkI,IAAKisF,EAAME,GAAQ,IAErB,CACN,IAAIvxF,GAASoxF,EAAK,EAAIO,GACtB,IAAI3xF,GAASsxF,EAAK,EAAIM,GACtB,IAAI5xF,GAASwxF,EAAK,EAAIK,GACtB,IAAI7xF,GAAS8xF,EAAK,EAAIE,IAKhB,CACN,IAAIhyF,GAASqxF,EAAK,EAAIM,GACtB,IAAI3xF,GAASuxF,EAAK,EAAIK,GACtB,IAAI5xF,GAASyxF,EAAK,EAAII,GACtB,IAAI7xF,GAAS+xF,EAAK,EAAIC,MC/tB1B,SAASC,GAAc/H,EAAMzkD,GAE5ByB,GAAS5kC,KAAMrC,MAEfA,KAAKoB,KAAO,eAEZpB,KAAKwlC,WAAa,CACjBykD,KAAMA,EACNzkD,WAAYA,GAGbxlC,KAAKypC,mBAAoB,IAAIwoD,GAAoBhI,EAAMzkD,IACvDxlC,KAAKssC,gBASN,SAAS2lD,GAAoBhI,EAAMzkD,GAIlC,IAAIurD,GAFJvrD,EAAaA,GAAc,IAELurD,KAEtB,IAASA,IAAQA,EAAKhH,OAGrB,OADA1pF,QAAQC,MAAO,wEACR,IAAI2mC,GAIZ,IAAI/B,EAAS6rD,EAAK/G,eAAgBC,EAAMzkD,EAAWhoB,KAAMgoB,EAAWimD,eAIpEjmD,EAAWmmD,YAA+B9qF,IAAtB2kC,EAAW9iC,OAAuB8iC,EAAW9iC,OAAS,QAIvC7B,IAA9B2kC,EAAWqmD,iBAA+BrmD,EAAWqmD,eAAiB,SAC7ChrF,IAAzB2kC,EAAWsmD,YAA0BtmD,EAAWsmD,UAAY,QAChCjrF,IAA5B2kC,EAAWomD,eAA6BpmD,EAAWomD,cAAe,GAEvEd,GAAsBzoF,KAAMrC,KAAMklC,EAAQM,GAE1CxlC,KAAKoB,KAAO,qBCjBb,SAAS4xD,GAAmBxtB,GAE3B2O,GAAS9xC,KAAMrC,MAEfA,KAAKoB,KAAO,oBAEZpB,KAAKy1B,MAAQ,IAAIZ,GAAO,UACxB70B,KAAKi8B,SAAW,IAAIpH,GAAO,SAC3B70B,KAAKk8B,UAAY,GAEjBl8B,KAAKi3B,IAAM,KAEXj3B,KAAKg4B,SAAW,KAChBh4B,KAAKi4B,kBAAoB,EAEzBj4B,KAAK63B,MAAQ,KACb73B,KAAK83B,eAAiB,EAEtB93B,KAAK+7B,SAAW,IAAIlH,GAAO,GAC3B70B,KAAKsgD,kBAAoB,EACzBtgD,KAAKm4B,YAAc,KAEnBn4B,KAAKq4B,QAAU,KACfr4B,KAAKs4B,UAAY,EAEjBt4B,KAAKw4B,UAAY,KACjBx4B,KAAKy4B,YAAc,IAAI14B,GAAS,EAAG,GAEnCC,KAAK24B,gBAAkB,KACvB34B,KAAK44B,kBAAoB,EACzB54B,KAAK64B,iBAAmB,EAExB74B,KAAKq3B,YAAc,KAEnBr3B,KAAKm3B,SAAW,KAEhBn3B,KAAKu3B,OAAS,KACdv3B,KAAK81C,QAAU59C,EACf8H,KAAKy3B,aAAe,EACpBz3B,KAAK03B,gBAAkB,IAEvB13B,KAAK+1C,WAAY,EACjB/1C,KAAKg2C,mBAAqB,EAC1Bh2C,KAAKi2C,iBAAmB,QACxBj2C,KAAKk2C,kBAAoB,QAEzBl2C,KAAKm2C,UAAW,EAChBn2C,KAAKqnC,cAAe,EACpBrnC,KAAKsnC,cAAe,EAEpBtnC,KAAKo2C,UAAW5Q,GCrGjB,SAAS0sD,GAASn0F,GAEK,iBAAVA,IAEXsC,QAAQmD,KAAM,sDACdzF,EAAQoC,UAAW,IAIpBH,KAAKjC,MAAQA,ECAd,SAASo0F,GAAgBj7E,EAAQs5B,EAAeC,EAAgB2hD,EAAUC,EAAWpgB,EAAYC,GAEhGjrC,GAAS5kC,KAAMrC,MAEfA,KAAKoB,KAAO,iBAEZpB,KAAKwlC,WAAa,CACjBtuB,OAAQA,EACRs5B,cAAeA,EACfC,eAAgBA,EAChB2hD,SAAUA,EACVC,UAAWA,EACXpgB,WAAYA,EACZC,YAAaA,GAGdlyE,KAAKypC,mBAAoB,IAAI6oD,GAAsBp7E,EAAQs5B,EAAeC,EAAgB2hD,EAAUC,EAAWpgB,EAAYC,IAC3HlyE,KAAKssC,gBASN,SAASgmD,GAAsBp7E,EAAQs5B,EAAeC,EAAgB2hD,EAAUC,EAAWpgB,EAAYC,GAEtG/hC,GAAe9tC,KAAMrC,MAErBA,KAAKoB,KAAO,uBAEZpB,KAAKwlC,WAAa,CACjBtuB,OAAQA,EACRs5B,cAAeA,EACfC,eAAgBA,EAChB2hD,SAAUA,EACVC,UAAWA,EACXpgB,WAAYA,EACZC,YAAaA,GAGdh7D,EAASA,GAAU,EAEnBs5B,EAAgBvzC,KAAK9H,IAAK,EAAG8H,KAAK8B,MAAOyxC,IAAmB,GAC5DC,EAAiBxzC,KAAK9H,IAAK,EAAG8H,KAAK8B,MAAO0xC,IAAoB,GAE9D2hD,OAAwBvxF,IAAbuxF,EAAyBA,EAAW,EAC/CC,OAA0BxxF,IAAdwxF,EAA0BA,EAAsB,EAAVp1F,KAAKC,GAKvD,IAEIoY,EAAIC,EAFJg9E,GAHJtgB,OAA4BpxE,IAAfoxE,EAA2BA,EAAa,IACrDC,OAA8BrxE,IAAhBqxE,EAA4BA,EAAcj1E,KAAKC,IAMzD2E,EAAQ,EACR2wF,EAAO,GAEPrlD,EAAS,IAAIrsC,GACb6V,EAAS,IAAI7V,GAIb4oC,EAAU,GACVlrB,EAAW,GACXyqB,EAAU,GACVC,EAAM,GAIV,IAAM3zB,EAAK,EAAGA,GAAMk7B,EAAgBl7B,IAAQ,CAE3C,IAAIk9E,EAAc,GAEdnvF,EAAIiS,EAAKk7B,EAEb,IAAMn7B,EAAK,EAAGA,GAAMk7B,EAAel7B,IAAQ,CAE1C,IAAI0V,EAAI1V,EAAKk7B,EAIbrD,EAAO73C,GAAM4hB,EAASja,KAAK0J,IAAKyrF,EAAWpnE,EAAIqnE,GAAcp1F,KAAK2J,IAAKqrE,EAAa3uE,EAAI4uE,GACxF/kC,EAAO53C,EAAI2hB,EAASja,KAAK0J,IAAKsrE,EAAa3uE,EAAI4uE,GAC/C/kC,EAAO33C,EAAI0hB,EAASja,KAAK2J,IAAKwrF,EAAWpnE,EAAIqnE,GAAcp1F,KAAK2J,IAAKqrE,EAAa3uE,EAAI4uE,GAEtF1zD,EAAS/c,KAAM0rC,EAAO73C,EAAG63C,EAAO53C,EAAG43C,EAAO33C,GAI1CmhB,EAAOlU,IAAK0qC,EAAO73C,EAAG63C,EAAO53C,EAAG43C,EAAO33C,GAAI4P,YAC3C6jC,EAAQxnC,KAAMkV,EAAOrhB,EAAGqhB,EAAOphB,EAAGohB,EAAOnhB,GAIzC0zC,EAAIznC,KAAMupB,EAAG,EAAI1nB,GAEjBmvF,EAAYhxF,KAAMI,KAInB2wF,EAAK/wF,KAAMgxF,GAMZ,IAAMl9E,EAAK,EAAGA,EAAKk7B,EAAgBl7B,IAElC,IAAMD,EAAK,EAAGA,EAAKk7B,EAAel7B,IAAQ,CAEzC,IAAI1R,EAAI4uF,EAAMj9E,GAAMD,EAAK,GACrBzR,EAAI2uF,EAAMj9E,GAAMD,GAChB5O,EAAI8rF,EAAMj9E,EAAK,GAAKD,GACpBvM,EAAIypF,EAAMj9E,EAAK,GAAKD,EAAK,IAEjB,IAAPC,GAAY08D,EAAa,IAAIvoC,EAAQjoC,KAAMmC,EAAGC,EAAGkF,IACjDwM,IAAOk7B,EAAiB,GAAK8hD,EAAWt1F,KAAKC,KAAKwsC,EAAQjoC,KAAMoC,EAAG6C,EAAGqC,GAQ7E/I,KAAK6xC,SAAUnI,GACf1pC,KAAK8xC,aAAc,WAAY,IAAIhJ,GAAwBtqB,EAAU,IACrExe,KAAK8xC,aAAc,SAAU,IAAIhJ,GAAwBG,EAAS,IAClEjpC,KAAK8xC,aAAc,KAAM,IAAIhJ,GAAwBI,EAAK,ICvI3D,SAASwpD,KAERle,GAAYnyE,KAAMrC,KAAM,IAAImuE,GAAmB,GAAI,EAAG,GAAK,MCF5D,SAASwkB,GAAWl9D,EAAO6hC,EAAWh9B,EAAUj1B,EAAOwyD,EAAUp9B,GAEhE85C,GAAMlyE,KAAMrC,KAAMy1B,EAAO6hC,GAEzBt3D,KAAKoB,KAAO,YAEZpB,KAAKqP,SAAShM,KAAMm+B,GAASG,WAC7B3hC,KAAK+a,eAEL/a,KAAKiC,OAAS,IAAIu/B,GAElBxgC,OAAOmY,eAAgBnZ,KAAM,QAAS,CACrCwC,IAAK,WAIJ,OAAOxC,KAAKs3D,UAAYr6D,KAAKC,IAG9BuF,IAAK,SAAWmwF,GAIf5yF,KAAKs3D,UAAYs7B,EAAQ31F,KAAKC,MAKhC8C,KAAKs6B,cAA0Bz5B,IAAby5B,EAA2BA,EAAW,EACxDt6B,KAAKqF,WAAoBxE,IAAVwE,EAAwBA,EAAQpI,KAAKC,GAAK,EACzD8C,KAAK63D,cAA0Bh3D,IAAbg3D,EAA2BA,EAAW,EACxD73D,KAAKy6B,WAAoB55B,IAAV45B,EAAwBA,EAAQ,EAE/Cz6B,KAAK65B,OAAS,IAAI64D,GCzBnB,SAASG,GAAgBrtD,GAExB2O,GAAS9xC,KAAMrC,MAEfA,KAAKoB,KAAO,iBAEZpB,KAAKy1B,MAAQ,IAAIZ,GAAO,UACxB70B,KAAKi3B,IAAM,KAEXj3B,KAAK6X,SAAW,EAEhB7X,KAAKo5B,KAAM,EACXp5B,KAAKy5B,QAAS,EAEdz5B,KAAKo2C,UAAW5Q,GCxBjB,SAASstD,GAAmBttD,GAE3B6Q,GAAeh0C,KAAMrC,KAAMwlC,GAE3BxlC,KAAKoB,KAAO,oBCOb,SAASkyD,GAAgB9tB,GAExB2O,GAAS9xC,KAAMrC,MAEfA,KAAKoB,KAAO,iBAEZpB,KAAKy1B,MAAQ,IAAIZ,GAAO,UAExB70B,KAAKi3B,IAAM,KAEXj3B,KAAKwd,KAAO,EACZxd,KAAKugD,iBAAkB,EAEvBvgD,KAAKy5B,QAAS,EAEdz5B,KAAKo2C,UAAW5Q,GCtBjB,SAASytB,GAAkBztB,GAE1BwtB,GAAkB3wD,KAAMrC,MAExBA,KAAKs2C,QAAU,CAAEy8C,KAAQ,IAEzB/yF,KAAKoB,KAAO,mBAEZpB,KAAKm5B,YAAc,KAEnBn5B,KAAKo2C,UAAW5Q,GCSjB,SAASstB,GAAoBttB,GAE5B2O,GAAS9xC,KAAMrC,MAEfA,KAAKoB,KAAO,qBAEZpB,KAAKq4B,QAAU,KACfr4B,KAAKs4B,UAAY,EAEjBt4B,KAAKw4B,UAAY,KACjBx4B,KAAKy4B,YAAc,IAAI14B,GAAS,EAAG,GAEnCC,KAAK24B,gBAAkB,KACvB34B,KAAK44B,kBAAoB,EACzB54B,KAAK64B,iBAAmB,EAExB74B,KAAK+1C,WAAY,EACjB/1C,KAAKg2C,mBAAqB,EAE1Bh2C,KAAKo5B,KAAM,EACXp5B,KAAKy5B,QAAS,EAEdz5B,KAAKm2C,UAAW,EAChBn2C,KAAKqnC,cAAe,EACpBrnC,KAAKsnC,cAAe,EAEpBtnC,KAAKo2C,UAAW5Q,GCbjB,SAASutB,GAAqBvtB,GAE7B2O,GAAS9xC,KAAMrC,MAEfA,KAAKoB,KAAO,sBAEZpB,KAAKy1B,MAAQ,IAAIZ,GAAO,UAExB70B,KAAKi3B,IAAM,KAEXj3B,KAAKg4B,SAAW,KAChBh4B,KAAKi4B,kBAAoB,EAEzBj4B,KAAK63B,MAAQ,KACb73B,KAAK83B,eAAiB,EAEtB93B,KAAK+7B,SAAW,IAAIlH,GAAO,GAC3B70B,KAAKsgD,kBAAoB,EACzBtgD,KAAKm4B,YAAc,KAEnBn4B,KAAKq3B,YAAc,KAEnBr3B,KAAKm3B,SAAW,KAEhBn3B,KAAKu3B,OAAS,KACdv3B,KAAK81C,QAAU59C,EACf8H,KAAKy3B,aAAe,EACpBz3B,KAAK03B,gBAAkB,IAEvB13B,KAAK+1C,WAAY,EACjB/1C,KAAKg2C,mBAAqB,EAC1Bh2C,KAAKi2C,iBAAmB,QACxBj2C,KAAKk2C,kBAAoB,QAEzBl2C,KAAKm2C,UAAW,EAChBn2C,KAAKqnC,cAAe,EACpBrnC,KAAKsnC,cAAe,EAEpBtnC,KAAKo2C,UAAW5Q,GXxCjBwsD,GAAa9wF,UAAYF,OAAO6Z,OAAQosB,GAAS/lC,WACjD8wF,GAAa9wF,UAAUkC,YAAc4uF,GAmCrCC,GAAmB/wF,UAAYF,OAAO6Z,OAAQiwE,GAAsB5pF,WACpE+wF,GAAmB/wF,UAAUkC,YAAc6uF,GCgC3Cj/B,GAAkB9xD,UAAYF,OAAO6Z,OAAQs5B,GAASjzC,WACtD8xD,GAAkB9xD,UAAUkC,YAAc4vD,GAE1CA,GAAkB9xD,UAAU8xF,qBAAsB,EAElDhgC,GAAkB9xD,UAAUmC,KAAO,SAAW2X,GAgD7C,OA9CAm5B,GAASjzC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEpChb,KAAKy1B,MAAMpyB,KAAM2X,EAAOya,OACxBz1B,KAAKi8B,SAAS54B,KAAM2X,EAAOihB,UAC3Bj8B,KAAKk8B,UAAYlhB,EAAOkhB,UAExBl8B,KAAKi3B,IAAMjc,EAAOic,IAElBj3B,KAAKg4B,SAAWhd,EAAOgd,SACvBh4B,KAAKi4B,kBAAoBjd,EAAOid,kBAEhCj4B,KAAK63B,MAAQ7c,EAAO6c,MACpB73B,KAAK83B,eAAiB9c,EAAO8c,eAE7B93B,KAAK+7B,SAAS14B,KAAM2X,EAAO+gB,UAC3B/7B,KAAKm4B,YAAcnd,EAAOmd,YAC1Bn4B,KAAKsgD,kBAAoBtlC,EAAOslC,kBAEhCtgD,KAAKq4B,QAAUrd,EAAOqd,QACtBr4B,KAAKs4B,UAAYtd,EAAOsd,UAExBt4B,KAAKw4B,UAAYxd,EAAOwd,UACxBx4B,KAAKy4B,YAAYp1B,KAAM2X,EAAOyd,aAE9Bz4B,KAAK24B,gBAAkB3d,EAAO2d,gBAC9B34B,KAAK44B,kBAAoB5d,EAAO4d,kBAChC54B,KAAK64B,iBAAmB7d,EAAO6d,iBAE/B74B,KAAKq3B,YAAcrc,EAAOqc,YAE1Br3B,KAAKm3B,SAAWnc,EAAOmc,SAEvBn3B,KAAKu3B,OAASvc,EAAOuc,OACrBv3B,KAAK81C,QAAU96B,EAAO86B,QACtB91C,KAAKy3B,aAAezc,EAAOyc,aAC3Bz3B,KAAK03B,gBAAkB1c,EAAO0c,gBAE9B13B,KAAK+1C,UAAY/6B,EAAO+6B,UACxB/1C,KAAKg2C,mBAAqBh7B,EAAOg7B,mBACjCh2C,KAAKi2C,iBAAmBj7B,EAAOi7B,iBAC/Bj2C,KAAKk2C,kBAAoBl7B,EAAOk7B,kBAEhCl2C,KAAKm2C,SAAWn7B,EAAOm7B,SACvBn2C,KAAKqnC,aAAersB,EAAOqsB,aAC3BrnC,KAAKsnC,aAAetsB,EAAOssB,aAEpBtnC,MCjJRkyF,GAAQhxF,UAAUiC,MAAQ,WAEzB,OAAO,IAAI+uF,QAA8BrxF,IAArBb,KAAKjC,MAAMoF,MAAsBnD,KAAKjC,MAAQiC,KAAKjC,MAAMoF,UCe9EgvF,GAAejxF,UAAYF,OAAO6Z,OAAQosB,GAAS/lC,WACnDixF,GAAejxF,UAAUkC,YAAc+uF,GAgHvCG,GAAqBpxF,UAAYF,OAAO6Z,OAAQs1B,GAAejvC,WAC/DoxF,GAAqBpxF,UAAUkC,YAAckvF,GCtI7CI,GAAgBxxF,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ25D,GAAYtzE,WAAa,CAElFkC,YAAasvF,GAEbj2B,mBAAmB,EAEnBtqD,OAAQ,SAAWokD,GAElB,IAAI5gD,EAAS3V,KAAK2V,OAEdy4D,EAAsB,EAAhBrxE,GAAMI,QAAco5D,EAAMlxD,MAChCgpE,EAASruE,KAAK03D,QAAQn1D,MAAQvC,KAAK03D,QAAQh1D,OAC3C0N,EAAMmmD,EAAMj8B,UAAY3kB,EAAOvF,IAE9Bg+D,IAAQz4D,EAAOy4D,KAAOC,IAAW14D,EAAO04D,QAAUj+D,IAAQuF,EAAOvF,MAErEuF,EAAOy4D,IAAMA,EACbz4D,EAAO04D,OAASA,EAChB14D,EAAOvF,IAAMA,EACbuF,EAAOgtB,6BCYVgwD,GAAUzxF,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ05D,GAAMrzE,WAAa,CAEtEkC,YAAauvF,GAEb/6B,aAAa,EAEbv0D,KAAM,SAAW2X,GAahB,OAXAu5D,GAAMrzE,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEjChb,KAAKs6B,SAAWtf,EAAOsf,SACvBt6B,KAAKqF,MAAQ2V,EAAO3V,MACpBrF,KAAK63D,SAAW78C,EAAO68C,SACvB73D,KAAKy6B,MAAQzf,EAAOyf,MAEpBz6B,KAAKiC,OAAS+Y,EAAO/Y,OAAOkB,QAE5BnD,KAAK65B,OAAS7e,EAAO6e,OAAO12B,QAErBnD,QC9BT6yF,GAAe3xF,UAAYF,OAAO6Z,OAAQs5B,GAASjzC,WACnD2xF,GAAe3xF,UAAUkC,YAAcyvF,GACvCA,GAAe3xF,UAAU+xF,kBAAmB,EAE5CJ,GAAe3xF,UAAUmC,KAAO,SAAW2X,GAS1C,OAPAm5B,GAASjzC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEpChb,KAAKy1B,MAAMpyB,KAAM2X,EAAOya,OACxBz1B,KAAKi3B,IAAMjc,EAAOic,IAElBj3B,KAAK6X,SAAWmD,EAAOnD,SAEhB7X,MCjCR8yF,GAAkB5xF,UAAYF,OAAO6Z,OAAQw7B,GAAen1C,WAC5D4xF,GAAkB5xF,UAAUkC,YAAc0vF,GAE1CA,GAAkB5xF,UAAUuuD,qBAAsB,ECmBlD6D,GAAepyD,UAAYF,OAAO6Z,OAAQs5B,GAASjzC,WACnDoyD,GAAepyD,UAAUkC,YAAckwD,GAEvCA,GAAepyD,UAAUgyF,kBAAmB,EAE5C5/B,GAAepyD,UAAUmC,KAAO,SAAW2X,GAW1C,OATAm5B,GAASjzC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEpChb,KAAKy1B,MAAMpyB,KAAM2X,EAAOya,OAExBz1B,KAAKi3B,IAAMjc,EAAOic,IAElBj3B,KAAKwd,KAAOxC,EAAOwC,KACnBxd,KAAKugD,gBAAkBvlC,EAAOulC,gBAEvBvgD,MC5BRizD,GAAiB/xD,UAAYF,OAAO6Z,OAAQm4C,GAAkB9xD,WAC9D+xD,GAAiB/xD,UAAUkC,YAAc6vD,GAEzCA,GAAiB/xD,UAAUiyF,oBAAqB,EAEhDlgC,GAAiB/xD,UAAUmC,KAAO,SAAW2X,GAM5C,OAJAg4C,GAAkB9xD,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAE7Chb,KAAKm5B,YAAcne,EAAOme,YAEnBn5B,MCwBR8yD,GAAmB5xD,UAAYF,OAAO6Z,OAAQs5B,GAASjzC,WACvD4xD,GAAmB5xD,UAAUkC,YAAc0vD,GAE3CA,GAAmB5xD,UAAUkyF,sBAAuB,EAEpDtgC,GAAmB5xD,UAAUmC,KAAO,SAAW2X,GAqB9C,OAnBAm5B,GAASjzC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEpChb,KAAKq4B,QAAUrd,EAAOqd,QACtBr4B,KAAKs4B,UAAYtd,EAAOsd,UAExBt4B,KAAKw4B,UAAYxd,EAAOwd,UACxBx4B,KAAKy4B,YAAYp1B,KAAM2X,EAAOyd,aAE9Bz4B,KAAK24B,gBAAkB3d,EAAO2d,gBAC9B34B,KAAK44B,kBAAoB5d,EAAO4d,kBAChC54B,KAAK64B,iBAAmB7d,EAAO6d,iBAE/B74B,KAAK+1C,UAAY/6B,EAAO+6B,UACxB/1C,KAAKg2C,mBAAqBh7B,EAAOg7B,mBAEjCh2C,KAAKm2C,SAAWn7B,EAAOm7B,SACvBn2C,KAAKqnC,aAAersB,EAAOqsB,aAC3BrnC,KAAKsnC,aAAetsB,EAAOssB,aAEpBtnC,MCDR+yD,GAAoB7xD,UAAYF,OAAO6Z,OAAQs5B,GAASjzC,WACxD6xD,GAAoB7xD,UAAUkC,YAAc2vD,GAE5CA,GAAoB7xD,UAAUmyF,uBAAwB,EAEtDtgC,GAAoB7xD,UAAUmC,KAAO,SAAW2X,GAoC/C,OAlCAm5B,GAASjzC,UAAUmC,KAAKhB,KAAMrC,KAAMgb,GAEpChb,KAAKy1B,MAAMpyB,KAAM2X,EAAOya,OAExBz1B,KAAKi3B,IAAMjc,EAAOic,IAElBj3B,KAAKg4B,SAAWhd,EAAOgd,SACvBh4B,KAAKi4B,kBAAoBjd,EAAOid,kBAEhCj4B,KAAK63B,MAAQ7c,EAAO6c,MACpB73B,KAAK83B,eAAiB9c,EAAO8c,eAE7B93B,KAAK+7B,SAAS14B,KAAM2X,EAAO+gB,UAC3B/7B,KAAKm4B,YAAcnd,EAAOmd,YAC1Bn4B,KAAKsgD,kBAAoBtlC,EAAOslC,kBAEhCtgD,KAAKq3B,YAAcrc,EAAOqc,YAE1Br3B,KAAKm3B,SAAWnc,EAAOmc,SAEvBn3B,KAAKu3B,OAASvc,EAAOuc,OACrBv3B,KAAK81C,QAAU96B,EAAO86B,QACtB91C,KAAKy3B,aAAezc,EAAOyc,aAC3Bz3B,KAAK03B,gBAAkB1c,EAAO0c,gBAE9B13B,KAAK+1C,UAAY/6B,EAAO+6B,UACxB/1C,KAAKg2C,mBAAqBh7B,EAAOg7B,mBACjCh2C,KAAKi2C,iBAAmBj7B,EAAOi7B,iBAC/Bj2C,KAAKk2C,kBAAoBl7B,EAAOk7B,kBAEhCl2C,KAAKm2C,SAAWn7B,EAAOm7B,SACvBn2C,KAAKqnC,aAAersB,EAAOqsB,aAC3BrnC,KAAKsnC,aAAetsB,EAAOssB,aAEpBtnC,UCtCFszF,GASA79D,GACA89D,GACAC,mXCzFN,SAASC,GAAgB9a,GAExB34E,KAAK24E,aAAwB93E,IAAZ83E,EAA0BA,EAAUhB,GACrD33E,KAAKob,SAAW,GDcjB,SAASs4E,MCVT1yF,OAAOC,OAAQwyF,GAAevyF,UAAW,CAExCq5E,KAAM,SAAW7+D,EAAKk8D,EAAQC,EAAYC,GAEzC,IAAI35D,EAAQne,KAEC,IAAI2qF,GAAYxsE,EAAMw6D,SAC5B4B,KAAM7+D,EAAK,SAAWuuE,GAE5BrS,EAAQz5D,EAAM8nB,MAAOX,KAAKW,MAAOgkD,MAE/BpS,EAAYC,IAIhB6b,YAAa,SAAW51F,GAEvBiC,KAAKob,SAAWrd,GAIjBkoC,MAAO,SAAWk3C,GAEjB,IAAI/hE,EAAWpb,KAAKob,SAEpB,SAASw4E,EAAYv6E,GAQpB,YAN0BxY,IAArBua,EAAU/B,IAEdhZ,QAAQmD,KAAM,0CAA2C6V,GAInD+B,EAAU/B,GAIlB,IAAIqsB,EAAW,IAAImuD,GAAW1W,EAAK/7E,MAyEnC,QAvEmBP,IAAds8E,EAAK/jE,OAAqBssB,EAAStsB,KAAO+jE,EAAK/jE,WACjCvY,IAAds8E,EAAK9jE,OAAqBqsB,EAASrsB,KAAO8jE,EAAK9jE,WAChCxY,IAAfs8E,EAAK1nD,OAAsBiQ,EAASjQ,MAAMV,OAAQooD,EAAK1nD,YACpC50B,IAAnBs8E,EAAK/gD,YAA0BsJ,EAAStJ,UAAY+gD,EAAK/gD,gBACtCv7B,IAAnBs8E,EAAK9gD,YAA0BqJ,EAASrJ,UAAY8gD,EAAK9gD,gBACvCx7B,IAAlBs8E,EAAKphD,UAAyB2J,EAAS3J,SAAShH,OAAQooD,EAAKphD,eAC3Cl7B,IAAlBs8E,EAAKlhD,UAAyByJ,EAASzJ,SAASlH,OAAQooD,EAAKlhD,eAC1Cp7B,IAAnBs8E,EAAKjhD,YAA0BwJ,EAASxJ,UAAYihD,EAAKjhD,gBACtCr7B,IAAnBs8E,EAAKj9C,YAA0BwF,EAASxF,UAAYi9C,EAAKj9C,gBAC7Br/B,IAA5Bs8E,EAAKh9C,qBAAmCuF,EAASvF,mBAAqBg9C,EAAKh9C,yBACzDt/B,IAAlBs8E,EAAKryD,WAAyB4a,EAAS5a,SAAWqyD,EAAKryD,eACjCjqB,IAAtBs8E,EAAKvhD,eAA6B8J,EAAS9J,aAAeuhD,EAAKvhD,mBACvC/6B,IAAxBs8E,EAAKthD,iBAA+B6J,EAAS7J,eAAiBshD,EAAKthD,qBAC7Ch7B,IAAtBs8E,EAAKp6C,eAA6B2C,EAAS3C,aAAeo6C,EAAKp6C,mBAClDliC,IAAbs8E,EAAK/jD,MAAoBsM,EAAStM,IAAM+jD,EAAK/jD,UACxBv4B,IAArBs8E,EAAK7oC,cAA4B5O,EAAS4O,YAAc6oC,EAAK7oC,kBAC3CzzC,IAAlBs8E,EAAK/oC,WAAyB1O,EAAS0O,SAAW+oC,EAAK/oC,eACzCvzC,IAAds8E,EAAK9oC,OAAqB3O,EAAS2O,KAAO8oC,EAAK9oC,WAC9BxzC,IAAjBs8E,EAAKnmD,UAAwB0O,EAAS1O,QAAUmmD,EAAKnmD,cAChCn2B,IAArBs8E,EAAK5oC,cAA4B7O,EAAS6O,YAAc4oC,EAAK5oC,kBAC1C1zC,IAAnBs8E,EAAKznC,YAA0BhQ,EAASgQ,UAAYynC,EAAKznC,gBACtC70C,IAAnBs8E,EAAKpoC,YAA0BrP,EAASqP,UAAYooC,EAAKpoC,gBACrCl0C,IAApBs8E,EAAKnoC,aAA2BtP,EAASsP,WAAamoC,EAAKnoC,iBACvCn0C,IAApBs8E,EAAK9nC,aAA2B3P,EAAS2P,WAAa8nC,EAAK9nC,iBACxCx0C,IAAnBs8E,EAAKpnC,YAA0BrQ,EAASqQ,UAAYonC,EAAKpnC,gBAC7Bl1C,IAA5Bs8E,EAAKnnC,qBAAmCtQ,EAASsQ,mBAAqBmnC,EAAKnnC,yBACjDn1C,IAA1Bs8E,EAAKlnC,mBAAiCvQ,EAASuQ,iBAAmBknC,EAAKlnC,uBAC5Cp1C,IAA3Bs8E,EAAKjnC,oBAAkCxQ,EAASwQ,kBAAoBinC,EAAKjnC,wBAEvDr1C,IAAlBs8E,EAAKtlE,WAAyB6tB,EAAS7tB,SAAWslE,EAAKtlE,UAEpC,IAAnBslE,EAAK5mC,YAAkB7Q,EAAS6Q,UAAY4mC,EAAK5mC,gBAC/B11C,IAAlBs8E,EAAK3gD,WAAyBkJ,EAASlJ,SAAW2gD,EAAK3gD,eACtC37B,IAAjBs8E,EAAK38B,UAAwB9a,EAAS8a,QAAU28B,EAAK38B,cACtC3/C,IAAfs8E,EAAK/uE,QAAsBs3B,EAASt3B,MAAQ+uE,EAAK/uE,YAE1BvN,IAAvBs8E,EAAK7nC,gBAA8B5P,EAAS4P,cAAgB6nC,EAAK7nC,oBACpCz0C,IAA7Bs8E,EAAK5nC,sBAAoC7P,EAAS6P,oBAAsB4nC,EAAK5nC,0BACjD10C,IAA5Bs8E,EAAK3nC,qBAAmC9P,EAAS8P,mBAAqB2nC,EAAK3nC,yBAEzD30C,IAAlBs8E,EAAKhnC,WAAyBzQ,EAASyQ,SAAWgnC,EAAKhnC,eACjCt1C,IAAtBs8E,EAAK91C,eAA6B3B,EAAS2B,aAAe81C,EAAK91C,mBAC5CxmC,IAAnBs8E,EAAK1nC,YAA0B/P,EAAS+P,UAAY0nC,EAAK1nC,gBAExC50C,IAAjBs8E,EAAKn7C,UAAwB0D,EAAS1D,QAAUm7C,EAAKn7C,cACnCnhC,IAAlBs8E,EAAK96C,WAAyBqD,EAASrD,SAAW86C,EAAK96C,eAItCxhC,IAAjBs8E,EAAK2W,UAAwBpuD,EAAS4O,YAA+B,IAAjB6oC,EAAK2W,cAI3CjzF,IAAds8E,EAAK3/D,OAAqBkoB,EAASloB,KAAO2/D,EAAK3/D,WACtB3c,IAAzBs8E,EAAK58B,kBAAgC7a,EAAS6a,gBAAkB48B,EAAK58B,sBAIxD1/C,IAAbs8E,EAAKlmD,MAAoByO,EAASzO,IAAM28D,EAAYzW,EAAKlmD,WAEvCp2B,IAAlBs8E,EAAKhmD,WAETuO,EAASvO,SAAWy8D,EAAYzW,EAAKhmD,UACrCuO,EAAS6O,aAAc,QAIF1zC,IAAjBs8E,EAAK9kD,UAAwBqN,EAASrN,QAAUu7D,EAAYzW,EAAK9kD,eAC9Cx3B,IAAnBs8E,EAAK7kD,YAA0BoN,EAASpN,UAAY6kD,EAAK7kD,gBAEtCz3B,IAAnBs8E,EAAK3kD,YAA0BkN,EAASlN,UAAYo7D,EAAYzW,EAAK3kD,iBAChD33B,IAArBs8E,EAAK1kD,YAA4B,CAErC,IAAIA,EAAc0kD,EAAK1kD,aAEe,IAAjCnN,MAAMC,QAASkN,KAInBA,EAAc,CAAEA,EAAaA,IAI9BiN,EAASjN,aAAc,IAAI14B,IAAUkG,UAAWwyB,GA4BjD,YAxB8B53B,IAAzBs8E,EAAKxkD,kBAAgC+M,EAAS/M,gBAAkBi7D,EAAYzW,EAAKxkD,uBACtD93B,IAA3Bs8E,EAAKvkD,oBAAkC8M,EAAS9M,kBAAoBukD,EAAKvkD,wBAC/C/3B,IAA1Bs8E,EAAKtkD,mBAAiC6M,EAAS7M,iBAAmBskD,EAAKtkD,uBAEjDh4B,IAAtBs8E,EAAKpkD,eAA6B2M,EAAS3M,aAAe66D,EAAYzW,EAAKpkD,oBACrDl4B,IAAtBs8E,EAAKlkD,eAA6ByM,EAASzM,aAAe26D,EAAYzW,EAAKlkD,oBAEtDp4B,IAArBs8E,EAAKhlD,cAA4BuN,EAASvN,YAAcy7D,EAAYzW,EAAKhlD,mBAC9Ct3B,IAA3Bs8E,EAAK78B,oBAAkC5a,EAAS4a,kBAAoB68B,EAAK78B,wBAEpDz/C,IAArBs8E,EAAK9lD,cAA4BqO,EAASrO,YAAcu8D,EAAYzW,EAAK9lD,mBAEzDx2B,IAAhBs8E,EAAK5lD,SAAuBmO,EAASnO,OAASq8D,EAAYzW,EAAK5lD,cAEzC12B,IAAtBs8E,EAAK1lD,eAA6BiO,EAASjO,aAAe0lD,EAAK1lD,mBAE7C52B,IAAlBs8E,EAAKnlD,WAAyB0N,EAAS1N,SAAW47D,EAAYzW,EAAKnlD,gBACxCn3B,IAA3Bs8E,EAAKllD,oBAAkCyN,EAASzN,kBAAoBklD,EAAKllD,wBAE1Dp3B,IAAfs8E,EAAKtlD,QAAsB6N,EAAS7N,MAAQ+7D,EAAYzW,EAAKtlD,aACrCh3B,IAAxBs8E,EAAKrlD,iBAA+B4N,EAAS5N,eAAiBqlD,EAAKrlD,qBAE9Cj3B,IAArBs8E,EAAKhkD,cAA4BuM,EAASvM,YAAcy6D,EAAYzW,EAAKhkD,cAEvEuM,KD1ITguD,GAAOK,SAAW,CAEjBC,SAAU,GAEVzwF,IAAK,SAAW0wF,EAAOnZ,GAEtB96E,KAAKg0F,SAASvyF,KAAMwyF,EAAOnZ,IAI5Bt4E,IAAK,SAAWk1E,GAIf,IAFA,IAAIsc,EAAWh0F,KAAKg0F,SAEV12F,EAAI,EAAG8E,EAAI4xF,EAAS5zF,OAAQ9C,EAAI8E,EAAG9E,GAAK,EAAI,CAErD,IAAI22F,EAAQD,EAAU12F,GAClBw9E,EAASkZ,EAAU12F,EAAI,GAE3B,GAAK22F,EAAM7yD,KAAMs2C,GAEhB,OAAOoD,EAMT,OAAO,OAMT95E,OAAOC,OAAQyyF,GAAOxyF,UAAW,CAEhCo5E,iBAAaz5E,EAEbqzF,YAAa,aAEbC,eAAgB,aAEhBC,eAAgB,aAEhBC,cAAe,SAAWpvD,EAAWqvD,EAAaha,GAIjD,IAFA,IAAIp4E,EAAQ,GAEF5E,EAAI,EAAGA,EAAI2nC,EAAU7kC,SAAW9C,EAEzC4E,EAAO5E,GAAM0C,KAAKu0F,eAAgBtvD,EAAW3nC,GAAKg3F,EAAaha,GAIhE,OAAOp4E,GAIRqyF,gBAEKjB,GAAe,CAClBl9F,WAAYA,EACZC,eAAgBA,EAChBC,iBAAkBA,EAClBC,oBAAqBA,EACrBC,iBAAkBA,EAClBC,eAAgBA,GAGbg/B,GAAQ,IAAIZ,GACZ0+D,GAAgB,IAAI3a,GACpB4a,GAAiB,IAAIC,GAElB,SAAyBv1F,EAAGo2F,EAAaha,GAI/C,IAAIl/D,EAAW,GAEf,SAAS+/D,EAAa7vB,EAAM7xC,EAAQvT,EAAQsV,EAAMvC,GAEjD,IAGI26C,EAHA4gC,EAAWF,EAAchpC,EACzBwvB,EAAS4Y,GAAOK,SAASvxF,IAAKgyF,GAIlB,OAAX1Z,EAEJlnB,EAAUknB,EAAOP,KAAMia,IAIvBjB,GAAc3Y,eAAgBN,GAC9B1mB,EAAU2/B,GAAchZ,KAAMia,SAIf3zF,IAAX4Y,IAEJm6C,EAAQn6C,OAAOxT,UAAWwT,GAEL,IAAhBA,EAAQ,KAAYm6C,EAAQh7C,MAAQ3f,IACpB,IAAhBwgB,EAAQ,KAAYm6C,EAAQ/6C,MAAQ5f,UAI1B4H,IAAXqF,GAEJ0tD,EAAQ1tD,OAAOD,UAAWC,QAIbrF,IAAT2a,IAEe,WAAdA,EAAM,KAAmBo4C,EAAQh7C,MAAQ3f,IAC3B,WAAduiB,EAAM,KAAmBo4C,EAAQh7C,MAAQzf,IAE3B,WAAdqiB,EAAM,KAAmBo4C,EAAQ/6C,MAAQ5f,IAC3B,WAAduiB,EAAM,KAAmBo4C,EAAQ/6C,MAAQ1f,UAI3B0H,IAAfoY,IAEJ26C,EAAQ36C,WAAaA,GAItB,IAAIG,EAAOrc,GAAMK,eAIjB,OAFAge,EAAUhC,GAASw6C,EAEZx6C,EAMR,IAAI+jE,EAAO,CACV/jE,KAAMrc,GAAMK,eACZgE,KAAM,uBAGP,IAAM,IAAIiY,KAAQnb,EAAI,CAErB,IAAIH,EAAQG,EAAGmb,GAEf,OAASA,GAER,IAAK,WACL,IAAK,WACL,IAAK,iBACL,IAAK,eACJ,MACD,IAAK,UACJ8jE,EAAK9jE,KAAOtb,EACZ,MACD,IAAK,WACJo/E,EAAK/oC,SAAWk/C,GAAcv1F,GAC9B,MACD,IAAK,eACL,IAAK,aACJsC,QAAQmD,KAAM,+BAAgC6V,EAAM,2BACpD,MACD,IAAK,eACJ8jE,EAAK1nD,MAAQA,GAAMxvB,UAAWlI,GAAQo4B,SACtC,MACD,IAAK,gBACJgnD,EAAKlhD,SAAWxG,GAAMxvB,UAAWlI,GAAQo4B,SACzC,MACD,IAAK,gBACJgnD,EAAKphD,SAAWtG,GAAMxvB,UAAWlI,GAAQo4B,SACzC,MACD,IAAK,eACJgnD,EAAKjhD,UAAYn+B,EACjB,MACD,IAAK,UACyB,UAAxBA,EAAM2xF,gBAA4BvS,EAAK/7E,KAAO,qBACtB,UAAxBrD,EAAM2xF,gBAA4BvS,EAAK/7E,KAAO,qBACtB,aAAxBrD,EAAM2xF,gBAA+BvS,EAAK/7E,KAAO,wBACtD,MACD,IAAK,aACJ+7E,EAAKlmD,IAAMkkD,EAAap9E,EAAOG,EAAEu2F,iBAAkBv2F,EAAEw2F,iBAAkBx2F,EAAEy2F,eAAgBz2F,EAAE02F,sBAC3F,MACD,IAAK,mBACL,IAAK,mBACL,IAAK,iBACL,IAAK,uBACJ,MACD,IAAK,cACJzX,EAAKhlD,YAAcgjD,EAAap9E,EAAOG,EAAE22F,kBAAmB32F,EAAE42F,kBAAmB52F,EAAE62F,gBAAiB72F,EAAE82F,uBACtG,MACD,IAAK,oBACL,IAAK,oBACL,IAAK,kBACL,IAAK,wBACJ,MACD,IAAK,WACJ7X,EAAKnlD,SAAWmjD,EAAap9E,EAAOG,EAAE+2F,eAAgB/2F,EAAEg3F,eAAgBh3F,EAAEi3F,aAAcj3F,EAAEk3F,oBAC1F,MACD,IAAK,iBACL,IAAK,iBACL,IAAK,eACL,IAAK,qBACJ,MACD,IAAK,QACJjY,EAAKtlD,MAAQsjD,EAAap9E,EAAOG,EAAEm3F,YAAan3F,EAAEo3F,YAAap3F,EAAEq3F,UAAWr3F,EAAEs3F,iBAC9E,MACD,IAAK,cACL,IAAK,cACL,IAAK,YACL,IAAK,kBACJ,MACD,IAAK,UACJrY,EAAK9kD,QAAU8iD,EAAap9E,EAAOG,EAAEu3F,cAAev3F,EAAEw3F,cAAex3F,EAAEy3F,YAAaz3F,EAAE03F,mBACtF,MACD,IAAK,eACJzY,EAAK7kD,UAAYv6B,EACjB,MACD,IAAK,gBACL,IAAK,gBACL,IAAK,cACL,IAAK,oBACJ,MACD,IAAK,YACJo/E,EAAK3kD,UAAY2iD,EAAap9E,EAAOG,EAAE23F,gBAAiB33F,EAAE43F,gBAAiB53F,EAAE63F,cAAe73F,EAAE83F,qBAC9F,MACD,IAAK,kBACJ7Y,EAAK1kD,YAAc16B,EACnB,MACD,IAAK,kBACL,IAAK,kBACL,IAAK,gBACL,IAAK,sBACJ,MACD,IAAK,cACJo/E,EAAK9lD,YAAc8jD,EAAap9E,EAAOG,EAAE+3F,kBAAmB/3F,EAAEg4F,kBAAmBh4F,EAAEi4F,gBAAiBj4F,EAAEk4F,uBACtG,MACD,IAAK,oBACL,IAAK,oBACL,IAAK,kBACL,IAAK,wBACJ,MACD,IAAK,eACJjZ,EAAKlkD,aAAekiD,EAAap9E,EAAOG,EAAEm4F,mBAAoBn4F,EAAEo4F,mBAAoBp4F,EAAEq4F,iBAAkBr4F,EAAEs4F,wBAC1G,MACD,IAAK,qBACL,IAAK,qBACL,IAAK,mBACL,IAAK,yBACJ,MACD,IAAK,eACJrZ,EAAKpkD,aAAeoiD,EAAap9E,EAAOG,EAAEu4F,mBAAoBv4F,EAAEw4F,mBAAoBx4F,EAAEy4F,iBAAkBz4F,EAAE04F,wBAC1G,MACD,IAAK,qBACL,IAAK,qBACL,IAAK,mBACL,IAAK,yBACJ,MACD,IAAK,WACJzZ,EAAKhmD,SAAWgkD,EAAap9E,EAAOG,EAAE24F,eAAgB34F,EAAE44F,eAAgB54F,EAAE64F,aAAc74F,EAAE84F,oBAC1F,MACD,IAAK,iBACL,IAAK,iBACL,IAAK,eACL,IAAK,qBACJ,MACD,IAAK,YACJ7Z,EAAK9oC,KAAOp+C,EACZ,MACD,IAAK,cACJknF,EAAK9oC,KAAOn+C,EACZ,MACD,IAAK,eACJmK,QAAQmD,KAAM,yEACd25E,EAAKnmD,QAAUj5B,EACf,MACD,IAAK,YACL,IAAK,aACL,IAAK,aACL,IAAK,UACL,IAAK,eACL,IAAK,cACL,IAAK,UACL,IAAK,YACJo/E,EAAM9jE,GAAStb,EACf,MACD,IAAK,gBACW,IAAVA,IAAiBo/E,EAAKp6C,a9HzSP,G8H0SL,SAAVhlC,IAAmBo/E,EAAKp6C,a9H3SX,G8H4SlB,MACD,QACC1iC,QAAQC,MAAO,2CAA4C+Y,EAAMtb,IAcpE,MAPmB,sBAAdo/E,EAAK/7E,aAAsC+7E,EAAKphD,SAClC,sBAAdohD,EAAK/7E,aAAsC+7E,EAAKlhD,SAEhDkhD,EAAKnmD,QAAU,IAAImmD,EAAK5oC,aAAc,GAE3Ci/C,GAAeG,YAAav4E,GAErBo4E,GAAevtD,MAAOk3C,WEzU5B8Z,GAAc,CAEjBC,WAAY,SAAWh1F,GAEtB,GAA4B,oBAAhBi1F,YAEX,OAAO,IAAIA,aAAcC,OAAQl1F,GASlC,IAFA,IAAIyB,EAAI,GAEErG,EAAI,EAAG+f,EAAKnb,EAAM9B,OAAQ9C,EAAI+f,EAAI/f,IAG3CqG,GAAK0hD,OAAOgyC,aAAcn1F,EAAO5E,IAKlC,OAAOgyF,mBAAoBgI,OAAQ3zF,KAIpC4zF,eAAgB,SAAW77E,GAE1B,IAAI7Z,EAAQ6Z,EAAI87E,YAAa,KAE7B,OAAiB,IAAZ31F,EAAuB,KAErB6Z,EAAIg/D,OAAQ,EAAG74E,EAAQ,KC/BhC,SAAS41F,KAERj2D,GAASn/B,KAAMrC,MAEfA,KAAKoB,KAAO,QAIbq2F,GAAMv2F,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQ2mB,GAAStgC,WAAa,CAErEkC,YAAaq0F,GAEbC,SAAS,mCCZNC,GAAiB,CAGpBC,WAAY,SAAW11F,EAAO21F,EAAMC,GAEnC,OAAKH,GAAeI,aAAc71F,GAI1B,IAAIA,EAAMkB,YAAalB,EAAMw9B,SAAUm4D,OAAah3F,IAAPi3F,EAAmBA,EAAK51F,EAAM9B,SAI5E8B,EAAMC,MAAO01F,EAAMC,IAK3BE,aAAc,SAAW91F,EAAOd,EAAM62F,GAErC,OAAO/1F,IACH+1F,GAAc/1F,EAAMkB,cAAgBhC,EAAcc,EAEf,iBAA3Bd,EAAKm+B,kBAET,IAAIn+B,EAAMc,GAIXopB,MAAMpqB,UAAUiB,MAAME,KAAMH,IAIpC61F,aAAc,SAAWp6E,GAExB,OAAOu6E,YAAYC,OAAQx6E,MACrBA,aAAkBy6E,WAKzBC,iBAAkB,SAAWC,GAU5B,IAFA,IAAIr6F,EAAIq6F,EAAMl4F,OACV66D,EAAS,IAAI3vC,MAAOrtB,GACdX,EAAI,EAAGA,IAAMW,IAAMX,EAAI29D,EAAQ39D,GAAMA,EAI/C,OAFA29D,EAAOjuB,KAVP,SAAsB1vC,EAAGwiB,GAExB,OAAOw4E,EAAOh7F,GAAMg7F,EAAOx4E,KAUrBm7C,GAKRs9B,YAAa,SAAWzyD,EAAQ0yD,EAAQvvF,GAKvC,IAHA,IAAIwvF,EAAU3yD,EAAO1lC,OACjB66D,EAAS,IAAIn1B,EAAO1iC,YAAaq1F,GAE3Bn7F,EAAI,EAAGwT,EAAY,EAAGA,IAAc2nF,IAAYn7F,EAIzD,IAFA,IAAIo7F,EAAYzvF,EAAO3L,GAAMk7F,EAEnB14E,EAAI,EAAGA,IAAM04E,IAAW14E,EAEjCm7C,EAAQnqD,KAAiBg1B,EAAQ4yD,EAAY54E,GAM/C,OAAOm7C,GAKR09B,YAAa,SAAWC,EAAUN,EAAOxyD,EAAQ+yD,GAIhD,IAFA,IAAIv7F,EAAI,EAAGyoC,EAAM6yD,EAAU,QAEX/3F,IAARklC,QAAkDllC,IAA7BklC,EAAK8yD,IAEjC9yD,EAAM6yD,EAAUt7F,KAIjB,QAAauD,IAARklC,EAAL,CAEA,IAAIhoC,EAAQgoC,EAAK8yD,GACjB,QAAeh4F,IAAV9C,EAEL,GAAKutB,MAAMC,QAASxtB,GAEnB,QAIgB8C,KAFf9C,EAAQgoC,EAAK8yD,MAIZP,EAAM72F,KAAMskC,EAAI+yD,MAChBhzD,EAAOrkC,KAAK4kE,MAAOvgC,EAAQ/nC,IAI5BgoC,EAAM6yD,EAAUt7F,gBAECuD,IAARklC,QAEJ,QAAuBllC,IAAlB9C,EAAMoI,QAIjB,QAIgBtF,KAFf9C,EAAQgoC,EAAK8yD,MAIZP,EAAM72F,KAAMskC,EAAI+yD,MAChB/6F,EAAMoI,QAAS2/B,EAAQA,EAAO1lC,SAI/B2lC,EAAM6yD,EAAUt7F,gBAECuD,IAARklC,QAMV,QAIgBllC,KAFf9C,EAAQgoC,EAAK8yD,MAIZP,EAAM72F,KAAMskC,EAAI+yD,MAChBhzD,EAAOrkC,KAAM1D,IAIdgoC,EAAM6yD,EAAUt7F,gBAECuD,IAARklC,MC/Ib,SAASgzD,GAAqB1/E,EAAMi/E,EAAOxyD,EAAQkzD,GAElDC,GAAc52F,KAAMrC,KAAMqZ,EAAMi/E,EAAOxyD,EAAQkzD,GCFhD,SAASE,GAAsB7/E,EAAMi/E,EAAOxyD,GAE3CmzD,GAAc52F,KAAMrC,KAAMqZ,EAAMi/E,EAAOxyD,GCOxC,SAASqzD,GAAaC,EAAoBC,EAAcC,EAAYC,GAEnEv5F,KAAKo5F,mBAAqBA,EAC1Bp5F,KAAKw5F,aAAe,EAEpBx5F,KAAKu5F,kBAAgC14F,IAAjB04F,EACnBA,EAAe,IAAIF,EAAaj2F,YAAak2F,GAC9Ct5F,KAAKq5F,aAAeA,EACpBr5F,KAAKy5F,UAAYH,ECrBlB,SAASI,GAA6BN,EAAoBC,EAAcC,EAAYC,GAEnFJ,GAAY92F,KAAMrC,KAAMo5F,EAAoBC,EAAcC,EAAYC,GCEvE,SAASI,GAAyBtgF,EAAMi/E,EAAOxyD,EAAQkzD,GAEtDC,GAAc52F,KAAMrC,KAAMqZ,EAAMi/E,EAAOxyD,EAAQkzD,GCHhD,SAASY,GAAoBvgF,EAAMi/E,EAAOxyD,EAAQkzD,GAEjDC,GAAc52F,KAAMrC,KAAMqZ,EAAMi/E,EAAOxyD,EAAQkzD,GCHhD,SAASa,GAAqBxgF,EAAMi/E,EAAOxyD,EAAQkzD,GAElDC,GAAc52F,KAAMrC,KAAMqZ,EAAMi/E,EAAOxyD,EAAQkzD,GCChD,SAASc,GAAkBV,EAAoBC,EAAcC,EAAYC,GAExEJ,GAAY92F,KAAMrC,KAAMo5F,EAAoBC,EAAcC,EAAYC,GAEtEv5F,KAAK+5F,aAAgB,EACrB/5F,KAAKg6F,aAAgB,EACrBh6F,KAAKi6F,aAAgB,EACrBj6F,KAAKk6F,aAAgB,ECftB,SAASC,GAAmBf,EAAoBC,EAAcC,EAAYC,GAEzEJ,GAAY92F,KAAMrC,KAAMo5F,EAAoBC,EAAcC,EAAYC,GCEvE,SAASa,GAAqBhB,EAAoBC,EAAcC,EAAYC,GAE3EJ,GAAY92F,KAAMrC,KAAMo5F,EAAoBC,EAAcC,EAAYC,GCcvE,SAASN,GAAe5/E,EAAMi/E,EAAOxyD,EAAQkzD,GAE5C,QAAcn4F,IAATwY,EAAqB,MAAM,IAAIpW,MAAO,gDAC3C,QAAepC,IAAVy3F,GAAwC,IAAjBA,EAAMl4F,OAAe,MAAM,IAAI6C,MAAO,oDAAsDoW,GAExHrZ,KAAKqZ,KAAOA,EAEZrZ,KAAKs4F,MAAQX,GAAeK,aAAcM,EAAOt4F,KAAKq6F,gBACtDr6F,KAAK8lC,OAAS6xD,GAAeK,aAAclyD,EAAQ9lC,KAAKs6F,iBAExDt6F,KAAKu6F,iBAAkBvB,GAAiBh5F,KAAKw6F,sBAE7Cx6F,KAAKy6F,WACLz6F,KAAK06F,qtBVpBN3B,GAAoB73F,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQo+E,GAAc/3F,WAAa,CAExFkC,YAAa21F,GAEb4B,cAAe,SACfL,gBAAiBhvE,MAEjBkvE,qBnI8FgC,KmI5FhCI,oCAAgC/5F,EAEhCg6F,oCAAgCh6F,ICXjCq4F,GAAqBh4F,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQo+E,GAAc/3F,WAAa,CAEzFkC,YAAa81F,GAEbyB,cAAe,OACfL,gBAAiBhvE,MAEjBkvE,qBpI8FgC,KoI5FhCI,oCAAgC/5F,EAChCg6F,oCAAgCh6F,ICKjCG,OAAOC,OAAQk4F,GAAYj4F,UAAW,CAErC45F,SAAU,SAAWr8F,GAEpB,IAAIs8F,EAAK/6F,KAAKo5F,mBACb30C,EAAKzkD,KAAKw5F,aAEVt3C,EAAK64C,EAAIt2C,GACTxC,EAAK84C,EAAIt2C,EAAK,GAEfu2C,EAAmB,CAElBC,EAAM,CAEL,IAAIjrF,EAEJkrF,EAAa,CAMZC,EAAc,KAAS18F,EAAIyjD,GAAO,CAEjC,IAAM,IAAIk5C,EAAW32C,EAAK,IAAO,CAEhC,QAAY5jD,IAAPqhD,EAAmB,CAEvB,GAAKzjD,EAAIwjD,EAAK,MAAMk5C,EAMpB,OAFA12C,EAAKs2C,EAAG36F,OACRJ,KAAKw5F,aAAe/0C,EACbzkD,KAAKq7F,UAAW52C,EAAK,EAAGhmD,EAAGwjD,GAInC,GAAKwC,IAAO22C,EAAW,MAKvB,GAHAn5C,EAAKC,EAGAzjD,GAFLyjD,EAAK64C,IAAOt2C,IAKX,MAAMw2C,EAORjrF,EAAQ+qF,EAAG36F,OACX,MAAM86F,EAMP,GAASz8F,GAAKwjD,EAiDd,MAAM+4C,EA7CL,IAAIM,EAAWP,EAAI,GAWnB,IATKt8F,EAAI68F,IAER72C,EAAK,EACLxC,EAAKq5C,GAMIF,EAAW32C,EAAK,IAAO,CAEhC,QAAY5jD,IAAPohD,EAKJ,OADAjiD,KAAKw5F,aAAe,EACbx5F,KAAKu7F,aAAc,EAAG98F,EAAGyjD,GAIjC,GAAKuC,IAAO22C,EAAW,MAKvB,GAHAl5C,EAAKD,EAGAxjD,IAFLwjD,EAAK84C,IAAOt2C,EAAK,IAKhB,MAAMw2C,EAORjrF,EAAQy0C,EACRA,EAAK,EAaP,KAAQA,EAAKz0C,GAAQ,CAEpB,IAAIwrF,EAAQ/2C,EAAKz0C,IAAY,EAExBvR,EAAIs8F,EAAIS,GAEZxrF,EAAQwrF,EAIR/2C,EAAK+2C,EAAM,EAWb,GALAt5C,EAAK64C,EAAIt2C,QAKG5jD,KAJZohD,EAAK84C,EAAIt2C,EAAK,IAOb,OADAzkD,KAAKw5F,aAAe,EACbx5F,KAAKu7F,aAAc,EAAG98F,EAAGyjD,GAIjC,QAAYrhD,IAAPqhD,EAIJ,OAFAuC,EAAKs2C,EAAG36F,OACRJ,KAAKw5F,aAAe/0C,EACbzkD,KAAKq7F,UAAW52C,EAAK,EAAGxC,EAAIxjD,GAMrCuB,KAAKw5F,aAAe/0C,EAEpBzkD,KAAKy7F,iBAAkBh3C,EAAIxC,EAAIC,GAIhC,OAAOliD,KAAK07F,aAAcj3C,EAAIxC,EAAIxjD,EAAGyjD,IAItCy5C,SAAU,KAKVC,iBAAkB,GAElBC,aAAc,WAEb,OAAO77F,KAAK27F,UAAY37F,KAAK47F,kBAI9BE,iBAAkB,SAAWj6F,GAS5B,IALA,IAAIo5D,EAASj7D,KAAKu5F,aACjBzzD,EAAS9lC,KAAKq5F,aACdb,EAASx4F,KAAKy5F,UACdvzF,EAASrE,EAAQ22F,EAERl7F,EAAI,EAAGA,IAAMk7F,IAAWl7F,EAEjC29D,EAAQ39D,GAAMwoC,EAAQ5/B,EAAS5I,GAIhC,OAAO29D,GAMRygC,aAAc,WAEb,MAAM,IAAIz4F,MAAO,4BAKlBw4F,iBAAkB,eASnBz6F,OAAOC,OAAQk4F,GAAYj4F,UAAW,CAGrCq6F,aAAcpC,GAAYj4F,UAAU46F,iBAGpCT,UAAWlC,GAAYj4F,UAAU46F,mBC9OlCpC,GAA4Bx4F,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQs+E,GAAYj4F,WAAa,CAE9FkC,YAAas2F,GAEbgC,aAAc,SAAWj3C,EAAIxC,EAAIxjD,EAAGyjD,GAUnC,IARA,IAAI+Y,EAASj7D,KAAKu5F,aACjBzzD,EAAS9lC,KAAKq5F,aACdb,EAASx4F,KAAKy5F,UAEdvzF,EAASu+C,EAAK+zC,EAEd3yF,GAAUpH,EAAIwjD,IAASC,EAAKD,GAEnBxgC,EAAMvb,EAASsyF,EAAQtyF,IAAWub,EAAKvb,GAAU,EAE1D3F,GAAWqQ,UAAWqqD,EAAQ,EAAGn1B,EAAQ5/B,EAASsyF,EAAQ1yD,EAAQ5/B,EAAQL,GAI3E,OAAOo1D,KChBT0+B,GAAwBz4F,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQo+E,GAAc/3F,WAAa,CAE5FkC,YAAau2F,GAEbgB,cAAe,aAIfH,qBvI8F8B,KuI5F9BI,+BAAgC,SAAW3/B,GAE1C,OAAO,IAAIy+B,GAA6B15F,KAAKs4F,MAAOt4F,KAAK8lC,OAAQ9lC,KAAK+7F,eAAgB9gC,IAIvF4/B,oCAAgCh6F,ICjBjC+4F,GAAmB14F,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQo+E,GAAc/3F,WAAa,CAEvFkC,YAAaw2F,GAEbe,cAAe,UCLhBd,GAAoB34F,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQo+E,GAAc/3F,WAAa,CAExFkC,YAAay2F,GAEbc,cAAe,WCIhBb,GAAiB54F,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQs+E,GAAYj4F,WAAa,CAEnFkC,YAAa02F,GAEb8B,iBAAkB,CAEjBI,Y1I4F+B,K0I3F/BC,U1I2F+B,M0IvFhCR,iBAAkB,SAAWh3C,EAAIxC,EAAIC,GAEpC,IAAI64C,EAAK/6F,KAAKo5F,mBACb8C,EAAQz3C,EAAK,EACb03C,EAAQ13C,EAAK,EAEb23C,EAAQrB,EAAImB,GACZG,EAAQtB,EAAIoB,GAEb,QAAet7F,IAAVu7F,EAEJ,OAASp8F,KAAK67F,eAAeG,aAE5B,K1I2EyB,K0IxExBE,EAAQz3C,EACR23C,EAAQ,EAAIn6C,EAAKC,EAEjB,MAED,K1IoE0B,K0IhEzBk6C,EAAQn6C,EAAK84C,EADbmB,EAAQnB,EAAG36F,OAAS,GACO26F,EAAImB,EAAQ,GAEvC,MAED,QAGCA,EAAQz3C,EACR23C,EAAQl6C,EAMX,QAAerhD,IAAVw7F,EAEJ,OAASr8F,KAAK67F,eAAeI,WAE5B,K1I6CyB,K0I1CxBE,EAAQ13C,EACR43C,EAAQ,EAAIn6C,EAAKD,EAEjB,MAED,K1IsC0B,K0InCzBk6C,EAAQ,EACRE,EAAQn6C,EAAK64C,EAAI,GAAMA,EAAI,GAE3B,MAED,QAGCoB,EAAQ13C,EAAK,EACb43C,EAAQp6C,EAMX,IAAIq6C,EAAuB,IAAZp6C,EAAKD,GACnBu2C,EAASx4F,KAAKy5F,UAEfz5F,KAAK+5F,YAAcuC,GAAWr6C,EAAKm6C,GACnCp8F,KAAKi6F,YAAcqC,GAAWD,EAAQn6C,GACtCliD,KAAKg6F,YAAckC,EAAQ1D,EAC3Bx4F,KAAKk6F,YAAciC,EAAQ3D,GAI5BkD,aAAc,SAAWj3C,EAAIxC,EAAIxjD,EAAGyjD,GAuBnC,IArBA,IAAI+Y,EAASj7D,KAAKu5F,aACjBzzD,EAAS9lC,KAAKq5F,aACdb,EAASx4F,KAAKy5F,UAEd8C,EAAK93C,EAAK+zC,EAASgE,EAAKD,EAAK/D,EAC7BiE,EAAKz8F,KAAKg6F,YAAc0C,EAAK18F,KAAKk6F,YAClCyC,EAAK38F,KAAK+5F,YAAa6C,EAAK58F,KAAKi6F,YAEjC1pF,GAAM9R,EAAIwjD,IAASC,EAAKD,GACxB84C,EAAKxqF,EAAIA,EACTssF,EAAM9B,EAAKxqF,EAIRusF,GAAOH,EAAKE,EAAM,EAAIF,EAAK5B,EAAK4B,EAAKpsF,EACrC+wC,GAAO,EAAIq7C,GAAOE,IAAU,IAAM,EAAIF,GAAO5B,IAAS,GAAM4B,GAAOpsF,EAAI,EACvEgC,IAAS,EAAIqqF,GAAOC,GAAQ,IAAMD,GAAO7B,EAAK,GAAMxqF,EACpDwsF,EAAKH,EAAKC,EAAMD,EAAK7B,EAIfz9F,EAAI,EAAGA,IAAMk7F,IAAWl7F,EAEjC29D,EAAQ39D,GACNw/F,EAAKh3D,EAAQ22D,EAAKn/F,GAClBgkD,EAAKxb,EAAQ02D,EAAKl/F,GAClBiV,EAAKuzB,EAAQy2D,EAAKj/F,GAClBy/F,EAAKj3D,EAAQ42D,EAAKp/F,GAIrB,OAAO29D,KCxITk/B,GAAkBj5F,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQs+E,GAAYj4F,WAAa,CAEpFkC,YAAa+2F,GAEbuB,aAAc,SAAWj3C,EAAIxC,EAAIxjD,EAAGyjD,GAYnC,IAVA,IAAI+Y,EAASj7D,KAAKu5F,aACjBzzD,EAAS9lC,KAAKq5F,aACdb,EAASx4F,KAAKy5F,UAEduD,EAAUv4C,EAAK+zC,EACfyE,EAAUD,EAAUxE,EAEpB0E,GAAYz+F,EAAIwjD,IAASC,EAAKD,GAC9Bk7C,EAAU,EAAID,EAEL5/F,EAAI,EAAGA,IAAMk7F,IAAWl7F,EAEjC29D,EAAQ39D,GACNwoC,EAAQm3D,EAAU3/F,GAAM6/F,EACxBr3D,EAAQk3D,EAAU1/F,GAAM4/F,EAI3B,OAAOjiC,KCpBTm/B,GAAoBl5F,UAAYF,OAAOC,OAAQD,OAAO6Z,OAAQs+E,GAAYj4F,WAAa,CAEtFkC,YAAag3F,GAEbsB,aAAc,SAAWj3C,GAExB,OAAOzkD,KAAK87F,iBAAkBr3C,EAAK,MCuBrCzjD,OAAOC,OAAQg4F,GAAe,CAK7BhzD,MAAO,SAAWk3C,GAEjB,QAAmBt8E,IAAds8E,EAAK/7E,KAET,MAAM,IAAI6B,MAAO,4DAIlB,IAAIm6F,EAAYnE,GAAcoE,8BAA+BlgB,EAAK/7E,MAElE,QAAoBP,IAAfs8E,EAAKmb,MAAsB,CAE/B,IAAIA,EAAQ,GAAIxyD,EAAS,GAEzB6xD,GAAegB,YAAaxb,EAAK/3B,KAAMkzC,EAAOxyD,EAAQ,SAEtDq3C,EAAKmb,MAAQA,EACbnb,EAAKr3C,OAASA,EAKf,YAAyBjlC,IAApBu8F,EAAUn3D,MAEPm3D,EAAUn3D,MAAOk3C,GAKjB,IAAIigB,EAAWjgB,EAAK9jE,KAAM8jE,EAAKmb,MAAOnb,EAAKr3C,OAAQq3C,EAAK6b,gBAMjE/9E,OAAQ,SAAWqiF,GAElB,IAEIngB,EAFAigB,EAAYE,EAAMl6F,YAKtB,QAA0BvC,IAArBu8F,EAAUniF,OAEdkiE,EAAOigB,EAAUniF,OAAQqiF,OAEnB,CAGNngB,EAAO,CAEN9jE,KAAQikF,EAAMjkF,KACdi/E,MAASX,GAAeK,aAAcsF,EAAMhF,MAAOhtE,OACnDwa,OAAU6xD,GAAeK,aAAcsF,EAAMx3D,OAAQxa,QAItD,IAAI0tE,EAAgBsE,EAAMC,mBAErBvE,IAAkBsE,EAAM9C,uBAE5Brd,EAAK6b,cAAgBA,GAQvB,OAFA7b,EAAK/7E,KAAOk8F,EAAM3C,cAEXxd,GAIRkgB,8BAA+B,SAAWG,GAEzC,OAASA,EAAS9N,eAEjB,IAAK,SACL,IAAK,SACL,IAAK,QACL,IAAK,SACL,IAAK,UAEJ,OAAOmK,GAER,IAAK,SACL,IAAK,UACL,IAAK,UACL,IAAK,UAEJ,OAAO4D,GAER,IAAK,QAEJ,OAAO7D,GAER,IAAK,aAEJ,OAAOD,GAER,IAAK,OACL,IAAK,UAEJ,OAAOT,GAER,IAAK,SAEJ,OAAOH,GAIT,MAAM,IAAI91F,MAAO,8CAAgDu6F,MAMnEx8F,OAAOC,OAAQg4F,GAAc/3F,UAAW,CAEvCkC,YAAa61F,GAEboB,eAAgB77D,aAEhB87D,gBAAiB97D,aAEjBg8D,qB7ItD8B,K6IwD9BkD,iCAAkC,SAAWziC,GAE5C,OAAO,IAAIm/B,GAAqBp6F,KAAKs4F,MAAOt4F,KAAK8lC,OAAQ9lC,KAAK+7F,eAAgB9gC,IAI/E2/B,+BAAgC,SAAW3/B,GAE1C,OAAO,IAAIk/B,GAAmBn6F,KAAKs4F,MAAOt4F,KAAK8lC,OAAQ9lC,KAAK+7F,eAAgB9gC,IAI7E4/B,+BAAgC,SAAW5/B,GAE1C,OAAO,IAAI6+B,GAAkB95F,KAAKs4F,MAAOt4F,KAAK8lC,OAAQ9lC,KAAK+7F,eAAgB9gC,IAI5Es/B,iBAAkB,SAAWvB,GAE5B,IAAI2E,EAEJ,OAAS3E,GAER,K7IjF8B,K6ImF7B2E,EAAgB39F,KAAK09F,iCAErB,MAED,K7ItF4B,K6IwF3BC,EAAgB39F,KAAK46F,+BAErB,MAED,K7I3F4B,K6I6F3B+C,EAAgB39F,KAAK66F,+BAMvB,QAAuBh6F,IAAlB88F,EAyBL39F,KAAK49F,kBAAoBD,MAzBzB,CAEC,IAAIE,EAAU,iCACb79F,KAAK26F,cAAgB,yBAA2B36F,KAAKqZ,KAEtD,QAAgCxY,IAA3Bb,KAAK49F,kBAAkC,CAG3C,GAAK5E,IAAkBh5F,KAAKw6F,qBAM3B,MAAM,IAAIv3F,MAAO46F,GAJjB79F,KAAKu6F,iBAAkBv6F,KAAKw6F,sBAU9Bn6F,QAAQmD,KAAM,uBAAwBq6F,KASxCN,iBAAkB,WAEjB,OAASv9F,KAAK49F,mBAEb,KAAK59F,KAAK09F,iCAET,O7IxI6B,K6I0I9B,KAAK19F,KAAK46F,+BAET,O7I3I2B,K6I6I5B,KAAK56F,KAAK66F,+BAET,O7I9I2B,O6IoJ9BkB,aAAc,WAEb,OAAO/7F,KAAK8lC,OAAO1lC,OAASJ,KAAKs4F,MAAMl4F,QAKxC09F,MAAO,SAAWC,GAEjB,GAAoB,IAAfA,EAIJ,IAFA,IAAIzF,EAAQt4F,KAAKs4F,MAEPh7F,EAAI,EAAGW,EAAIq6F,EAAMl4F,OAAQ9C,IAAMW,IAAMX,EAE9Cg7F,EAAOh7F,IAAOygG,EAMhB,OAAO/9F,MAKRoO,MAAO,SAAW4vF,GAEjB,GAAmB,IAAdA,EAIJ,IAFA,IAAI1F,EAAQt4F,KAAKs4F,MAEPh7F,EAAI,EAAGW,EAAIq6F,EAAMl4F,OAAQ9C,IAAMW,IAAMX,EAE9Cg7F,EAAOh7F,IAAO0gG,EAMhB,OAAOh+F,MAMRsxD,KAAM,SAAWyhB,EAAWkrB,GAO3B,IALA,IAAI3F,EAAQt4F,KAAKs4F,MAChB4F,EAAQ5F,EAAMl4F,OACdy3F,EAAO,EACPC,EAAKoG,EAAQ,EAENrG,IAASqG,GAAS5F,EAAOT,GAAS9kB,KAEtC8kB,EAIJ,MAAiB,IAATC,GAAcQ,EAAOR,GAAOmG,KAEhCnG,EAMJ,KAFGA,EAEW,IAATD,GAAcC,IAAOoG,EAAQ,CAG5BrG,GAAQC,IAA6BD,GAAxBC,EAAK76F,KAAK9H,IAAK2iG,EAAI,IAAiB,GAEtD,IAAIU,EAASx4F,KAAK+7F,eAClB/7F,KAAKs4F,MAAQX,GAAeC,WAAYU,EAAOT,EAAMC,GACrD93F,KAAK8lC,OAAS6xD,GAAeC,WAAY53F,KAAK8lC,OAAQ+xD,EAAOW,EAAQV,EAAKU,GAI3E,OAAOx4F,MAKRy6F,SAAU,WAET,IAAI0D,GAAQ,EAER1E,EAAYz5F,KAAK+7F,eAChBtC,EAAYx8F,KAAK8B,MAAO06F,IAAgB,IAE5Cp5F,QAAQC,MAAO,oDAAqDN,MACpEm+F,GAAQ,GAIT,IAAI7F,EAAQt4F,KAAKs4F,MAChBxyD,EAAS9lC,KAAK8lC,OAEdo4D,EAAQ5F,EAAMl4F,OAEA,IAAV89F,IAEJ79F,QAAQC,MAAO,uCAAwCN,MACvDm+F,GAAQ,GAMT,IAFA,IAAIC,EAAW,KAEL9gG,EAAI,EAAGA,IAAM4gG,EAAO5gG,IAAO,CAEpC,IAAI+gG,EAAW/F,EAAOh7F,GAEtB,GAAyB,iBAAb+gG,GAAyBnrD,MAAOmrD,GAAa,CAExDh+F,QAAQC,MAAO,mDAAoDN,KAAM1C,EAAG+gG,GAC5EF,GAAQ,EACR,MAID,GAAkB,OAAbC,GAAqBA,EAAWC,EAAW,CAE/Ch+F,QAAQC,MAAO,0CAA2CN,KAAM1C,EAAG+gG,EAAUD,GAC7ED,GAAQ,EACR,MAIDC,EAAWC,EAIZ,QAAgBx9F,IAAXilC,GAEC6xD,GAAeI,aAAcjyD,GAE3B,CAAIxoC,EAAI,EAAd,IAAM,IAAWW,EAAI6nC,EAAO1lC,OAAQ9C,IAAMW,IAAMX,EAAI,CAEnD,IAAIS,EAAQ+nC,EAAQxoC,GAEpB,GAAK41C,MAAOn1C,GAAU,CAErBsC,QAAQC,MAAO,oDAAqDN,KAAM1C,EAAGS,GAC7EogG,GAAQ,EACR,QAUJ,OAAOA,GAMRzD,SAAU,WAWT,IATA,IAAIpC,EAAQt4F,KAAKs4F,MAChBxyD,EAAS9lC,KAAK8lC,OACd0yD,EAASx4F,KAAK+7F,eAEduC,E7I3T4B,O6I2TNt+F,KAAKu9F,mBAE3BgB,EAAa,EACb/yC,EAAY8sC,EAAMl4F,OAAS,EAElB9C,EAAI,EAAGA,EAAIkuD,IAAcluD,EAAI,CAEtC,IAAIkhG,GAAO,EAEP1F,EAAOR,EAAOh7F,GAKlB,GAAKw7F,IAJUR,EAAOh7F,EAAI,KAIQ,IAANA,GAAWw7F,IAASA,EAAM,IAErD,GAAOwF,EAwBNE,GAAO,OAhBP,IAJA,IAAIt4F,EAAS5I,EAAIk7F,EAChBiG,EAAUv4F,EAASsyF,EACnBkG,EAAUx4F,EAASsyF,EAEV14E,EAAI,EAAGA,IAAM04E,IAAW14E,EAAI,CAErC,IAAI/hB,EAAQ+nC,EAAQ5/B,EAAS4Z,GAE7B,GAAK/hB,IAAU+nC,EAAQ24D,EAAU3+E,IAChC/hB,IAAU+nC,EAAQ44D,EAAU5+E,GAAM,CAElC0+E,GAAO,EACP,rssDCjaP,SAAwBh5D,GAMvB,IAAI+gC,OAAgC1lE,KAFpC2kC,EAAaA,GAAc,IAEF7pB,OAAuB6pB,EAAW7pB,OAASE,SAASC,gBAAiB,+BAAgC,UAC7H6iF,OAAkC99F,IAAvB2kC,EAAWzpB,QAAwBypB,EAAWzpB,QAAU,KAEnE6iF,OAA8B/9F,IAArB2kC,EAAW3/B,OAAsB2/B,EAAW3/B,MACrDg5F,OAA8Bh+F,IAArB2kC,EAAW9I,OAAsB8I,EAAW9I,MACrDoiE,OAAkCj+F,IAAvB2kC,EAAW27B,SAAwB37B,EAAW27B,QACzD49B,OAAsCl+F,IAAzB2kC,EAAWw5D,WAA0Bx5D,EAAWw5D,UAC7DC,OAAwDp+F,IAAlC2kC,EAAWmQ,oBAAmCnQ,EAAWmQ,mBAC/EupD,OAA8Dr+F,IAArC2kC,EAAW25D,uBAAsC35D,EAAW25D,sBACrFC,OAAkDv+F,IAA/B2kC,EAAW65D,gBAAgC75D,EAAW65D,gBAAkB,UAExFC,EAAoB,KACpBC,EAAqB,KAIzBv/F,KAAKw/F,WAAaj5B,EAClBvmE,KAAK+b,QAAU,KAIf/b,KAAK04C,WAAY,EACjB14C,KAAK44C,gBAAiB,EACtB54C,KAAK64C,gBAAiB,EACtB74C,KAAK84C,kBAAmB,EAIxB94C,KAAKy/F,aAAc,EAInBz/F,KAAKi1C,eAAiB,GACtBj1C,KAAK47C,sBAAuB,EAI5B57C,KAAK81B,YAAc,EACnB91B,KAAK20D,YAAa,EAClB30D,KAAK00D,aAAc,EAInB10D,KAAKkwD,yBAA0B,EAI/BlwD,KAAKmwD,YAAc73D,EACnB0H,KAAK0/F,oBAAsB,EAC3B1/F,KAAK2/F,sBAAwB,EAG7B3/F,KAAK4/F,UAAY,KACjB5/F,KAAK6/F,sBAAwB,KAC7B7/F,KAAK8/F,iBAAmB,IAAIC,MAAMhgG,QAAS,EAAG,GAI9CC,KAAK80D,gBAAkB,EACvB90D,KAAK+0D,gBAAkB,EAIvB,IAyDIkH,EAqDAxlB,EAAYic,EAAchb,EAAOwB,EACjCtf,EAAYxe,EAAUsD,EAAYsmB,EAAYsxC,EAC9C0pB,EAAcC,EAAarnC,EAE3BngB,EAAYynD,EAAcC,EAAgBC,EAC1CC,EAEA3hC,EArHA4hC,EAAQtgG,KAEXugG,GAAiB,EAIjBC,EAAuB,KACvBC,EAAsB,KACtBC,GAAuB,EACvBC,EAA0B,GAE1BC,EAAiB,KACjBC,EAAsB,KAEtBC,EAAmB,IAAI1jE,GACvB2jE,EAAkB,IAAI3jE,GACtB4jE,EAAsB,KAItBC,EAAoB,EAIpBC,EAAS36B,EAAQhkE,MACjB4+F,EAAU56B,EAAQ7jE,OAElB0+F,EAAc,EAEdC,EAAY,IAAIjkE,GAAS,EAAG,EAAG8jE,EAAQC,GACvCG,EAAW,IAAIlkE,GAAS,EAAG,EAAG8jE,EAAQC,GACtCI,GAAe,EAIf9nC,EAAW,IAAIl/C,GAIfinF,EAAY,IAAI/lD,GAChBgmD,GAAmB,EACnBC,IAAwB,EAIxBhoC,GAAoB,IAAIz5D,GAExB0hG,GAAW,IAAI7gG,GAEhB,SAAS8gG,KAER,OAAgC,OAAzBpB,EAAgCY,EAAc,EAQtD,IAEC,IAAIS,GAAoB,CACvBh8F,MAAO+4F,EACPliE,MAAOmiE,EACP19B,QAAS29B,EACTE,UAAWD,EACXppD,mBAAoBspD,EACpBE,sBAAuBD,EACvBG,gBAAiBD,GAUlB,GALA74B,EAAQplE,iBAAkB,mBAAoB2gG,IAAe,GAC7Dv7B,EAAQplE,iBAAkB,uBAAwB4gG,IAAkB,GAIvD,QAFb9lC,EAAM0iC,GAAYp4B,EAAQvqD,WAAY,QAAS6lF,KAAuBt7B,EAAQvqD,WAAY,qBAAsB6lF,KAI/G,MAAuC,OAAlCt7B,EAAQvqD,WAAY,SAElB,IAAI/Y,MAAO,+DAIX,IAAIA,MAAO,sCAQmBpC,IAAjCo7D,EAAIpiB,2BAERoiB,EAAIpiB,yBAA2B,WAE9B,MAAO,CAAEmoD,SAAY,EAAGC,SAAY,EAAGv1D,UAAa,KAMrD,MAAQpsC,GAETD,QAAQC,MAAO,wBAA0BA,EAAMu9F,SAahD,SAASqE,MAERzrD,EAAa,IAAI0G,GAAiB8e,IACvBz5D,IAAK,uBAChBi0C,EAAWj0C,IAAK,qBAChBi0C,EAAWj0C,IAAK,4BAChBi0C,EAAWj0C,IAAK,0BAChBi0C,EAAWj0C,IAAK,iCAChBi0C,EAAWj0C,IAAK,4BAChBi0C,EAAWj0C,IAAK,0BAChBi0C,EAAWj0C,IAAK,0BAEhBk8D,EAAQ,IAAIuN,GAAYhQ,EAAKxlB,GAE7Bic,EAAe,IAAIhZ,GAAmBuiB,EAAKxlB,EAAYjR,IAEvDkS,EAAQ,IAAI+mB,GAAYxC,EAAKxlB,EAAYioB,IACnC1F,QAAS+nC,EAAgB19F,KAAMi+F,GAAWn9F,eAAgBi9F,IAChE1pD,EAAMwhB,SAAU4nC,EAAiBz9F,KAAMg+F,GAAYl9F,eAAgBi9F,IAEnEloD,EAAO,IAAIiF,GAAW8d,GACtBriC,EAAa,IAAI+7B,GACjBv6C,EAAW,IAAIkrD,GAAerK,EAAKxlB,EAAYiB,EAAO9d,EAAY84B,EAAcgM,EAAOxlB,GACvFx6B,EAAa,IAAI2e,GAAiB4+B,GAClCj3B,EAAa,IAAIqY,GAAiB4e,EAAKv9C,EAAYw6B,GACnDo9B,EAAU,IAAIx2B,GAAc9a,EAAYkU,GACxCgnD,EAAe,IAAI9gD,GAAmB6c,GACtC+jC,EAAe,IAAIvtC,GAAe6tC,EAAO7pD,EAAYic,GACrDutC,EAAc,IAAI9pC,GAClByC,EAAe,IAAID,GAEnBlgB,EAAa,IAAIjB,GAAiB8oD,EAAO5oD,EAAO1S,EAAYi6D,GAE5DkB,EAAiB,IAAIlnD,GAAqBgjB,EAAKxlB,EAAYyC,GAC3DknD,EAAwB,IAAIpiD,GAA4Bie,EAAKxlB,EAAYyC,GAEzEmnD,EAAiB,IAAIvjC,GAAqBwjC,EAAOrkC,EAAKvkB,EAAOt8B,EAAUs3C,GAEvExZ,EAAKsF,SAAWwhD,EAAaxhD,SAE7B8hD,EAAMvkF,QAAUkgD,EAChBqkC,EAAM5tC,aAAeA,EACrB4tC,EAAM7pD,WAAaA,EACnB6pD,EAAM1mE,WAAaA,EACnB0mE,EAAML,YAAcA,EACpBK,EAAM5oD,MAAQA,EACd4oD,EAAMpnD,KAAOA,EAIdgpD,KAIA,IAAIC,GAAK,IAAIxzB,GAAc2xB,GAE3BtgG,KAAKmiG,GAAKA,GAIV,IAAI/sC,GAAY,IAAIkE,GAAgBgnC,EAAOhqB,EAAS5jB,EAAalY,gBAyNjE,SAASsnD,GAAe9/F,GAEvBA,EAAMogG,iBAIN7B,GAAiB,EAIlB,SAASwB,KAIRxB,GAAiB,EAEjB2B,KAID,SAASG,GAAmBrgG,GAE3B,IAAI0jC,EAAW1jC,EAAMC,OAErByjC,EAAS/jC,oBAAqB,UAAW0gG,IAQ1C,SAA6B38D,GAE5B48D,GAAiC58D,GAEjC9L,EAAW8D,OAAQgI,GAVnB68D,CAAoB78D,GAerB,SAAS48D,GAAiC58D,GAEzC,IAAI8vB,EAAc57B,EAAWp3B,IAAKkjC,GAAW6Z,QAE7C7Z,EAAS6Z,aAAU1+C,OAEEA,IAAhB20D,GAEJwqC,EAAavqC,eAAgBD,GAxQ/Bx1D,KAAKo1D,UAAYA,GAIjBp1D,KAAKgc,WAAa,WAEjB,OAAOigD,GAIRj8D,KAAKwiG,qBAAuB,WAE3B,OAAOvmC,EAAIumC,wBAIZxiG,KAAKyiG,iBAAmB,WAEvB,IAAIlpD,EAAY9C,EAAWj0C,IAAK,sBAC3B+2C,GAAYA,EAAUmpD,eAI5B1iG,KAAK2iG,oBAAsB,WAE1B,IAAIppD,EAAY9C,EAAWj0C,IAAK,sBAC3B+2C,GAAYA,EAAUqpD,kBAI5B5iG,KAAKiwE,cAAgB,WAEpB,OAAOmxB,GAIRphG,KAAK6iG,cAAgB,SAAW9kG,QAEhB8C,IAAV9C,IAELqjG,EAAcrjG,EAEdiC,KAAK60E,QAASqsB,EAAQC,GAAS,KAIhCnhG,KAAK+d,QAAU,WAEd,MAAO,CACNxb,MAAO2+F,EACPx+F,OAAQy+F,IAKVnhG,KAAK60E,QAAU,SAAWtyE,EAAOG,EAAQogG,GAExC,IAAIl0B,EAASuzB,GAAG/xB,YAEXxB,GAAUA,EAAOgB,aAErBvvE,QAAQmD,KAAM,0EAKf09F,EAAS3+F,EACT4+F,EAAUz+F,EAEV6jE,EAAQhkE,MAAQA,EAAQ6+F,EACxB76B,EAAQ7jE,OAASA,EAAS0+F,GAEL,IAAhB0B,IAEJv8B,EAAQnxC,MAAM7yB,MAAQA,EAAQ,KAC9BgkE,EAAQnxC,MAAM1yB,OAASA,EAAS,MAIjC1C,KAAK+iG,YAAa,EAAG,EAAGxgG,EAAOG,KAIhC1C,KAAKgjG,qBAAuB,WAE3B,MAAO,CACNzgG,MAAO2+F,EAASE,EAChB1+F,OAAQy+F,EAAUC,IAKpBphG,KAAKkwE,qBAAuB,SAAW3tE,EAAOG,EAAQugG,GAErD/B,EAAS3+F,EACT4+F,EAAUz+F,EAEV0+F,EAAc6B,EAEd18B,EAAQhkE,MAAQA,EAAQ0gG,EACxB18B,EAAQ7jE,OAASA,EAASugG,EAE1BjjG,KAAK+iG,YAAa,EAAG,EAAGxgG,EAAOG,IAIhC1C,KAAKkjG,mBAAqB,WAEzB,OAAOpC,GAIR9gG,KAAK+iG,YAAc,SAAWztG,EAAGC,EAAGgN,EAAOG,GAE1C2+F,EAAU5+F,IAAKnN,EAAG6rG,EAAU5rG,EAAImN,EAAQH,EAAOG,GAC/Cg1C,EAAMwhB,SAAU4nC,EAAiBz9F,KAAMg+F,GAAYl9F,eAAgBi9F,KAIpEphG,KAAKmjG,WAAa,SAAW7tG,EAAGC,EAAGgN,EAAOG,GAEzC4+F,EAAS7+F,IAAKnN,EAAG6rG,EAAU5rG,EAAImN,EAAQH,EAAOG,GAC9Cg1C,EAAMshB,QAAS+nC,EAAgB19F,KAAMi+F,GAAWn9F,eAAgBi9F,KAIjEphG,KAAKq8D,eAAiB,SAAW+mC,GAEhC1rD,EAAM2kB,eAAgBklC,EAAe6B,IAMtCpjG,KAAKi4C,cAAgB,WAEpB,OAAOQ,EAAWR,iBAInBj4C,KAAKk4C,cAAgB,WAEpBO,EAAWP,cAAcmuB,MAAO5tB,EAAYt4C,YAI7CH,KAAKm4C,cAAgB,WAEpB,OAAOM,EAAWN,iBAInBn4C,KAAKo4C,cAAgB,WAEpBK,EAAWL,cAAciuB,MAAO5tB,EAAYt4C,YAI7CH,KAAK24C,MAAQ,SAAWljB,EAAOiH,EAAOykC,GAErC,IAAIkiC,EAAO,QAEIxiG,IAAV40B,GAAuBA,KAAQ4tE,GAAQpnC,EAAIqnC,wBACjCziG,IAAV67B,GAAuBA,KAAQ2mE,GAAQpnC,EAAIsnC,wBAC/B1iG,IAAZsgE,GAAyBA,KAAUkiC,GAAQpnC,EAAIunC,oBAEpDvnC,EAAItjB,MAAO0qD,IAIZrjG,KAAK83C,WAAa,WAEjB93C,KAAK24C,OAAO,GAAM,GAAO,IAI1B34C,KAAKggE,WAAa,WAEjBhgE,KAAK24C,OAAO,GAAO,GAAM,IAI1B34C,KAAKohE,aAAe,WAEnBphE,KAAK24C,OAAO,GAAO,GAAO,IAI3B34C,KAAKyjG,YAAc,SAAW77B,EAAcnyC,EAAOiH,EAAOykC,GAEzDnhE,KAAK28D,gBAAiBiL,GACtB5nE,KAAK24C,MAAOljB,EAAOiH,EAAOykC,IAM3BnhE,KAAKsc,QAAU,WAEdiqD,EAAQ5kE,oBAAqB,mBAAoBmgG,IAAe,GAChEv7B,EAAQ5kE,oBAAqB,uBAAwBogG,IAAkB,GAEvE9B,EAAY3jF,UACZs8C,EAAat8C,UACbsd,EAAWtd,UACXg6D,EAAQh6D,UAER6lF,GAAG7lF,UAEHonF,MAyED1jG,KAAK2jG,sBAAwB,SAAWhmF,EAAQ4hC,EAAS7Z,GAExDgS,EAAMkmB,iBAEN,IAAIrgC,EAAU3D,EAAWp3B,IAAKmb,GAEzBA,EAAOimF,eAAkBrmE,EAAQluB,WAAWkuB,EAAQluB,SAAW4sD,EAAI99B,gBACnExgB,EAAOkmF,aAAgBtmE,EAAQ5mB,SAAS4mB,EAAQ5mB,OAASslD,EAAI99B,gBAC7DxgB,EAAOmmF,SAAYvmE,EAAQ/gB,KAAK+gB,EAAQ/gB,GAAKy/C,EAAI99B,gBACjDxgB,EAAOomF,YAAexmE,EAAQ9H,QAAQ8H,EAAQ9H,MAAQwmC,EAAI99B,gBAE/D,IAAI6lE,EAAoBzkD,EAAQ0S,gBAYhC,GAVKt0C,EAAOimF,eAEX3nC,EAAI79B,WAAY69B,EAAIpe,aAActgB,EAAQluB,UAC1C4sD,EAAI59B,WAAY49B,EAAIpe,aAAclgC,EAAOsmF,cAAehoC,EAAIh+B,cAE5DyZ,EAAMmmB,gBAAiBmmC,EAAkB30F,UACzC4sD,EAAI+B,oBAAqBgmC,EAAkB30F,SAAU,EAAG4sD,EAAI19B,OAAO,EAAO,EAAG,IAIzE5gB,EAAOkmF,WAAa,CAIxB,GAFA5nC,EAAI79B,WAAY69B,EAAIpe,aAActgB,EAAQ5mB,SAEnC+uB,EAASstD,sBACbttD,EAASwxC,yBACTxxC,EAAS0tD,uBACc,IAAzB1tD,EAAS4O,YAET,IAAM,IAAIh3C,EAAI,EAAG8E,EAAmB,EAAfub,EAAOxQ,MAAW7P,EAAI8E,EAAG9E,GAAK,EAAI,CAEtD,IAAI4E,EAAQyb,EAAOumF,YAEfC,GAAOjiG,EAAO5E,EAAI,GAAM4E,EAAO5E,EAAI,GAAM4E,EAAO5E,EAAI,IAAQ,EAC5D8mG,GAAOliG,EAAO5E,EAAI,GAAM4E,EAAO5E,EAAI,GAAM4E,EAAO5E,EAAI,IAAQ,EAC5D+mG,GAAOniG,EAAO5E,EAAI,GAAM4E,EAAO5E,EAAI,GAAM4E,EAAO5E,EAAI,IAAQ,EAEhE4E,EAAO5E,EAAI,GAAM6mG,EACjBjiG,EAAO5E,EAAI,GAAM8mG,EACjBliG,EAAO5E,EAAI,GAAM+mG,EAEjBniG,EAAO5E,EAAI,GAAM6mG,EACjBjiG,EAAO5E,EAAI,GAAM8mG,EACjBliG,EAAO5E,EAAI,GAAM+mG,EAEjBniG,EAAO5E,EAAI,GAAM6mG,EACjBjiG,EAAO5E,EAAI,GAAM8mG,EACjBliG,EAAO5E,EAAI,GAAM+mG,EAMnBpoC,EAAI59B,WAAY49B,EAAIpe,aAAclgC,EAAOumF,YAAajoC,EAAIh+B,cAE1DyZ,EAAMmmB,gBAAiBmmC,EAAkBrtF,QAEzCslD,EAAI+B,oBAAqBgmC,EAAkBrtF,OAAQ,EAAGslD,EAAI19B,OAAO,EAAO,EAAG,GAIvE5gB,EAAOmmF,QAAUp+D,EAASzO,MAE9BglC,EAAI79B,WAAY69B,EAAIpe,aAActgB,EAAQ/gB,IAC1Cy/C,EAAI59B,WAAY49B,EAAIpe,aAAclgC,EAAOqtE,QAAS/uB,EAAIh+B,cAEtDyZ,EAAMmmB,gBAAiBmmC,EAAkBxnF,IAEzCy/C,EAAI+B,oBAAqBgmC,EAAkBxnF,GAAI,EAAGy/C,EAAI19B,OAAO,EAAO,EAAG,IAInE5gB,EAAOomF,WAAar+D,EAAS3C,eAAiB5sC,IAElD8lE,EAAI79B,WAAY69B,EAAIpe,aAActgB,EAAQ9H,OAC1CwmC,EAAI59B,WAAY49B,EAAIpe,aAAclgC,EAAO2mF,WAAYroC,EAAIh+B,cAEzDyZ,EAAMmmB,gBAAiBmmC,EAAkBvuE,OAEzCwmC,EAAI+B,oBAAqBgmC,EAAkBvuE,MAAO,EAAGwmC,EAAI19B,OAAO,EAAO,EAAG,IAI3EmZ,EAAMomB,0BAEN7B,EAAI5iB,WAAY4iB,EAAIrd,UAAW,EAAGjhC,EAAOxQ,OAEzCwQ,EAAOxQ,MAAQ,GAIhBnN,KAAKg5C,mBAAqB,SAAWrjC,EAAQyjB,EAAK9a,EAAUonB,EAAU/nB,EAAQssB,GAE7E,IAAI47B,EAAgBloD,EAAO0uB,QAAU1uB,EAAO9H,YAAYtI,cAAgB,EAExEmqC,EAAMkuB,YAAalgC,EAAUmgC,GAE7B,IAAItmB,EAAUglD,GAAY5uF,EAAQyjB,EAAKsM,EAAU/nB,GAC7C6mF,EAAkBlmF,EAAS+lB,GAAK,IAAMkb,EAAQlb,GAAK,MAA+B,IAAvBqB,EAASqQ,WAEpE0uD,GAAgB,EAEfD,IAAoB7D,IAExBA,EAA0B6D,EAC1BC,GAAgB,GAIZ9mF,EAAO8hC,wBAEXygD,EAAa/tF,OAAQwL,EAAQW,EAAUonB,EAAU6Z,GAEjDklD,GAAgB,GAMjB,IAWIp+F,EAXAxE,EAAQyc,EAASzc,MACjBwN,EAAWiP,EAASI,WAAWrP,SAC/Bq1F,EAAc,GAEU,IAAvBh/D,EAASqQ,YAEbl0C,EAAQmjC,EAAW8Y,sBAAuBx/B,GAC1ComF,EAAc,GAKf,IAAIjtD,EAAW0oD,EAEA,OAAVt+F,IAEJwE,EAAYqY,EAAWlc,IAAKX,IAE5B41C,EAAW2oD,GACFvuD,SAAUxrC,IAIfo+F,IAiHN,SAAgC/+D,EAAU6Z,EAASjhC,GAElD,GAAKA,GAAYA,EAASqmF,2BAE2B,OAA/CluD,EAAWj0C,IAAK,0BAEpBnC,QAAQC,MAAO,sJAJjB,CAWAo3C,EAAMkmB,iBAEN,IAAIjgB,EAAqBr/B,EAASI,WAE9BslF,EAAoBzkD,EAAQ0S,gBAE5B2yC,EAAiCl/D,EAASoR,uBAE9C,IAAM,IAAIz9B,KAAQ2qF,EAAoB,CAErC,IAAIa,EAAmBb,EAAmB3qF,GAE1C,GAAKwrF,GAAoB,EAAI,CAE5B,IAAIC,EAAoBnnD,EAAoBtkC,GAE5C,QAA2BxY,IAAtBikG,EAAkC,CAEtC,IAAI18D,EAAa08D,EAAkB18D,WAC/B5qB,EAAOsnF,EAAkB38D,SAEzB9hC,EAAYqY,EAAWlc,IAAKsiG,GAIhC,QAAmBjkG,IAAdwF,EAA0B,SAE/B,IAAIu3B,EAASv3B,EAAUu3B,OACnBx8B,EAAOiF,EAAUjF,KACjBk+B,EAAkBj5B,EAAUi5B,gBAEhC,GAAKwlE,EAAkBrnE,6BAA+B,CAErD,IAAIvjB,EAAO4qF,EAAkB5qF,KACzBs+E,EAASt+E,EAAKs+E,OACdtyF,EAAS4+F,EAAkB5+F,OAE1BgU,GAAQA,EAAK6qF,8BAEjBrtD,EAAM4tB,0BAA2Bu/B,EAAkB3qF,EAAKqrD,uBAEpB1kE,IAA/Byd,EAASm7B,oBAEbn7B,EAASm7B,kBAAoBv/B,EAAKqrD,iBAAmBrrD,EAAK/M,QAM3DuqC,EAAMmmB,gBAAiBgnC,GAIxB5oC,EAAI79B,WAAY69B,EAAIpe,aAAcjgB,GAClCq+B,EAAI+B,oBAAqB6mC,EAAkBrnF,EAAMpc,EAAMgnC,EAAYowD,EAASl5D,EAAiBp5B,EAASo5B,QAIjGwlE,EAAkBE,4BAEtBttD,EAAM4tB,0BAA2Bu/B,EAAkBC,EAAkBv/B,uBAEjC1kE,IAA/Byd,EAASm7B,oBAEbn7B,EAASm7B,kBAAoBqrD,EAAkBv/B,iBAAmBu/B,EAAkB33F,QAMrFuqC,EAAMmmB,gBAAiBgnC,GAIxB5oC,EAAI79B,WAAY69B,EAAIpe,aAAcjgB,GAClCq+B,EAAI+B,oBAAqB6mC,EAAkBrnF,EAAMpc,EAAMgnC,EAAY,EAAG,QAIjE,QAAwCvnC,IAAnC+jG,EAA+C,CAE1D,IAAI7mG,EAAQ6mG,EAAgCvrF,GAE5C,QAAexY,IAAV9C,EAEJ,OAASA,EAAMqC,QAEd,KAAK,EACJ67D,EAAIgpC,gBAAiBJ,EAAkB9mG,GACvC,MAED,KAAK,EACJk+D,EAAIipC,gBAAiBL,EAAkB9mG,GACvC,MAED,KAAK,EACJk+D,EAAIkpC,gBAAiBN,EAAkB9mG,GACvC,MAED,QACCk+D,EAAImpC,gBAAiBP,EAAkB9mG,MAY7C25C,EAAMomB,2BA5OLunC,CAAuB3/D,EAAU6Z,EAASjhC,GAE3B,OAAVzc,GAEJo6D,EAAI79B,WAAY69B,EAAIre,qBAAsBv3C,EAAUu3B,SAQtD,IAAI0nE,EAAYh1D,EAAAA,EAED,OAAVzuC,EAEJyjG,EAAYzjG,EAAMsL,WAEMtM,IAAbwO,IAEXi2F,EAAYj2F,EAASlC,OAItB,IAAIo4F,EAAajnF,EAAS+xB,UAAUhvB,MAAQqjF,EACxCc,EAAalnF,EAAS+xB,UAAUljC,MAAQu3F,EAExC7zD,EAAuB,OAAV5G,EAAiBA,EAAM5oB,MAAQqjF,EAAc,EAC1D/yD,EAAuB,OAAV1H,EAAiBA,EAAM98B,MAAQu3F,EAAcp0D,EAAAA,EAE1Dm1D,EAAYxoG,KAAK9H,IAAKowG,EAAY10D,GAClC60D,EAAUzoG,KAAK/H,IAAKowG,EAAWC,EAAaC,EAAY30D,EAAac,GAAe,EAEpFg0D,EAAY1oG,KAAK9H,IAAK,EAAGuwG,EAAUD,EAAY,GAEnD,GAAmB,IAAdE,EAAL,CAIA,GAAKhoF,EAAO0uB,OAEX,IAA4B,IAAvB3G,EAASqQ,UAEb2B,EAAMouB,aAAcpgC,EAASsQ,mBAAqB4rD,MAClDnqD,EAAS2B,QAAS6iB,EAAIld,YAItB,OAASphC,EAAO25B,UAEf,KAAKj7C,GACJo7C,EAAS2B,QAAS6iB,EAAIrd,WACtB,MAED,K9IlpB8B,E8ImpB7BnH,EAAS2B,QAAS6iB,EAAIpd,gBACtB,MAED,K9IrpB4B,E8IspB3BpH,EAAS2B,QAAS6iB,EAAInd,mBAQnB,GAAKnhC,EAAOi1B,OAAS,CAE3B,IAAImzB,EAAYrgC,EAAS6Q,eAEN11C,IAAdklE,IAA0BA,EAAY,GAE3CruB,EAAMouB,aAAcC,EAAY67B,MAE3BjkF,EAAOq5D,eAEXv/B,EAAS2B,QAAS6iB,EAAIld,OAEXphC,EAAOioF,WAElBnuD,EAAS2B,QAAS6iB,EAAIhd,WAItBxH,EAAS2B,QAAS6iB,EAAIjd,iBAIZrhC,EAAOg1B,UAElB8E,EAAS2B,QAAS6iB,EAAI/c,QAIlB5gC,GAAYA,EAASqmF,0BAEpBrmF,EAASm7B,kBAAoB,GAEjChC,EAAS6B,gBAAiBh7B,EAAUmnF,EAAWE,GAMhDluD,EAASY,OAAQotD,EAAWE,KAyI9B3lG,KAAK6lG,QAAU,SAAWttD,EAAO5iC,IAEhC4pF,EAAqB3mC,EAAap2D,IAAK+1C,EAAO5iC,IAC3B+mC,OAEnBnE,EAAMn6B,SAAU,SAAWT,GAErBA,EAAO45D,UAEXgoB,EAAmBhnC,UAAW56C,GAEzBA,EAAOskB,YAEXs9D,EAAmB/mC,WAAY76C,MAQlC4hF,EAAmBjnC,YAAa3iD,GAEhC4iC,EAAMn6B,SAAU,SAAWT,GAE1B,GAAKA,EAAO+nB,SAEX,GAAKpa,MAAMC,QAAS5N,EAAO+nB,UAE1B,IAAM,IAAIpoC,EAAI,EAAGA,EAAIqgB,EAAO+nB,SAAStlC,OAAQ9C,IAE5CwoG,GAAcnoF,EAAO+nB,SAAUpoC,GAAKi7C,EAAMnf,IAAKzb,QAMhDmoF,GAAcnoF,EAAO+nB,SAAU6S,EAAMnf,IAAKzb,MAY9C,IA6yCKooF,GA7yCDC,IAAc,EACdC,GAAmB,KAYvB,SAASvC,KAERsC,IAAc,EAIf,SAASE,KAER,IAAIt3B,EAASuzB,GAAG/xB,YAEXxB,GAAUA,EAAOgB,aAErBhB,EAAOu3B,sBAAuBC,IAI9Bn3B,OAAOk3B,sBAAuBC,IAMhC,SAASA,GAAetN,IAEF,IAAhBkN,KAELC,GAAkBnN,GAElBoN,MAoTD,SAASG,GAAe/tD,EAAYC,EAAO5iC,EAAQg8D,GAElD,IAAM,IAAIr0E,EAAI,EAAG8E,EAAIk2C,EAAWl4C,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAErD,IAAI44D,EAAa5d,EAAYh7C,GAEzBqgB,EAASu4C,EAAWv4C,OACpBW,EAAW43C,EAAW53C,SACtBonB,OAAgC7kC,IAArB8wE,EAAiCzb,EAAWxwB,SAAWisC,EAClE1nC,EAAQisB,EAAWjsB,MAEvB,GAAKt0B,EAAO8/D,cAAgB,CAE3BorB,EAAsBlrF,EAItB,IAFA,IAAI+4D,EAAU/4D,EAAO+4D,QAEX5uD,EAAI,EAAGypB,EAAKmlC,EAAQtuE,OAAQ0f,EAAIypB,EAAIzpB,IAAO,CAEpD,IAAIwmF,EAAU53B,EAAS5uD,GAEvB,GAAKnC,EAAO0jB,OAAOD,KAAMklE,EAAQjlE,QAAW,CAE3C,IAAIkuC,EAAS+2B,EAAQ/2B,OAEjBj6E,EAAIi6E,EAAOj6E,EAAI4rG,EACf3rG,EAAIg6E,EAAOh6E,EAAI4rG,EACf5+F,EAAQgtE,EAAO/5E,EAAI0rG,EACnBx+F,EAAS6sE,EAAO/uE,EAAI2gG,EAExBzpD,EAAMwhB,SAAU4nC,EAAiBr+F,IAAKnN,EAAGC,EAAGgN,EAAOG,GAASyB,eAAgBi9F,IAE5ExlC,GAAcj+C,EAAQ46B,EAAO+tD,EAAShoF,EAAUonB,EAAUuE,UAQ5D42D,EAAsB,KAEtBjlC,GAAcj+C,EAAQ46B,EAAO5iC,EAAQ2I,EAAUonB,EAAUuE,IAQ5D,SAAS2xB,GAAcj+C,EAAQ46B,EAAO5iC,EAAQ2I,EAAUonB,EAAUuE,GAQjE,GANAtsB,EAAOslB,eAAgBq9D,EAAO/nD,EAAO5iC,EAAQ2I,EAAUonB,EAAUuE,GACjEs1D,EAAqB3mC,EAAap2D,IAAK+1C,EAAOsoD,GAAuBlrF,GAErEgI,EAAOkkB,gBAAgB72B,iBAAkB2K,EAAO4sB,mBAAoB5kB,EAAO9H,aAC3E8H,EAAOkE,aAAapK,gBAAiBkG,EAAOkkB,iBAEvClkB,EAAO4oF,wBAA0B,CAErC,IAAI1gC,EAAgBloD,EAAO0uB,QAAU1uB,EAAO9H,YAAYtI,cAAgB,EAExEmqC,EAAMkuB,YAAalgC,EAAUmgC,GAE7B,IAAItmB,EAAUglD,GAAY5uF,EAAQ4iC,EAAMnf,IAAKsM,EAAU/nB,GAEvDgjF,EAA0B,GA/1B5B,SAAgChjF,EAAQ4hC,EAAS7Z,GAEhD/nB,EAAO06B,OAAQ,SAAW16B,GAEzB2iF,EAAMqD,sBAAuBhmF,EAAQ4hC,EAAS7Z,KA61B9C8gE,CAAuB7oF,EAAQ4hC,EAAS7Z,QAIxC46D,EAAMtnD,mBAAoBrjC,EAAQ4iC,EAAMnf,IAAK9a,EAAUonB,EAAU/nB,EAAQssB,GAI1EtsB,EAAOulB,cAAeo9D,EAAO/nD,EAAO5iC,EAAQ2I,EAAUonB,EAAUuE,GAChEs1D,EAAqB3mC,EAAap2D,IAAK+1C,EAAOsoD,GAAuBlrF,GAItE,SAASmwF,GAAcpgE,EAAUtM,EAAKzb,GAErC,IAAI8oF,EAAqB7sE,EAAWp3B,IAAKkjC,GAErCjM,EAAS8lE,EAAmB7nD,MAAMje,OAClC2+B,EAAemnC,EAAmB7nD,MAAM0gB,aAExC5yB,EAAaw6D,EAAansC,cAC7BnuB,EAAUjM,EAAOie,MAAO0gB,EAAch/B,EAAKooE,EAAUvlD,UAAWulD,EAAUtlD,gBAAiBv+B,GAExF2wC,EAAO0xC,EAAa3qC,eAAgB3vB,EAAUF,GAE9C+Z,EAAUknD,EAAmBlnD,QAC7BmnD,GAAgB,EAEpB,QAAiB7lG,IAAZ0+C,EAGJ7Z,EAASvkC,iBAAkB,UAAWkhG,SAEhC,GAAK9iD,EAAQ+O,OAASA,EAG5Bg0C,GAAiC58D,QAE3B,GAAK+gE,EAAmBE,aAAeltE,EAAOie,MAAMzJ,KAE1DrU,EAAWznB,OAAQuzB,EAAU,aAAcjM,EAAOie,MAAMzJ,MACxDy4D,GAAgB,MAEV,CAAA,QAA6B7lG,IAAxB2kC,EAAWyuB,SAGtB,OAKAyyC,GAAgB,EAIjB,GAAKA,EAAgB,CAEpB,GAAKlhE,EAAWyuB,SAAW,CAE1B,IAAI7H,EAAS1wB,GAAW8J,EAAWyuB,UAEnCwyC,EAAmBr6C,OAAS,CAC3B/yC,KAAMqsB,EAAStkC,KACf0pB,SAAUF,GAAcznB,MAAOipD,EAAOthC,UACtC8Q,aAAcwwB,EAAOxwB,aACrBC,eAAgBuwB,EAAOvwB,qBAKxB4qE,EAAmBr6C,OAAS,CAC3B/yC,KAAMqsB,EAAStkC,KACf0pB,SAAU4a,EAAS5a,SACnB8Q,aAAc8J,EAAS9J,aACvBC,eAAgB6J,EAAS7J,gBAK3B6J,EAASwa,gBAAiBumD,EAAmBr6C,OAAQk0C,GAErD/gD,EAAUygD,EAAa1qC,eAAgB5vB,EAAU+gE,EAAmBr6C,OAAQ5mB,EAAY8oB,GAExFm4C,EAAmBlnD,QAAUA,EAC7B7Z,EAAS6Z,QAAUA,EAIpB,IAAIykD,EAAoBzkD,EAAQ0S,gBAEhC,GAAKvsB,EAAS2B,aAAe,CAE5B3B,EAASkhE,yBAA2B,EAEpC,IAAM,IAAItpG,EAAI,EAAGA,EAAIgjG,EAAMxrC,gBAAiBx3D,IAEtC0mG,EAAmB,cAAgB1mG,IAAO,GAE9CooC,EAASkhE,2BAQZ,GAAKlhE,EAAS4B,aAIb,IAFA5B,EAASmhE,yBAA2B,EAE1BvpG,EAAI,EAAGA,EAAIgjG,EAAMvrC,gBAAiBz3D,IAEtC0mG,EAAmB,cAAgB1mG,IAAO,GAE9CooC,EAASmhE,2BAQZ,IAAI/7E,EAAW27E,EAAmBr6C,OAAOthC,UAElC4a,EAASkb,kBACblb,EAAS+pB,uBACW,IAAtB/pB,EAAS8Q,WAETiwD,EAAmB34C,kBAAoB0zC,EAAUvlD,UACjDwqD,EAAmBvqD,gBAAkBslD,EAAUtlD,gBAC/CpxB,EAASmqB,eAAiBusD,EAAUzlD,SAIrC0qD,EAAmBrtE,IAAMA,EAIzBqtE,EAAmBE,WAAaltE,EAAOie,MAAMzJ,KAExCvI,EAASjM,SAIb3O,EAAS4O,kBAAkB37B,MAAQ07B,EAAOie,MAAMmf,QAChD/rC,EAAS6O,kBAAkB57B,MAAQ07B,EAAOie,MAAMsd,YAChDlqC,EAASuP,WAAWt8B,MAAQ07B,EAAOie,MAAMud,KACzCnqC,EAASwQ,eAAev9B,MAAQ07B,EAAOie,MAAMwd,SAC7CpqC,EAAS0Q,gBAAgBz9B,MAAQ07B,EAAOie,MAAMlc,gBAC9C1Q,EAASgQ,YAAY/8B,MAAQ07B,EAAOie,MAAM15B,MAC1C8M,EAASqQ,iBAAiBp9B,MAAQ07B,EAAOie,MAAMyd,KAE/CrqC,EAASmP,qBAAqBl8B,MAAQ07B,EAAOie,MAAMzd,qBACnDnP,EAASoP,wBAAwBn8B,MAAQ07B,EAAOie,MAAMxd,wBACtDpP,EAASqP,eAAep8B,MAAQ07B,EAAOie,MAAMvd,eAC7CrP,EAASsP,wBAAwBr8B,MAAQ07B,EAAOie,MAAMtd,wBACtDtP,EAAS4P,cAAc38B,MAAQ07B,EAAOie,MAAMhd,cAC5C5P,EAAS6P,iBAAiB58B,MAAQ07B,EAAOie,MAAM/c,iBAC/C7P,EAAS8P,aAAa78B,MAAQ07B,EAAOie,MAAM9c,aAC3C9P,EAAS+P,iBAAiB98B,MAAQ07B,EAAOie,MAAM7c,iBAE/C/P,EAASmQ,eAAel9B,MAAQ07B,EAAOie,MAAMzc,eAC7CnQ,EAASoQ,kBAAkBn9B,MAAQ07B,EAAOie,MAAMxc,kBAChDpQ,EAAS2Q,cAAc19B,MAAQ07B,EAAOie,MAAMjc,eAK7C,IAAIqrE,EAAeL,EAAmBlnD,QAAQK,cAC7CmnD,EACCj7C,GAAckB,aAAc85C,EAAa1/C,IAAKt8B,GAEhD27E,EAAmBM,aAAeA,EAInC,SAASxC,GAAY5uF,EAAQyjB,EAAKsM,EAAU/nB,GAE3CsjF,EAAoB,EAEpB,IAAIwF,EAAqB7sE,EAAWp3B,IAAKkjC,GACrCjM,EAAS8lE,EAAmB7nD,MAAMje,OAElCutE,IAASthE,EAAS6O,aAAe7O,EAASgQ,UAAY,GAE1D,GAAK+rD,IAECC,IAAyB/rF,IAAWirF,GAAiB,CAEzD,IAAIqG,EACHtxF,IAAWirF,GACXl7D,EAASrB,KAAOq8D,EAKjBc,EAAU1kD,SACTpX,EAASuP,eAAgBvP,EAASwP,iBAAkBxP,EAASyP,YAC7Dx/B,EAAQ8wF,EAAoBQ,IAMD,IAAzBvhE,EAASgN,mBAEuB7xC,IAA/B4lG,EAAmBlnD,QAEvB7Z,EAASgN,aAAc,EAEZhN,EAAStM,KAAOqtE,EAAmBrtE,MAAQA,EAEtDsM,EAASgN,aAAc,EAEZhN,EAASjM,QAAUgtE,EAAmBE,aAAeltE,EAAOie,MAAMzJ,KAE7EvI,EAASgN,aAAc,OAE6B7xC,IAAzC4lG,EAAmB34C,mBAC5B24C,EAAmB34C,oBAAsB0zC,EAAUvlD,WACrDwqD,EAAmBvqD,kBAAoBslD,EAAUtlD,kBAEjDxW,EAASgN,aAAc,IAMpBhN,EAASgN,cAEbozD,GAAcpgE,EAAUtM,EAAKzb,GAC7B+nB,EAASgN,aAAc,GAIxB,IA8nBuC5nB,EAAU/sB,EA9nB7CmpG,GAAiB,EACjBC,GAAkB,EAClBC,GAAgB,EAEhB7nD,EAAUknD,EAAmBlnD,QAChC8nD,EAAa9nD,EAAQK,cACrB0nD,EAAab,EAAmBr6C,OAAOthC,SAkBxC,GAhBK4sB,EAAMimB,WAAYpe,EAAQA,WAE9B2nD,GAAiB,EACjBC,GAAkB,EAClBC,GAAgB,GAIZ1hE,EAASrB,KAAOq8D,IAEpBA,EAAqBh7D,EAASrB,GAE9B8iE,GAAkB,GAIdD,GAAkBvxF,IAAWirF,EAAiB,CA6BlD,GA3BAyG,EAAWxnD,SAAUoc,EAAK,mBAAoBtmD,EAAOC,kBAEhD88C,EAAavY,wBAEjBktD,EAAWxnD,SAAUoc,EAAK,gBACzB,GAAQh/D,KAAK0C,IAAKgW,EAAOvF,IAAM,GAAQnT,KAAK2C,MAMzCghG,KAAqBC,GAAuBlrF,KAEhDirF,EAAmBC,GAAuBlrF,EAM1CwxF,GAAkB,EAClBC,GAAgB,GAOZ1hE,EAASkb,kBACblb,EAASstD,qBACTttD,EAASwxC,wBACTxxC,EAASnO,OAAS,CAElB,IAAIgwE,EAAUF,EAAWpwE,IAAIuwE,oBAEZ3mG,IAAZ0mG,GAEJA,EAAQ1nD,SAAUoc,EACjB0lC,GAASvqF,sBAAuBzB,EAAOE,eAMrC6vB,EAASstD,qBACbttD,EAAS2tD,uBACT3tD,EAASib,qBACTjb,EAASwxC,wBACTxxC,EAASkb,kBACTlb,EAASyQ,WAETkxD,EAAWxnD,SAAUoc,EAAK,aAActmD,EAAO4sB,oBAUjD,GAAKmD,EAASyQ,SAAW,CAExBkxD,EAAWv6C,YAAamP,EAAKt+C,EAAQ,cACrC0pF,EAAWv6C,YAAamP,EAAKt+C,EAAQ,qBAErC,IAAIy2C,EAAWz2C,EAAOy2C,SAEtB,GAAKA,EAAW,CAEf,IAAID,EAAQC,EAASD,MAErB,GAAKzB,EAAalX,oBAAsB,CAEvC,QAA8B36C,IAAzBuzD,EAASqzC,YAA4B,CAUzC,IAAIjqF,EAAOvgB,KAAKgI,KAAqB,EAAfkvD,EAAM/zD,QAC5Bod,EAAOzgB,GAAMyC,eAAgBge,GAC7BA,EAAOvgB,KAAK9H,IAAKqoB,EAAM,GAEvB,IAAIkqF,EAAe,IAAIlpE,aAAchhB,EAAOA,EAAO,GACnDkqF,EAAajlG,IAAK2xD,EAASszC,cAE3B,IAAID,EAAc,IAAIxtF,GAAaytF,EAAclqF,EAAMA,EAAMhjB,GAAYR,IACzEytG,EAAY/0D,aAAc,EAE1B0hB,EAASszC,aAAeA,EACxBtzC,EAASqzC,YAAcA,EACvBrzC,EAASuzC,gBAAkBnqF,EAI5B6pF,EAAWxnD,SAAUoc,EAAK,cAAe7H,EAASqzC,aAClDJ,EAAWxnD,SAAUoc,EAAK,kBAAmB7H,EAASuzC,sBAItDN,EAAWv6C,YAAamP,EAAK7H,EAAU,iBAyI1C,OAjIK+yC,IAEJE,EAAWxnD,SAAUoc,EAAK,sBAAuBqkC,EAAMZ,qBACvD2H,EAAWxnD,SAAUoc,EAAK,wBAAyBqkC,EAAMX,uBACzD0H,EAAWxnD,SAAUoc,EAAK,mBAAoBqkC,EAAMR,kBACpDuH,EAAWxnD,SAAUoc,EAAK,QAAS+qC,GAEnCK,EAAWxnD,SAAUoc,EAAK,YAAaqkC,EAAMV,WAC7CyH,EAAWxnD,SAAUoc,EAAK,wBAAyBqkC,EAAMT,uBAEpDn6D,EAASjM,SA0ekC17B,EA/dJqpG,GA+dNt8E,EA/dNw8E,GAiexB5tE,kBAAkBgZ,YAAc30C,EAEzC+sB,EAAS6O,kBAAkB+Y,YAAc30C,EACzC+sB,EAASgQ,YAAY4X,YAAc30C,EACnC+sB,EAASuP,WAAWqY,YAAc30C,EAClC+sB,EAASwQ,eAAeoX,YAAc30C,EACtC+sB,EAASqQ,iBAAiBuX,YAAc30C,GAjelCq7B,GAAOsM,EAAStM,KAwRvB,SAA6BtO,EAAUsO,GAEtCtO,EAAS0O,SAASz7B,MAAQq7B,EAAI3D,MAEzB2D,EAAIilC,OAERvzC,EAASwO,QAAQv7B,MAAQq7B,EAAIjpB,KAC7B2a,EAASyO,OAAOx7B,MAAQq7B,EAAIhpB,KAEjBgpB,EAAIy7B,YAEf/pC,EAASuO,WAAWt7B,MAAQq7B,EAAIklC,SAjS/BspC,CAAoBN,EAAYluE,GAI5BsM,EAASib,oBAEbknD,GAAuBP,EAAY5hE,GAExBA,EAAS2tD,uBAEpBwU,GAAuBP,EAAY5hE,GA6RtC,SAAiC5a,EAAU4a,GAErCA,EAASvN,cAEbrN,EAASqN,YAAYp6B,MAAQ2nC,EAASvN,aAhSrC2vE,CAAwBR,EAAY5hE,IAEzBA,EAASstD,qBAEpB6U,GAAuBP,EAAY5hE,GAE9BA,EAASytD,mBAmUjB,SAA8BroE,EAAU4a,GAEvCqiE,GAAsBj9E,EAAU4a,GAE3BA,EAASvM,cAEbrO,EAASqO,YAAYp7B,MAAQ2nC,EAASvM,aAvUpC6uE,CAAqBV,EAAY5hE,GAIjCqiE,GAAsBT,EAAY5hE,IAIxBA,EAASwxC,wBAEpB2wB,GAAuBP,EAAY5hE,GAE9BA,EAASyxC,uBAuXjB,SAAkCrsD,EAAU4a,GAE3C5a,EAASoV,UAAUniC,MAAQ2nC,EAASxF,UACpCpV,EAASqV,mBAAmBpiC,MAAQ2nC,EAASvF,mBAE7C8nE,GAAyBn9E,EAAU4a,GA1XhCwiE,CAAyBZ,EAAY5hE,GAIrCuiE,GAAyBX,EAAY5hE,IAI3BA,EAASovC,qBAEpB+yB,GAAuBP,EAAY5hE,GAoXtC,SAA+B5a,EAAU4a,GAEnCA,EAAS/M,kBAEb7N,EAAS6N,gBAAgB56B,MAAQ2nC,EAAS/M,gBAC1C7N,EAAS8N,kBAAkB76B,MAAQ2nC,EAAS9M,kBAC5C9N,EAAS+N,iBAAiB96B,MAAQ2nC,EAAS7M,kBAzX1CsvE,CAAsBb,EAAY5hE,IAEvBA,EAASi2B,wBAEpBksC,GAAuBP,EAAY5hE,GA2XtC,SAAkC5a,EAAU4a,GAEtCA,EAAS/M,kBAEb7N,EAAS6N,gBAAgB56B,MAAQ2nC,EAAS/M,gBAC1C7N,EAAS8N,kBAAkB76B,MAAQ2nC,EAAS9M,kBAC5C9N,EAAS+N,iBAAiB96B,MAAQ2nC,EAAS7M,kBAI5C/N,EAASmS,kBAAkBl/B,MAAMsF,KAAMqiC,EAASzI,mBAChDnS,EAASoS,aAAan/B,MAAQ2nC,EAASxI,aACvCpS,EAASqS,YAAYp/B,MAAQ2nC,EAASvI,YAtYpCirE,CAAyBd,EAAY5hE,IAE1BA,EAAS0tD,sBAEpByU,GAAuBP,EAAY5hE,GAsYtC,SAAgC5a,EAAU4a,GAEpCA,EAASrN,UAEbvN,EAASuN,QAAQt6B,MAAQ2nC,EAASrN,QAClCvN,EAASwN,UAAUv6B,MAAQ2nC,EAASpN,WAIhCoN,EAASlN,YAEb1N,EAAS0N,UAAUz6B,MAAQ2nC,EAASlN,UACpC1N,EAAS2N,YAAY16B,MAAMsF,KAAMqiC,EAASjN,cAItCiN,EAAS/M,kBAEb7N,EAAS6N,gBAAgB56B,MAAQ2nC,EAAS/M,gBAC1C7N,EAAS8N,kBAAkB76B,MAAQ2nC,EAAS9M,kBAC5C9N,EAAS+N,iBAAiB96B,MAAQ2nC,EAAS7M,kBAzZ1CwvE,CAAuBf,EAAY5hE,IAExBA,EAAS6wC,qBAwLvB,SAA8BzrD,EAAU4a,GAEvC5a,EAASiM,QAAQh5B,MAAQ2nC,EAASjQ,MAClC3K,EAASkM,QAAQj5B,MAAQ2nC,EAAS1O,QAzLhCsxE,CAAqBhB,EAAY5hE,GAE5BA,EAAS2xC,sBA2LjB,SAA8BvsD,EAAU4a,GAEvC5a,EAAS0R,SAASz+B,MAAQ2nC,EAASlJ,SACnC1R,EAAS2R,UAAU1+B,MAAQ2nC,EAASlJ,SAAWkJ,EAAS8a,QACxD11B,EAAS1c,MAAMrQ,MAAQ2nC,EAASt3B,MA7L7Bm6F,CAAqBjB,EAAY5hE,IAIvBA,EAASwtD,iBA6LvB,SAAgCpoE,EAAU4a,GAEzC5a,EAASiM,QAAQh5B,MAAQ2nC,EAASjQ,MAClC3K,EAASkM,QAAQj5B,MAAQ2nC,EAAS1O,QAClClM,EAAStN,KAAKzf,MAAQ2nC,EAASloB,KAAO4jF,EACtCt2E,EAAS1c,MAAMrQ,MAAkB,GAAVojG,EAEvBr2E,EAASmM,IAAIl5B,MAAQ2nC,EAASzO,IAER,OAAjByO,EAASzO,OAE0B,IAAlCyO,EAASzO,IAAIvd,kBAEjBgsB,EAASzO,IAAIlc,eAId+P,EAASoM,YAAYn5B,MAAMsF,KAAMqiC,EAASzO,IAAI5hC,SA5M7CmzG,CAAuBlB,EAAY5hE,GAExBA,EAAS0xC,mBAEpBkwB,EAAW7xE,MAAM13B,MAAQ2nC,EAASjQ,MAClC6xE,EAAWtwE,QAAQj5B,MAAQ2nC,EAAS1O,cAOXn2B,IAArBymG,EAAWmB,QAAsBnB,EAAWmB,MAAM1qG,MAAQ+4B,GAAY4xE,YACjD7nG,IAArBymG,EAAWqB,QAAsBrB,EAAWqB,MAAM5qG,MAAQ+4B,GAAY8xE,OAE3E98C,GAAciB,OAAQkP,EAAKwqC,EAAmBM,aAAcO,EAAYhH,IAIpE56D,EAASkb,mBAAoD,IAAhClb,EAASsR,qBAE1C8U,GAAciB,OAAQkP,EAAKwqC,EAAmBM,aAAcO,EAAYhH,GACxE56D,EAASsR,oBAAqB,GAM/BqwD,EAAWxnD,SAAUoc,EAAK,kBAAmBt+C,EAAOkkB,iBACpDwlE,EAAWxnD,SAAUoc,EAAK,eAAgBt+C,EAAOkE,cACjDwlF,EAAWxnD,SAAUoc,EAAK,cAAet+C,EAAO9H,aAEzC0pC,EAMR,SAASsoD,GAAuB/8E,EAAU4a,GAyEzC,IAAImjE,EAvEJ/9E,EAASkM,QAAQj5B,MAAQ2nC,EAAS1O,QAE7B0O,EAASjQ,QAEb3K,EAASiM,QAAQh5B,MAAQ2nC,EAASjQ,OAI9BiQ,EAAS3J,UAEbjR,EAASiR,SAASh+B,MAAMsF,KAAMqiC,EAAS3J,UAAW53B,eAAgBuhC,EAAS4a,mBAIvE5a,EAASzO,MAEbnM,EAASmM,IAAIl5B,MAAQ2nC,EAASzO,KAI1ByO,EAASvO,WAEbrM,EAASqM,SAASp5B,MAAQ2nC,EAASvO,UAI/BuO,EAASrO,cAEbvM,EAASuM,YAAYt5B,MAAQ2nC,EAASrO,aAIlCqO,EAASnO,SAEbzM,EAASyM,OAAOx5B,MAAQ2nC,EAASnO,OAMjCzM,EAAS0M,WAAWz5B,MAAc2nC,EAASnO,QAAUmO,EAASnO,OAAOwhB,eAA0B,EAAN,EAEzFjuB,EAAS2M,aAAa15B,MAAQ2nC,EAASjO,aACvC3M,EAAS4M,gBAAgB35B,MAAQ2nC,EAAShO,gBAE1C5M,EAAS6M,YAAY55B,MAAQ67B,EAAWp3B,IAAKkjC,EAASnO,QAASwvC,eAI3DrhC,EAAS1N,WAEblN,EAASkN,SAASj6B,MAAQ2nC,EAAS1N,SACnClN,EAASmN,kBAAkBl6B,MAAQ2nC,EAASzN,mBAIxCyN,EAAS7N,QAEb/M,EAAS+M,MAAM95B,MAAQ2nC,EAAS7N,MAChC/M,EAASgN,eAAe/5B,MAAQ2nC,EAAS5N,gBAcrC4N,EAASzO,IAEb4xE,EAAanjE,EAASzO,IAEXyO,EAASrO,YAEpBwxE,EAAanjE,EAASrO,YAEXqO,EAAS/M,gBAEpBkwE,EAAanjE,EAAS/M,gBAEX+M,EAASlN,UAEpBqwE,EAAanjE,EAASlN,UAEXkN,EAASrN,QAEpBwwE,EAAanjE,EAASrN,QAEXqN,EAAS3M,aAEpB8vE,EAAanjE,EAAS3M,aAEX2M,EAASzM,aAEpB4vE,EAAanjE,EAASzM,aAEXyM,EAASvO,SAEpB0xE,EAAanjE,EAASvO,SAEXuO,EAASvN,cAEpB0wE,EAAanjE,EAASvN,kBAIHt3B,IAAfgoG,IAGCA,EAAWl1C,sBAEfk1C,EAAaA,EAAWj1C,UAIY,IAAhCi1C,EAAWnvF,kBAEfmvF,EAAW9tF,eAIZ+P,EAASoM,YAAYn5B,MAAMsF,KAAMwlG,EAAWxzG,SAuE9C,SAAS0yG,GAAsBj9E,EAAU4a,GAExC5a,EAASmR,SAASl+B,MAAQ2nC,EAASzJ,SACnCnR,EAASoR,UAAUn+B,MAAQd,KAAK9H,IAAKuwC,EAASxJ,UAAW,MAEpDwJ,EAASvN,cAEbrN,EAASqN,YAAYp6B,MAAQ2nC,EAASvN,aAIlCuN,EAASrN,UAEbvN,EAASuN,QAAQt6B,MAAQ2nC,EAASrN,QAClCvN,EAASwN,UAAUv6B,MAAQ2nC,EAASpN,WAIhCoN,EAASlN,YAEb1N,EAAS0N,UAAUz6B,MAAQ2nC,EAASlN,UACpC1N,EAAS2N,YAAY16B,MAAMsF,KAAMqiC,EAASjN,cAItCiN,EAAS/M,kBAEb7N,EAAS6N,gBAAgB56B,MAAQ2nC,EAAS/M,gBAC1C7N,EAAS8N,kBAAkB76B,MAAQ2nC,EAAS9M,kBAC5C9N,EAAS+N,iBAAiB96B,MAAQ2nC,EAAS7M,kBAkB7C,SAASovE,GAAyBn9E,EAAU4a,GAE3C5a,EAASsR,UAAUr+B,MAAQ2nC,EAAStJ,UACpCtR,EAASuR,UAAUt+B,MAAQ2nC,EAASrJ,UAE/BqJ,EAAS3M,eAEbjO,EAASiO,aAAah7B,MAAQ2nC,EAAS3M,cAInC2M,EAASzM,eAEbnO,EAASmO,aAAal7B,MAAQ2nC,EAASzM,cAInCyM,EAASvN,cAEbrN,EAASqN,YAAYp6B,MAAQ2nC,EAASvN,aAIlCuN,EAASrN,UAEbvN,EAASuN,QAAQt6B,MAAQ2nC,EAASrN,QAClCvN,EAASwN,UAAUv6B,MAAQ2nC,EAASpN,WAIhCoN,EAASlN,YAEb1N,EAAS0N,UAAUz6B,MAAQ2nC,EAASlN,UACpC1N,EAAS2N,YAAY16B,MAAMsF,KAAMqiC,EAASjN,cAItCiN,EAAS/M,kBAEb7N,EAAS6N,gBAAgB56B,MAAQ2nC,EAAS/M,gBAC1C7N,EAAS8N,kBAAkB76B,MAAQ2nC,EAAS9M,kBAC5C9N,EAAS+N,iBAAiB96B,MAAQ2nC,EAAS7M,kBAIvC6M,EAASnO,SAGbzM,EAASwR,gBAAgBv+B,MAAQ2nC,EAASpJ,iBAtpC5Ct8B,KAAK8oG,QAAU,SAAWn0F,GAGJ,QADrBsxF,GAAmBtxF,GA1CdqxF,KAELE,KAEAF,IAAc,GAuCiCtC,MAMhD1jG,KAAKq4C,OAAS,SAAWE,EAAO5iC,EAAQiyD,EAAcpvB,GAErD,GAAS7iC,GAAUA,EAAOwuB,UAO1B,IAAKo8D,EAAL,CAIAI,EAA0B,GAC1BD,GAAuB,EACvBE,EAAiB,MAIS,IAArBroD,EAAMwjB,YAAsBxjB,EAAM55B,oBAIhB,OAAlBhJ,EAAO8rB,QAAkB9rB,EAAOgJ,oBAEhCwjF,GAAG57D,UAEP5wB,EAASwsF,GAAG5xB,UAAW56D,KAMxB4pF,EAAqB3mC,EAAap2D,IAAK+1C,EAAO5iC,IAC3B+mC,OAEnBnE,EAAMtV,eAAgBq9D,EAAO/nD,EAAO5iC,EAAQiyD,GAE5ClO,GAAkB1uD,iBAAkB2K,EAAOC,iBAAkBD,EAAO4sB,oBACpEk3B,EAASz3C,cAAe03C,IAExBgoC,GAAwB1hG,KAAK47C,qBAC7B6lD,EAAmBD,EAAU9kD,KAAM18C,KAAKi1C,eAAgBysD,GAAuB/rF,IAE/E2pF,EAAoBW,EAAYz9F,IAAK+1C,EAAO5iC,IAC1B+mC,OA0JnB,SAASqsD,EAAeprF,EAAQhI,EAAQ8pF,GAEvC,IAAwB,IAAnB9hF,EAAOqkB,QAAZ,CAIA,GAFcrkB,EAAO0jB,OAAOD,KAAMzrB,EAAO0rB,QAIxC,GAAK1jB,EAAO45D,QAEXgoB,EAAmBhnC,UAAW56C,GAEzBA,EAAOskB,YAEXs9D,EAAmB/mC,WAAY76C,QAI1B,GAAKA,EAAOqrF,SAEXrrF,EAAOwkB,gBAAiBs3B,EAASr2C,iBAAkBzF,IAEzD4hF,EAAmB7mC,WAAY/6C,QAI1B,GAAKA,EAAO4oF,wBAEb9G,GAEJkC,GAASvqF,sBAAuBuG,EAAO9H,aACrCxI,aAAcqsD,IAIjB4lC,EAAkB79F,KAAMkc,EAAQ,KAAMA,EAAO+nB,SAAUi8D,GAASnsG,EAAG,WAE7D,IAAKmoB,EAAO0uB,QAAU1uB,EAAOi1B,QAAUj1B,EAAOg1B,YAE/Ch1B,EAAOu2C,eAEXv2C,EAAOy2C,SAASjiD,UAIVwL,EAAOwkB,eAAiBs3B,EAASx2C,iBAAkBtF,IAAW,CAE/D8hF,GAEJkC,GAASvqF,sBAAuBuG,EAAO9H,aACrCxI,aAAcqsD,IAIjB,IAAIp7C,EAAWg4D,EAAQnkE,OAAQwL,GAC3B+nB,EAAW/nB,EAAO+nB,SAEtB,GAAKpa,MAAMC,QAASma,GAInB,IAFA,IAAI0D,EAAS9qB,EAAS8qB,OAEZ9rC,EAAI,EAAG8E,EAAIgnC,EAAOhpC,OAAQ9C,EAAI8E,EAAG9E,IAAO,CAEjD,IAAI2sC,EAAQb,EAAQ9rC,GAChBw+D,EAAgBp2B,EAAUuE,EAAMpH,eAE/Bi5B,GAAiBA,EAAc95B,SAEnCs9D,EAAkB79F,KAAMkc,EAAQW,EAAUw9C,EAAe6lC,GAASnsG,EAAGy0C,QAM5DvE,EAAS1D,SAEpBs9D,EAAkB79F,KAAMkc,EAAQW,EAAUonB,EAAUi8D,GAASnsG,EAAG,MAUpE,IAAIksC,EAAW/jB,EAAO+jB,SAEtB,IAAUpkC,EAAI,EAAG8E,EAAIs/B,EAASthC,OAAQ9C,EAAI8E,EAAG9E,IAE5CyrG,EAAernE,EAAUpkC,GAAKqY,EAAQ8pF,IAlPvCsJ,CAAexwD,EAAO5iC,EAAQ2qF,EAAMb,cAET,IAAtBa,EAAMb,aAEVH,EAAkBtyD,OAMdy0D,GAAmBD,EAAU5kD,eAElC,IAAIwb,EAAemnC,EAAmB7nD,MAAM0gB,aAE5ChD,GAAU/c,OAAQ+f,EAAc7f,EAAO5iC,GAEvC4pF,EAAmBjnC,YAAa3iD,GAE3B8rF,GAAmBD,EAAU3kD,aAI7B78C,KAAKk5C,KAAKuF,WAAYz+C,KAAKk5C,KAAKwF,aAEf79C,IAAjB+mE,IAEJA,EAAe,MAIhB5nE,KAAK28D,gBAAiBiL,GAItBnvB,EAAWJ,OAAQinD,EAAmB/mD,EAAO5iC,EAAQ6iC,GAIrD,IAAIywD,EAAgB3J,EAAkBrpC,OAClCizC,EAAqB5J,EAAkB/qD,YAE3C,GAAKgE,EAAMo5B,iBAAmB,CAE7B,IAAIA,EAAmBp5B,EAAMo5B,iBAExBs3B,EAAc7oG,QAASimG,GAAe4C,EAAe1wD,EAAO5iC,EAAQg8D,GACpEu3B,EAAmB9oG,QAASimG,GAAe6C,EAAoB3wD,EAAO5iC,EAAQg8D,QAM9Es3B,EAAc7oG,QAASimG,GAAe4C,EAAe1wD,EAAO5iC,GAI5DuzF,EAAmB9oG,QAASimG,GAAe6C,EAAoB3wD,EAAO5iC,GAM5E,IAAI0iD,EAAeknC,EAAmB7nD,MAAM2gB,aAE5CgoC,EAAehoD,OAAQggB,EAAc9f,EAAO5iC,GAIvCiyD,GAEJxsD,EAAS4wD,yBAA0BpE,GAMpClwB,EAAMna,QAAQb,MAAM0/B,SAAS,GAC7B1kB,EAAMna,QAAQb,MAAM8hC,SAAS,GAC7B9mB,EAAMna,QAAQ9H,MAAM+oC,SAAS,GAE7B9mB,EAAMmtB,kBAAkB,GAExBtsB,EAAMrV,cAAeo9D,EAAO/nD,EAAO5iC,GAE9BwsF,GAAG57D,SAEP47D,GAAG1wB,cAMJ6tB,EAAoB,KACpBC,EAAqB,WAxIpBl/F,QAAQC,MAAO,2EA8uCjBN,KAAK8nD,iBAhBL,WAEC,IAAIqhD,EAAclI,EAUlB,OARKkI,GAAez2C,EAAatY,aAEhC/5C,QAAQmD,KAAM,sCAAwC2lG,EAAc,+CAAiDz2C,EAAatY,aAInI6mD,GAAqB,EAEdkI,GAORnpG,KAAKqpD,cAEA08C,IAAS,EAGN,SAAuBnyC,EAASwU,GAEjCxU,GAAWA,EAAQD,sBAEhBoyC,KAEN1lG,QAAQmD,KAAM,gHACduiG,IAAS,GAIVnyC,EAAUA,EAAQA,SAInBx4C,EAASiuC,aAAcuK,EAASwU,KAMlCpoE,KAAKopG,WAAe,WAEnB,IAAIrD,GAAS,EAEb,OAAO,SAAqBnyC,EAASwU,GAE7B29B,IAEN1lG,QAAQmD,KAAM,6EACduiG,GAAS,GAIV3qF,EAASiuC,aAAcuK,EAASwU,OAMlCpoE,KAAKupD,eAAmB,WAEvB,IAAIw8C,GAAS,EAEb,OAAO,SAAyBnyC,EAASwU,GAGnCxU,GAAWA,EAAQkU,0BAEhBi+B,IAEN1lG,QAAQmD,KAAM,uHACduiG,GAAS,GAIVnyC,EAAUA,EAAQA,SAMZA,GAAWA,EAAQ7a,eACvBztB,MAAMC,QAASqoC,EAAQl7C,QAAoC,IAAzBk7C,EAAQl7C,MAAMtY,OAKlDgb,EAASmuC,eAAgBqK,EAASwU,GAMlChtD,EAASkwD,sBAAuB1X,EAASwU,OAQ5CpoE,KAAKy0D,gBAAkB,WAEtB,OAAO+rC,GAIRxgG,KAAK28D,gBAAkB,SAAWiL,GAEjC44B,EAAuB54B,EAElBA,QAAsE/mE,IAAtD+4B,EAAWp3B,IAAKolE,GAAeI,oBAEnD5sD,EAASmwD,kBAAmB3D,GAI7B,IAAIyC,EAAc,KACdmB,GAAS,EAEb,GAAK5D,EAAe,CAEnB,IAAII,EAAqBpuC,EAAWp3B,IAAKolE,GAAeI,mBAEnDJ,EAAaE,yBAEjBuC,EAAcrC,EAAoBJ,EAAayhC,gBAC/C79B,GAAS,GAITnB,EAAcrC,EAIf84B,EAAiBz9F,KAAMukE,EAAa1O,UACpC6nC,EAAgB19F,KAAMukE,EAAa5O,SACnCgoC,EAAsBp5B,EAAa3O,iBAInC6nC,EAAiBz9F,KAAMg+F,GAAYl9F,eAAgBi9F,GACnDL,EAAgB19F,KAAMi+F,GAAWn9F,eAAgBi9F,GACjDJ,EAAsBO,EAevB,GAXKd,IAAwBp2B,IAE5BpO,EAAIuO,gBAAiBvO,EAAIwO,YAAaJ,GACtCo2B,EAAsBp2B,GAIvB3yB,EAAMwhB,SAAU4nC,GAChBppD,EAAMshB,QAAS+nC,GACfrpD,EAAM2kB,eAAgB2kC,GAEjBx1B,EAAS,CAEb,IAAIpE,EAAoBxtC,EAAWp3B,IAAKolE,EAAahU,SACrDqI,EAAIyO,qBAAsBzO,EAAIwO,YAAaxO,EAAI0P,kBAAmB1P,EAAIkJ,4BAA8ByC,EAAayhC,eAAgBjiC,EAAkBI,eAAgBI,EAAa0hC,qBAMlLtpG,KAAKupG,uBAAyB,SAAW3hC,EAActyE,EAAGC,EAAGgN,EAAOG,EAAQk7B,GAE3E,GAASgqC,GAAgBA,EAAajU,oBAAtC,CAOA,IAAI0W,EAAczwC,EAAWp3B,IAAKolE,GAAeI,mBAEjD,GAAKqC,EAAc,CAElB,IAAIm/B,GAAU,EAETn/B,IAAgBo2B,IAEpBxkC,EAAIuO,gBAAiBvO,EAAIwO,YAAaJ,GAEtCm/B,GAAU,GAIX,IAEC,IAAI51C,EAAUgU,EAAahU,QACvB61C,EAAgB71C,EAAQ56C,OACxB6wD,EAAcjW,EAAQxyD,KAE1B,GAAKqoG,IAAkBjvG,IAAckkE,EAAMyF,QAASslC,KAAoBxtC,EAAIn9C,aAAcm9C,EAAIytC,kCAG7F,YADArpG,QAAQC,MAAO,6GAKhB,KAAKupE,IAAgBnwE,IAAoBglE,EAAMyF,QAAS0F,KAAkB5N,EAAIn9C,aAAcm9C,EAAI0tC,iCAC3F9/B,IAAgB7vE,KAAey8C,EAAWj0C,IAAK,sBAAyBi0C,EAAWj0C,IAAK,8BACxFqnE,IAAgB5vE,IAAiBw8C,EAAWj0C,IAAK,gCAGrD,YADAnC,QAAQC,MAAO,uHAKX27D,EAAI2tC,uBAAwB3tC,EAAIwO,eAAkBxO,EAAI4tC,qBAInDv0G,GAAK,GAAKA,GAAOsyE,EAAarlE,MAAQA,GAAehN,GAAK,GAAKA,GAAOqyE,EAAallE,OAASA,GAElGu5D,EAAI6tC,WAAYx0G,EAAGC,EAAGgN,EAAOG,EAAQg8D,EAAMyF,QAASslC,GAAiB/qC,EAAMyF,QAAS0F,GAAejsC,GAMpGv9B,QAAQC,MAAO,sHAMXkpG,GAEJvtC,EAAIuO,gBAAiBvO,EAAIwO,YAAag2B,UA7DxCpgG,QAAQC,MAAO,6FAuEjBN,KAAK+pG,yBAA2B,SAAW16F,EAAUukD,EAASo2C,GAE7D,IAAIznG,EAAQqxD,EAAQl7C,MAAMnW,MACtBG,EAASkxD,EAAQl7C,MAAMhW,OACvBumE,EAAWvK,EAAMyF,QAASvQ,EAAQ56C,QAEtChZ,KAAKqpD,aAAcuK,EAAS,GAE5BqI,EAAIguC,eAAgBhuC,EAAIgJ,WAAY+kC,GAAS,EAAG/gC,EAAU55D,EAAS/Z,EAAG+Z,EAAS9Z,EAAGgN,EAAOG,EAAQ,IAIlG1C,KAAKkqG,qBAAuB,SAAW76F,EAAU86F,EAAYC,EAAYJ,GAExE,IAAIznG,EAAQ4nG,EAAWzxF,MAAMnW,MACzBG,EAASynG,EAAWzxF,MAAMhW,OAC1BumE,EAAWvK,EAAMyF,QAASimC,EAAWpxF,QACrCkwD,EAASxK,EAAMyF,QAASimC,EAAWhpG,MACnCipG,EAASF,EAAW1tF,cAAgB0tF,EAAWzxF,MAAMwB,KAAOiwF,EAAWzxF,MAE3E1Y,KAAKqpD,aAAc+gD,EAAY,GAE/BnuC,EAAIquC,cAAeruC,EAAIgJ,WAAY+kC,GAAS,EAAG36F,EAAS/Z,EAAG+Z,EAAS9Z,EAAGgN,EAAOG,EAAQumE,EAAUC,EAAQmhC,gyC9IniFpF,aACH,CAAEE,KAAM,EAAGC,OAAQ,EAAGC,MAAO,2EAIjB,yBACG,0BACC,mBACP,gGAMH,kBACE,4BAEH,iBACE,ywBAuCH,88CA4DD,kBACE,oBACE,2BACO,yBACF,yBACA,2BACE,uBACJ,wBACC,oDAEK,wBACF,8FAKL"}