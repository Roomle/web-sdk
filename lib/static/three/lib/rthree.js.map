{"version":3,"file":"rthree.js","sources":["../../../../../node_modules/three/src/math/Vector2.js","../../../../../node_modules/three/src/math/Matrix4.js","../../../../../node_modules/three/src/math/Vector3.js","../../../../../node_modules/three/src/constants.js","../../../../../node_modules/three/src/math/Math.js","../../../../../node_modules/three/src/core/EventDispatcher.js","../../../../../node_modules/three/src/math/Quaternion.js","../../../../../node_modules/three/src/math/Matrix3.js","../../../../../node_modules/three/src/textures/Texture.js","../../../../../node_modules/three/src/math/Box3.js","../../../../../node_modules/three/src/math/Sphere.js","../../../../../node_modules/three/src/math/Frustum.js","../../../../../node_modules/three/src/textures/DataTexture.js","../../../../../node_modules/three/src/math/Plane.js","../../../../../node_modules/three/src/math/Color.js","../../../../../node_modules/three/src/renderers/shaders/ShaderChunk.js","../../../../../node_modules/three/src/renderers/shaders/UniformsUtils.js","../../../../../node_modules/three/src/math/Euler.js","../../../../../node_modules/three/src/renderers/shaders/UniformsLib.js","../../../../../node_modules/three/src/renderers/shaders/ShaderLib.js","../../../../../node_modules/three/src/math/Vector4.js","../../../../../node_modules/three/src/renderers/webgl/WebGLAttributes.js","../../../../../node_modules/three/src/core/Layers.js","../../../../../node_modules/three/src/core/Object3D.js","../../../../../node_modules/three/src/cameras/Camera.js","../../../../../node_modules/three/src/cameras/OrthographicCamera.js","../../../../../node_modules/three/src/core/Face3.js","../../../../../node_modules/three/src/core/Geometry.js","../../../../../node_modules/three/src/core/BufferAttribute.js","../../../../../node_modules/three/src/core/DirectGeometry.js","../../../../../node_modules/three/src/utils.js","../../../../../node_modules/three/src/core/BufferGeometry.js","../../../../../node_modules/three/src/geometries/BoxGeometry.js","../../../../../node_modules/three/src/geometries/PlaneGeometry.js","../../../../../node_modules/three/src/materials/Material.js","../../../../../node_modules/three/src/math/Ray.js","../../../../../node_modules/three/src/math/Line3.js","../../../../../node_modules/three/src/math/Triangle.js","../../../../../node_modules/three/src/materials/MeshBasicMaterial.js","../../../../../node_modules/three/src/materials/ShaderMaterial.js","../../../../../node_modules/three/src/objects/Mesh.js","../../../../../node_modules/three/src/renderers/webgl/WebGLBackground.js","../../../../../node_modules/three/src/renderers/webgl/WebGLBufferRenderer.js","../../../../../node_modules/three/src/renderers/webgl/WebGLCapabilities.js","../../../../../node_modules/three/src/renderers/webgl/WebGLClipping.js","../../../../../node_modules/three/src/renderers/webgl/WebGLExtensions.js","../../../../../node_modules/three/src/renderers/webgl/WebGLGeometries.js","../../../../../node_modules/three/src/renderers/webgl/WebGLIndexedBufferRenderer.js","../../../../../node_modules/three/src/renderers/webgl/WebGLInfo.js","../../../../../node_modules/three/src/renderers/webgl/WebGLMorphtargets.js","../../../../../node_modules/three/src/renderers/webgl/WebGLObjects.js","../../../../../node_modules/three/src/textures/CubeTexture.js","../../../../../node_modules/three/src/renderers/webgl/WebGLUniforms.js","../../../../../node_modules/three/src/renderers/webgl/WebGLShader.js","../../../../../node_modules/three/src/renderers/webgl/WebGLProgram.js","../../../../../node_modules/three/src/renderers/webgl/WebGLPrograms.js","../../../../../node_modules/three/src/renderers/webgl/WebGLProperties.js","../../../../../node_modules/three/src/renderers/webgl/WebGLRenderLists.js","../../../../../node_modules/three/src/renderers/webgl/WebGLLights.js","../../../../../node_modules/three/src/objects/Line.js","../../../../../node_modules/three/src/helpers/ArrowHelper.js","../../../../../node_modules/three/src/renderers/webgl/WebGLRenderStates.js","../../../../../node_modules/three/src/renderers/WebGLRenderTarget.js","../../../../../node_modules/three/src/materials/MeshDepthMaterial.js","../../../../../node_modules/three/src/materials/MeshDistanceMaterial.js","../../../../../node_modules/three/src/renderers/webgl/WebGLShadowMap.js","../../../../../node_modules/three/src/textures/CanvasTexture.js","../../../../../node_modules/three/src/renderers/webgl/WebGLSpriteRenderer.js","../../../../../node_modules/three/src/renderers/webgl/WebGLState.js","../../../../../node_modules/three/src/renderers/webgl/WebGLTextures.js","../../../../../node_modules/three/src/renderers/webgl/WebGLUtils.js","../../../../../node_modules/three/src/cameras/PerspectiveCamera.js","../../../../../node_modules/three/src/cameras/ArrayCamera.js","../../../../../node_modules/three/src/renderers/webvr/WebVRManager.js","../../../../../node_modules/three/src/scenes/Scene.js","../../../../../node_modules/three/src/geometries/CylinderGeometry.js","../../../../../node_modules/three/src/core/Clock.js","../../../../../node_modules/three/src/core/Raycaster.js","../../../../../node_modules/three/src/materials/LineBasicMaterial.js","../../../../../node_modules/three/src/objects/LineSegments.js","../../../../../node_modules/three/src/materials/MeshStandardMaterial.js","../../../../../node_modules/three/src/materials/MeshPhysicalMaterial.js","../../../../../node_modules/three/src/materials/ShadowMaterial.js","../../../../../node_modules/three/src/materials/LineDashedMaterial.js","../../../../../node_modules/three/src/lights/Light.js","../../../../../node_modules/three/src/lights/LightShadow.js","../../../../../node_modules/three/src/lights/DirectionalLightShadow.js","../../../../../node_modules/three/src/lights/DirectionalLight.js","../../../../../node_modules/three/src/lights/AmbientLight.js","../../../../../node_modules/three/src/lights/HemisphereLight.js","../../../../../node_modules/three/src/loaders/Cache.js","../../../../../node_modules/three/src/loaders/LoadingManager.js","../../../../../node_modules/three/src/loaders/ImageLoader.js","../../../../../node_modules/three/src/loaders/TextureLoader.js","../../../../../node_modules/three/src/loaders/CubeTextureLoader.js","../../../../../node_modules/three/src/extras/core/Curve.js","../../../../../node_modules/three/src/extras/curves/EllipseCurve.js","../../../../../node_modules/three/src/extras/curves/ArcCurve.js","../../../../../node_modules/three/src/extras/curves/CatmullRomCurve3.js","../../../../../node_modules/three/src/extras/core/Interpolations.js","../../../../../node_modules/three/src/extras/curves/CubicBezierCurve.js","../../../../../node_modules/three/src/extras/curves/CubicBezierCurve3.js","../../../../../node_modules/three/src/extras/curves/LineCurve.js","../../../../../node_modules/three/src/extras/curves/LineCurve3.js","../../../../../node_modules/three/src/extras/curves/QuadraticBezierCurve.js","../../../../../node_modules/three/src/extras/curves/QuadraticBezierCurve3.js","../../../../../node_modules/three/src/extras/curves/SplineCurve.js","../../../../../node_modules/three/src/extras/core/CurvePath.js","../../../../../node_modules/three/src/extras/core/Path.js","../../../../../node_modules/three/src/extras/core/Shape.js","../../../../../node_modules/three/src/extras/Earcut.js","../../../../../node_modules/three/src/extras/ShapeUtils.js","../../../../../node_modules/three/src/extras/core/ShapePath.js","../../../../../node_modules/three/src/extras/core/Font.js","../../../../../node_modules/three/src/loaders/FileLoader.js","../../../../../node_modules/three/src/loaders/FontLoader.js","../../../../../node_modules/three/src/geometries/ExtrudeGeometry.js","../../../../../node_modules/three/src/geometries/TextGeometry.js","../../../../../node_modules/three/src/materials/MeshPhongMaterial.js","../../../../../node_modules/three/src/core/Uniform.js","../../../../../node_modules/three/src/geometries/SphereGeometry.js","../../../../../node_modules/three/src/lights/SpotLightShadow.js","../../../../../node_modules/three/src/lights/SpotLight.js","../../../../../node_modules/three/src/materials/SpriteMaterial.js","../../../../../node_modules/three/src/materials/RawShaderMaterial.js","../../../../../node_modules/three/src/materials/PointsMaterial.js","../../../../../node_modules/three/src/materials/MeshToonMaterial.js","../../../../../node_modules/three/src/materials/MeshNormalMaterial.js","../../../../../node_modules/three/src/materials/MeshLambertMaterial.js","../../../../../node_modules/three/src/loaders/Loader.js","../../../../../node_modules/three/src/loaders/MaterialLoader.js","../../../../../node_modules/three/src/loaders/LoaderUtils.js","../../../../../node_modules/three/src/objects/Group.js","../../../../../node_modules/three/src/animation/PropertyBinding.js","../../../../../node_modules/three/src/animation/AnimationUtils.js","../../../../../node_modules/three/src/animation/tracks/StringKeyframeTrack.js","../../../../../node_modules/three/src/animation/tracks/BooleanKeyframeTrack.js","../../../../../node_modules/three/src/math/Interpolant.js","../../../../../node_modules/three/src/math/interpolants/QuaternionLinearInterpolant.js","../../../../../node_modules/three/src/animation/tracks/QuaternionKeyframeTrack.js","../../../../../node_modules/three/src/animation/tracks/ColorKeyframeTrack.js","../../../../../node_modules/three/src/animation/tracks/NumberKeyframeTrack.js","../../../../../node_modules/three/src/math/interpolants/CubicInterpolant.js","../../../../../node_modules/three/src/math/interpolants/LinearInterpolant.js","../../../../../node_modules/three/src/math/interpolants/DiscreteInterpolant.js","../../../../../node_modules/three/src/animation/KeyframeTrack.js","../../../../../node_modules/three/src/animation/tracks/VectorKeyframeTrack.js","../../../../../node_modules/three/src/animation/AnimationClip.js","../../../../../node_modules/three/src/scenes/Fog.js","../../../../../node_modules/three/src/lights/RectAreaLight.js","../../../../../node_modules/three/src/renderers/WebGLRenderer.js"],"sourcesContent":["/**\n * @author mrdoob / http://mrdoob.com/\n * @author philogb / http://blog.thejit.org/\n * @author egraether / http://egraether.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nfunction Vector2( x, y ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\n}\n\nObject.defineProperties( Vector2.prototype, {\n\n\t\"width\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.x = value;\n\n\t\t}\n\n\t},\n\n\t\"height\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.y = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Vector2.prototype, {\n\n\tisVector2: true,\n\n\tset: function ( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min = new Vector2();\n\t\tvar max = new Vector2();\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tmin.set( minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tangle: function () {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tvar angle = Math.atan2( this.y, this.x );\n\n\t\tif ( angle < 0 ) angle += 2 * Math.PI;\n\n\t\treturn angle;\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t},\n\n\trotateAround: function ( center, angle ) {\n\n\t\tvar c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tvar x = this.x - center.x;\n\t\tvar y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector2 };\n","import { Vector3 } from './Vector3.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Matrix4() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix4.prototype, {\n\n\tisMatrix4: true,\n\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t},\n\n\tcopyPosition: function ( m ) {\n\n\t\tvar te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\textractRotation: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function extractRotation( m ) {\n\n\t\t\tvar te = this.elements;\n\t\t\tvar me = m.elements;\n\n\t\t\tvar scaleX = 1 / v1.setFromMatrixColumn( m, 0 ).length();\n\t\t\tvar scaleY = 1 / v1.setFromMatrixColumn( m, 1 ).length();\n\t\t\tvar scaleZ = 1 / v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakeRotationFromEuler: function ( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromQuaternion: function ( q ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar x = q._x, y = q._y, z = q._z, w = q._w;\n\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tte[ 0 ] = 1 - ( yy + zz );\n\t\tte[ 4 ] = xy - wz;\n\t\tte[ 8 ] = xz + wy;\n\n\t\tte[ 1 ] = xy + wz;\n\t\tte[ 5 ] = 1 - ( xx + zz );\n\t\tte[ 9 ] = yz - wx;\n\n\t\tte[ 2 ] = xz - wy;\n\t\tte[ 6 ] = yz + wx;\n\t\tte[ 10 ] = 1 - ( xx + yy );\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function () {\n\n\t\tvar x = new Vector3();\n\t\tvar y = new Vector3();\n\t\tvar z = new Vector3();\n\n\t\treturn function lookAt( eye, target, up ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tz.subVectors( eye, target );\n\n\t\t\tif ( z.lengthSq() === 0 ) {\n\n\t\t\t\t// eye and target are in the same position\n\n\t\t\t\tz.z = 1;\n\n\t\t\t}\n\n\t\t\tz.normalize();\n\t\t\tx.crossVectors( up, z );\n\n\t\t\tif ( x.lengthSq() === 0 ) {\n\n\t\t\t\t// up and z are parallel\n\n\t\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t\tz.x += 0.0001;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz.z += 0.0001;\n\n\t\t\t\t}\n\n\t\t\t\tz.normalize();\n\t\t\t\tx.crossVectors( up, z );\n\n\t\t\t}\n\n\t\t\tx.normalize();\n\t\t\ty.crossVectors( z, x );\n\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmultiply: function ( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tapplyToBufferAttribute: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function applyToBufferAttribute( attribute ) {\n\n\t\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\tv1.x = attribute.getX( i );\n\t\t\t\tv1.y = attribute.getY( i );\n\t\t\t\tv1.z = attribute.getZ( i );\n\n\t\t\t\tv1.applyMatrix4( this );\n\n\t\t\t\tattribute.setXYZ( i, v1.x, v1.y, v1.z );\n\n\t\t\t}\n\n\t\t\treturn attribute;\n\n\t\t};\n\n\t}(),\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar te = this.elements;\n\t\tvar tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tsetPosition: function ( v ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 12 ] = v.x;\n\t\tte[ 13 ] = v.y;\n\t\tte[ 14 ] = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tgetInverse: function ( m, throwOnDegenerate ) {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tvar te = this.elements,\n\t\t\tme = m.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( v ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxScaleOnAxis: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t},\n\n\tmakeTranslation: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationX: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationY: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationZ: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tvar c = Math.cos( angle );\n\t\tvar s = Math.sin( angle );\n\t\tvar t = 1 - c;\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\n\t\tvar tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\t return this;\n\n\t},\n\n\tmakeScale: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeShear: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcompose: function ( position, quaternion, scale ) {\n\n\t\tthis.makeRotationFromQuaternion( quaternion );\n\t\tthis.scale( scale );\n\t\tthis.setPosition( position );\n\n\t\treturn this;\n\n\t},\n\n\tdecompose: function () {\n\n\t\tvar vector = new Vector3();\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function decompose( position, quaternion, scale ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t\t// if determine is negative, we need to invert one scale\n\t\t\tvar det = this.determinant();\n\t\t\tif ( det < 0 ) sx = - sx;\n\n\t\t\tposition.x = te[ 12 ];\n\t\t\tposition.y = te[ 13 ];\n\t\t\tposition.z = te[ 14 ];\n\n\t\t\t// scale the rotation part\n\t\t\tmatrix.copy( this );\n\n\t\t\tvar invSX = 1 / sx;\n\t\t\tvar invSY = 1 / sy;\n\t\t\tvar invSZ = 1 / sz;\n\n\t\t\tmatrix.elements[ 0 ] *= invSX;\n\t\t\tmatrix.elements[ 1 ] *= invSX;\n\t\t\tmatrix.elements[ 2 ] *= invSX;\n\n\t\t\tmatrix.elements[ 4 ] *= invSY;\n\t\t\tmatrix.elements[ 5 ] *= invSY;\n\t\t\tmatrix.elements[ 6 ] *= invSY;\n\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\n\n\t\t\tquaternion.setFromRotationMatrix( matrix );\n\n\t\t\tscale.x = sx;\n\t\t\tscale.y = sy;\n\t\t\tscale.z = sz;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakePerspective: function ( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\t\tvar x = 2 * near / ( right - left );\n\t\tvar y = 2 * near / ( top - bottom );\n\n\t\tvar a = ( right + left ) / ( right - left );\n\t\tvar b = ( top + bottom ) / ( top - bottom );\n\t\tvar c = - ( far + near ) / ( far - near );\n\t\tvar d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t},\n\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar w = 1.0 / ( right - left );\n\t\tvar h = 1.0 / ( top - bottom );\n\t\tvar p = 1.0 / ( far - near );\n\n\t\tvar x = ( right + left ) * w;\n\t\tvar y = ( top + bottom ) * h;\n\t\tvar z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n\nexport { Matrix4 };\n","import { _Math } from './Math.js';\nimport { Matrix4 } from './Matrix4.js';\nimport { Quaternion } from './Quaternion.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector3( x, y, z ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\n}\n\nObject.assign( Vector3.prototype, {\n\n\tisVector3: true,\n\n\tset: function ( x, y, z ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVectors: function ( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyEuler: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function applyEuler( euler ) {\n\n\t\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t\t}\n\n\t\t\treturn this.applyQuaternion( quaternion.setFromEuler( euler ) );\n\n\t\t};\n\n\t}(),\n\n\tapplyAxisAngle: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function applyAxisAngle( axis, angle ) {\n\n\t\t\treturn this.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tvar w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tvar ix = qw * x + qy * z - qz * y;\n\t\tvar iy = qw * y + qz * x - qx * z;\n\t\tvar iz = qw * z + qx * y - qy * x;\n\t\tvar iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t},\n\n\tproject: function () {\n\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function project( camera ) {\n\n\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\n\t\t\treturn this.applyMatrix4( matrix );\n\n\t\t};\n\n\t}(),\n\n\tunproject: function () {\n\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function unproject( camera ) {\n\n\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\n\t\t\treturn this.applyMatrix4( matrix );\n\n\t\t};\n\n\t}(),\n\n\ttransformDirection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min = new Vector3();\n\t\tvar max = new Vector3();\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tmin.set( minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t},\n\n\t// TODO lengthSquared?\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tcross: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t},\n\n\tcrossVectors: function ( a, b ) {\n\n\t\tvar ax = a.x, ay = a.y, az = a.z;\n\t\tvar bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t},\n\n\tprojectOnVector: function ( vector ) {\n\n\t\tvar scalar = vector.dot( this ) / vector.lengthSq();\n\n\t\treturn this.copy( vector ).multiplyScalar( scalar );\n\n\t},\n\n\tprojectOnPlane: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function projectOnPlane( planeNormal ) {\n\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\n\n\t\t\treturn this.sub( v1 );\n\n\t\t};\n\n\t}(),\n\n\treflect: function () {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function reflect( normal ) {\n\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t\t};\n\n\t}(),\n\n\tangleTo: function ( v ) {\n\n\t\tvar theta = this.dot( v ) / ( Math.sqrt( this.lengthSq() * v.lengthSq() ) );\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( _Math.clamp( theta, - 1, 1 ) );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t},\n\n\tsetFromSpherical: function ( s ) {\n\n\t\tvar sinPhiRadius = Math.sin( s.phi ) * s.radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( s.theta );\n\t\tthis.y = Math.cos( s.phi ) * s.radius;\n\t\tthis.z = sinPhiRadius * Math.cos( s.theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCylindrical: function ( c ) {\n\n\t\tthis.x = c.radius * Math.sin( c.theta );\n\t\tthis.y = c.y;\n\t\tthis.z = c.radius * Math.cos( c.theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixPosition: function ( m ) {\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixScale: function ( m ) {\n\n\t\tvar sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tvar sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tvar sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixColumn: function ( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector3 };\n","export var REVISION = '92';\nexport var MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\nexport var CullFaceNone = 0;\nexport var CullFaceBack = 1;\nexport var CullFaceFront = 2;\nexport var CullFaceFrontBack = 3;\nexport var FrontFaceDirectionCW = 0;\nexport var FrontFaceDirectionCCW = 1;\nexport var BasicShadowMap = 0;\nexport var PCFShadowMap = 1;\nexport var PCFSoftShadowMap = 2;\nexport var FrontSide = 0;\nexport var BackSide = 1;\nexport var DoubleSide = 2;\nexport var FlatShading = 1;\nexport var SmoothShading = 2;\nexport var NoColors = 0;\nexport var FaceColors = 1;\nexport var VertexColors = 2;\nexport var NoBlending = 0;\nexport var NormalBlending = 1;\nexport var AdditiveBlending = 2;\nexport var SubtractiveBlending = 3;\nexport var MultiplyBlending = 4;\nexport var CustomBlending = 5;\nexport var AddEquation = 100;\nexport var SubtractEquation = 101;\nexport var ReverseSubtractEquation = 102;\nexport var MinEquation = 103;\nexport var MaxEquation = 104;\nexport var ZeroFactor = 200;\nexport var OneFactor = 201;\nexport var SrcColorFactor = 202;\nexport var OneMinusSrcColorFactor = 203;\nexport var SrcAlphaFactor = 204;\nexport var OneMinusSrcAlphaFactor = 205;\nexport var DstAlphaFactor = 206;\nexport var OneMinusDstAlphaFactor = 207;\nexport var DstColorFactor = 208;\nexport var OneMinusDstColorFactor = 209;\nexport var SrcAlphaSaturateFactor = 210;\nexport var NeverDepth = 0;\nexport var AlwaysDepth = 1;\nexport var LessDepth = 2;\nexport var LessEqualDepth = 3;\nexport var EqualDepth = 4;\nexport var GreaterEqualDepth = 5;\nexport var GreaterDepth = 6;\nexport var NotEqualDepth = 7;\nexport var MultiplyOperation = 0;\nexport var MixOperation = 1;\nexport var AddOperation = 2;\nexport var NoToneMapping = 0;\nexport var LinearToneMapping = 1;\nexport var ReinhardToneMapping = 2;\nexport var Uncharted2ToneMapping = 3;\nexport var CineonToneMapping = 4;\nexport var UVMapping = 300;\nexport var CubeReflectionMapping = 301;\nexport var CubeRefractionMapping = 302;\nexport var EquirectangularReflectionMapping = 303;\nexport var EquirectangularRefractionMapping = 304;\nexport var SphericalReflectionMapping = 305;\nexport var CubeUVReflectionMapping = 306;\nexport var CubeUVRefractionMapping = 307;\nexport var RepeatWrapping = 1000;\nexport var ClampToEdgeWrapping = 1001;\nexport var MirroredRepeatWrapping = 1002;\nexport var NearestFilter = 1003;\nexport var NearestMipMapNearestFilter = 1004;\nexport var NearestMipMapLinearFilter = 1005;\nexport var LinearFilter = 1006;\nexport var LinearMipMapNearestFilter = 1007;\nexport var LinearMipMapLinearFilter = 1008;\nexport var UnsignedByteType = 1009;\nexport var ByteType = 1010;\nexport var ShortType = 1011;\nexport var UnsignedShortType = 1012;\nexport var IntType = 1013;\nexport var UnsignedIntType = 1014;\nexport var FloatType = 1015;\nexport var HalfFloatType = 1016;\nexport var UnsignedShort4444Type = 1017;\nexport var UnsignedShort5551Type = 1018;\nexport var UnsignedShort565Type = 1019;\nexport var UnsignedInt248Type = 1020;\nexport var AlphaFormat = 1021;\nexport var RGBFormat = 1022;\nexport var RGBAFormat = 1023;\nexport var LuminanceFormat = 1024;\nexport var LuminanceAlphaFormat = 1025;\nexport var RGBEFormat = RGBAFormat;\nexport var DepthFormat = 1026;\nexport var DepthStencilFormat = 1027;\nexport var RGB_S3TC_DXT1_Format = 33776;\nexport var RGBA_S3TC_DXT1_Format = 33777;\nexport var RGBA_S3TC_DXT3_Format = 33778;\nexport var RGBA_S3TC_DXT5_Format = 33779;\nexport var RGB_PVRTC_4BPPV1_Format = 35840;\nexport var RGB_PVRTC_2BPPV1_Format = 35841;\nexport var RGBA_PVRTC_4BPPV1_Format = 35842;\nexport var RGBA_PVRTC_2BPPV1_Format = 35843;\nexport var RGB_ETC1_Format = 36196;\nexport var RGBA_ASTC_4x4_Format = 37808;\nexport var RGBA_ASTC_5x4_Format = 37809;\nexport var RGBA_ASTC_5x5_Format = 37810;\nexport var RGBA_ASTC_6x5_Format = 37811;\nexport var RGBA_ASTC_6x6_Format = 37812;\nexport var RGBA_ASTC_8x5_Format = 37813;\nexport var RGBA_ASTC_8x6_Format = 37814;\nexport var RGBA_ASTC_8x8_Format = 37815;\nexport var RGBA_ASTC_10x5_Format = 37816;\nexport var RGBA_ASTC_10x6_Format = 37817;\nexport var RGBA_ASTC_10x8_Format = 37818;\nexport var RGBA_ASTC_10x10_Format = 37819;\nexport var RGBA_ASTC_12x10_Format = 37820;\nexport var RGBA_ASTC_12x12_Format = 37821;\nexport var LoopOnce = 2200;\nexport var LoopRepeat = 2201;\nexport var LoopPingPong = 2202;\nexport var InterpolateDiscrete = 2300;\nexport var InterpolateLinear = 2301;\nexport var InterpolateSmooth = 2302;\nexport var ZeroCurvatureEnding = 2400;\nexport var ZeroSlopeEnding = 2401;\nexport var WrapAroundEnding = 2402;\nexport var TrianglesDrawMode = 0;\nexport var TriangleStripDrawMode = 1;\nexport var TriangleFanDrawMode = 2;\nexport var LinearEncoding = 3000;\nexport var sRGBEncoding = 3001;\nexport var GammaEncoding = 3007;\nexport var RGBEEncoding = 3002;\nexport var LogLuvEncoding = 3003;\nexport var RGBM7Encoding = 3004;\nexport var RGBM16Encoding = 3005;\nexport var RGBDEncoding = 3006;\nexport var BasicDepthPacking = 3200;\nexport var RGBADepthPacking = 3201;\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _Math = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: ( function () {\n\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n\n\t\tvar lut = [];\n\n\t\tfor ( var i = 0; i < 256; i ++ ) {\n\n\t\t\tlut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n\t\t}\n\n\t\treturn function generateUUID() {\n\n\t\t\tvar d0 = Math.random() * 0xffffffff | 0;\n\t\t\tvar d1 = Math.random() * 0xffffffff | 0;\n\t\t\tvar d2 = Math.random() * 0xffffffff | 0;\n\t\t\tvar d3 = Math.random() * 0xffffffff | 0;\n\t\t\tvar uuid = lut[ d0 & 0xff ] + lut[ d0 >> 8 & 0xff ] + lut[ d0 >> 16 & 0xff ] + lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t\tlut[ d1 & 0xff ] + lut[ d1 >> 8 & 0xff ] + '-' + lut[ d1 >> 16 & 0x0f | 0x40 ] + lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t\tlut[ d2 & 0x3f | 0x80 ] + lut[ d2 >> 8 & 0xff ] + '-' + lut[ d2 >> 16 & 0xff ] + lut[ d2 >> 24 & 0xff ] +\n\t\t\t\tlut[ d3 & 0xff ] + lut[ d3 >> 8 & 0xff ] + lut[ d3 >> 16 & 0xff ] + lut[ d3 >> 24 & 0xff ];\n\n\t\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\t\t\treturn uuid.toUpperCase();\n\n\t\t};\n\n\t} )(),\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\tlerp: function ( x, y, t ) {\n\n\t\treturn ( 1 - t ) * x + t * y;\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * _Math.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * _Math.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tceilPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tfloorPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n\t}\n\n};\n\n\nexport { _Math };\n","/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nfunction EventDispatcher() {}\n\nObject.assign( EventDispatcher.prototype, {\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tvar listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tvar index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\tvar array = listenerArray.slice( 0 );\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { EventDispatcher };\n","import { Vector3 } from './Vector3.js';\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nfunction Quaternion( x, y, z, w ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.assign( Quaternion, {\n\n\tslerp: function ( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t},\n\n\tslerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tvar x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ],\n\n\t\t\tx1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tvar s = 1 - t,\n\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tvar sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tvar tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n} );\n\nObject.defineProperties( Quaternion.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tw: {\n\n\t\tget: function () {\n\n\t\t\treturn this._w;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._w = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Quaternion.prototype, {\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t},\n\n\tcopy: function ( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromEuler: function ( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar x = euler._x, y = euler._y, z = euler._z, order = euler.order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tvar cos = Math.cos;\n\t\tvar sin = Math.sin;\n\n\t\tvar c1 = cos( x / 2 );\n\t\tvar c2 = cos( y / 2 );\n\t\tvar c3 = cos( z / 2 );\n\n\t\tvar s1 = sin( x / 2 );\n\t\tvar s2 = sin( y / 2 );\n\t\tvar s3 = sin( z / 2 );\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t}\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromAxisAngle: function ( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33,\n\t\t\ts;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromUnitVectors: function () {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tvar v1 = new Vector3();\n\t\tvar r;\n\n\t\tvar EPS = 0.000001;\n\n\t\treturn function setFromUnitVectors( vFrom, vTo ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new Vector3();\n\n\t\t\tr = vFrom.dot( vTo ) + 1;\n\n\t\t\tif ( r < EPS ) {\n\n\t\t\t\tr = 0;\n\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tv1.crossVectors( vFrom, vTo );\n\n\t\t\t}\n\n\t\t\tthis._x = v1.x;\n\t\t\tthis._y = v1.y;\n\t\t\tthis._z = v1.z;\n\t\t\tthis._w = r;\n\n\t\t\treturn this.normalize();\n\n\t\t};\n\n\t}(),\n\n\tinverse: function () {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t},\n\n\tconjugate: function () {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\tvar l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t},\n\n\tpremultiply: function ( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t},\n\n\tmultiplyQuaternions: function ( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tslerp: function ( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\n\n\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\n\n\t\t\tthis._w = 0.5 * ( w + this._w );\n\t\t\tthis._x = 0.5 * ( x + this._x );\n\t\t\tthis._y = 0.5 * ( y + this._y );\n\t\t\tthis._z = 0.5 * ( z + this._z );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {}\n\n} );\n\n\nexport { Quaternion };\n","import { Vector3 } from './Vector3.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n * @author tschw\n */\n\nfunction Matrix3() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0,\n\t\t0, 1, 0,\n\t\t0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix3.prototype, {\n\n\tisMatrix3: true,\n\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix4: function ( m ) {\n\n\t\tvar me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tapplyToBufferAttribute: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function applyToBufferAttribute( attribute ) {\n\n\t\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\tv1.x = attribute.getX( i );\n\t\t\t\tv1.y = attribute.getY( i );\n\t\t\t\tv1.z = attribute.getZ( i );\n\n\t\t\t\tv1.applyMatrix3( this );\n\n\t\t\t\tattribute.setXYZ( i, v1.x, v1.y, v1.z );\n\n\t\t\t}\n\n\t\t\treturn attribute;\n\n\t\t};\n\n\t}(),\n\n\tmultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t},\n\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\n\n\t\tif ( matrix && matrix.isMatrix4 ) {\n\n\t\t\tconsole.error( \"THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.\" );\n\n\t\t}\n\n\t\tvar me = matrix.elements,\n\t\t\tte = this.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar tmp, m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tgetNormalMatrix: function ( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\n\n\t},\n\n\ttransposeIntoArray: function ( r ) {\n\n\t\tvar m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetUvTransform: function ( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tvar c = Math.cos( rotation );\n\t\tvar s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t},\n\n\tscale: function ( sx, sy ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t},\n\n\trotate: function ( theta ) {\n\n\t\tvar c = Math.cos( theta );\n\t\tvar s = Math.sin( theta );\n\n\t\tvar te = this.elements;\n\n\t\tvar a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tvar a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( tx, ty ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n\nexport { Matrix3 };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nimport { EventDispatcher } from '../core/EventDispatcher.js';\nimport { UVMapping } from '../constants.js';\nimport { MirroredRepeatWrapping, ClampToEdgeWrapping, RepeatWrapping, LinearEncoding, UnsignedByteType, RGBAFormat, LinearMipMapLinearFilter, LinearFilter } from '../constants.js';\nimport { _Math } from '../math/Math.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Matrix3 } from '../math/Matrix3.js';\n\nvar textureId = 0;\n\nfunction Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\n\tthis.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\n\n\tthis.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\n\tthis.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearMipMapLinearFilter;\n\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\tthis.format = format !== undefined ? format : RGBAFormat;\n\tthis.type = type !== undefined ? type : UnsignedByteType;\n\n\tthis.offset = new Vector2( 0, 0 );\n\tthis.repeat = new Vector2( 1, 1 );\n\tthis.center = new Vector2( 0, 0 );\n\tthis.rotation = 0;\n\n\tthis.matrixAutoUpdate = true;\n\tthis.matrix = new Matrix3();\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t//\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t// update.  You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\tthis.encoding = encoding !== undefined ? encoding : LinearEncoding;\n\n\tthis.version = 0;\n\tthis.onUpdate = null;\n\n}\n\nTexture.DEFAULT_IMAGE = undefined;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nTexture.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Texture,\n\n\tisTexture: true,\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.image = source.image;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tfunction getDataURL( image ) {\n\n\t\t\tvar canvas;\n\n\t\t\tif ( image instanceof HTMLCanvasElement ) {\n\n\t\t\t\tcanvas = image;\n\n\t\t\t} else {\n\n\t\t\t\tcanvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\t\tcanvas.width = image.width;\n\t\t\t\tcanvas.height = image.height;\n\n\t\t\t\tvar context = canvas.getContext( '2d' );\n\n\t\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t\t} else {\n\n\t\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY\n\n\t\t};\n\n\t\tif ( this.image !== undefined ) {\n\n\t\t\t// TODO: Move to THREE.Image\n\n\t\t\tvar image = this.image;\n\n\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\timage.uuid = _Math.generateUUID(); // UGH\n\n\t\t\t}\n\n\t\t\tif ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\turl: getDataURL( image )\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\toutput.image = image.uuid;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t},\n\n\ttransformUv: function ( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.defineProperty( Texture.prototype, \"needsUpdate\", {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\n\nexport { Texture };\n","import { Vector3 } from './Vector3.js';\nimport { Sphere } from './Sphere.js';\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Box3( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\n\tthis.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\n\n}\n\nObject.assign( Box3.prototype, {\n\n\tisBox3: true,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromArray: function ( array ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tvar x = array[ i ];\n\t\t\tvar y = array[ i + 1 ];\n\t\t\tvar z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromBufferAttribute: function ( attribute ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tvar x = attribute.getX( i );\n\t\t\tvar y = attribute.getY( i );\n\t\t\tvar z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function setFromCenterAndSize( center, size ) {\n\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\n\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetFromObject: function ( object ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t},\n\n\tgetCenter: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getCenter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tgetSize: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getSize() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\texpandByObject: function () {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tvar scope, i, l;\n\n\t\tvar v1 = new Vector3();\n\n\t\tfunction traverse( node ) {\n\n\t\t\tvar geometry = node.geometry;\n\n\t\t\tif ( geometry !== undefined ) {\n\n\t\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\t\tvar vertices = geometry.vertices;\n\n\t\t\t\t\tfor ( i = 0, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tv1.copy( vertices[ i ] );\n\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( geometry.isBufferGeometry ) {\n\n\t\t\t\t\tvar attribute = geometry.attributes.position;\n\n\t\t\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\t\t\tfor ( i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tv1.fromBufferAttribute( attribute, i ).applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn function expandByObject( object ) {\n\n\t\t\tscope = this;\n\n\t\t\tobject.updateMatrixWorld( true );\n\n\t\t\tobject.traverse( traverse );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t},\n\n\tgetParameter: function ( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getParameter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t},\n\n\tintersectsSphere: ( function () {\n\n\t\tvar closestPoint = new Vector3();\n\n\t\treturn function intersectsSphere( sphere ) {\n\n\t\t\t// Find the point on the AABB closest to the sphere center.\n\t\t\tthis.clampPoint( sphere.center, closestPoint );\n\n\t\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\t\treturn closestPoint.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t\t};\n\n\t} )(),\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tvar min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= plane.constant && max >= plane.constant );\n\n\t},\n\n\tintersectsTriangle: ( function () {\n\n\t\t// triangle centered vertices\n\t\tvar v0 = new Vector3();\n\t\tvar v1 = new Vector3();\n\t\tvar v2 = new Vector3();\n\n\t\t// triangle edge vectors\n\t\tvar f0 = new Vector3();\n\t\tvar f1 = new Vector3();\n\t\tvar f2 = new Vector3();\n\n\t\tvar testAxis = new Vector3();\n\n\t\tvar center = new Vector3();\n\t\tvar extents = new Vector3();\n\n\t\tvar triangleNormal = new Vector3();\n\n\t\tfunction satForAxes( axes ) {\n\n\t\t\tvar i, j;\n\n\t\t\tfor ( i = 0, j = axes.length - 3; i <= j; i += 3 ) {\n\n\t\t\t\ttestAxis.fromArray( axes, i );\n\t\t\t\t// project the aabb onto the seperating axis\n\t\t\t\tvar r = extents.x * Math.abs( testAxis.x ) + extents.y * Math.abs( testAxis.y ) + extents.z * Math.abs( testAxis.z );\n\t\t\t\t// project all 3 vertices of the triangle onto the seperating axis\n\t\t\t\tvar p0 = v0.dot( testAxis );\n\t\t\t\tvar p1 = v1.dot( testAxis );\n\t\t\t\tvar p2 = v2.dot( testAxis );\n\t\t\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\n\t\t\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n\t\t\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\n\t\t\t\t\t// the axis is seperating and we can exit\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn function intersectsTriangle( triangle ) {\n\n\t\t\tif ( this.isEmpty() ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t\t// compute box center and extents\n\t\t\tthis.getCenter( center );\n\t\t\textents.subVectors( this.max, center );\n\n\t\t\t// translate triangle to aabb origin\n\t\t\tv0.subVectors( triangle.a, center );\n\t\t\tv1.subVectors( triangle.b, center );\n\t\t\tv2.subVectors( triangle.c, center );\n\n\t\t\t// compute edge vectors for triangle\n\t\t\tf0.subVectors( v1, v0 );\n\t\t\tf1.subVectors( v2, v1 );\n\t\t\tf2.subVectors( v0, v2 );\n\n\t\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n\t\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n\t\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\t\t\tvar axes = [\n\t\t\t\t0, - f0.z, f0.y, 0, - f1.z, f1.y, 0, - f2.z, f2.y,\n\t\t\t\tf0.z, 0, - f0.x, f1.z, 0, - f1.x, f2.z, 0, - f2.x,\n\t\t\t\t- f0.y, f0.x, 0, - f1.y, f1.x, 0, - f2.y, f2.x, 0\n\t\t\t];\n\t\t\tif ( ! satForAxes( axes ) ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t\t// test 3 face normals from the aabb\n\t\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\n\t\t\tif ( ! satForAxes( axes ) ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t\t// finally testing the face normal of the triangle\n\t\t\t// use already existing triangle edge vectors here\n\t\t\ttriangleNormal.crossVectors( f0, f1 );\n\t\t\taxes = [ triangleNormal.x, triangleNormal.y, triangleNormal.z ];\n\t\t\treturn satForAxes( axes );\n\n\t\t};\n\n\t} )(),\n\n\tclampPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function distanceToPoint( point ) {\n\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t};\n\n\t}(),\n\n\tgetBoundingSphere: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function getBoundingSphere( target ) {\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Box3: .getBoundingSphere() target is now required' );\n\t\t\t\ttarget = new Sphere();\n\n\t\t\t}\n\n\t\t\tthis.getCenter( target.center );\n\n\t\t\ttarget.radius = this.getSize( v1 ).length() * 0.5;\n\n\t\t\treturn target;\n\n\t\t};\n\n\t}(),\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar points = [\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3()\n\t\t];\n\n\t\treturn function applyMatrix4( matrix ) {\n\n\t\t\t// transform of empty box is an empty box.\n\t\t\tif ( this.isEmpty() ) return this;\n\n\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );\t// 111\n\n\t\t\tthis.setFromPoints( points );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n} );\n\n\nexport { Box3 };\n","import { Box3 } from './Box3.js';\nimport { Vector3 } from './Vector3.js';\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Sphere( center, radius ) {\n\n\tthis.center = ( center !== undefined ) ? center : new Vector3();\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\n\n}\n\nObject.assign( Sphere.prototype, {\n\n\tset: function ( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function () {\n\n\t\tvar box = new Box3();\n\n\t\treturn function setFromPoints( points, optionalCenter ) {\n\n\t\t\tvar center = this.center;\n\n\t\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\t\tcenter.copy( optionalCenter );\n\n\t\t\t} else {\n\n\t\t\t\tbox.setFromPoints( points ).getCenter( center );\n\n\t\t\t}\n\n\t\t\tvar maxRadiusSq = 0;\n\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t\t}\n\n\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\treturn ( this.radius <= 0 );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t},\n\n\tclampPoint: function ( point, target ) {\n\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\ttarget.sub( this.center ).normalize();\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn target;\n\n\t},\n\n\tgetBoundingBox: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .getBoundingBox() target is now required' );\n\t\t\ttarget = new Box3();\n\n\t\t}\n\n\t\ttarget.set( this.center, this.center );\n\t\ttarget.expandByScalar( this.radius );\n\n\t\treturn target;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n} );\n\n\nexport { Sphere };\n","import { Vector3 } from './Vector3.js';\nimport { Sphere } from './Sphere.js';\nimport { Plane } from './Plane.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / http://clara.io\n */\n\nfunction Frustum( p0, p1, p2, p3, p4, p5 ) {\n\n\tthis.planes = [\n\n\t\t( p0 !== undefined ) ? p0 : new Plane(),\n\t\t( p1 !== undefined ) ? p1 : new Plane(),\n\t\t( p2 !== undefined ) ? p2 : new Plane(),\n\t\t( p3 !== undefined ) ? p3 : new Plane(),\n\t\t( p4 !== undefined ) ? p4 : new Plane(),\n\t\t( p5 !== undefined ) ? p5 : new Plane()\n\n\t];\n\n}\n\nObject.assign( Frustum.prototype, {\n\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tvar planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( frustum ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix: function ( m ) {\n\n\t\tvar planes = this.planes;\n\t\tvar me = m.elements;\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\tintersectsObject: function () {\n\n\t\tvar sphere = new Sphere();\n\n\t\treturn function intersectsObject( object ) {\n\n\t\t\tvar geometry = object.geometry;\n\n\t\t\tif ( geometry.boundingSphere === null )\n\t\t\t\tgeometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere )\n\t\t\t\t.applyMatrix4( object.matrixWorld );\n\n\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSprite: function () {\n\n\t\tvar sphere = new Sphere();\n\n\t\treturn function intersectsSprite( sprite ) {\n\n\t\t\tsphere.center.set( 0, 0, 0 );\n\t\t\tsphere.radius = 0.7071067811865476;\n\t\t\tsphere.applyMatrix4( sprite.matrixWorld );\n\n\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar planes = this.planes;\n\t\tvar center = sphere.center;\n\t\tvar negRadius = - sphere.radius;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tintersectsBox: function () {\n\n\t\tvar p1 = new Vector3(),\n\t\t\tp2 = new Vector3();\n\n\t\treturn function intersectsBox( box ) {\n\n\t\t\tvar planes = this.planes;\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tvar plane = planes[ i ];\n\n\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\n\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\n\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\n\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\n\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\n\n\t\t\t\t// if both outside plane, no intersection\n\n\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t};\n\n\t}(),\n\n\tcontainsPoint: function ( point ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n} );\n\n\nexport { Frustum };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport { Texture } from './Texture.js';\nimport { NearestFilter } from '../constants.js';\n\nfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { data: data, width: width, height: height };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\tthis.unpackAlignment = 1;\n\n}\n\nDataTexture.prototype = Object.create( Texture.prototype );\nDataTexture.prototype.constructor = DataTexture;\n\nDataTexture.prototype.isDataTexture = true;\n\n\nexport { DataTexture };\n","import { Matrix3 } from './Matrix3.js';\nimport { Vector3 } from './Vector3.js';\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Plane( normal, constant ) {\n\n\t// normal is assumed to be normalized\n\n\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n}\n\nObject.assign( Plane.prototype, {\n\n\tset: function ( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponents: function ( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCoplanarPoints: function () {\n\n\t\tvar v1 = new Vector3();\n\t\tvar v2 = new Vector3();\n\n\t\treturn function setFromCoplanarPoints( a, b, c ) {\n\n\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\n\n\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t},\n\n\tdistanceToSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t},\n\n\tprojectPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .projectPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\n\n\t},\n\n\tintersectLine: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function intersectLine( line, target ) {\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Plane: .intersectLine() target is now required' );\n\t\t\t\ttarget = new Vector3();\n\n\t\t\t}\n\n\t\t\tvar direction = line.delta( v1 );\n\n\t\t\tvar denominator = this.normal.dot( direction );\n\n\t\t\tif ( denominator === 0 ) {\n\n\t\t\t\t// line is coplanar, return origin\n\t\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\t\treturn target.copy( line.start );\n\n\t\t\t\t}\n\n\t\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t\t};\n\n\t}(),\n\n\tintersectsLine: function ( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tvar startSign = this.distanceToPoint( line.start );\n\t\tvar endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t},\n\n\tcoplanarPoint: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar v1 = new Vector3();\n\t\tvar m1 = new Matrix3();\n\n\t\treturn function applyMatrix4( matrix, optionalNormalMatrix ) {\n\n\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\n\n\t\t\tvar referencePoint = this.coplanarPoint( v1 ).applyMatrix4( matrix );\n\n\t\t\tvar normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n} );\n\n\nexport { Plane };\n","import { _Math } from './Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nfunction Color( r, g, b ) {\n\n\tif ( g === undefined && b === undefined ) {\n\n\t\t// r is THREE.Color, hex or string\n\t\treturn this.set( r );\n\n\t}\n\n\treturn this.setRGB( r, g, b );\n\n}\n\nObject.assign( Color.prototype, {\n\n\tisColor: true,\n\n\tr: 1, g: 1, b: 1,\n\n\tset: function ( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetHex: function ( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t},\n\n\tsetRGB: function ( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t},\n\n\tsetHSL: function () {\n\n\t\tfunction hue2rgb( p, q, t ) {\n\n\t\t\tif ( t < 0 ) t += 1;\n\t\t\tif ( t > 1 ) t -= 1;\n\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\t\t\tif ( t < 1 / 2 ) return q;\n\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\t\t\treturn p;\n\n\t\t}\n\n\t\treturn function setHSL( h, s, l ) {\n\n\t\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\t\th = _Math.euclideanModulo( h, 1 );\n\t\t\ts = _Math.clamp( s, 0, 1 );\n\t\t\tl = _Math.clamp( l, 0, 1 );\n\n\t\t\tif ( s === 0 ) {\n\n\t\t\t\tthis.r = this.g = this.b = l;\n\n\t\t\t} else {\n\n\t\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\t\tvar q = ( 2 * l ) - p;\n\n\t\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetStyle: function ( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tvar color;\n\t\t\tvar name = m[ 1 ];\n\t\t\tvar components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tvar hex = m[ 1 ];\n\t\t\tvar size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\t// color keywords\n\t\t\tvar hex = ColorKeywords[ style ];\n\n\t\t\tif ( hex !== undefined ) {\n\n\t\t\t\t// red\n\t\t\t\tthis.setHex( hex );\n\n\t\t\t} else {\n\n\t\t\t\t// unknown color\n\t\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t},\n\n\tcopy: function ( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t},\n\n\tconvertGammaToLinear: function () {\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tthis.r = r * r;\n\t\tthis.g = g * g;\n\t\tthis.b = b * b;\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToGamma: function () {\n\n\t\tthis.r = Math.sqrt( this.r );\n\t\tthis.g = Math.sqrt( this.g );\n\t\tthis.b = Math.sqrt( this.b );\n\n\t\treturn this;\n\n\t},\n\n\tgetHex: function () {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t},\n\n\tgetHexString: function () {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t},\n\n\tgetHSL: function ( target ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Color: .getHSL() target is now required' );\n\t\t\ttarget = { h: 0, s: 0, l: 0 };\n\n\t\t}\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tvar max = Math.max( r, g, b );\n\t\tvar min = Math.min( r, g, b );\n\n\t\tvar hue, saturation;\n\t\tvar lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tvar delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t},\n\n\tgetStyle: function () {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t},\n\n\toffsetHSL: function () {\n\n\t\tvar hsl = {};\n\n\t\treturn function ( h, s, l ) {\n\n\t\t\tthis.getHSL( hsl );\n\n\t\t\thsl.h += h; hsl.s += s; hsl.l += l;\n\n\t\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tadd: function ( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t},\n\n\taddColors: function ( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn this.getHex();\n\n\t}\n\n} );\n\n\nexport { Color };\n","import alphamap_fragment from './ShaderChunk/alphamap_fragment.glsl';\nimport alphamap_pars_fragment from './ShaderChunk/alphamap_pars_fragment.glsl';\nimport alphatest_fragment from './ShaderChunk/alphatest_fragment.glsl';\nimport aomap_fragment from './ShaderChunk/aomap_fragment.glsl';\nimport aomap_pars_fragment from './ShaderChunk/aomap_pars_fragment.glsl';\nimport apply_accumulative_buffers_fragment from './ShaderChunk/apply_accumulative_buffers_fragment.glsl';\nimport apply_accumulative_buffers_pars_fragment from './ShaderChunk/apply_accumulative_buffers_pars_fragment.glsl';\nimport begin_vertex from './ShaderChunk/begin_vertex.glsl';\nimport beginnormal_vertex from './ShaderChunk/beginnormal_vertex.glsl';\nimport bsdfs from './ShaderChunk/bsdfs.glsl';\nimport bumpmap_pars_fragment from './ShaderChunk/bumpmap_pars_fragment.glsl';\nimport clipping_planes_fragment from './ShaderChunk/clipping_planes_fragment.glsl';\nimport clipping_planes_pars_fragment from './ShaderChunk/clipping_planes_pars_fragment.glsl';\nimport clipping_planes_pars_vertex from './ShaderChunk/clipping_planes_pars_vertex.glsl';\nimport clipping_planes_vertex from './ShaderChunk/clipping_planes_vertex.glsl';\nimport color_fragment from './ShaderChunk/color_fragment.glsl';\nimport color_pars_fragment from './ShaderChunk/color_pars_fragment.glsl';\nimport color_pars_vertex from './ShaderChunk/color_pars_vertex.glsl';\nimport color_vertex from './ShaderChunk/color_vertex.glsl';\nimport common from './ShaderChunk/common.glsl';\nimport cube_uv_reflection_fragment from './ShaderChunk/cube_uv_reflection_fragment.glsl';\nimport defaultnormal_vertex from './ShaderChunk/defaultnormal_vertex.glsl';\nimport displacementmap_pars_vertex from './ShaderChunk/displacementmap_pars_vertex.glsl';\nimport displacementmap_vertex from './ShaderChunk/displacementmap_vertex.glsl';\nimport emissivemap_fragment from './ShaderChunk/emissivemap_fragment.glsl';\nimport emissivemap_pars_fragment from './ShaderChunk/emissivemap_pars_fragment.glsl';\nimport encodings_fragment from './ShaderChunk/encodings_fragment.glsl';\nimport encodings_pars_fragment from './ShaderChunk/encodings_pars_fragment.glsl';\nimport envmap_fragment from './ShaderChunk/envmap_fragment.glsl';\nimport envmap_pars_fragment from './ShaderChunk/envmap_pars_fragment.glsl';\nimport envmap_pars_vertex from './ShaderChunk/envmap_pars_vertex.glsl';\nimport envmap_vertex from './ShaderChunk/envmap_vertex.glsl';\nimport fog_vertex from './ShaderChunk/fog_vertex.glsl';\nimport fog_pars_vertex from './ShaderChunk/fog_pars_vertex.glsl';\nimport fog_fragment from './ShaderChunk/fog_fragment.glsl';\nimport fog_pars_fragment from './ShaderChunk/fog_pars_fragment.glsl';\nimport gradientmap_pars_fragment from './ShaderChunk/gradientmap_pars_fragment.glsl';\nimport lightmap_fragment from './ShaderChunk/lightmap_fragment.glsl';\nimport lightmap_pars_fragment from './ShaderChunk/lightmap_pars_fragment.glsl';\nimport lights_lambert_vertex from './ShaderChunk/lights_lambert_vertex.glsl';\nimport lights_pars_begin from './ShaderChunk/lights_pars_begin.glsl';\nimport lights_pars_maps from './ShaderChunk/lights_pars_maps.glsl';\nimport lights_phong_fragment from './ShaderChunk/lights_phong_fragment.glsl';\nimport lights_phong_pars_fragment from './ShaderChunk/lights_phong_pars_fragment.glsl';\nimport lights_physical_fragment from './ShaderChunk/lights_physical_fragment.glsl';\nimport lights_physical_pars_fragment from './ShaderChunk/lights_physical_pars_fragment.glsl';\nimport lights_fragment_begin from './ShaderChunk/lights_fragment_begin.glsl';\nimport lights_fragment_maps from './ShaderChunk/lights_fragment_maps.glsl';\nimport lights_fragment_end from './ShaderChunk/lights_fragment_end.glsl';\nimport logdepthbuf_fragment from './ShaderChunk/logdepthbuf_fragment.glsl';\nimport logdepthbuf_pars_fragment from './ShaderChunk/logdepthbuf_pars_fragment.glsl';\nimport logdepthbuf_pars_vertex from './ShaderChunk/logdepthbuf_pars_vertex.glsl';\nimport logdepthbuf_vertex from './ShaderChunk/logdepthbuf_vertex.glsl';\nimport map_fragment from './ShaderChunk/map_fragment.glsl';\nimport map_pars_fragment from './ShaderChunk/map_pars_fragment.glsl';\nimport map_particle_fragment from './ShaderChunk/map_particle_fragment.glsl';\nimport map_particle_pars_fragment from './ShaderChunk/map_particle_pars_fragment.glsl';\nimport metalnessmap_fragment from './ShaderChunk/metalnessmap_fragment.glsl';\nimport metalnessmap_pars_fragment from './ShaderChunk/metalnessmap_pars_fragment.glsl';\nimport morphnormal_vertex from './ShaderChunk/morphnormal_vertex.glsl';\nimport morphtarget_pars_vertex from './ShaderChunk/morphtarget_pars_vertex.glsl';\nimport morphtarget_vertex from './ShaderChunk/morphtarget_vertex.glsl';\nimport normal_fragment_begin from './ShaderChunk/normal_fragment_begin.glsl';\nimport normal_fragment_maps from './ShaderChunk/normal_fragment_maps.glsl';\nimport normalmap_pars_fragment from './ShaderChunk/normalmap_pars_fragment.glsl';\nimport packing from './ShaderChunk/packing.glsl';\nimport premultiplied_alpha_fragment from './ShaderChunk/premultiplied_alpha_fragment.glsl';\nimport project_vertex from './ShaderChunk/project_vertex.glsl';\nimport dithering_fragment from './ShaderChunk/dithering_fragment.glsl';\nimport dithering_pars_fragment from './ShaderChunk/dithering_pars_fragment.glsl';\nimport roughnessmap_fragment from './ShaderChunk/roughnessmap_fragment.glsl';\nimport roughnessmap_pars_fragment from './ShaderChunk/roughnessmap_pars_fragment.glsl';\nimport shadowmap_pars_fragment from './ShaderChunk/shadowmap_pars_fragment.glsl';\nimport shadowmap_pars_vertex from './ShaderChunk/shadowmap_pars_vertex.glsl';\nimport shadowmap_vertex from './ShaderChunk/shadowmap_vertex.glsl';\nimport shadowmask_pars_fragment from './ShaderChunk/shadowmask_pars_fragment.glsl';\nimport skinbase_vertex from './ShaderChunk/skinbase_vertex.glsl';\nimport skinning_pars_vertex from './ShaderChunk/skinning_pars_vertex.glsl';\nimport skinning_vertex from './ShaderChunk/skinning_vertex.glsl';\nimport skinnormal_vertex from './ShaderChunk/skinnormal_vertex.glsl';\nimport specularmap_fragment from './ShaderChunk/specularmap_fragment.glsl';\nimport specularmap_pars_fragment from './ShaderChunk/specularmap_pars_fragment.glsl';\nimport tonemapping_fragment from './ShaderChunk/tonemapping_fragment.glsl';\nimport tonemapping_pars_fragment from './ShaderChunk/tonemapping_pars_fragment.glsl';\nimport uv_pars_fragment from './ShaderChunk/uv_pars_fragment.glsl';\nimport uv_pars_vertex from './ShaderChunk/uv_pars_vertex.glsl';\nimport uv_vertex from './ShaderChunk/uv_vertex.glsl';\nimport uv2_pars_fragment from './ShaderChunk/uv2_pars_fragment.glsl';\nimport uv2_pars_vertex from './ShaderChunk/uv2_pars_vertex.glsl';\nimport uv2_vertex from './ShaderChunk/uv2_vertex.glsl';\nimport worldpos_vertex from './ShaderChunk/worldpos_vertex.glsl';\n\nimport cube_frag from './ShaderLib/cube_frag.glsl';\nimport cube_vert from './ShaderLib/cube_vert.glsl';\nimport depth_frag from './ShaderLib/depth_frag.glsl';\nimport depth_vert from './ShaderLib/depth_vert.glsl';\nimport distanceRGBA_frag from './ShaderLib/distanceRGBA_frag.glsl';\nimport distanceRGBA_vert from './ShaderLib/distanceRGBA_vert.glsl';\nimport equirect_frag from './ShaderLib/equirect_frag.glsl';\nimport equirect_vert from './ShaderLib/equirect_vert.glsl';\nimport linedashed_frag from './ShaderLib/linedashed_frag.glsl';\nimport linedashed_vert from './ShaderLib/linedashed_vert.glsl';\nimport meshbasic_frag from './ShaderLib/meshbasic_frag.glsl';\nimport meshbasic_vert from './ShaderLib/meshbasic_vert.glsl';\nimport meshlambert_frag from './ShaderLib/meshlambert_frag.glsl';\nimport meshlambert_vert from './ShaderLib/meshlambert_vert.glsl';\nimport meshphong_frag from './ShaderLib/meshphong_frag.glsl';\nimport meshphong_vert from './ShaderLib/meshphong_vert.glsl';\nimport meshphysical_frag from './ShaderLib/meshphysical_frag.glsl';\nimport meshphysical_vert from './ShaderLib/meshphysical_vert.glsl';\nimport normal_frag from './ShaderLib/normal_frag.glsl';\nimport normal_vert from './ShaderLib/normal_vert.glsl';\nimport points_frag from './ShaderLib/points_frag.glsl';\nimport points_vert from './ShaderLib/points_vert.glsl';\nimport shadow_frag from './ShaderLib/shadow_frag.glsl';\nimport shadow_vert from './ShaderLib/shadow_vert.glsl';\n\nexport var ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tapply_accumulative_buffers_fragment: apply_accumulative_buffers_fragment,\n\tapply_accumulative_buffers_pars_fragment: apply_accumulative_buffers_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_vertex: lights_lambert_vertex,\n\tlights_pars_begin: lights_pars_begin,\n\tlights_pars_maps: lights_pars_maps,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_fragment_begin: lights_fragment_begin,\n\tlights_fragment_maps: lights_fragment_maps,\n\tlights_fragment_end: lights_fragment_end,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment_begin: normal_fragment_begin,\n\tnormal_fragment_maps: normal_fragment_maps,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tcube_frag: cube_frag,\n\tcube_vert: cube_vert,\n\tdepth_frag: depth_frag,\n\tdepth_vert: depth_vert,\n\tdistanceRGBA_frag: distanceRGBA_frag,\n\tdistanceRGBA_vert: distanceRGBA_vert,\n\tequirect_frag: equirect_frag,\n\tequirect_vert: equirect_vert,\n\tlinedashed_frag: linedashed_frag,\n\tlinedashed_vert: linedashed_vert,\n\tmeshbasic_frag: meshbasic_frag,\n\tmeshbasic_vert: meshbasic_vert,\n\tmeshlambert_frag: meshlambert_frag,\n\tmeshlambert_vert: meshlambert_vert,\n\tmeshphong_frag: meshphong_frag,\n\tmeshphong_vert: meshphong_vert,\n\tmeshphysical_frag: meshphysical_frag,\n\tmeshphysical_vert: meshphysical_vert,\n\tnormal_frag: normal_frag,\n\tnormal_vert: normal_vert,\n\tpoints_frag: points_frag,\n\tpoints_vert: points_vert,\n\tshadow_frag: shadow_frag,\n\tshadow_vert: shadow_vert\n};\n","/**\n * Uniform Utilities\n */\n\nvar UniformsUtils = {\n\n\tmerge: function ( uniforms ) {\n\n\t\tvar merged = {};\n\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\n\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\n\n\t\t\tfor ( var p in tmp ) {\n\n\t\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn merged;\n\n\t},\n\n\tclone: function ( uniforms_src ) {\n\n\t\tvar uniforms_dst = {};\n\n\t\tfor ( var u in uniforms_src ) {\n\n\t\t\tuniforms_dst[ u ] = {};\n\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\n\n\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\n\n\t\t\t\tif ( parameter_src && ( parameter_src.isColor ||\n\t\t\t\t\tparameter_src.isMatrix3 || parameter_src.isMatrix4 ||\n\t\t\t\t\tparameter_src.isVector2 || parameter_src.isVector3 || parameter_src.isVector4 ||\n\t\t\t\t\tparameter_src.isTexture ) ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\n\n\t\t\t\t} else if ( Array.isArray( parameter_src ) ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn uniforms_dst;\n\n\t}\n\n};\n\n\nexport { UniformsUtils };\n","import { Quaternion } from './Quaternion.js';\nimport { Vector3 } from './Vector3.js';\nimport { Matrix4 } from './Matrix4.js';\nimport { _Math } from './Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nfunction Euler( x, y, z, order ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._order = order || Euler.DefaultOrder;\n\n}\n\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nEuler.DefaultOrder = 'XYZ';\n\nObject.defineProperties( Euler.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\torder: {\n\n\t\tget: function () {\n\n\t\t\treturn this._order;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._order = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Euler.prototype, {\n\n\tisEuler: true,\n\n\tset: function ( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t},\n\n\tcopy: function ( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m, order, update ) {\n\n\t\tvar clamp = _Math.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements;\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = 0;\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._y = 0;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromQuaternion: function () {\n\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function setFromQuaternion( q, order, update ) {\n\n\t\t\tmatrix.makeRotationFromQuaternion( q );\n\n\t\t\treturn this.setFromRotationMatrix( matrix, order, update );\n\n\t\t};\n\n\t}(),\n\n\tsetFromVector3: function ( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t},\n\n\treorder: function () {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\tvar q = new Quaternion();\n\n\t\treturn function reorder( newOrder ) {\n\n\t\t\tq.setFromEuler( this );\n\n\t\t\treturn this.setFromQuaternion( q, newOrder );\n\n\t\t};\n\n\t}(),\n\n\tequals: function ( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t},\n\n\ttoVector3: function ( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {}\n\n} );\n\n\nexport { Euler };\n","import { Color } from '../../math/Color.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Matrix3 } from '../../math/Matrix3.js';\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nvar UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() },\n\n\t\talphaMap: { value: null },\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 },\n\t\trefractionRatio: { value: 0.98 },\n\t\tmaxMipLevel: { value: 0 }\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\t\tlightDirection: { value: [] },\n\t\tdirectionalNormalOffset: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotShadowMap: { value: [] },\n\t\tspotShadowMatrix: { value: [] },\n\t\tspotPosition: { value: [] },\n\t\tspotNormalOffset: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {},\n\t\t\tshadow: {}\n\t\t} },\n\n\t\trectShadowMap: { value: [] },\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t}\n\n};\n\nexport { UniformsLib };\n","import { ShaderChunk } from './ShaderChunk.js';\nimport { UniformsUtils } from './UniformsUtils.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { UniformsLib } from './UniformsLib.js';\nimport { Color } from '../../math/Color.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n */\n\nvar ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 0.5 },\n\t\t\t\tmetalness: { value: 0.5 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.normal_vert,\n\t\tfragmentShader: ShaderChunk.normal_frag\n\n\t},\n\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\tcube: {\n\n\t\tuniforms: {\n\t\t\ttCube: { value: null },\n\t\t\ttFlip: { value: - 1 },\n\t\t\topacity: { value: 1.0 }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: UniformsUtils.merge( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\tclearCoat: { value: 0 },\n\t\t\tclearCoatRoughness: { value: 0 }\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\n\nexport { ShaderLib };\n","/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector4( x, y, z, w ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\tthis.w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.assign( Vector4.prototype, {\n\n\tisVector4: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tsetAxisAngleFromQuaternion: function ( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar angle, x, y, z,\t\t// variables for result\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tvar xx = ( m11 + 1 ) / 2;\n\t\t\tvar yy = ( m22 + 1 ) / 2;\n\t\t\tvar zz = ( m33 + 1 ) / 2;\n\t\t\tvar xy = ( m12 + m21 ) / 4;\n\t\t\tvar xz = ( m13 + m31 ) / 4;\n\t\t\tvar yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t                   ( m13 - m31 ) * ( m13 - m31 ) +\n\t\t                   ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min, max;\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new Vector4();\n\t\t\t\tmax = new Vector4();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector4 };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLAttributes( gl ) {\n\n\tvar buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar usage = attribute.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\n\n\t\tvar buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tvar type = gl.FLOAT;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = gl.FLOAT;\n\n\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\ttype = gl.UNSIGNED_SHORT;\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = gl.SHORT;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = gl.UNSIGNED_INT;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = gl.INT;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = gl.BYTE;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = gl.UNSIGNED_BYTE;\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( attribute.dynamic === false ) {\n\n\t\t\tgl.bufferData( bufferType, array, gl.STATIC_DRAW );\n\n\t\t} else if ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else if ( updateRange.count === 0 ) {\n\n\t\t\tconsole.error( 'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.' );\n\n\t\t} else {\n\n\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tvar data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tvar data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\n\nexport { WebGLAttributes };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Layers() {\n\n\tthis.mask = 1 | 0;\n\n}\n\nObject.assign( Layers.prototype, {\n\n\tset: function ( channel ) {\n\n\t\tthis.mask = 1 << channel | 0;\n\n\t},\n\n\tenable: function ( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t},\n\n\ttoggle: function ( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t},\n\n\tdisable: function ( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t},\n\n\ttest: function ( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n} );\n\n\nexport { Layers };\n","import { Quaternion } from '../math/Quaternion.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { EventDispatcher } from './EventDispatcher.js';\nimport { Euler } from '../math/Euler.js';\nimport { Layers } from './Layers.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { _Math } from '../math/Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author elephantatwork / www.elephantatwork.ch\n */\n\nvar object3DId = 0;\n\nfunction Object3D() {\n\n\tObject.defineProperty( this, 'id', { value: object3DId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = null;\n\tthis.children = [];\n\n\tthis.up = Object3D.DefaultUp.clone();\n\n\tvar position = new Vector3();\n\tvar rotation = new Euler();\n\tvar quaternion = new Quaternion();\n\tvar scale = new Vector3( 1, 1, 1 );\n\n\tfunction onRotationChange() {\n\n\t\tquaternion.setFromEuler( rotation, false );\n\n\t}\n\n\tfunction onQuaternionChange() {\n\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t}\n\n\trotation.onChange( onRotationChange );\n\tquaternion.onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t\tmodelViewMatrix: {\n\t\t\tvalue: new Matrix4()\n\t\t},\n\t\tnormalMatrix: {\n\t\t\tvalue: new Matrix3()\n\t\t}\n\t} );\n\n\tthis.matrix = new Matrix4();\n\tthis.matrixWorld = new Matrix4();\n\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.layers = new Layers();\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\tthis.renderOrder = 0;\n\n\tthis.userData = {};\n\n}\n\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\n\nObject3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Object3D,\n\n\tisObject3D: true,\n\n\tonBeforeRender: function () {},\n\tonAfterRender: function () {},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function () {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar q1 = new Quaternion();\n\n\t\treturn function rotateOnAxis( axis, angle ) {\n\n\t\t\tq1.setFromAxisAngle( axis, angle );\n\n\t\t\tthis.quaternion.multiply( q1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateOnWorldAxis: function () {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\tvar q1 = new Quaternion();\n\n\t\treturn function rotateOnWorldAxis( axis, angle ) {\n\n\t\t\tq1.setFromAxisAngle( axis, angle );\n\n\t\t\tthis.quaternion.premultiply( q1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateX: function () {\n\n\t\tvar v1 = new Vector3( 1, 0, 0 );\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\tvar v1 = new Vector3( 0, 1, 0 );\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\tvar v1 = new Vector3( 0, 0, 1 );\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\ttranslateOnAxis: function () {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function translateOnAxis( axis, distance ) {\n\n\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslateX: function () {\n\n\t\tvar v1 = new Vector3( 1, 0, 0 );\n\n\t\treturn function translateX( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateY: function () {\n\n\t\tvar v1 = new Vector3( 0, 1, 0 );\n\n\t\treturn function translateY( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateZ: function () {\n\n\t\tvar v1 = new Vector3( 0, 0, 1 );\n\n\t\treturn function translateZ( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function () {\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function worldToLocal( vector ) {\n\n\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\t// This method does not support objects with rotated and/or translated parent(s)\n\n\t\tvar m1 = new Matrix4();\n\t\tvar vector = new Vector3();\n\n\t\treturn function lookAt( x, y, z ) {\n\n\t\t\tif ( x.isVector3 ) {\n\n\t\t\t\tvector.copy( x );\n\n\t\t\t} else {\n\n\t\t\t\tvector.set( x, y, z );\n\n\t\t\t}\n\n\t\t\tif ( this.isCamera ) {\n\n\t\t\t\tm1.lookAt( this.position, vector, this.up );\n\n\t\t\t} else {\n\n\t\t\t\tm1.lookAt( vector, this.position, this.up );\n\n\t\t\t}\n\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\n\n\t\t};\n\n\t}(),\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( ( object && object.isObject3D ) ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tobject.dispatchEvent( { type: 'added' } );\n\n\t\t\tthis.children.push( object );\n\n\t\t} else {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\n\t\t\tobject.dispatchEvent( { type: 'removed' } );\n\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetObjectById: function ( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t},\n\n\tgetObjectByName: function ( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tvar child = this.children[ i ];\n\t\t\tvar object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function () {\n\n\t\tvar position = new Vector3();\n\t\tvar scale = new Vector3();\n\n\t\treturn function getWorldQuaternion( target ) {\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\n\t\t\t\ttarget = new Quaternion();\n\n\t\t\t}\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, target, scale );\n\n\t\t\treturn target;\n\n\t\t};\n\n\t}(),\n\n\tgetWorldScale: function () {\n\n\t\tvar position = new Vector3();\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function getWorldScale( target ) {\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\n\t\t\t\ttarget = new Vector3();\n\n\t\t\t}\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, quaternion, target );\n\n\t\t\treturn target;\n\n\t\t};\n\n\t}(),\n\n\tgetWorldDirection: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function getWorldDirection( target ) {\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\n\t\t\t\ttarget = new Vector3();\n\n\t\t\t}\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn target.set( 0, 0, 1 ).applyQuaternion( quaternion );\n\n\t\t};\n\n\t}(),\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tvar parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tvar output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tvar object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.geometry !== undefined ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tvar parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tvar shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tvar shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tvar uuids = [];\n\n\t\t\t\tfor ( var i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tvar geometries = extractFromCache( meta.geometries );\n\t\t\tvar materials = extractFromCache( meta.materials );\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\t\t\tvar shapes = extractFromCache( meta.shapes );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\t\t\treturn values;\n\n\t\t}\n\n\t},\n\n\tclone: function ( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t},\n\n\tcopy: function ( source, recursive ) {\n\n\t\tif ( recursive === undefined ) recursive = true;\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tvar child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Object3D };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Quaternion } from '../math/Quaternion.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\n\nfunction Camera() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new Matrix4();\n\tthis.projectionMatrix = new Matrix4();\n\n}\n\nCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Camera,\n\n\tisCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\n\t\treturn this;\n\n\t},\n\n\tgetWorldDirection: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function getWorldDirection( target ) {\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Camera: .getWorldDirection() target is now required' );\n\t\t\t\ttarget = new Vector3();\n\n\t\t\t}\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn target.set( 0, 0, - 1 ).applyQuaternion( quaternion );\n\n\t\t};\n\n\t}(),\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n} );\n\nexport { Camera };\n","import { Camera } from './Camera.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author arose / http://github.com/arose\n */\n\nfunction OrthographicCamera( left, right, top, bottom, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'OrthographicCamera';\n\n\tthis.zoom = 1;\n\tthis.view = null;\n\n\tthis.left = left;\n\tthis.right = right;\n\tthis.top = top;\n\tthis.bottom = bottom;\n\n\tthis.near = ( near !== undefined ) ? near : 0.1;\n\tthis.far = ( far !== undefined ) ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n}\n\nOrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: OrthographicCamera,\n\n\tisOrthographicCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t},\n\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tvar cx = ( this.right + this.left ) / 2;\n\t\tvar cy = ( this.top + this.bottom ) / 2;\n\n\t\tvar left = cx - dx;\n\t\tvar right = cx + dx;\n\t\tvar top = cy + dy;\n\t\tvar bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tvar zoomW = this.zoom / ( this.view.width / this.view.fullWidth );\n\t\t\tvar zoomH = this.zoom / ( this.view.height / this.view.fullHeight );\n\t\t\tvar scaleW = ( this.right - this.left ) / this.view.width;\n\t\t\tvar scaleH = ( this.top - this.bottom ) / this.view.height;\n\n\t\t\tleft += scaleW * ( this.view.offsetX / zoomW );\n\t\t\tright = left + scaleW * ( this.view.width / zoomW );\n\t\t\ttop -= scaleH * ( this.view.offsetY / zoomH );\n\t\t\tbottom = top - scaleH * ( this.view.height / zoomH );\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { OrthographicCamera };\n","import { Color } from '../math/Color.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Face3( a, b, c, normal, color, materialIndex ) {\n\n\tthis.a = a;\n\tthis.b = b;\n\tthis.c = c;\n\n\tthis.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\n\n\tthis.color = ( color && color.isColor ) ? color : new Color();\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\n\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n\n}\n\nObject.assign( Face3.prototype, {\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.a = source.a;\n\t\tthis.b = source.b;\n\t\tthis.c = source.c;\n\n\t\tthis.normal.copy( source.normal );\n\t\tthis.color.copy( source.color );\n\n\t\tthis.materialIndex = source.materialIndex;\n\n\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Face3 };\n","import { EventDispatcher } from './EventDispatcher.js';\nimport { Face3 } from './Face3.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { Box3 } from '../math/Box3.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\nimport { Object3D } from './Object3D.js';\nimport { _Math } from '../math/Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author bhouston / http://clara.io\n */\n\nvar geometryId = 0; // Geometry uses even numbers as Id\n\nfunction Geometry() {\n\n\tObject.defineProperty( this, 'id', { value: geometryId += 2 } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Geometry';\n\n\tthis.vertices = [];\n\tthis.colors = [];\n\tthis.faces = [];\n\tthis.faceVertexUvs = [[]];\n\n\tthis.morphTargets = [];\n\tthis.morphNormals = [];\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\tthis.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.elementsNeedUpdate = false;\n\tthis.verticesNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.lineDistancesNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Geometry,\n\n\tisGeometry: true,\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\tthis.verticesNeedUpdate = true;\n\t\tthis.normalsNeedUpdate = true;\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function () {\n\n\t\t// rotate geometry around world x-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\tm1.makeRotationX( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\t// rotate geometry around world y-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\tm1.makeRotationY( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\t// rotate geometry around world z-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\tm1.makeRotationZ( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function () {\n\n\t\t// translate geometry\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function translate( x, y, z ) {\n\n\t\t\tm1.makeTranslation( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tscale: function () {\n\n\t\t// scale geometry\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function scale( x, y, z ) {\n\n\t\t\tm1.makeScale( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\tvar obj = new Object3D();\n\n\t\treturn function lookAt( vector ) {\n\n\t\t\tobj.lookAt( vector );\n\n\t\t\tobj.updateMatrix();\n\n\t\t\tthis.applyMatrix( obj.matrix );\n\n\t\t};\n\n\t}(),\n\n\tfromBufferGeometry: function ( geometry ) {\n\n\t\tvar scope = this;\n\n\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\n\t\tvar attributes = geometry.attributes;\n\n\t\tvar positions = attributes.position.array;\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\n\n\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\n\n\t\tvar tempNormals = [];\n\t\tvar tempUVs = [];\n\t\tvar tempUVs2 = [];\n\n\t\tfor ( var i = 0, j = 0; i < positions.length; i += 3, j += 2 ) {\n\n\t\t\tscope.vertices.push( new Vector3( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] ) );\n\n\t\t\tif ( normals !== undefined ) {\n\n\t\t\t\ttempNormals.push( new Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( colors !== undefined ) {\n\n\t\t\t\tscope.colors.push( new Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\ttempUVs.push( new Vector2( uvs[ j ], uvs[ j + 1 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\ttempUVs2.push( new Vector2( uvs2[ j ], uvs2[ j + 1 ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addFace( a, b, c, materialIndex ) {\n\n\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\n\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\n\n\t\t\tvar face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\n\n\t\t\tscope.faces.push( face );\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\n\n\t\t\t}\n\n\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [ tempUVs2[ a ].clone(), tempUVs2[ b ].clone(), tempUVs2[ c ].clone() ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar groups = geometry.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\n\n\t\t\t\tvar group = groups[ i ];\n\n\t\t\t\tvar start = group.start;\n\t\t\t\tvar count = group.count;\n\n\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ], group.materialIndex );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\taddFace( j, j + 1, j + 2, group.materialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( var i = 0; i < positions.length / 3; i += 3 ) {\n\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tvar offset = new Vector3();\n\n\t\treturn function center() {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t\tthis.boundingBox.getCenter( offset ).negate();\n\n\t\t\tthis.translate( offset.x, offset.y, offset.z );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tnormalize: function () {\n\n\t\tthis.computeBoundingSphere();\n\n\t\tvar center = this.boundingSphere.center;\n\t\tvar radius = this.boundingSphere.radius;\n\n\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\n\n\t\tvar matrix = new Matrix4();\n\t\tmatrix.set(\n\t\t\ts, 0, 0, - s * center.x,\n\t\t\t0, s, 0, - s * center.y,\n\t\t\t0, 0, s, - s * center.z,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\tthis.applyMatrix( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = this.faces[ f ];\n\n\t\t\tvar vA = this.vertices[ face.a ];\n\t\t\tvar vB = this.vertices[ face.b ];\n\t\t\tvar vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function ( areaWeighted ) {\n\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\n\n\t\tvar v, vl, f, fl, face, vertices;\n\n\t\tvertices = new Array( this.vertices.length );\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvA = this.vertices[ face.a ];\n\t\t\t\tvB = this.vertices[ face.b ];\n\t\t\t\tvC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.computeFaceNormals();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeFlatVertexNormals: function () {\n\n\t\tvar f, fl, face;\n\n\t\tthis.computeFaceNormals();\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeMorphNormals: function () {\n\n\t\tvar i, il, f, fl, face;\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tvar tmpGeo = new Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tfaceNormal = new Vector3();\n\t\t\t\t\tvertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t},\n\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\n\n\t\tif ( ! ( geometry && geometry.isGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar normalMatrix,\n\t\t\tvertexOffset = this.vertices.length,\n\t\t\tvertices1 = this.vertices,\n\t\t\tvertices2 = geometry.vertices,\n\t\t\tfaces1 = this.faces,\n\t\t\tfaces2 = geometry.faces,\n\t\t\tuvs1 = this.faceVertexUvs[ 0 ],\n\t\t\tuvs2 = geometry.faceVertexUvs[ 0 ],\n\t\t\tcolors1 = this.colors,\n\t\t\tcolors2 = geometry.colors;\n\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = vertices2[ i ];\n\n\t\t\tvar vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// colors\n\n\t\tfor ( var i = 0, il = colors2.length; i < il; i ++ ) {\n\n\t\t\tcolors1.push( colors2[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\n\t\t\t\tfaceVertexNormals = face.vertexNormals,\n\t\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tfaceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\n\n\t\t\tvar uv = uvs2[ i ], uvCopy = [];\n\n\t\t\tif ( uv === undefined ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\n\n\t\t\t\tuvCopy.push( uv[ j ].clone() );\n\n\t\t\t}\n\n\t\t\tuvs1.push( uvCopy );\n\n\t\t}\n\n\t},\n\n\tmergeMesh: function ( mesh ) {\n\n\t\tif ( ! ( mesh && mesh.isMesh ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( mesh.matrixAutoUpdate ) mesh.updateMatrix();\n\n\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t},\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices: function () {\n\n\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n\t\tvar unique = [], changes = [];\n\n\t\tvar v, key;\n\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n\t\tvar precision = Math.pow( 10, precisionPoints );\n\t\tvar i, il, face;\n\t\tvar indices, j, jl;\n\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tv = this.vertices[ i ];\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tvar faceIndicesToRemove = [];\n\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tface = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tindices = [ face.a, face.b, face.c ];\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\n\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\n\t\t\tvar idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tvar diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.vertices = [];\n\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tvar point = points[ i ];\n\t\t\tthis.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsortFacesByMaterialIndex: function () {\n\n\t\tvar faces = this.faces;\n\t\tvar length = faces.length;\n\n\t\t// tag faces\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tfaces[ i ]._id = i;\n\n\t\t}\n\n\t\t// sort faces\n\n\t\tfunction materialIndexSort( a, b ) {\n\n\t\t\treturn a.materialIndex - b.materialIndex;\n\n\t\t}\n\n\t\tfaces.sort( materialIndexSort );\n\n\t\t// sort uvs\n\n\t\tvar uvs1 = this.faceVertexUvs[ 0 ];\n\t\tvar uvs2 = this.faceVertexUvs[ 1 ];\n\n\t\tvar newUvs1, newUvs2;\n\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar id = faces[ i ]._id;\n\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\n\n\t\t}\n\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Geometry',\n\t\t\t\tgenerator: 'Geometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Geometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tvar vertices = [];\n\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tvar faces = [];\n\t\tvar normals = [];\n\t\tvar normalsHash = {};\n\t\tvar colors = [];\n\t\tvar colorsHash = {};\n\t\tvar uvs = [];\n\t\tvar uvsHash = {};\n\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\n\t\t\tvar hasMaterial = true;\n\t\t\tvar hasFaceUv = false; // deprecated\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tvar faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\t\t\tfaces.push( face.materialIndex );\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\tdata.data = {};\n\n\t\tdata.data.vertices = vertices;\n\t\tdata.data.normals = normals;\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\tdata.data.faces = faces;\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t var parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t var values = [];\n\n\t\t for ( var key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new Geometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar i, il, j, jl, k, kl;\n\n\t\t// reset\n\n\t\tthis.vertices = [];\n\t\tthis.colors = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [[]];\n\t\tthis.morphTargets = [];\n\t\tthis.morphNormals = [];\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\t\tthis.lineDistances = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// vertices\n\n\t\tvar vertices = source.vertices;\n\n\t\tfor ( i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\t// colors\n\n\t\tvar colors = source.colors;\n\n\t\tfor ( i = 0, il = colors.length; i < il; i ++ ) {\n\n\t\t\tthis.colors.push( colors[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tvar faces = source.faces;\n\n\t\tfor ( i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\t// face vertex uvs\n\n\t\tfor ( i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\tvar uv = uvs[ k ];\n\n\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphTargets = source.morphTargets;\n\n\t\tfor ( i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tvar morphTarget = {};\n\t\t\tmorphTarget.name = morphTargets[ i ].name;\n\n\t\t\t// vertices\n\n\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\n\n\t\t\t\tmorphTarget.vertices = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normals\n\n\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\n\n\t\t\t\tmorphTarget.normals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.push( morphTarget );\n\n\t\t}\n\n\t\t// morph normals\n\n\t\tvar morphNormals = source.morphNormals;\n\n\t\tfor ( i = 0, il = morphNormals.length; i < il; i ++ ) {\n\n\t\t\tvar morphNormal = {};\n\n\t\t\t// vertex normals\n\n\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.vertexNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\n\t\t\t\t\tvar destVertexNormal = {};\n\n\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\n\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\n\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\n\n\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// face normals\n\n\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.faceNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphNormals.push( morphNormal );\n\n\t\t}\n\n\t\t// skin weights\n\n\t\tvar skinWeights = source.skinWeights;\n\n\t\tfor ( i = 0, il = skinWeights.length; i < il; i ++ ) {\n\n\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\n\n\t\t}\n\n\t\t// skin indices\n\n\t\tvar skinIndices = source.skinIndices;\n\n\t\tfor ( i = 0, il = skinIndices.length; i < il; i ++ ) {\n\n\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\n\n\t\t}\n\n\t\t// line distances\n\n\t\tvar lineDistances = source.lineDistances;\n\n\t\tfor ( i = 0, il = lineDistances.length; i < il; i ++ ) {\n\n\t\t\tthis.lineDistances.push( lineDistances[ i ] );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// update flags\n\n\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\n\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\n\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\n\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\n\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { Geometry };\n","import { Vector4 } from '../math/Vector4.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction BufferAttribute( array, itemSize, normalized ) {\n\n\tif ( Array.isArray( array ) ) {\n\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t}\n\n\tthis.name = '';\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\tthis.normalized = normalized === true;\n\n\tthis.dynamic = false;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\n\tisBufferAttribute: true,\n\n\tonUploadCallback: function () {},\n\n\tsetArray: function ( array ) {\n\n\t\tif ( Array.isArray( array ) ) {\n\n\t\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t\t}\n\n\t\tthis.count = array !== undefined ? array.length / this.itemSize : 0;\n\t\tthis.array = array;\n\n\t\treturn this;\n\n\t},\n\n\tsetDynamic: function ( value ) {\n\n\t\tthis.dynamic = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.dynamic = source.dynamic;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyArray: function ( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t},\n\n\tcopyColorsArray: function ( colors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tvar color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector2sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector3sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector4sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t}\n\n} );\n\n//\n\nfunction Int8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\n\n}\n\nInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\n\n\nfunction Uint8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\n\n}\n\nUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\n\n\nfunction Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\n\n}\n\nUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\n\n\nfunction Int16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\n\n}\n\nInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\n\n\nfunction Uint16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\n\n}\n\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\n\n\nfunction Int32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\n\n}\n\nInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\n\n\nfunction Uint32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\n\n}\n\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\n\n\nfunction Float32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\n\n}\n\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\n\n\nfunction Float64BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\n\n}\n\nFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\n\n//\n\nexport {\n\tFloat64BufferAttribute,\n\tFloat32BufferAttribute,\n\tUint32BufferAttribute,\n\tInt32BufferAttribute,\n\tUint16BufferAttribute,\n\tInt16BufferAttribute,\n\tUint8ClampedBufferAttribute,\n\tUint8BufferAttribute,\n\tInt8BufferAttribute,\n\tBufferAttribute\n};\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Vector2 } from '../math/Vector2.js';\n\nfunction DirectGeometry() {\n\n\tthis.vertices = [];\n\tthis.normals = [];\n\tthis.colors = [];\n\tthis.uvs = [];\n\tthis.uvs2 = [];\n\n\tthis.groups = [];\n\n\tthis.morphTargets = {};\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\t// this.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.verticesNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nObject.assign( DirectGeometry.prototype, {\n\n\tcomputeGroups: function ( geometry ) {\n\n\t\tvar group;\n\t\tvar groups = [];\n\t\tvar materialIndex = undefined;\n\n\t\tvar faces = geometry.faces;\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\t// materials\n\n\t\t\tif ( face.materialIndex !== materialIndex ) {\n\n\t\t\t\tmaterialIndex = face.materialIndex;\n\n\t\t\t\tif ( group !== undefined ) {\n\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\t\tgroups.push( group );\n\n\t\t\t\t}\n\n\t\t\t\tgroup = {\n\t\t\t\t\tstart: i * 3,\n\t\t\t\t\tmaterialIndex: materialIndex\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( group !== undefined ) {\n\n\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\tgroups.push( group );\n\n\t\t}\n\n\t\tthis.groups = groups;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tvar faces = geometry.faces;\n\t\tvar vertices = geometry.vertices;\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\n\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\n\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\n\n\t\t// morphs\n\n\t\tvar morphTargets = geometry.morphTargets;\n\t\tvar morphTargetsLength = morphTargets.length;\n\n\t\tvar morphTargetsPosition;\n\n\t\tif ( morphTargetsLength > 0 ) {\n\n\t\t\tmorphTargetsPosition = [];\n\n\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsPosition[ i ] = [];\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\n\n\t\t}\n\n\t\tvar morphNormals = geometry.morphNormals;\n\t\tvar morphNormalsLength = morphNormals.length;\n\n\t\tvar morphTargetsNormal;\n\n\t\tif ( morphNormalsLength > 0 ) {\n\n\t\t\tmorphTargetsNormal = [];\n\n\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsNormal[ i ] = [];\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\n\n\t\t}\n\n\t\t// skins\n\n\t\tvar skinIndices = geometry.skinIndices;\n\t\tvar skinWeights = geometry.skinWeights;\n\n\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\n\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\n\n\t\t//\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar normal = face.normal;\n\n\t\t\t\tthis.normals.push( normal, normal, normal );\n\n\t\t\t}\n\n\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\tif ( vertexColors.length === 3 ) {\n\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar color = face.color;\n\n\t\t\t\tthis.colors.push( color, color, color );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\n\n\t\t\t\t\tthis.uvs.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv2 === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\n\n\t\t\t\t\tthis.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// morphs\n\n\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\n\n\t\t\t\tmorphTargetsPosition[ j ].push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\n\n\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\n\n\t\t\t\tmorphTargetsNormal[ j ].push( morphNormal.a, morphNormal.b, morphNormal.c );\n\n\t\t\t}\n\n\t\t\t// skins\n\n\t\t\tif ( hasSkinIndices ) {\n\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\n\n\t\t\t}\n\n\t\t\tif ( hasSkinWeights ) {\n\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeGroups( geometry );\n\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { DirectGeometry };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction arrayMin( array ) {\n\n\tif ( array.length === 0 ) return Infinity;\n\n\tvar min = array[ 0 ];\n\n\tfor ( var i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] < min ) min = array[ i ];\n\n\t}\n\n\treturn min;\n\n}\n\nfunction arrayMax( array ) {\n\n\tif ( array.length === 0 ) return - Infinity;\n\n\tvar max = array[ 0 ];\n\n\tfor ( var i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] > max ) max = array[ i ];\n\n\t}\n\n\treturn max;\n\n}\n\nexport { arrayMin, arrayMax };\n","import { Vector3 } from '../math/Vector3.js';\nimport { Box3 } from '../math/Box3.js';\nimport { EventDispatcher } from './EventDispatcher.js';\nimport { BufferAttribute, Float32BufferAttribute, Uint16BufferAttribute, Uint32BufferAttribute } from './BufferAttribute.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { DirectGeometry } from './DirectGeometry.js';\nimport { Object3D } from './Object3D.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { _Math } from '../math/Math.js';\nimport { arrayMax } from '../utils.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar bufferGeometryId = 1; // BufferGeometry uses odd numbers as Id\n\nfunction BufferGeometry() {\n\n\tObject.defineProperty( this, 'id', { value: bufferGeometryId += 2 } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.index = null;\n\tthis.attributes = {};\n\n\tthis.morphAttributes = {};\n\n\tthis.groups = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.drawRange = { start: 0, count: Infinity };\n\n}\n\nBufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: BufferGeometry,\n\n\tisBufferGeometry: true,\n\n\tgetIndex: function () {\n\n\t\treturn this.index;\n\n\t},\n\n\tsetIndex: function ( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t},\n\n\taddAttribute: function ( name, attribute ) {\n\n\t\tif ( ! ( attribute && attribute.isBufferAttribute ) && ! ( attribute && attribute.isInterleavedBufferAttribute ) ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\n\n\t\t\tthis.addAttribute( name, new BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( name === 'index' ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\n\t\t\tthis.setIndex( attribute );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\tremoveAttribute: function ( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t},\n\n\taddGroup: function ( start, count, materialIndex ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\n\n\t\t} );\n\n\t},\n\n\tclearGroups: function () {\n\n\t\tthis.groups = [];\n\n\t},\n\n\tsetDrawRange: function ( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tmatrix.applyToBufferAttribute( position );\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tvar normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormalMatrix.applyToBufferAttribute( normal );\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function () {\n\n\t\t// rotate geometry around world x-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\tm1.makeRotationX( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\t// rotate geometry around world y-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\tm1.makeRotationY( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\t// rotate geometry around world z-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\tm1.makeRotationZ( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function () {\n\n\t\t// translate geometry\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function translate( x, y, z ) {\n\n\t\t\tm1.makeTranslation( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tscale: function () {\n\n\t\t// scale geometry\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function scale( x, y, z ) {\n\n\t\t\tm1.makeScale( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\tvar obj = new Object3D();\n\n\t\treturn function lookAt( vector ) {\n\n\t\t\tobj.lookAt( vector );\n\n\t\t\tobj.updateMatrix();\n\n\t\t\tthis.applyMatrix( obj.matrix );\n\n\t\t};\n\n\t}(),\n\n\tcenter: function () {\n\n\t\tvar offset = new Vector3();\n\n\t\treturn function center() {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t\tthis.boundingBox.getCenter( offset ).negate();\n\n\t\t\tthis.translate( offset.x, offset.y, offset.z );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetFromObject: function ( object ) {\n\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isPoints || object.isLine ) {\n\n\t\t\tvar positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\n\t\t\tvar colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\n\n\t\t\tthis.addAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\n\t\t\tthis.addAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\n\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\n\n\t\t\t\tvar lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\n\n\t\t\t\tthis.addAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t\t}\n\n\t\t} else if ( object.isMesh ) {\n\n\t\t\tif ( geometry && geometry.isGeometry ) {\n\n\t\t\t\tthis.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tvar position = [];\n\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tvar point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.addAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t},\n\n\tupdateFromObject: function ( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tvar direct = geometry.__directGeometry;\n\n\t\t\tif ( geometry.elementsNeedUpdate === true ) {\n\n\t\t\t\tdirect = undefined;\n\t\t\t\tgeometry.elementsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( direct === undefined ) {\n\n\t\t\t\treturn this.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.normalsNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.uvsNeedUpdate = false;\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t\tgeometry = direct;\n\n\t\t}\n\n\t\tvar attribute;\n\n\t\tif ( geometry.verticesNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.position;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.normalsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.normal;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.normalsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.colorsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.color;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.colorsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.uvsNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.uv;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.uvsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.lineDistance;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.groupsNeedUpdate ) {\n\n\t\t\tgeometry.computeGroups( object.geometry );\n\t\t\tthis.groups = geometry.groups;\n\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tgeometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\n\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\n\n\t},\n\n\tfromDirectGeometry: function ( geometry ) {\n\n\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\n\t\tthis.addAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\n\n\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\n\t\t\tthis.addAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\n\n\t\t}\n\n\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\n\t\t\tthis.addAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\n\t\t\tthis.addAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs2.length > 0 ) {\n\n\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\n\t\t\tthis.addAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\n\n\t\t}\n\n\t\t// groups\n\n\t\tthis.groups = geometry.groups;\n\n\t\t// morphs\n\n\t\tfor ( var name in geometry.morphTargets ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphTargets = geometry.morphTargets[ name ];\n\n\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ i ];\n\n\t\t\t\tvar attribute = new Float32BufferAttribute( morphTarget.length * 3, 3 );\n\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// skinning\n\n\t\tif ( geometry.skinIndices.length > 0 ) {\n\n\t\t\tvar skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\n\t\t\tthis.addAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\n\n\t\t}\n\n\t\tif ( geometry.skinWeights.length > 0 ) {\n\n\t\t\tvar skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\n\t\t\tthis.addAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tvar box = new Box3();\n\t\tvar vector = new Vector3();\n\n\t\treturn function computeBoundingSphere() {\n\n\t\t\tif ( this.boundingSphere === null ) {\n\n\t\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t\t}\n\n\t\t\tvar position = this.attributes.position;\n\n\t\t\tif ( position ) {\n\n\t\t\t\tvar center = this.boundingSphere.center;\n\n\t\t\t\tbox.setFromBufferAttribute( position );\n\t\t\t\tbox.getCenter( center );\n\n\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\n\t\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\t\tvar maxRadiusSq = 0;\n\n\t\t\t\tfor ( var i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t\tvector.x = position.getX( i );\n\t\t\t\t\tvector.y = position.getY( i );\n\t\t\t\t\tvector.z = position.getZ( i );\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\n\n\t\t\t\t}\n\n\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}(),\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tvar index = this.index;\n\t\tvar attributes = this.attributes;\n\t\tvar groups = this.groups;\n\n\t\tif ( attributes.position ) {\n\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( attributes.normal === undefined ) {\n\n\t\t\t\tthis.addAttribute( 'normal', new BufferAttribute( new Float32Array( positions.length ), 3 ) );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tvar array = attributes.normal.array;\n\n\t\t\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t\t\tarray[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar normals = attributes.normal.array;\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tvar indices = index.array;\n\n\t\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\t\tthis.addGroup( 0, indices.length );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = groups.length; j < jl; ++ j ) {\n\n\t\t\t\t\tvar group = groups[ j ];\n\n\t\t\t\t\tvar start = group.start;\n\t\t\t\t\tvar count = group.count;\n\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\t\t\tvA = indices[ i + 0 ] * 3;\n\t\t\t\t\t\tvB = indices[ i + 1 ] * 3;\n\t\t\t\t\t\tvC = indices[ i + 2 ] * 3;\n\n\t\t\t\t\t\tpA.fromArray( positions, vA );\n\t\t\t\t\t\tpB.fromArray( positions, vB );\n\t\t\t\t\t\tpC.fromArray( positions, vC );\n\n\t\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\t\tnormals[ vA ] += cb.x;\n\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vB ] += cb.x;\n\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vC ] += cb.x;\n\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\n\n\t\t\t\t\tpA.fromArray( positions, i );\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormals[ i ] = cb.x;\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tattributes.normal.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) {\n\n\t\t\toffset = 0;\n\n\t\t\tconsole.warn(\n\t\t\t\t'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\n\t\t\t\t+ 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\n\t\t\t);\n\n\t\t}\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tvar attribute1 = attributes[ key ];\n\t\t\tvar attributeArray1 = attribute1.array;\n\n\t\t\tvar attribute2 = geometry.attributes[ key ];\n\t\t\tvar attributeArray2 = attribute2.array;\n\n\t\t\tvar attributeSize = attribute2.itemSize;\n\n\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tvar vector = new Vector3();\n\n\t\treturn function normalizeNormals() {\n\n\t\t\tvar normals = this.attributes.normal;\n\n\t\t\tfor ( var i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t\tvector.x = normals.getX( i );\n\t\t\t\tvector.y = normals.getY( i );\n\t\t\t\tvector.z = normals.getZ( i );\n\n\t\t\t\tvector.normalize();\n\n\t\t\t\tnormals.setXYZ( i, vector.x, vector.y, vector.z );\n\n\t\t\t}\n\n\t\t};\n\n\t}(),\n\n\ttoNonIndexed: function () {\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar geometry2 = new BufferGeometry();\n\n\t\tvar indices = this.index.array;\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\n\t\t\tvar array = attribute.array;\n\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\tvar array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tvar index = 0, index2 = 0;\n\n\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\tfor ( var j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry2.addAttribute( name, new BufferAttribute( array2, itemSize ) );\n\n\t\t}\n\n\t\tvar groups = this.groups;\n\n\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tvar group = groups[ i ];\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tdata.data = { attributes: {} };\n\n\t\tvar index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tvar array = Array.prototype.slice.call( index.array );\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: array\n\t\t\t};\n\n\t\t}\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\n\t\t\tvar array = Array.prototype.slice.call( attribute.array );\n\n\t\t\tdata.data.attributes[ key ] = {\n\t\t\t\titemSize: attribute.itemSize,\n\t\t\t\ttype: attribute.array.constructor.name,\n\t\t\t\tarray: array,\n\t\t\t\tnormalized: attribute.normalized\n\t\t\t};\n\n\t\t}\n\n\t\tvar groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tvar boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t var parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t var values = [];\n\n\t\t for ( var key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new BufferGeometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar name, i, l;\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tvar index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone() );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tvar attributes = source.attributes;\n\n\t\tfor ( name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\t\t\tthis.addAttribute( name, attribute.clone() );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tvar morphAttributes = source.morphAttributes;\n\n\t\tfor ( name in morphAttributes ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone() );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// groups\n\n\t\tvar groups = source.groups;\n\n\t\tfor ( i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tvar group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { BufferGeometry };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// BoxGeometry\n\nfunction BoxGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'BoxGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\tdepth: depth,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tdepthSegments: depthSegments\n\t};\n\n\tthis.fromBufferGeometry( new BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\n\tthis.mergeVertices();\n\n}\n\nBoxGeometry.prototype = Object.create( Geometry.prototype );\nBoxGeometry.prototype.constructor = BoxGeometry;\n\n// BoxBufferGeometry\n\nfunction BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'BoxBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\tdepth: depth,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tdepthSegments: depthSegments\n\t};\n\n\tvar scope = this;\n\n\twidth = width || 1;\n\theight = height || 1;\n\tdepth = depth || 1;\n\n\t// segments\n\n\twidthSegments = Math.floor( widthSegments ) || 1;\n\theightSegments = Math.floor( heightSegments ) || 1;\n\tdepthSegments = Math.floor( depthSegments ) || 1;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar numberOfVertices = 0;\n\tvar groupStart = 0;\n\n\t// build each side of the box geometry\n\n\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\tvar segmentWidth = width / gridX;\n\t\tvar segmentHeight = height / gridY;\n\n\t\tvar widthHalf = width / 2;\n\t\tvar heightHalf = height / 2;\n\t\tvar depthHalf = depth / 2;\n\n\t\tvar gridX1 = gridX + 1;\n\t\tvar gridY1 = gridY + 1;\n\n\t\tvar vertexCounter = 0;\n\t\tvar groupCount = 0;\n\n\t\tvar ix, iy;\n\n\t\tvar vector = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tvar y = iy * segmentHeight - heightHalf;\n\n\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tvar x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t// set values to correct vector component\n\n\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t// set values to correct vector component\n\n\t\t\t\tvector[ u ] = 0;\n\t\t\t\tvector[ v ] = 0;\n\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t// uvs\n\n\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t// counters\n\n\t\t\t\tvertexCounter += 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// indices\n\n\t\t// 1. you need three indices to draw a single face\n\t\t// 2. a single segment consists of two faces\n\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tvar a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\tvar b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\tvar c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tvar d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t// increase counter\n\n\t\t\t\tgroupCount += 6;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t// calculate new start value for groups\n\n\t\tgroupStart += groupCount;\n\n\t\t// update total number of vertices\n\n\t\tnumberOfVertices += vertexCounter;\n\n\t}\n\n}\n\nBoxBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nBoxBufferGeometry.prototype.constructor = BoxBufferGeometry;\n\n\nexport { BoxGeometry, BoxBufferGeometry };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\n\n// PlaneGeometry\n\nfunction PlaneGeometry( width, height, widthSegments, heightSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'PlaneGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tthis.fromBufferGeometry( new PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\n\tthis.mergeVertices();\n\n}\n\nPlaneGeometry.prototype = Object.create( Geometry.prototype );\nPlaneGeometry.prototype.constructor = PlaneGeometry;\n\n// PlaneBufferGeometry\n\nfunction PlaneBufferGeometry( width, height, widthSegments, heightSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'PlaneBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\twidth = width || 1;\n\theight = height || 1;\n\n\tvar width_half = width / 2;\n\tvar height_half = height / 2;\n\n\tvar gridX = Math.floor( widthSegments ) || 1;\n\tvar gridY = Math.floor( heightSegments ) || 1;\n\n\tvar gridX1 = gridX + 1;\n\tvar gridY1 = gridY + 1;\n\n\tvar segment_width = width / gridX;\n\tvar segment_height = height / gridY;\n\n\tvar ix, iy;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// generate vertices, normals and uvs\n\n\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\tvar y = iy * segment_height - height_half;\n\n\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\tvar x = ix * segment_width - width_half;\n\n\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\tuvs.push( ix / gridX );\n\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\tvar a = ix + gridX1 * iy;\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nPlaneBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nPlaneBufferGeometry.prototype.constructor = PlaneBufferGeometry;\n\n\nexport { PlaneGeometry, PlaneBufferGeometry };\n","import { EventDispatcher } from '../core/EventDispatcher.js';\nimport { NoColors, FrontSide, FlatShading, NormalBlending, LessEqualDepth, AddEquation, OneMinusSrcAlphaFactor, SrcAlphaFactor } from '../constants.js';\nimport { _Math } from '../math/Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar materialId = 0;\n\nfunction Material() {\n\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.fog = true;\n\tthis.lights = true;\n\n\tthis.blending = NormalBlending;\n\tthis.side = FrontSide;\n\tthis.flatShading = false;\n\tthis.vertexColors = NoColors; // THREE.NoColors, THREE.VertexColors, THREE.FaceColors\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blendSrc = SrcAlphaFactor;\n\tthis.blendDst = OneMinusSrcAlphaFactor;\n\tthis.blendEquation = AddEquation;\n\tthis.blendSrcAlpha = null;\n\tthis.blendDstAlpha = null;\n\tthis.blendEquationAlpha = null;\n\n\tthis.depthFunc = LessEqualDepth;\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.clippingPlanes = null;\n\tthis.clipIntersection = false;\n\tthis.clipShadows = false;\n\n\tthis.shadowSide = null;\n\n\tthis.colorWrite = true;\n\n\tthis.precision = null; // override the renderer's default precision for this material\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.dithering = false;\n\n\tthis.alphaTest = 0;\n\tthis.premultipliedAlpha = false;\n\n\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\n\n\tthis.visible = true;\n\n\tthis.userData = {};\n\n\tthis.needsUpdate = true;\n\n}\n\nMaterial.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Material,\n\n\tisMaterial: true,\n\n\tonBeforeCompile: function () {},\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( var key in values ) {\n\n\t\t\tvar newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// for backward compatability if shading is set in the constructor\n\t\t\tif ( key === 'shading' ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\t\tthis.flatShading = ( newValue === FlatShading ) ? true : false;\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else if ( key === 'overdraw' ) {\n\n\t\t\t\t// ensure overdraw is backwards-compatible with legacy boolean type\n\t\t\t\tthis[ key ] = Number( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRoot = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRoot ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearCoat !== undefined ) data.clearCoat = this.clearCoat;\n\t\tif ( this.clearCoatRoughness !== undefined ) data.clearCoatRoughness = this.clearCoatRoughness;\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\t\tif ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\n\n\t\t}\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors !== NoColors ) data.vertexColors = this.vertexColors;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.morphTargets === true ) data.morphTargets = true;\n\t\tif ( this.skinning === true ) data.skinning = true;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRoot ) {\n\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.fog = source.fog;\n\t\tthis.lights = source.lights;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.flatShading = source.flatShading;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.overdraw = source.overdraw;\n\n\t\tthis.visible = source.visible;\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tthis.clipShadows = source.clipShadows;\n\t\tthis.clipIntersection = source.clipIntersection;\n\n\t\tvar srcPlanes = source.clippingPlanes,\n\t\t\tdstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tvar n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( var i = 0; i !== n; ++ i )\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\n\t\tthis.shadowSide = source.shadowSide;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { Material };\n","import { Vector3 } from './Vector3.js';\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Ray( origin, direction ) {\n\n\tthis.origin = ( origin !== undefined ) ? origin : new Vector3();\n\tthis.direction = ( direction !== undefined ) ? direction : new Vector3();\n\n}\n\nObject.assign( Ray.prototype, {\n\n\tset: function ( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t},\n\n\tat: function ( t, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .at() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t},\n\n\tlookAt: function ( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\trecast: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function recast( t ) {\n\n\t\t\tthis.origin.copy( this.at( t, v1 ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( point, this.origin );\n\n\t\tvar directionDistance = target.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn target.copy( this.origin );\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t},\n\n\tdistanceSqToPoint: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function distanceSqToPoint( point ) {\n\n\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t\t// point behind the ray\n\n\t\t\tif ( directionDistance < 0 ) {\n\n\t\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t\t}\n\n\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\t\treturn v1.distanceToSquared( point );\n\n\t\t};\n\n\t}(),\n\n\tdistanceSqToSegment: function () {\n\n\t\tvar segCenter = new Vector3();\n\t\tvar segDir = new Vector3();\n\t\tvar diff = new Vector3();\n\n\t\treturn function distanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t\t// It returns the min distance between the ray and the segment\n\t\t\t// defined by v0 and v1\n\t\t\t// It can also set two optional targets :\n\t\t\t// - The closest point on the ray\n\t\t\t// - The closest point on the segment\n\n\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\n\t\t\tdiff.copy( this.origin ).sub( segCenter );\n\n\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\t\tvar a01 = - this.direction.dot( segDir );\n\t\t\tvar b0 = diff.dot( this.direction );\n\t\t\tvar b1 = - diff.dot( segDir );\n\t\t\tvar c = diff.lengthSq();\n\t\t\tvar det = Math.abs( 1 - a01 * a01 );\n\t\t\tvar s0, s1, sqrDist, extDet;\n\n\t\t\tif ( det > 0 ) {\n\n\t\t\t\t// The ray and segment are not parallel.\n\n\t\t\t\ts0 = a01 * b1 - b0;\n\t\t\t\ts1 = a01 * b0 - b1;\n\t\t\t\textDet = segExtent * det;\n\n\t\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\t\tvar invDet = 1 / det;\n\t\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 5\n\n\t\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t\t// region 4\n\n\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 3\n\n\t\t\t\t\t\ts0 = 0;\n\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 2\n\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Ray and segment are parallel.\n\n\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t}\n\n\t\t\tif ( optionalPointOnRay ) {\n\n\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t\t}\n\n\t\t\tif ( optionalPointOnSegment ) {\n\n\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\n\n\t\t\t}\n\n\t\t\treturn sqrDist;\n\n\t\t};\n\n\t}(),\n\n\tintersectSphere: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function intersectSphere( sphere, target ) {\n\n\t\t\tv1.subVectors( sphere.center, this.origin );\n\t\t\tvar tca = v1.dot( this.direction );\n\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\n\t\t\tvar radius2 = sphere.radius * sphere.radius;\n\n\t\t\tif ( d2 > radius2 ) return null;\n\n\t\t\tvar thc = Math.sqrt( radius2 - d2 );\n\n\t\t\t// t0 = first intersect point - entrance on front of sphere\n\t\t\tvar t0 = tca - thc;\n\n\t\t\t// t1 = second intersect point - exit point on back of sphere\n\t\t\tvar t1 = tca + thc;\n\n\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t\t// test to see if t0 is behind the ray:\n\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t\t// in order to always return an intersect point that is in front of the ray.\n\t\t\tif ( t0 < 0 ) return this.at( t1, target );\n\n\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\t\treturn this.at( t0, target );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\n\n\t},\n\n\tdistanceToPlane: function ( plane ) {\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t : null;\n\n\t},\n\n\tintersectPlane: function ( plane, target ) {\n\n\t\tvar t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, target );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t},\n\n\tintersectBox: function ( box, target ) {\n\n\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tvar invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tvar origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\n\n\t},\n\n\tintersectsBox: ( function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function intersectsBox( box ) {\n\n\t\t\treturn this.intersectBox( box, v ) !== null;\n\n\t\t};\n\n\t} )(),\n\n\tintersectTriangle: function () {\n\n\t\t// Compute the offset origin, edges, and normal.\n\t\tvar diff = new Vector3();\n\t\tvar edge1 = new Vector3();\n\t\tvar edge2 = new Vector3();\n\t\tvar normal = new Vector3();\n\n\t\treturn function intersectTriangle( a, b, c, backfaceCulling, target ) {\n\n\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t\tedge1.subVectors( b, a );\n\t\t\tedge2.subVectors( c, a );\n\t\t\tnormal.crossVectors( edge1, edge2 );\n\n\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\t\tvar DdN = this.direction.dot( normal );\n\t\t\tvar sign;\n\n\t\t\tif ( DdN > 0 ) {\n\n\t\t\t\tif ( backfaceCulling ) return null;\n\t\t\t\tsign = 1;\n\n\t\t\t} else if ( DdN < 0 ) {\n\n\t\t\t\tsign = - 1;\n\t\t\t\tDdN = - DdN;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tdiff.subVectors( this.origin, a );\n\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\n\n\t\t\t// b1 < 0, no intersection\n\t\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\n\n\t\t\t// b2 < 0, no intersection\n\t\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// b1+b2 > 1, no intersection\n\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Line intersects triangle, check if ray does.\n\t\t\tvar QdN = - sign * diff.dot( normal );\n\n\t\t\t// t < 0, no intersection\n\t\t\tif ( QdN < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Ray intersects triangle.\n\t\t\treturn this.at( QdN / DdN, target );\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix4: function ( matrix4 ) {\n\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.transformDirection( matrix4 );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n} );\n\n\nexport { Ray };\n","import { Vector3 } from './Vector3.js';\nimport { _Math } from './Math.js';\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Line3( start, end ) {\n\n\tthis.start = ( start !== undefined ) ? start : new Vector3();\n\tthis.end = ( end !== undefined ) ? end : new Vector3();\n\n}\n\nObject.assign( Line3.prototype, {\n\n\tset: function ( start, end ) {\n\n\t\tthis.start.copy( start );\n\t\tthis.end.copy( end );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( line ) {\n\n\t\tthis.start.copy( line.start );\n\t\tthis.end.copy( line.end );\n\n\t\treturn this;\n\n\t},\n\n\tgetCenter: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Line3: .getCenter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\n\n\t},\n\n\tdelta: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Line3: .delta() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.subVectors( this.end, this.start );\n\n\t},\n\n\tdistanceSq: function () {\n\n\t\treturn this.start.distanceToSquared( this.end );\n\n\t},\n\n\tdistance: function () {\n\n\t\treturn this.start.distanceTo( this.end );\n\n\t},\n\n\tat: function ( t, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Line3: .at() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tclosestPointToPointParameter: function () {\n\n\t\tvar startP = new Vector3();\n\t\tvar startEnd = new Vector3();\n\n\t\treturn function closestPointToPointParameter( point, clampToLine ) {\n\n\t\t\tstartP.subVectors( point, this.start );\n\t\t\tstartEnd.subVectors( this.end, this.start );\n\n\t\t\tvar startEnd2 = startEnd.dot( startEnd );\n\t\t\tvar startEnd_startP = startEnd.dot( startP );\n\n\t\t\tvar t = startEnd_startP / startEnd2;\n\n\t\t\tif ( clampToLine ) {\n\n\t\t\t\tt = _Math.clamp( t, 0, 1 );\n\n\t\t\t}\n\n\t\t\treturn t;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, clampToLine, target ) {\n\n\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Line3: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.start.applyMatrix4( matrix );\n\t\tthis.end.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( line ) {\n\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\n\n\t}\n\n} );\n\n\nexport { Line3 };\n","import { Vector3 } from './Vector3.js';\nimport { Line3 } from './Line3.js';\nimport { Plane } from './Plane.js';\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Triangle( a, b, c ) {\n\n\tthis.a = ( a !== undefined ) ? a : new Vector3();\n\tthis.b = ( b !== undefined ) ? b : new Vector3();\n\tthis.c = ( c !== undefined ) ? c : new Vector3();\n\n}\n\nObject.assign( Triangle, {\n\n\tgetNormal: function () {\n\n\t\tvar v0 = new Vector3();\n\n\t\treturn function getNormal( a, b, c, target ) {\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Triangle: .getNormal() target is now required' );\n\t\t\t\ttarget = new Vector3();\n\n\t\t\t}\n\n\t\t\ttarget.subVectors( c, b );\n\t\t\tv0.subVectors( a, b );\n\t\t\ttarget.cross( v0 );\n\n\t\t\tvar targetLengthSq = target.lengthSq();\n\t\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t\t}\n\n\t\t\treturn target.set( 0, 0, 0 );\n\n\t\t};\n\n\t}(),\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tgetBarycoord: function () {\n\n\t\tvar v0 = new Vector3();\n\t\tvar v1 = new Vector3();\n\t\tvar v2 = new Vector3();\n\n\t\treturn function getBarycoord( point, a, b, c, target ) {\n\n\t\t\tv0.subVectors( c, a );\n\t\t\tv1.subVectors( b, a );\n\t\t\tv2.subVectors( point, a );\n\n\t\t\tvar dot00 = v0.dot( v0 );\n\t\t\tvar dot01 = v0.dot( v1 );\n\t\t\tvar dot02 = v0.dot( v2 );\n\t\t\tvar dot11 = v1.dot( v1 );\n\t\t\tvar dot12 = v1.dot( v2 );\n\n\t\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\n\t\t\t\ttarget = new Vector3();\n\n\t\t\t}\n\n\t\t\t// collinear or singular triangle\n\t\t\tif ( denom === 0 ) {\n\n\t\t\t\t// arbitrary location outside of triangle?\n\t\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\t\treturn target.set( - 2, - 1, - 1 );\n\n\t\t\t}\n\n\t\t\tvar invDenom = 1 / denom;\n\t\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t\t// barycentric coordinates must always sum to 1\n\t\t\treturn target.set( 1 - u - v, v, u );\n\n\t\t};\n\n\t}(),\n\n\tcontainsPoint: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function containsPoint( point, a, b, c ) {\n\n\t\t\tTriangle.getBarycoord( point, a, b, c, v1 );\n\n\t\t\treturn ( v1.x >= 0 ) && ( v1.y >= 0 ) && ( ( v1.x + v1.y ) <= 1 );\n\n\t\t};\n\n\t}()\n\n} );\n\nObject.assign( Triangle.prototype, {\n\n\tset: function ( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t},\n\n\tgetArea: function () {\n\n\t\tvar v0 = new Vector3();\n\t\tvar v1 = new Vector3();\n\n\t\treturn function getArea() {\n\n\t\t\tv0.subVectors( this.c, this.b );\n\t\t\tv1.subVectors( this.a, this.b );\n\n\t\t\treturn v0.cross( v1 ).length() * 0.5;\n\n\t\t};\n\n\t}(),\n\n\tgetMidpoint: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t},\n\n\tgetNormal: function ( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t},\n\n\tgetPlane: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getPlane() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t},\n\n\tgetBarycoord: function ( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t},\n\n\tclosestPointToPoint: function () {\n\n\t\tvar plane = new Plane();\n\t\tvar edgeList = [ new Line3(), new Line3(), new Line3() ];\n\t\tvar projectedPoint = new Vector3();\n\t\tvar closestPoint = new Vector3();\n\n\t\treturn function closestPointToPoint( point, target ) {\n\n\t\t\tif ( target === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\n\t\t\t\ttarget = new Vector3();\n\n\t\t\t}\n\n\t\t\tvar minDistance = Infinity;\n\n\t\t\t// project the point onto the plane of the triangle\n\n\t\t\tplane.setFromCoplanarPoints( this.a, this.b, this.c );\n\t\t\tplane.projectPoint( point, projectedPoint );\n\n\t\t\t// check if the projection lies within the triangle\n\n\t\t\tif ( this.containsPoint( projectedPoint ) === true ) {\n\n\t\t\t\t// if so, this is the closest point\n\n\t\t\t\ttarget.copy( projectedPoint );\n\n\t\t\t} else {\n\n\t\t\t\t// if not, the point falls outside the triangle. the target is the closest point to the triangle's edges or vertices\n\n\t\t\t\tedgeList[ 0 ].set( this.a, this.b );\n\t\t\t\tedgeList[ 1 ].set( this.b, this.c );\n\t\t\t\tedgeList[ 2 ].set( this.c, this.a );\n\n\t\t\t\tfor ( var i = 0; i < edgeList.length; i ++ ) {\n\n\t\t\t\t\tedgeList[ i ].closestPointToPoint( projectedPoint, true, closestPoint );\n\n\t\t\t\t\tvar distance = projectedPoint.distanceToSquared( closestPoint );\n\n\t\t\t\t\tif ( distance < minDistance ) {\n\n\t\t\t\t\t\tminDistance = distance;\n\n\t\t\t\t\t\ttarget.copy( closestPoint );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn target;\n\n\t\t};\n\n\t}(),\n\n\tequals: function ( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n} );\n\n\nexport { Triangle };\n","import { Material } from './Material.js';\nimport { MultiplyOperation } from '../constants.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>\n * }\n */\n\nfunction MeshBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshBasicMaterial';\n\n\tthis.color = new Color( 0xffffff ); // emissive\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshBasicMaterial.prototype = Object.create( Material.prototype );\nMeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\n\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\n\nMeshBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\n\nexport { MeshBasicMaterial };\n","import { Material } from './Material.js';\nimport { UniformsUtils } from '../renderers/shaders/UniformsUtils.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction ShaderMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\n\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\n\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\tthis.lights = false; // set to use scene lights\n\tthis.clipping = false; // set to use user-defined clipping planes\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\tthis.extensions = {\n\t\tderivatives: false, // set to use derivatives\n\t\tfragDepth: false, // set to use fragment depth values\n\t\tdrawBuffers: false, // set to use draw buffers\n\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t};\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\tthis.uniformsNeedUpdate = false;\n\n\tif ( parameters !== undefined ) {\n\n\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n}\n\nShaderMaterial.prototype = Object.create( Material.prototype );\nShaderMaterial.prototype.constructor = ShaderMaterial;\n\nShaderMaterial.prototype.isShaderMaterial = true;\n\nShaderMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.fragmentShader = source.fragmentShader;\n\tthis.vertexShader = source.vertexShader;\n\n\tthis.uniforms = UniformsUtils.clone( source.uniforms );\n\n\tthis.defines = Object.assign( {}, source.defines );\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.lights = source.lights;\n\tthis.clipping = source.clipping;\n\n\tthis.skinning = source.skinning;\n\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.extensions = source.extensions;\n\n\treturn this;\n\n};\n\nShaderMaterial.prototype.toJSON = function ( meta ) {\n\n\tvar data = Material.prototype.toJSON.call( this, meta );\n\n\tdata.uniforms = this.uniforms;\n\tdata.vertexShader = this.vertexShader;\n\tdata.fragmentShader = this.fragmentShader;\n\n\treturn data;\n\n};\n\n\nexport { ShaderMaterial };\n","import { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { Ray } from '../math/Ray.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Triangle } from '../math/Triangle.js';\nimport { Face3 } from '../core/Face3.js';\nimport { DoubleSide, BackSide, TrianglesDrawMode } from '../constants.js';\nimport { MeshBasicMaterial } from '../materials/MeshBasicMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author jonobr1 / http://jonobr1.com/\n */\n\nfunction Mesh( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Mesh';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new MeshBasicMaterial( { color: Math.random() * 0xffffff } );\n\n\tthis.drawMode = TrianglesDrawMode;\n\n\tthis.updateMorphTargets();\n\n}\n\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Mesh,\n\n\tisMesh: true,\n\n\tsetDrawMode: function ( value ) {\n\n\t\tthis.drawMode = value;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.drawMode = source.drawMode;\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tvar geometry = this.geometry;\n\t\tvar m, ml, name;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tvar morphAttributes = geometry.morphAttributes;\n\t\t\tvar keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tvar morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tname = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( m = 0, ml = morphTargets.length; m < ml; m ++ ) {\n\n\t\t\t\t\tname = morphTargets[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\traycast: ( function () {\n\n\t\tvar inverseMatrix = new Matrix4();\n\t\tvar ray = new Ray();\n\t\tvar sphere = new Sphere();\n\n\t\tvar vA = new Vector3();\n\t\tvar vB = new Vector3();\n\t\tvar vC = new Vector3();\n\n\t\tvar tempA = new Vector3();\n\t\tvar tempB = new Vector3();\n\t\tvar tempC = new Vector3();\n\n\t\tvar uvA = new Vector2();\n\t\tvar uvB = new Vector2();\n\t\tvar uvC = new Vector2();\n\n\t\tvar barycoord = new Vector3();\n\n\t\tvar intersectionPoint = new Vector3();\n\t\tvar intersectionPointWorld = new Vector3();\n\n\t\tfunction uvIntersection( point, p1, p2, p3, uv1, uv2, uv3 ) {\n\n\t\t\tTriangle.getBarycoord( point, p1, p2, p3, barycoord );\n\n\t\t\tuv1.multiplyScalar( barycoord.x );\n\t\t\tuv2.multiplyScalar( barycoord.y );\n\t\t\tuv3.multiplyScalar( barycoord.z );\n\n\t\t\tuv1.add( uv2 ).add( uv3 );\n\n\t\t\treturn uv1.clone();\n\n\t\t}\n\n\t\tfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\t\t\tvar intersect;\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t\t\t} else {\n\n\t\t\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t\t\t}\n\n\t\t\tif ( intersect === null ) return null;\n\n\t\t\tintersectionPointWorld.copy( point );\n\t\t\tintersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\n\n\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\t\t\treturn {\n\t\t\t\tdistance: distance,\n\t\t\t\tpoint: intersectionPointWorld.clone(),\n\t\t\t\tobject: object\n\t\t\t};\n\n\t\t}\n\n\t\tfunction checkBufferGeometryIntersection( object, raycaster, ray, position, uv, a, b, c ) {\n\n\t\t\tvA.fromBufferAttribute( position, a );\n\t\t\tvB.fromBufferAttribute( position, b );\n\t\t\tvC.fromBufferAttribute( position, c );\n\n\t\t\tvar intersection = checkIntersection( object, object.material, raycaster, ray, vA, vB, vC, intersectionPoint );\n\n\t\t\tif ( intersection ) {\n\n\t\t\t\tif ( uv ) {\n\n\t\t\t\t\tuvA.fromBufferAttribute( uv, a );\n\t\t\t\t\tuvB.fromBufferAttribute( uv, b );\n\t\t\t\t\tuvC.fromBufferAttribute( uv, c );\n\n\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint, vA, vB, vC, uvA, uvB, uvC );\n\n\t\t\t\t}\n\n\t\t\t\tvar face = new Face3( a, b, c );\n\t\t\t\tTriangle.getNormal( vA, vB, vC, face.normal );\n\n\t\t\t\tintersection.face = face;\n\t\t\t\tintersection.faceIndex = a;\n\n\t\t\t}\n\n\t\t\treturn intersection;\n\n\t\t}\n\n\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\tvar geometry = this.geometry;\n\t\t\tvar material = this.material;\n\t\t\tvar matrixWorld = this.matrixWorld;\n\n\t\t\tif ( material === undefined ) return;\n\n\t\t\t// Checking boundingSphere distance to ray\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\tsphere.applyMatrix4( matrixWorld );\n\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\n\n\t\t\t//\n\n\t\t\tinverseMatrix.getInverse( matrixWorld );\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\t\t// Check boundingBox before continuing\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tif ( ray.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t\t}\n\n\t\t\tvar intersection;\n\n\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\tvar a, b, c;\n\t\t\t\tvar index = geometry.index;\n\t\t\t\tvar position = geometry.attributes.position;\n\t\t\t\tvar uv = geometry.attributes.uv;\n\t\t\t\tvar i, l;\n\n\t\t\t\tif ( index !== null ) {\n\n\t\t\t\t\t// indexed buffer geometry\n\n\t\t\t\t\tfor ( i = 0, l = index.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\ta = index.getX( i );\n\t\t\t\t\t\tb = index.getX( i + 1 );\n\t\t\t\t\t\tc = index.getX( i + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, position, uv, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indices buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( position !== undefined ) {\n\n\t\t\t\t\t// non-indexed buffer geometry\n\n\t\t\t\t\tfor ( i = 0, l = position.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\ta = i;\n\t\t\t\t\t\tb = i + 1;\n\t\t\t\t\t\tc = i + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, position, uv, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) intersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\t\tvar fvA, fvB, fvC;\n\t\t\t\tvar isMultiMaterial = Array.isArray( material );\n\n\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\tvar faces = geometry.faces;\n\t\t\t\tvar uvs;\n\n\t\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\t\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\n\n\t\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tvar face = faces[ f ];\n\t\t\t\t\tvar faceMaterial = isMultiMaterial ? material[ face.materialIndex ] : material;\n\n\t\t\t\t\tif ( faceMaterial === undefined ) continue;\n\n\t\t\t\t\tfvA = vertices[ face.a ];\n\t\t\t\t\tfvB = vertices[ face.b ];\n\t\t\t\t\tfvC = vertices[ face.c ];\n\n\t\t\t\t\tif ( faceMaterial.morphTargets === true ) {\n\n\t\t\t\t\t\tvar morphTargets = geometry.morphTargets;\n\t\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\n\n\t\t\t\t\t\tvA.set( 0, 0, 0 );\n\t\t\t\t\t\tvB.set( 0, 0, 0 );\n\t\t\t\t\t\tvC.set( 0, 0, 0 );\n\n\t\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\n\n\t\t\t\t\t\t\tvar influence = morphInfluences[ t ];\n\n\t\t\t\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\n\n\t\t\t\t\t\t\tvA.addScaledVector( tempA.subVectors( targets[ face.a ], fvA ), influence );\n\t\t\t\t\t\t\tvB.addScaledVector( tempB.subVectors( targets[ face.b ], fvB ), influence );\n\t\t\t\t\t\t\tvC.addScaledVector( tempC.subVectors( targets[ face.c ], fvC ), influence );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvA.add( fvA );\n\t\t\t\t\t\tvB.add( fvB );\n\t\t\t\t\t\tvC.add( fvC );\n\n\t\t\t\t\t\tfvA = vA;\n\t\t\t\t\t\tfvB = vB;\n\t\t\t\t\t\tfvC = vC;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tintersection = checkIntersection( this, faceMaterial, raycaster, ray, fvA, fvB, fvC, intersectionPoint );\n\n\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\tif ( uvs && uvs[ f ] ) {\n\n\t\t\t\t\t\t\tvar uvs_f = uvs[ f ];\n\t\t\t\t\t\t\tuvA.copy( uvs_f[ 0 ] );\n\t\t\t\t\t\t\tuvB.copy( uvs_f[ 1 ] );\n\t\t\t\t\t\t\tuvC.copy( uvs_f[ 2 ] );\n\n\t\t\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint, fvA, fvB, fvC, uvA, uvB, uvC );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tintersection.face = face;\n\t\t\t\t\t\tintersection.faceIndex = f;\n\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() ),\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\n\nexport { Mesh };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { BackSide } from '../../constants.js';\nimport { OrthographicCamera } from '../../cameras/OrthographicCamera.js';\nimport { BoxBufferGeometry } from '../../geometries/BoxGeometry.js';\nimport { PlaneBufferGeometry } from '../../geometries/PlaneGeometry.js';\nimport { MeshBasicMaterial } from '../../materials/MeshBasicMaterial.js';\nimport { ShaderMaterial } from '../../materials/ShaderMaterial.js';\nimport { Color } from '../../math/Color.js';\nimport { Mesh } from '../../objects/Mesh.js';\nimport { ShaderLib } from '../shaders/ShaderLib.js';\n\nfunction WebGLBackground( renderer, state, geometries, premultipliedAlpha ) {\n\n\tvar clearColor = new Color( 0x000000 );\n\tvar clearAlpha = 0;\n\n\tvar planeCamera, planeMesh;\n\tvar boxMesh;\n\n\tfunction render( renderList, scene, camera, forceClear ) {\n\n\t\tvar background = scene.background;\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && background.isCubeTexture ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxBufferGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tuniforms: ShaderLib.cube.uniforms,\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: true,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.removeAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.removeAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\tgeometries.update( boxMesh.geometry );\n\n\t\t\t}\n\n\t\t\tboxMesh.material.uniforms.tCube.value = background;\n\n\t\t\trenderList.push( boxMesh, boxMesh.geometry, boxMesh.material, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeCamera === undefined ) {\n\n\t\t\t\tplaneCamera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneBufferGeometry( 2, 2 ),\n\t\t\t\t\tnew MeshBasicMaterial( { depthTest: false, depthWrite: false, fog: false } )\n\t\t\t\t);\n\n\t\t\t\tgeometries.update( planeMesh.geometry );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.map = background;\n\n\t\t\t// TODO Push this to renderList\n\n\t\t\trenderer.renderBufferDirect( planeCamera, null, planeMesh.geometry, planeMesh.material, planeMesh, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha !== undefined ? alpha : 1;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\n\nexport { WebGLBackground };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLBufferRenderer( gl, extensions, info ) {\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfo.update( count, mode );\n\n\t}\n\n\tfunction renderInstances( geometry, start, count ) {\n\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\tif ( extension === null ) {\n\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar position = geometry.attributes.position;\n\n\t\tif ( position.isInterleavedBufferAttribute ) {\n\n\t\t\tcount = position.data.count;\n\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, count, geometry.maxInstancedCount );\n\n\t\t} else {\n\n\t\t\textension.drawArraysInstancedANGLE( mode, start, count, geometry.maxInstancedCount );\n\n\t\t}\n\n\t\tinfo.update( count, mode, geometry.maxInstancedCount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n\nexport { WebGLBufferRenderer };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tvar maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\tvar precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tvar maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tvar logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\n\tvar maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n\tvar maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\n\tvar maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\n\n\tvar maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tvar maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\n\tvar maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\n\tvar maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\n\n\tvar vertexTextures = maxVertexTextures > 0;\n\tvar floatFragmentTextures = !! extensions.get( 'OES_texture_float' );\n\tvar floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\treturn {\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures\n\n\t};\n\n}\n\n\nexport { WebGLCapabilities };\n","/**\n * @author tschw\n */\n\nimport { Matrix3 } from '../../math/Matrix3.js';\nimport { Plane } from '../../math/Plane.js';\n\nfunction WebGLClipping() {\n\n\tvar scope = this,\n\n\t\tglobalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false,\n\n\t\tplane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\n\n\t\tvar enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function ( planes, clipIntersection, clipShadows, camera, cache, fromCache ) {\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4,\n\n\t\t\t\tdstArray = cache.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, fromCache );\n\n\t\t\tfor ( var i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tcache.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tvar nPlanes = planes !== null ? planes.length : 0,\n\t\t\tdstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tvar flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\n\nexport { WebGLClipping };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLExtensions( gl ) {\n\n\tvar extensions = {};\n\n\treturn {\n\n\t\tget: function ( name ) {\n\n\t\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\t\treturn extensions[ name ];\n\n\t\t\t}\n\n\t\t\tvar extension;\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\textension = gl.getExtension( name );\n\n\t\t\t}\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\textensions[ name ] = extension;\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\n\nexport { WebGLExtensions };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Uint16BufferAttribute, Uint32BufferAttribute } from '../../core/BufferAttribute.js';\nimport { BufferGeometry } from '../../core/BufferGeometry.js';\nimport { arrayMax } from '../../utils.js';\n\nfunction WebGLGeometries( gl, attributes, info ) {\n\n\tvar geometries = {};\n\tvar wireframeAttributes = {};\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tvar geometry = event.target;\n\t\tvar buffergeometry = geometries[ geometry.id ];\n\n\t\tif ( buffergeometry.index !== null ) {\n\n\t\t\tattributes.remove( buffergeometry.index );\n\n\t\t}\n\n\t\tfor ( var name in buffergeometry.attributes ) {\n\n\t\t\tattributes.remove( buffergeometry.attributes[ name ] );\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tdelete geometries[ geometry.id ];\n\n\t\t// TODO Remove duplicate code\n\n\t\tvar attribute = wireframeAttributes[ geometry.id ];\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\tdelete wireframeAttributes[ geometry.id ];\n\n\t\t}\n\n\t\tattribute = wireframeAttributes[ buffergeometry.id ];\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\tdelete wireframeAttributes[ buffergeometry.id ];\n\n\t\t}\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tvar buffergeometry = geometries[ geometry.id ];\n\n\t\tif ( buffergeometry ) return buffergeometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tbuffergeometry = geometry;\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\n\n\t\t\t\tgeometry._bufferGeometry = new BufferGeometry().setFromObject( object );\n\n\t\t\t}\n\n\t\t\tbuffergeometry = geometry._bufferGeometry;\n\n\t\t}\n\n\t\tgeometries[ geometry.id ] = buffergeometry;\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tvar index = geometry.index;\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t}\n\n\t\tfor ( var name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], gl.ARRAY_BUFFER );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( var name in morphAttributes ) {\n\n\t\t\tvar array = morphAttributes[ name ];\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tvar attribute = wireframeAttributes[ geometry.id ];\n\n\t\tif ( attribute ) return attribute;\n\n\t\tvar indices = [];\n\n\t\tvar geometryIndex = geometry.index;\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\t// console.time( 'wireframe' );\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tvar array = geometryIndex.array;\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tvar a = array[ i + 0 ];\n\t\t\t\tvar b = array[ i + 1 ];\n\t\t\t\tvar c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar array = geometryAttributes.position.array;\n\n\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tvar a = i + 0;\n\t\t\t\tvar b = i + 1;\n\t\t\t\tvar c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// console.timeEnd( 'wireframe' );\n\n\t\tattribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\n\t\tattributes.update( attribute, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\twireframeAttributes[ geometry.id ] = attribute;\n\n\t\treturn attribute;\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\n\nexport { WebGLGeometries };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, info ) {\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tvar type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfo.update( count, mode );\n\n\t}\n\n\tfunction renderInstances( geometry, start, count ) {\n\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\tif ( extension === null ) {\n\n\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\textension.drawElementsInstancedANGLE( mode, count, type, start * bytesPerElement, geometry.maxInstancedCount );\n\n\t\tinfo.update( count, mode, geometry.maxInstancedCount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n\nexport { WebGLIndexedBufferRenderer };\n","/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction WebGLInfo( gl ) {\n\n\tvar memory = {\n\t\tgeometries: 0,\n\t\ttextures: 0\n\t};\n\n\tvar render = {\n\t\tframe: 0,\n\t\tcalls: 0,\n\t\ttriangles: 0,\n\t\tpoints: 0,\n\t\tlines: 0\n\t};\n\n\tfunction update( count, mode, instanceCount ) {\n\n\t\tinstanceCount = instanceCount || 1;\n\n\t\trender.calls ++;\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase gl.TRIANGLES:\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.TRIANGLE_STRIP:\n\t\t\tcase gl.TRIANGLE_FAN:\n\t\t\t\trender.triangles += instanceCount * ( count - 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINES:\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_STRIP:\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_LOOP:\n\t\t\t\trender.lines += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tcase gl.POINTS:\n\t\t\t\trender.points += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\trender.frame ++;\n\t\trender.calls = 0;\n\t\trender.triangles = 0;\n\t\trender.points = 0;\n\t\trender.lines = 0;\n\n\t}\n\n\treturn {\n\t\tmemory: memory,\n\t\trender: render,\n\t\tprograms: null,\n\t\tautoReset: true,\n\t\treset: reset,\n\t\tupdate: update\n\t};\n\n}\n\n\nexport { WebGLInfo };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction WebGLMorphtargets( gl ) {\n\n\tvar influencesList = {};\n\tvar morphInfluences = new Float32Array( 8 );\n\n\tfunction update( object, geometry, material, program ) {\n\n\t\tvar objectInfluences = object.morphTargetInfluences;\n\n\t\tvar length = objectInfluences.length;\n\n\t\tvar influences = influencesList[ geometry.id ];\n\n\t\tif ( influences === undefined ) {\n\n\t\t\t// initialise list\n\n\t\t\tinfluences = [];\n\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t}\n\n\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t}\n\n\t\tvar morphTargets = material.morphTargets && geometry.morphAttributes.position;\n\t\tvar morphNormals = material.morphNormals && geometry.morphAttributes.normal;\n\n\t\t// Remove current morphAttributes\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tif ( influence[ 1 ] !== 0 ) {\n\n\t\t\t\tif ( morphTargets ) geometry.removeAttribute( 'morphTarget' + i );\n\t\t\t\tif ( morphNormals ) geometry.removeAttribute( 'morphNormal' + i );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Collect influences\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tinfluence[ 0 ] = i;\n\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t}\n\n\t\tinfluences.sort( absNumericalSort );\n\n\t\t// Add morphAttributes\n\n\t\tfor ( var i = 0; i < 8; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tif ( influence ) {\n\n\t\t\t\tvar index = influence[ 0 ];\n\t\t\t\tvar value = influence[ 1 ];\n\n\t\t\t\tif ( value ) {\n\n\t\t\t\t\tif ( morphTargets ) geometry.addAttribute( 'morphTarget' + i, morphTargets[ index ] );\n\t\t\t\t\tif ( morphNormals ) geometry.addAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t}\n\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\n\nexport { WebGLMorphtargets };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLObjects( geometries, info ) {\n\n\tvar updateList = {};\n\n\tfunction update( object ) {\n\n\t\tvar frame = info.render.frame;\n\n\t\tvar geometry = object.geometry;\n\t\tvar buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateList[ buffergeometry.id ] !== frame ) {\n\n\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\tbuffergeometry.updateFromObject( object );\n\n\t\t\t}\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateList[ buffergeometry.id ] = frame;\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateList = {};\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\n\nexport { WebGLObjects };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Texture } from './Texture.js';\nimport { CubeReflectionMapping } from '../constants.js';\n\nfunction CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\timages = images !== undefined ? images : [];\n\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\n\tTexture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.flipY = false;\n\n}\n\nCubeTexture.prototype = Object.create( Texture.prototype );\nCubeTexture.prototype.constructor = CubeTexture;\n\nCubeTexture.prototype.isCubeTexture = true;\n\nObject.defineProperty( CubeTexture.prototype, 'images', {\n\n\tget: function () {\n\n\t\treturn this.image;\n\n\t},\n\n\tset: function ( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n} );\n\n\nexport { CubeTexture };\n","/**\n * @author tschw\n *\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program, renderer )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [renderer] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'renderer' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (renderer factorizations):\n *\n * .upload( gl, seq, values, renderer )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (renderer factorizations):\n *\n * .setValue( gl, name, value )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .set( gl, obj, prop )\n *\n * \t\tsets uniform from object and property with same name than uniform\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nimport { CubeTexture } from '../../textures/CubeTexture.js';\nimport { Texture } from '../../textures/Texture.js';\n\nvar emptyTexture = new Texture();\nvar emptyCubeTexture = new CubeTexture();\n\n// --- Base for inner nodes (including the root) ---\n\nfunction UniformContainer() {\n\n\tthis.seq = [];\n\tthis.map = {};\n\n}\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nvar arrayCacheF32 = [];\nvar arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nvar mat4array = new Float32Array( 16 );\nvar mat3array = new Float32Array( 9 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tvar firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tvar n = nBlocks * blockSize,\n\t\tr = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( var i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( renderer, n ) {\n\n\tvar r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( var i = 0; i !== n; ++ i )\n\t\tr[ i ] = renderer.allocTextureUnit();\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValue1f( gl, v ) {\n\n\tgl.uniform1f( this.addr, v );\n\n}\n\nfunction setValue1i( gl, v ) {\n\n\tgl.uniform1i( this.addr, v );\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValue2fv( gl, v ) {\n\n\tif ( v.x === undefined ) {\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t} else {\n\n\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t}\n\n}\n\nfunction setValue3fv( gl, v ) {\n\n\tif ( v.x !== undefined ) {\n\n\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t} else {\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t}\n\n}\n\nfunction setValue4fv( gl, v ) {\n\n\tif ( v.x === undefined ) {\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t} else {\n\n\t\t gl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t}\n\n}\n\n// Single matrix (from flat array or MatrixN)\n\nfunction setValue2fm( gl, v ) {\n\n\tgl.uniformMatrix2fv( this.addr, false, v.elements || v );\n\n}\n\nfunction setValue3fm( gl, v ) {\n\n\tif ( v.elements === undefined ) {\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t} else {\n\n\t\tmat3array.set( v.elements );\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t}\n\n}\n\nfunction setValue4fm( gl, v ) {\n\n\tif ( v.elements === undefined ) {\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t} else {\n\n\t\tmat4array.set( v.elements );\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t}\n\n}\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, renderer ) {\n\n\tvar unit = renderer.allocTextureUnit();\n\tgl.uniform1i( this.addr, unit );\n\trenderer.setTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT6( gl, v, renderer ) {\n\n\tvar unit = renderer.allocTextureUnit();\n\tgl.uniform1i( this.addr, unit );\n\trenderer.setTextureCube( v || emptyCubeTexture, unit );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\nfunction setValue2iv( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValue3iv( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValue4iv( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValue1f; // FLOAT\n\t\tcase 0x8b50: return setValue2fv; // _VEC2\n\t\tcase 0x8b51: return setValue3fv; // _VEC3\n\t\tcase 0x8b52: return setValue4fv; // _VEC4\n\n\t\tcase 0x8b5a: return setValue2fm; // _MAT2\n\t\tcase 0x8b5b: return setValue3fm; // _MAT3\n\t\tcase 0x8b5c: return setValue4fm; // _MAT4\n\n\t\tcase 0x8b5e: case 0x8d66: return setValueT1; // SAMPLER_2D, SAMPLER_EXTERNAL_OES\n\t\tcase 0x8b60: return setValueT6; // SAMPLER_CUBE\n\n\t\tcase 0x1404: case 0x8b56: return setValue1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n\n\t}\n\n}\n\n// Array of scalars\n\nfunction setValue1fv( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\nfunction setValue1iv( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\n// Array of vectors (flat or from THREE classes)\n\nfunction setValueV2a( gl, v ) {\n\n\tgl.uniform2fv( this.addr, flatten( v, this.size, 2 ) );\n\n}\n\nfunction setValueV3a( gl, v ) {\n\n\tgl.uniform3fv( this.addr, flatten( v, this.size, 3 ) );\n\n}\n\nfunction setValueV4a( gl, v ) {\n\n\tgl.uniform4fv( this.addr, flatten( v, this.size, 4 ) );\n\n}\n\n// Array of matrices (flat or from THREE clases)\n\nfunction setValueM2a( gl, v ) {\n\n\tgl.uniformMatrix2fv( this.addr, false, flatten( v, this.size, 4 ) );\n\n}\n\nfunction setValueM3a( gl, v ) {\n\n\tgl.uniformMatrix3fv( this.addr, false, flatten( v, this.size, 9 ) );\n\n}\n\nfunction setValueM4a( gl, v ) {\n\n\tgl.uniformMatrix4fv( this.addr, false, flatten( v, this.size, 16 ) );\n\n}\n\n// Array of textures (2D / Cube)\n\nfunction setValueT1a( gl, v, renderer ) {\n\n\tvar n = v.length,\n\t\tunits = allocTexUnits( renderer, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\trenderer.setTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6a( gl, v, renderer ) {\n\n\tvar n = v.length,\n\t\tunits = allocTexUnits( renderer, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\trenderer.setTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValue1fv; // FLOAT\n\t\tcase 0x8b50: return setValueV2a; // _VEC2\n\t\tcase 0x8b51: return setValueV3a; // _VEC3\n\t\tcase 0x8b52: return setValueV4a; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2a; // _MAT2\n\t\tcase 0x8b5b: return setValueM3a; // _MAT3\n\t\tcase 0x8b5c: return setValueM4a; // _MAT4\n\n\t\tcase 0x8b5e: return setValueT1a; // SAMPLER_2D\n\t\tcase 0x8b60: return setValueT6a; // SAMPLER_CUBE\n\n\t\tcase 0x1404: case 0x8b56: return setValue1iv; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nfunction SingleUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction PureArrayUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.size = activeInfo.size;\n\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction StructuredUniform( id ) {\n\n\tthis.id = id;\n\n\tUniformContainer.call( this ); // mix-in\n\n}\n\nStructuredUniform.prototype.setValue = function ( gl, value ) {\n\n\t// Note: Don't need an extra 'renderer' parameter, since samplers\n\t// are not allowed in structured uniforms.\n\n\tvar seq = this.seq;\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tu.setValue( gl, value[ u.id ] );\n\n\t}\n\n};\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nvar RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tvar path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\tfor ( ; ; ) {\n\n\t\tvar match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex,\n\n\t\t\tid = match[ 1 ],\n\t\t\tidIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tvar map = container.map, next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nfunction WebGLUniforms( gl, program, renderer ) {\n\n\tUniformContainer.call( this );\n\n\tthis.renderer = renderer;\n\n\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\n\n\tfor ( var i = 0; i < n; ++ i ) {\n\n\t\tvar info = gl.getActiveUniform( program, i ),\n\t\t\taddr = gl.getUniformLocation( program, info.name );\n\n\t\tparseUniform( info, addr, this );\n\n\t}\n\n}\n\nWebGLUniforms.prototype.setValue = function ( gl, name, value ) {\n\n\tvar u = this.map[ name ];\n\n\tif ( u !== undefined ) u.setValue( gl, value, this.renderer );\n\n};\n\nWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\n\n\tvar v = object[ name ];\n\n\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n};\n\n\n// Static interface\n\nWebGLUniforms.upload = function ( gl, seq, values, renderer ) {\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ],\n\t\t\tv = values[ u.id ];\n\n\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\tu.setValue( gl, v.value, renderer );\n\n\t\t}\n\n\t}\n\n};\n\nWebGLUniforms.seqWithValue = function ( seq, values ) {\n\n\tvar r = [];\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tif ( u.id in values ) r.push( u );\n\n\t}\n\n\treturn r;\n\n};\n\nexport { WebGLUniforms };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction addLineNumbers( string ) {\n\n\tvar lines = string.split( '\\n' );\n\n\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t}\n\n\treturn lines.join( '\\n' );\n\n}\n\nfunction WebGLShader( gl, type, string ) {\n\n\tvar shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\n\n\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\n\n\t}\n\n\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\n\n\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\n\n\t}\n\n\t// --enable-privileged-webgl-extension\n\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\treturn shader;\n\n}\n\n\nexport { WebGLShader };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { WebGLUniforms } from './WebGLUniforms.js';\nimport { WebGLShader } from './WebGLShader.js';\nimport { ShaderChunk } from '../shaders/ShaderChunk.js';\nimport { NoToneMapping, AddOperation, MixOperation, MultiplyOperation, EquirectangularRefractionMapping, CubeRefractionMapping, SphericalReflectionMapping, EquirectangularReflectionMapping, CubeUVRefractionMapping, CubeUVReflectionMapping, CubeReflectionMapping, PCFSoftShadowMap, PCFShadowMap, CineonToneMapping, Uncharted2ToneMapping, ReinhardToneMapping, LinearToneMapping, GammaEncoding, RGBDEncoding, RGBM16Encoding, RGBM7Encoding, RGBEEncoding, sRGBEncoding, LinearEncoding } from '../../constants.js';\n\nvar programIdCount = 0;\n\nfunction getEncodingComponents( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear', '( value )' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB', '( value )' ];\n\t\tcase RGBEEncoding:\n\t\t\treturn [ 'RGBE', '( value )' ];\n\t\tcase RGBM7Encoding:\n\t\t\treturn [ 'RGBM', '( value, 7.0 )' ];\n\t\tcase RGBM16Encoding:\n\t\t\treturn [ 'RGBM', '( value, 16.0 )' ];\n\t\tcase RGBDEncoding:\n\t\t\treturn [ 'RGBD', '( value, 256.0 )' ];\n\t\tcase GammaEncoding:\n\t\t\treturn [ 'Gamma', '( value, float( GAMMA_FACTOR ) )' ];\n\t\tdefault:\n\t\t\tthrow new Error( 'unsupported encoding: ' + encoding );\n\n\t}\n\n}\n\nfunction getTexelDecodingFunction( functionName, encoding ) {\n\n\tvar components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return ' + components[ 0 ] + 'ToLinear' + components[ 1 ] + '; }';\n\n}\n\nfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\tvar components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tvar toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase Uncharted2ToneMapping:\n\t\t\ttoneMappingName = 'Uncharted2';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'unsupported toneMapping: ' + toneMapping );\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions( extensions, parameters, rendererExtensions ) {\n\n\textensions = extensions || {};\n\n\tvar chunks = [\n\t\t( extensions.derivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.normalMap || parameters.flatShading ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( extensions.fragDepth || parameters.logarithmicDepthBuffer ) && rendererExtensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( extensions.drawBuffers ) && rendererExtensions.get( 'WEBGL_draw_buffers' ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( extensions.shaderTextureLOD || parameters.envMap ) && rendererExtensions.get( 'EXT_shader_texture_lod' ) ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tvar chunks = [];\n\n\tfor ( var name in defines ) {\n\n\t\tvar value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tvar attributes = {};\n\n\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\n\n\tfor ( var i = 0; i < n; i ++ ) {\n\n\t\tvar info = gl.getActiveAttrib( program, i );\n\t\tvar name = info.name;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights );\n\n}\n\nfunction replaceClippingPlaneNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\n\n}\n\nfunction parseIncludes( string ) {\n\n\tvar pattern = /^[ \\t]*#include +<([\\w\\d.]+)>/gm;\n\n\tfunction replace( match, include ) {\n\n\t\tvar replace = ShaderChunk[ include ];\n\n\t\tif ( replace === undefined ) {\n\n\t\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t\t}\n\n\t\treturn parseIncludes( replace );\n\n\t}\n\n\treturn string.replace( pattern, replace );\n\n}\n\nfunction unrollLoops( string ) {\n\n\tvar pattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\n\n\tfunction replace( match, start, end, snippet ) {\n\n\t\tvar unroll = '';\n\n\t\tfor ( var i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\t\tunroll += snippet.replace( /\\[ i \\]/g, '[ ' + i + ' ]' );\n\n\t\t}\n\n\t\treturn unroll;\n\n\t}\n\n\treturn string.replace( pattern, replace );\n\n}\n\nfunction WebGLProgram( renderer, extensions, code, material, shader, parameters ) {\n\n\tvar gl = renderer.context;\n\n\tvar defines = material.defines;\n\n\tvar vertexShader = shader.vertexShader;\n\tvar fragmentShader = shader.fragmentShader;\n\n\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t}\n\n\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t\tcase EquirectangularReflectionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\n\t\t\t\tbreak;\n\n\t\t\tcase SphericalReflectionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\tcase CubeRefractionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tswitch ( material.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\n\n\t// console.log( 'building new program ' );\n\n\t//\n\n\tvar customExtensions = generateExtensions( material.extensions, parameters, extensions );\n\n\tvar customDefines = generateDefines( defines );\n\n\t//\n\n\tvar program = gl.createProgram();\n\n\tvar prefixVertex, prefixFragment;\n\n\tif ( material.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t'#define SHADER_NAME ' + shader.name,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\tparameters.logarithmicDepthBuffer && extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t'#define SHADER_NAME ' + shader.name,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\tparameters.logarithmicDepthBuffer && extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\tparameters.envMap && extensions.get( 'EXT_shader_texture_lod' ) ? '#define TEXTURE_LOD_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\n\t\t\t( parameters.outputEncoding || parameters.mapEncoding || parameters.envMapEncoding || parameters.emissiveMapEncoding ) ? ShaderChunk[ 'encodings_pars_fragment' ] : '', // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tparameters.mapEncoding ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\n\t\t\tparameters.envMapEncoding ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\n\t\t\tparameters.emissiveMapEncoding ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\n\t\t\tparameters.outputEncoding ? getTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ) : '',\n\n\t\t\tparameters.depthPacking ? '#define DEPTH_PACKING ' + material.depthPacking : '',\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = parseIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\n\n\tfragmentShader = parseIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\n\n\tvertexShader = unrollLoops( vertexShader );\n\tfragmentShader = unrollLoops( fragmentShader );\n\n\tvar vertexGlsl = prefixVertex + vertexShader;\n\tvar fragmentGlsl = prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tvar glVertexShader = WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\n\tvar glFragmentShader = WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( material.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, material.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\tvar programLog = gl.getProgramInfoLog( program ).trim();\n\tvar vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\n\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\n\n\tvar runnable = true;\n\tvar haveDiagnostics = true;\n\n\t// console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\n\t// console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\n\n\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\n\n\t\trunnable = false;\n\n\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog );\n\n\t} else if ( programLog !== '' ) {\n\n\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\n\n\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\thaveDiagnostics = false;\n\n\t}\n\n\tif ( haveDiagnostics ) {\n\n\t\tthis.diagnostics = {\n\n\t\t\trunnable: runnable,\n\t\t\tmaterial: material,\n\n\t\t\tprogramLog: programLog,\n\n\t\t\tvertexShader: {\n\n\t\t\t\tlog: vertexLog,\n\t\t\t\tprefix: prefixVertex\n\n\t\t\t},\n\n\t\t\tfragmentShader: {\n\n\t\t\t\tlog: fragmentLog,\n\t\t\t\tprefix: prefixFragment\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t// clean up\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tvar cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program, renderer );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tvar cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t// DEPRECATED\n\n\tObject.defineProperties( this, {\n\n\t\tuniforms: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .uniforms is now .getUniforms().' );\n\t\t\t\treturn this.getUniforms();\n\n\t\t\t}\n\t\t},\n\n\t\tattributes: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .attributes is now .getAttributes().' );\n\t\t\t\treturn this.getAttributes();\n\n\t\t\t}\n\t\t}\n\n\t} );\n\n\n\t//\n\n\tthis.name = shader.name;\n\tthis.id = programIdCount ++;\n\tthis.code = code;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\nexport { WebGLProgram };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { BackSide, DoubleSide, CubeUVRefractionMapping, CubeUVReflectionMapping, GammaEncoding, LinearEncoding } from '../../constants.js';\nimport { WebGLProgram } from './WebGLProgram.js';\n\nfunction WebGLPrograms( renderer, extensions, capabilities ) {\n\n\tvar programs = [];\n\n\tvar shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'phong',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow'\n\t};\n\n\tvar parameterNames = [\n\t\t\"precision\", \"supportsVertexTextures\", \"map\", \"mapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\",\n\t\t\"lightMap\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"displacementMap\", \"specularMap\",\n\t\t\"roughnessMap\", \"metalnessMap\", \"gradientMap\",\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\"\n\t];\n\n\n\tfunction allocateBones( object ) {\n\n\t\tvar skeleton = object.skeleton;\n\t\tvar bones = skeleton.bones;\n\n\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tvar nVertexUniforms = capabilities.maxVertexUniforms;\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tvar maxBones = Math.min( nVertexMatrices, bones.length );\n\n\t\t\tif ( maxBones < bones.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction getTextureEncodingFromMap( map, gammaOverrideLinear ) {\n\n\t\tvar encoding;\n\n\t\tif ( ! map ) {\n\n\t\t\tencoding = LinearEncoding;\n\n\t\t} else if ( map.isTexture ) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if ( map.isWebGLRenderTarget ) {\n\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\tencoding = map.texture.encoding;\n\n\t\t}\n\n\t\t// add backwards compatibility for WebGLRenderer.gammaInput/gammaOutput parameter, should probably be removed at some point.\n\t\tif ( encoding === LinearEncoding && gammaOverrideLinear ) {\n\n\t\t\tencoding = GammaEncoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n\tthis.getParameters = function ( material, lights, shadows, fog, nClipPlanes, nClipIntersection, object ) {\n\n\t\tvar shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tvar maxBones = object.isSkinnedMesh ? allocateBones( object ) : 0;\n\t\tvar precision = capabilities.precision;\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar currentRenderTarget = renderer.getRenderTarget();\n\n\t\tvar parameters = {\n\n\t\t\tshaderID: shaderID,\n\n\t\t\tprecision: precision,\n\t\t\tsupportsVertexTextures: capabilities.vertexTextures,\n\t\t\toutputEncoding: getTextureEncodingFromMap( ( ! currentRenderTarget ) ? null : currentRenderTarget.texture, renderer.gammaOutput ),\n\t\t\tmap: !! material.map,\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map, renderer.gammaInput ),\n\t\t\tenvMap: !! material.envMap,\n\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( material.envMap, renderer.gammaInput ),\n\t\t\tenvMapCubeUV: ( !! material.envMap ) && ( ( material.envMap.mapping === CubeUVReflectionMapping ) || ( material.envMap.mapping === CubeUVRefractionMapping ) ),\n\t\t\tlightMap: !! material.lightMap,\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap, renderer.gammaInput ),\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexColors: material.vertexColors,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: material.flatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning && maxBones > 0,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: capabilities.floatVertexTextures,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumClippingPlanes: nClipPlanes,\n\t\t\tnumClipIntersection: nClipIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: renderer.toneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false,\n\t\t};\n\n\t\treturn parameters;\n\n\t};\n\n\tthis.getProgramCode = function ( material, parameters ) {\n\n\t\tvar array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( material.fragmentShader );\n\t\t\tarray.push( material.vertexShader );\n\n\t\t}\n\n\t\tif ( material.defines !== undefined ) {\n\n\t\t\tfor ( var name in material.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( material.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\n\n\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\n\n\t\t}\n\n\t\tarray.push( material.onBeforeCompile.toString() );\n\n\t\tarray.push( renderer.gammaOutput );\n\n\t\treturn array.join();\n\n\t};\n\n\tthis.acquireProgram = function ( material, shader, parameters, code ) {\n\n\t\tvar program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tvar programInfo = programs[ p ];\n\n\t\t\tif ( programInfo.code === code ) {\n\n\t\t\t\tprogram = programInfo;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, extensions, code, material, shader, parameters );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t};\n\n\tthis.releaseProgram = function ( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tvar i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t};\n\n\t// Exposed for resource monitoring & error feedback via renderer.info:\n\tthis.programs = programs;\n\n}\n\n\nexport { WebGLPrograms };\n","/**\n * @author fordacious / fordacious.github.io\n */\n\nfunction WebGLProperties() {\n\n\tvar properties = new WeakMap();\n\n\tfunction get( object ) {\n\n\t\tvar map = properties.get( object );\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties.set( object, map );\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tproperties.delete( object );\n\n\t}\n\n\tfunction update( object, key, value ) {\n\n\t\tproperties.get( object )[ key ] = value;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tproperties = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLProperties };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction painterSortStable( a, b ) {\n\n\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.program && b.program && a.program !== b.program ) {\n\n\t\treturn a.program.id - b.program.id;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction WebGLRenderList() {\n\n\tvar renderItems = [];\n\tvar renderItemsIndex = 0;\n\n\tvar opaque = [];\n\tvar transparent = [];\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction push( object, geometry, material, z, group ) {\n\n\t\tvar renderItem = renderItems[ renderItemsIndex ];\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tprogram: material.program,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.program = material.program;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\t( material.transparent === true ? transparent : opaque ).push( renderItem );\n\n\t\trenderItemsIndex ++;\n\n\t}\n\n\tfunction sort() {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( painterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( reversePainterSortStable );\n\n\t}\n\n\treturn {\n\t\topaque: opaque,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists() {\n\n\tvar lists = {};\n\n\tfunction get( scene, camera ) {\n\n\t\tvar hash = scene.id + ',' + camera.id;\n\t\tvar list = lists[ hash ];\n\n\t\tif ( list === undefined ) {\n\n\t\t\t// console.log( 'THREE.WebGLRenderLists:', hash );\n\n\t\t\tlist = new WebGLRenderList();\n\t\t\tlists[ hash ] = list;\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = {};\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderLists };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Color } from '../../math/Color.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Vector3 } from '../../math/Vector3.js';\n\nfunction UniformsCache() {\n\n\tvar lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tvar uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\n\t\t\t\t\t\tshadowCameraNear: 1,\n\t\t\t\t\t\tshadowCameraFar: 1000\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\nvar count = 0;\n\nfunction WebGLLights() {\n\n\tvar cache = new UniformsCache();\n\n\tvar state = {\n\n\t\tid: count ++,\n\n\t\thash: '',\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tdirectional: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tlightDirection: [],\n\t\tspot: [],\n\t\tspotShadowMap: [],\n\t\tspotShadowMatrix: [],\n\t\tspotPosition: [],\n\t\tspotNormalOffset: [],\n\t\tdirectionalNormalOffset: [],\n\t\trectArea: [],\n\t\trectShadowMap: [],\n\t\tpoint: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: []\n\n\t};\n\n\tvar vector3 = new Vector3();\n\tvar matrix4 = new Matrix4();\n\tvar matrix42 = new Matrix4();\n\n\tfunction setup( lights, shadows, camera ) {\n\n\t\tvar r = 0, g = 0, b = 0;\n\n\t\tvar directionalLength = 0;\n\t\tvar pointLength = 0;\n\t\tvar spotLength = 0;\n\t\tvar rectAreaLength = 0;\n\t\tvar hemiLength = 0;\n\n\t\tvar viewMatrix = camera.matrixWorldInverse;\n\n\t\tfor ( var i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tvar light = lights[ i ];\n\n\t\t\tvar color = light.color;\n\t\t\tvar intensity = light.intensity;\n\t\t\tvar distance = light.distance;\n\n\t\t\tvar shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity;\n\t\t\t\tg += color.g * intensity;\n\t\t\t\tb += color.b * intensity;\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t}\n\n\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\t\t\t\tstate.lightDirection[ directionalLength ] = uniforms.direction;\n\t\t\t\tstate.directionalNormalOffset[ directionalLength ] = light.castShadow ? light.shadow.normalOffset : 0;\n\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t}\n\n\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\n\t\t\t\tstate.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\n\t\t\t\tstate.spotPosition[ spotLength ] = uniforms.position;\n\t\t\t\tstate.spotNormalOffset[ spotLength ] = light.castShadow ? light.shadow.normalOffset : 0;\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\t// (a) intensity is the total visible light emitted\n\t\t\t\t//uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\n\n\t\t\t\t// (b) intensity is the brightness of the light\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\tmatrix42.identity();\n\t\t\t\tmatrix4.copy( light.matrixWorld );\n\t\t\t\tmatrix4.premultiply( viewMatrix );\n\t\t\t\tmatrix42.extractRotation( matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\n\n\t\t\t\t// TODO (abelnation): RectAreaLight distance?\n\t\t\t\t// uniforms.distance = distance;\n\t\t\t\tuniforms.shadow = light.castShadow;\n\t\t\t\tif ( light.castShadow ) {\n\t\t\t\t\tstate.rectShadowMap[ rectAreaLength ] = shadowMap;\n\t\t\t\t}\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\t\t\t\t\tuniforms.shadowCameraNear = shadow.camera.near;\n\t\t\t\t\tuniforms.shadowCameraFar = shadow.camera.far;\n\n\t\t\t\t}\n\n\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\t\t\t\tstate.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\t\t\t\tuniforms.direction.normalize();\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\n\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tstate.directional.length = directionalLength;\n\t\tstate.spot.length = spotLength;\n\t\tstate.rectArea.length = rectAreaLength;\n\t\tstate.point.length = pointLength;\n\t\tstate.hemi.length = hemiLength;\n\n\t\tstate.hash = state.id + ',' + directionalLength + ',' + pointLength + ',' + spotLength + ',' + rectAreaLength + ',' + hemiLength + ',' + shadows.length;\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tstate: state\n\t};\n\n}\n\n\nexport { WebGLLights };\n","import { Sphere } from '../math/Sphere.js';\nimport { Ray } from '../math/Ray.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { LineSegments } from './LineSegments.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Line( geometry, material, mode ) {\n\n\tif ( mode === 1 ) {\n\n\t\tconsole.warn( 'THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.' );\n\t\treturn new LineSegments( geometry, material );\n\n\t}\n\n\tObject3D.call( this );\n\n\tthis.type = 'Line';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new LineBasicMaterial( { color: Math.random() * 0xffffff } );\n\n}\n\nLine.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Line,\n\n\tisLine: true,\n\n\tcomputeLineDistances: ( function () {\n\n\t\tvar start = new Vector3();\n\t\tvar end = new Vector3();\n\n\t\treturn function computeLineDistances() {\n\n\t\t\tvar geometry = this.geometry;\n\n\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\t// we assume non-indexed geometry\n\n\t\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\t\tvar positionAttribute = geometry.attributes.position;\n\t\t\t\t\tvar lineDistances = [ 0 ];\n\n\t\t\t\t\tfor ( var i = 1, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t\tstart.fromBufferAttribute( positionAttribute, i - 1 );\n\t\t\t\t\t\tend.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\t\t\tlineDistances[ i ] += start.distanceTo( end );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgeometry.addAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t\t}\n\n\t\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\tvar lineDistances = geometry.lineDistances;\n\n\t\t\t\tlineDistances[ 0 ] = 0;\n\n\t\t\t\tfor ( var i = 1, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i ] += vertices[ i - 1 ].distanceTo( vertices[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}() ),\n\n\traycast: ( function () {\n\n\t\tvar inverseMatrix = new Matrix4();\n\t\tvar ray = new Ray();\n\t\tvar sphere = new Sphere();\n\n\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\tvar precision = raycaster.linePrecision;\n\t\t\tvar precisionSq = precision * precision;\n\n\t\t\tvar geometry = this.geometry;\n\t\t\tvar matrixWorld = this.matrixWorld;\n\n\t\t\t// Checking boundingSphere distance to ray\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\tsphere.applyMatrix4( matrixWorld );\n\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\n\n\t\t\t//\n\n\t\t\tinverseMatrix.getInverse( matrixWorld );\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\t\tvar vStart = new Vector3();\n\t\t\tvar vEnd = new Vector3();\n\t\t\tvar interSegment = new Vector3();\n\t\t\tvar interRay = new Vector3();\n\t\t\tvar step = ( this && this.isLineSegments ) ? 2 : 1;\n\n\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\tvar index = geometry.index;\n\t\t\t\tvar attributes = geometry.attributes;\n\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\tif ( index !== null ) {\n\n\t\t\t\t\tvar indices = index.array;\n\n\t\t\t\t\tfor ( var i = 0, l = indices.length - 1; i < l; i += step ) {\n\n\t\t\t\t\t\tvar a = indices[ i ];\n\t\t\t\t\t\tvar b = indices[ i + 1 ];\n\n\t\t\t\t\t\tvStart.fromArray( positions, a * 3 );\n\t\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\n\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\tface: null,\n\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\n\n\t\t\t\t\t\tvStart.fromArray( positions, 3 * i );\n\t\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\n\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\tface: null,\n\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\tvar nbVertices = vertices.length;\n\n\t\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\n\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() ),\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\n\nexport { Line };\n","/**\n * @author WestLangley / http://github.com/WestLangley\n * @author zz85 / http://github.com/zz85\n * @author bhouston / http://clara.io\n *\n * Creates an arrow for visualizing directions\n *\n * Parameters:\n *  dir - Vector3\n *  origin - Vector3\n *  length - Number\n *  color - color in hex value\n *  headLength - Number\n *  headWidth - Number\n */\n\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { CylinderBufferGeometry } from '../geometries/CylinderGeometry.js';\nimport { MeshBasicMaterial } from '../materials/MeshBasicMaterial.js';\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial.js';\nimport { Mesh } from '../objects/Mesh.js';\nimport { Line } from '../objects/Line.js';\nimport { Vector3 } from '../math/Vector3.js';\n\nvar lineGeometry, coneGeometry;\n\nfunction ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\n\n\t// dir is assumed to be normalized\n\n\tObject3D.call( this );\n\n\tif ( color === undefined ) color = 0xffff00;\n\tif ( length === undefined ) length = 1;\n\tif ( headLength === undefined ) headLength = 0.2 * length;\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\tif ( lineGeometry === undefined ) {\n\n\t\tlineGeometry = new BufferGeometry();\n\t\tlineGeometry.addAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\n\n\t\tconeGeometry = new CylinderBufferGeometry( 0, 0.5, 1, 5, 1 );\n\t\tconeGeometry.translate( 0, - 0.5, 0 );\n\n\t}\n\n\tthis.position.copy( origin );\n\n\tthis.line = new Line( lineGeometry, new LineBasicMaterial( { color: color } ) );\n\tthis.line.matrixAutoUpdate = false;\n\tthis.add( this.line );\n\n\tthis.cone = new Mesh( coneGeometry, new MeshBasicMaterial( { color: color } ) );\n\tthis.cone.matrixAutoUpdate = false;\n\tthis.add( this.cone );\n\n\tthis.setDirection( dir );\n\tthis.setLength( length, headLength, headWidth );\n\n}\n\nArrowHelper.prototype = Object.create( Object3D.prototype );\nArrowHelper.prototype.constructor = ArrowHelper;\n\nArrowHelper.prototype.setDirection = ( function () {\n\n\tvar axis = new Vector3();\n\tvar radians;\n\n\treturn function setDirection( dir ) {\n\n\t\t// dir is assumed to be normalized\n\n\t\tif ( dir.y > 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\n\n\t\t} else if ( dir.y < - 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\n\n\t\t} else {\n\n\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\n\n\t\t\tradians = Math.acos( dir.y );\n\n\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\n\n\t\t}\n\n\t};\n\n}() );\n\nArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\n\n\tif ( headLength === undefined ) headLength = 0.2 * length;\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\tthis.line.scale.set( 1, Math.max( 0, length - headLength ), 1 );\n\tthis.line.updateMatrix();\n\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\n\tthis.cone.position.y = length;\n\tthis.cone.updateMatrix();\n\n};\n\nArrowHelper.prototype.setColor = function ( color ) {\n\n\tthis.line.material.color.copy( color );\n\tthis.cone.material.color.copy( color );\n\n};\n\n\nexport { ArrowHelper };\n","/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { WebGLLights } from './WebGLLights.js';\n\nfunction WebGLRenderState() {\n\n\tvar lights = new WebGLLights();\n\n\tvar lightsArray = [];\n\tvar shadowsArray = [];\n\tvar spritesArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\t\tspritesArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction pushSprite( shadowLight ) {\n\n\t\tspritesArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights( camera ) {\n\n\t\tlights.setup( lightsArray, shadowsArray, camera );\n\n\t}\n\n\tvar state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\t\tspritesArray: spritesArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow,\n\t\tpushSprite: pushSprite\n\t};\n\n}\n\nfunction WebGLRenderStates() {\n\n\tvar renderStates = {};\n\n\tfunction get( scene, camera ) {\n\n\t\tvar hash = scene.id + ',' + camera.id;\n\n\t\tvar renderState = renderStates[ hash ];\n\n\t\tif ( renderState === undefined ) {\n\n\t\t\trenderState = new WebGLRenderState();\n\t\t\trenderStates[ hash ] = renderState;\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = {};\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderStates };\n","import { EventDispatcher } from '../core/EventDispatcher.js';\nimport { Texture } from '../textures/Texture.js';\nimport { LinearFilter } from '../constants.js';\nimport { Vector4 } from '../math/Vector4.js';\n\n/**\n * @author szimek / https://github.com/szimek/\n * @author alteredq / http://alteredqualia.com/\n * @author Marius Kintel / https://github.com/kintel\n */\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nfunction WebGLRenderTarget( width, height, options ) {\n\n\tthis.width = width;\n\tthis.height = height;\n\n\tthis.scissor = new Vector4( 0, 0, width, height );\n\tthis.scissorTest = false;\n\n\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\toptions = options || {};\n\n\tif ( options.minFilter === undefined ) options.minFilter = LinearFilter;\n\n\tthis.texture = new Texture( undefined, undefined, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n}\n\nWebGLRenderTarget.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: WebGLRenderTarget,\n\n\tisWebGLRenderTarget: true,\n\n\tsetSize: function ( width, height ) {\n\n\t\tif ( this.width !== width || this.height !== height ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\t\tthis.depthTexture = source.depthTexture;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { WebGLRenderTarget };\n","import { Material } from './Material.js';\nimport { BasicDepthPacking } from '../constants.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / https://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nfunction MeshDepthMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDepthMaterial';\n\n\tthis.depthPacking = BasicDepthPacking;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDepthMaterial.prototype = Object.create( Material.prototype );\nMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\n\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n\nMeshDepthMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.depthPacking = source.depthPacking;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\treturn this;\n\n};\n\n\nexport { MeshDepthMaterial };\n","import { Material } from './Material.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  referencePosition: <float>,\n *  nearDistance: <float>,\n *  farDistance: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>\n *\n * }\n */\n\nfunction MeshDistanceMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDistanceMaterial';\n\n\tthis.referencePosition = new Vector3();\n\tthis.nearDistance = 1;\n\tthis.farDistance = 1000;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.fog = false;\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDistanceMaterial.prototype = Object.create( Material.prototype );\nMeshDistanceMaterial.prototype.constructor = MeshDistanceMaterial;\n\nMeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\n\nMeshDistanceMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.referencePosition.copy( source.referencePosition );\n\tthis.nearDistance = source.nearDistance;\n\tthis.farDistance = source.farDistance;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\treturn this;\n\n};\n\n\nexport { MeshDistanceMaterial };\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { FrontSide, BackSide, DoubleSide, RGBAFormat, NearestFilter, PCFShadowMap, RGBADepthPacking } from '../../constants.js';\nimport { WebGLRenderTarget } from '../WebGLRenderTarget.js';\nimport { MeshDepthMaterial } from '../../materials/MeshDepthMaterial.js';\nimport { MeshDistanceMaterial } from '../../materials/MeshDistanceMaterial.js';\nimport { Vector4 } from '../../math/Vector4.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\nimport { Frustum } from '../../math/Frustum.js';\n\nfunction WebGLShadowMap( _renderer, _objects, maxTextureSize ) {\n\n\tvar _frustum = new Frustum(),\n\t\t_projScreenMatrix = new Matrix4(),\n\n\t\t_shadowMapSize = new Vector2(),\n\t\t_maxShadowMapSize = new Vector2( maxTextureSize, maxTextureSize ),\n\n\t\t_lookTarget = new Vector3(),\n\t\t_lightPositionWorld = new Vector3(),\n\n\t\t_MorphingFlag = 1,\n\t\t_SkinningFlag = 2,\n\n\t\t_NumberOfMaterialVariants = ( _MorphingFlag | _SkinningFlag ) + 1,\n\n\t\t_depthMaterials = new Array( _NumberOfMaterialVariants ),\n\t\t_distanceMaterials = new Array( _NumberOfMaterialVariants ),\n\n\t\t_materialCache = {};\n\n\tvar shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\n\n\tvar cubeDirections = [\n\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t];\n\n\tvar cubeUps = [\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t];\n\n\tvar cube2DViewPorts = [\n\t\tnew Vector4(), new Vector4(), new Vector4(),\n\t\tnew Vector4(), new Vector4(), new Vector4()\n\t];\n\n\t// init\n\n\tfor ( var i = 0; i !== _NumberOfMaterialVariants; ++ i ) {\n\n\t\tvar useMorphing = ( i & _MorphingFlag ) !== 0;\n\t\tvar useSkinning = ( i & _SkinningFlag ) !== 0;\n\n\t\tvar depthMaterial = new MeshDepthMaterial( {\n\n\t\t\tdepthPacking: RGBADepthPacking,\n\n\t\t\tmorphTargets: useMorphing,\n\t\t\tskinning: useSkinning\n\n\t\t} );\n\n\t\t_depthMaterials[ i ] = depthMaterial;\n\n\t\t//\n\n\t\tvar distanceMaterial = new MeshDistanceMaterial( {\n\n\t\t\tmorphTargets: useMorphing,\n\t\t\tskinning: useSkinning\n\n\t\t} );\n\n\t\t_distanceMaterials[ i ] = distanceMaterial;\n\n\t}\n\n\t//\n\n\tvar scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\n\tthis.render = function ( lights, scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( lights.length === 0 ) return;\n\n\t\t// TODO Clean up (needed in case of contextlost)\n\t\tvar _gl = _renderer.context;\n\t\tvar _state = _renderer.state;\n\n\t\t// Set GL state for depth map.\n\t\t_state.disable( _gl.BLEND );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tvar faceCount;\n\n\t\tfor ( var i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tvar light = lights[ i ];\n\n\t\t\tif ( light.isRectAreaLight ) {\n        return;\n      }\n\n\t\t\tvar shadow = light.shadow;\n\t\t\tvar isPointLight = light && light.isPointLight;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar shadowCamera = shadow.camera;\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\t\t\t_shadowMapSize.min( _maxShadowMapSize );\n\n\t\t\tif ( isPointLight ) {\n\n\t\t\t\tvar vpWidth = _shadowMapSize.x;\n\t\t\t\tvar vpHeight = _shadowMapSize.y;\n\n\t\t\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t\t\t// following orientation:\n\t\t\t\t//\n\t\t\t\t//  xzXZ\n\t\t\t\t//   y Y\n\t\t\t\t//\n\t\t\t\t// X - Positive x direction\n\t\t\t\t// x - Negative x direction\n\t\t\t\t// Y - Positive y direction\n\t\t\t\t// y - Negative y direction\n\t\t\t\t// Z - Positive z direction\n\t\t\t\t// z - Negative z direction\n\n\t\t\t\t// positive X\n\t\t\t\tcube2DViewPorts[ 0 ].set( vpWidth * 2, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// negative X\n\t\t\t\tcube2DViewPorts[ 1 ].set( 0, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// positive Z\n\t\t\t\tcube2DViewPorts[ 2 ].set( vpWidth * 3, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// negative Z\n\t\t\t\tcube2DViewPorts[ 3 ].set( vpWidth, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// positive Y\n\t\t\t\tcube2DViewPorts[ 4 ].set( vpWidth * 3, 0, vpWidth, vpHeight );\n\t\t\t\t// negative Y\n\t\t\t\tcube2DViewPorts[ 5 ].set( vpWidth, 0, vpWidth, vpHeight );\n\n\t\t\t\t_shadowMapSize.x *= 4.0;\n\t\t\t\t_shadowMapSize.y *= 2.0;\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tvar pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadowCamera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tif ( shadow.isSpotLightShadow ) {\n\n\t\t\t\tshadow.update( light );\n\n\t\t\t}\n\n\t\t\tvar shadowMap = shadow.map;\n\t\t\tvar shadowMatrix = shadow.matrix;\n\n\t\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\t\tshadowCamera.position.copy( _lightPositionWorld );\n\n\t\t\tif ( isPointLight ) {\n\n\t\t\t\tfaceCount = 6;\n\n\t\t\t\t// for point lights we set the shadow matrix to be a translation-only matrix\n\t\t\t\t// equal to inverse of the light's position\n\n\t\t\t\tshadowMatrix.makeTranslation( - _lightPositionWorld.x, - _lightPositionWorld.y, - _lightPositionWorld.z );\n\n\t\t\t} else {\n\n\t\t\t\tfaceCount = 1;\n\n\t\t\t\t_lookTarget.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tshadowCamera.lookAt( _lookTarget );\n\t\t\t\tshadowCamera.updateMatrixWorld();\n\n\t\t\t\t// compute shadow matrix\n\n\t\t\t\tshadowMatrix.set(\n\t\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t\t);\n\n\t\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget( shadowMap );\n\t\t\t_renderer.clear();\n\n\t\t\t// render shadow map for each cube face (if omni-directional) or\n\t\t\t// run a single pass if not\n\n\t\t\tfor ( var face = 0; face < faceCount; face ++ ) {\n\n\t\t\t\tif ( isPointLight ) {\n\n\t\t\t\t\t_lookTarget.copy( shadowCamera.position );\n\t\t\t\t\t_lookTarget.add( cubeDirections[ face ] );\n\t\t\t\t\tshadowCamera.up.copy( cubeUps[ face ] );\n\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\n\t\t\t\t\tshadowCamera.updateMatrixWorld();\n\n\t\t\t\t\tvar vpDimensions = cube2DViewPorts[ face ];\n\t\t\t\t\t_state.viewport( vpDimensions );\n\n\t\t\t\t}\n\n\t\t\t\t// update camera matrices and frustum\n\n\t\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\t\t\t// set object matrices & frustum culling\n\n\t\t\t\trenderObject( scene, camera, shadowCamera, isPointLight );\n\n\t\t\t}\n\n\t\t}\n\n\t\tscope.needsUpdate = false;\n\n\t};\n\n\tfunction getDepthMaterial( object, material, isPointLight, lightPositionWorld, shadowCameraNear, shadowCameraFar ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tvar result = null;\n\n\t\tvar materialVariants = _depthMaterials;\n\t\tvar customMaterial = object.customDepthMaterial;\n\n\t\tif ( isPointLight ) {\n\n\t\t\tmaterialVariants = _distanceMaterials;\n\t\t\tcustomMaterial = object.customDistanceMaterial;\n\n\t\t}\n\n\t\tif ( ! customMaterial ) {\n\n\t\t\tvar useMorphing = false;\n\n\t\t\tif ( material.morphTargets ) {\n\n\t\t\t\tif ( geometry && geometry.isBufferGeometry ) {\n\n\t\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\n\n\t\t\t\t} else if ( geometry && geometry.isGeometry ) {\n\n\t\t\t\t\tuseMorphing = geometry.morphTargets && geometry.morphTargets.length > 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( object.isSkinnedMesh && material.skinning === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\n\n\t\t\t}\n\n\t\t\tvar useSkinning = object.isSkinnedMesh && material.skinning;\n\n\t\t\tvar variantIndex = 0;\n\n\t\t\tif ( useMorphing ) variantIndex |= _MorphingFlag;\n\t\t\tif ( useSkinning ) variantIndex |= _SkinningFlag;\n\n\t\t\tresult = materialVariants[ variantIndex ];\n\n\t\t} else {\n\n\t\t\tresult = customMaterial;\n\n\t\t}\n\n\t\tif ( _renderer.localClippingEnabled &&\n\t\t\t\tmaterial.clipShadows === true &&\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tvar keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tvar materialsForVariant = _materialCache[ keyA ];\n\n\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tvar cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tresult.side = ( material.shadowSide != null ) ? material.shadowSide : shadowSide[ material.side ];\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( isPointLight && result.isMeshDistanceMaterial ) {\n\n\t\t\tresult.referencePosition.copy( lightPositionWorld );\n\t\t\tresult.nearDistance = shadowCameraNear;\n\t\t\tresult.farDistance = shadowCameraFar;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, isPointLight ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tvar visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( object.castShadow && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tvar geometry = _objects.update( object );\n\t\t\t\tvar material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tvar group = groups[ k ];\n\t\t\t\t\t\tvar groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, groupMaterial, isPointLight, _lightPositionWorld, shadowCamera.near, shadowCamera.far );\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, material, isPointLight, _lightPositionWorld, shadowCamera.near, shadowCamera.far );\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, isPointLight );\n\n\t\t}\n\n\t}\n\n}\n\n\nexport { WebGLShadowMap };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Texture } from './Texture.js';\n\nfunction CanvasTexture( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTexture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.needsUpdate = true;\n\n}\n\nCanvasTexture.prototype = Object.create( Texture.prototype );\nCanvasTexture.prototype.constructor = CanvasTexture;\n\n\nexport { CanvasTexture };\n","/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport { CanvasTexture } from '../../textures/CanvasTexture.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { Quaternion } from '../../math/Quaternion.js';\n\nfunction WebGLSpriteRenderer( renderer, gl, state, textures, capabilities ) {\n\n\tvar vertexBuffer, elementBuffer;\n\tvar program, attributes, uniforms;\n\n\tvar texture;\n\n\t// decompose matrixWorld\n\n\tvar spritePosition = new Vector3();\n\tvar spriteRotation = new Quaternion();\n\tvar spriteScale = new Vector3();\n\n\tfunction init() {\n\n\t\tvar vertices = new Float32Array( [\n\t\t\t- 0.5, - 0.5, 0, 0,\n\t\t\t  0.5, - 0.5, 1, 0,\n\t\t\t  0.5, 0.5, 1, 1,\n\t\t\t- 0.5, 0.5, 0, 1\n\t\t] );\n\n\t\tvar faces = new Uint16Array( [\n\t\t\t0, 1, 2,\n\t\t\t0, 2, 3\n\t\t] );\n\n\t\tvertexBuffer = gl.createBuffer();\n\t\telementBuffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\tprogram = createProgram();\n\n\t\tattributes = {\n\t\t\tposition: gl.getAttribLocation( program, 'position' ),\n\t\t\tuv: gl.getAttribLocation( program, 'uv' )\n\t\t};\n\n\t\tuniforms = {\n\t\t\tuvOffset: gl.getUniformLocation( program, 'uvOffset' ),\n\t\t\tuvScale: gl.getUniformLocation( program, 'uvScale' ),\n\n\t\t\trotation: gl.getUniformLocation( program, 'rotation' ),\n\t\t\tcenter: gl.getUniformLocation( program, 'center' ),\n\t\t\tscale: gl.getUniformLocation( program, 'scale' ),\n\n\t\t\tcolor: gl.getUniformLocation( program, 'color' ),\n\t\t\tmap: gl.getUniformLocation( program, 'map' ),\n\t\t\topacity: gl.getUniformLocation( program, 'opacity' ),\n\n\t\t\tmodelViewMatrix: gl.getUniformLocation( program, 'modelViewMatrix' ),\n\t\t\tprojectionMatrix: gl.getUniformLocation( program, 'projectionMatrix' ),\n\n\t\t\tfogType: gl.getUniformLocation( program, 'fogType' ),\n\t\t\tfogDensity: gl.getUniformLocation( program, 'fogDensity' ),\n\t\t\tfogNear: gl.getUniformLocation( program, 'fogNear' ),\n\t\t\tfogFar: gl.getUniformLocation( program, 'fogFar' ),\n\t\t\tfogColor: gl.getUniformLocation( program, 'fogColor' ),\n\t\t\tfogDepth: gl.getUniformLocation( program, 'fogDepth' ),\n\n\t\t\talphaTest: gl.getUniformLocation( program, 'alphaTest' )\n\t\t};\n\n\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\tcanvas.width = 8;\n\t\tcanvas.height = 8;\n\n\t\tvar context = canvas.getContext( '2d' );\n\t\tcontext.fillStyle = 'white';\n\t\tcontext.fillRect( 0, 0, 8, 8 );\n\n\t\ttexture = new CanvasTexture( canvas );\n\n\t}\n\n\tthis.render = function ( sprites, scene, camera ) {\n\n\t\tif ( sprites.length === 0 ) return;\n\n\t\t// setup gl\n\n\t\tif ( program === undefined ) {\n\n\t\t\tinit();\n\n\t\t}\n\n\t\tstate.useProgram( program );\n\n\t\tstate.initAttributes();\n\t\tstate.enableAttribute( attributes.position );\n\t\tstate.enableAttribute( attributes.uv );\n\t\tstate.disableUnusedAttributes();\n\n\t\tstate.disable( gl.CULL_FACE );\n\t\tstate.enable( gl.BLEND );\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\n\n\t\tstate.activeTexture( gl.TEXTURE0 );\n\t\tgl.uniform1i( uniforms.map, 0 );\n\n\t\tvar oldFogType = 0;\n\t\tvar sceneFogType = 0;\n\t\tvar fog = scene.fog;\n\n\t\tif ( fog ) {\n\n\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\n\n\t\t\tif ( fog.isFog ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\n\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\n\t\t\t\toldFogType = 1;\n\t\t\t\tsceneFogType = 1;\n\n\t\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\n\t\t\t\toldFogType = 2;\n\t\t\t\tsceneFogType = 2;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl.uniform1i( uniforms.fogType, 0 );\n\t\t\toldFogType = 0;\n\t\t\tsceneFogType = 0;\n\n\t\t}\n\n\n\t\t// update positions and sort\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\n\t\t\tsprite.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\n\t\t\tsprite.z = - sprite.modelViewMatrix.elements[ 14 ];\n\n\t\t}\n\n\t\tsprites.sort( painterSortStable );\n\n\t\t// render all sprites\n\n\t\tvar scale = [];\n\t\tvar center = [];\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\t\t\tvar material = sprite.material;\n\n\t\t\tif ( material.visible === false ) continue;\n\n\t\t\tsprite.onBeforeRender( renderer, scene, camera, undefined, material, undefined );\n\n\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\n\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements );\n\n\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\n\n\t\t\tscale[ 0 ] = spriteScale.x;\n\t\t\tscale[ 1 ] = spriteScale.y;\n\n\t\t\tcenter[ 0 ] = sprite.center.x - 0.5;\n\t\t\tcenter[ 1 ] = sprite.center.y - 0.5;\n\n\t\t\tvar fogType = 0;\n\n\t\t\tif ( scene.fog && material.fog ) {\n\n\t\t\t\tfogType = sceneFogType;\n\n\t\t\t}\n\n\t\t\tif ( oldFogType !== fogType ) {\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\n\t\t\t\toldFogType = fogType;\n\n\t\t\t}\n\n\t\t\tif ( material.map !== null ) {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\n\n\t\t\t} else {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\n\n\t\t\t}\n\n\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\n\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\n\n\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\n\t\t\tgl.uniform2fv( uniforms.center, center );\n\t\t\tgl.uniform2fv( uniforms.scale, scale );\n\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\t\t\tstate.buffers.depth.setTest( material.depthTest );\n\t\t\tstate.buffers.depth.setMask( material.depthWrite );\n\t\t\tstate.buffers.color.setMask( material.colorWrite );\n\n\t\t\ttextures.setTexture2D( material.map || texture, 0 );\n\n\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t\tsprite.onAfterRender( renderer, scene, camera, undefined, material, undefined );\n\n\t\t}\n\n\t\t// restore gl\n\n\t\tstate.enable( gl.CULL_FACE );\n\n\t\tstate.reset();\n\n\t};\n\n\tfunction createProgram() {\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\n\t\tgl.shaderSource( vertexShader, [\n\n\t\t\t'precision ' + capabilities.precision + ' float;',\n\n\t\t\t'#define SHADER_NAME ' + 'SpriteMaterial',\n\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform float rotation;',\n\t\t\t'uniform vec2 center;',\n\t\t\t'uniform vec2 scale;',\n\t\t\t'uniform vec2 uvOffset;',\n\t\t\t'uniform vec2 uvScale;',\n\n\t\t\t'attribute vec2 position;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'varying vec2 vUV;',\n\t\t\t'varying float fogDepth;',\n\n\t\t\t'void main() {',\n\n\t\t\t'\tvUV = uvOffset + uv * uvScale;',\n\n\t\t\t'\tvec2 alignedPosition = ( position - center ) * scale;',\n\n\t\t\t'\tvec2 rotatedPosition;',\n\t\t\t'\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\n\t\t\t'\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\n\n\t\t\t'\tvec4 mvPosition;',\n\n\t\t\t'\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\n\t\t\t'\tmvPosition.xy += rotatedPosition;',\n\n\t\t\t'\tgl_Position = projectionMatrix * mvPosition;',\n\n\t\t\t'\tfogDepth = - mvPosition.z;',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.shaderSource( fragmentShader, [\n\n\t\t\t'precision ' + capabilities.precision + ' float;',\n\n\t\t\t'#define SHADER_NAME ' + 'SpriteMaterial',\n\n\t\t\t'uniform vec3 color;',\n\t\t\t'uniform sampler2D map;',\n\t\t\t'uniform float opacity;',\n\n\t\t\t'uniform int fogType;',\n\t\t\t'uniform vec3 fogColor;',\n\t\t\t'uniform float fogDensity;',\n\t\t\t'uniform float fogNear;',\n\t\t\t'uniform float fogFar;',\n\t\t\t'uniform float alphaTest;',\n\n\t\t\t'varying vec2 vUV;',\n\t\t\t'varying float fogDepth;',\n\n\t\t\t'void main() {',\n\n\t\t\t'\tvec4 texture = texture2D( map, vUV );',\n\n\t\t\t'\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\n\n\t\t\t'\tif ( gl_FragColor.a < alphaTest ) discard;',\n\n\t\t\t'\tif ( fogType > 0 ) {',\n\n\t\t\t'\t\tfloat fogFactor = 0.0;',\n\n\t\t\t'\t\tif ( fogType == 1 ) {',\n\n\t\t\t'\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );',\n\n\t\t\t'\t\t} else {',\n\n\t\t\t'\t\t\tconst float LOG2 = 1.442695;',\n\t\t\t'\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );',\n\t\t\t'\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\n\n\t\t\t'\t\t}',\n\n\t\t\t'\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );',\n\n\t\t\t'\t}',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.compileShader( vertexShader );\n\t\tgl.compileShader( fragmentShader );\n\n\t\tgl.attachShader( program, vertexShader );\n\t\tgl.attachShader( program, fragmentShader );\n\n\t\tgl.linkProgram( program );\n\n\t\treturn program;\n\n\t}\n\n\tfunction painterSortStable( a, b ) {\n\n\t\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\t\treturn a.renderOrder - b.renderOrder;\n\n\t\t} else if ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else {\n\n\t\t\treturn b.id - a.id;\n\n\t\t}\n\n\t}\n\n}\n\n\nexport { WebGLSpriteRenderer };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { NotEqualDepth, GreaterDepth, GreaterEqualDepth, EqualDepth, LessEqualDepth, LessDepth, AlwaysDepth, NeverDepth, CullFaceFront, CullFaceBack, CullFaceNone, CustomBlending, MultiplyBlending, SubtractiveBlending, AdditiveBlending, NoBlending, NormalBlending, DoubleSide, BackSide } from '../../constants.js';\nimport { Vector4 } from '../../math/Vector4.js';\n\nfunction WebGLState( gl, extensions, utils ) {\n\n\tfunction ColorBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar color = new Vector4();\n\t\tvar currentColorMask = null;\n\t\tvar currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentDepthMask = null;\n\t\tvar currentDepthFunc = null;\n\t\tvar currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( gl.DEPTH_TEST );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( gl.DEPTH_TEST );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tif ( depthFunc ) {\n\n\t\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LESS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentStencilMask = null;\n\t\tvar currentStencilFunc = null;\n\t\tvar currentStencilRef = null;\n\t\tvar currentStencilFuncMask = null;\n\t\tvar currentStencilFail = null;\n\t\tvar currentStencilZFail = null;\n\t\tvar currentStencilZPass = null;\n\t\tvar currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\tenable( gl.STENCIL_TEST );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( gl.STENCIL_TEST );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef \t!== stencilRef \t||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail\t !== stencilFail \t||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tvar colorBuffer = new ColorBuffer();\n\tvar depthBuffer = new DepthBuffer();\n\tvar stencilBuffer = new StencilBuffer();\n\n\tvar maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tvar newAttributes = new Uint8Array( maxVertexAttributes );\n\tvar enabledAttributes = new Uint8Array( maxVertexAttributes );\n\tvar attributeDivisors = new Uint8Array( maxVertexAttributes );\n\n\tvar capabilities = {};\n\n\tvar compressedTextureFormats = null;\n\n\tvar currentProgram = null;\n\n\tvar currentBlending = null;\n\tvar currentBlendEquation = null;\n\tvar currentBlendSrc = null;\n\tvar currentBlendDst = null;\n\tvar currentBlendEquationAlpha = null;\n\tvar currentBlendSrcAlpha = null;\n\tvar currentBlendDstAlpha = null;\n\tvar currentPremultipledAlpha = false;\n\n\tvar currentFlipSided = null;\n\tvar currentCullFace = null;\n\n\tvar currentLineWidth = null;\n\n\tvar currentPolygonOffsetFactor = null;\n\tvar currentPolygonOffsetUnits = null;\n\n\tvar maxTextures = gl.getParameter( gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS );\n\n\tvar lineWidthAvailable = false;\n\tvar version = 0;\n\tvar glVersion = gl.getParameter( gl.VERSION );\n\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^WebGL\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 1.0 );\n\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^OpenGL\\ ES\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 2.0 );\n\n\t}\n\n\tvar currentTextureSlot = null;\n\tvar currentBoundTextures = {};\n\n\tvar currentScissor = new Vector4();\n\tvar currentViewport = new Vector4();\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tvar data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tvar texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\n\t\tfor ( var i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tvar emptyTextures = {};\n\temptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\n\temptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( gl.DEPTH_TEST );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( gl.CULL_FACE );\n\n\tenable( gl.BLEND );\n\tsetBlending( NormalBlending );\n\n\t//\n\n\tfunction initAttributes() {\n\n\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== 0 ) {\n\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension.vertexAttribDivisorANGLE( attribute, 0 );\n\t\t\tattributeDivisors[ attribute ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension.vertexAttribDivisorANGLE( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tfor ( var i = 0, l = enabledAttributes.length; i !== l; ++ i ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction enable( id ) {\n\n\t\tif ( capabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tcapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( capabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tcapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction getCompressedTextureFormats() {\n\n\t\tif ( compressedTextureFormats === null ) {\n\n\t\t\tcompressedTextureFormats = [];\n\n\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) ||\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_s3tc' ) ||\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_etc1' ) ||\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_astc' ) ) {\n\n\t\t\t\tvar formats = gl.getParameter( gl.COMPRESSED_TEXTURE_FORMATS );\n\n\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ) {\n\n\t\t\t\t\tcompressedTextureFormats.push( formats[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn compressedTextureFormats;\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending !== NoBlending ) {\n\n\t\t\tenable( gl.BLEND );\n\n\t\t} else {\n\n\t\t\tdisable( gl.BLEND );\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\tcase AdditiveBlending:\n\n\t\t\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE, gl.ONE, gl.ONE );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase SubtractiveBlending:\n\n\t\t\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase MultiplyBlending:\n\n\t\t\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tcurrentBlendEquation = null;\n\t\t\tcurrentBlendSrc = null;\n\t\t\tcurrentBlendDst = null;\n\t\t\tcurrentBlendEquationAlpha = null;\n\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t} else {\n\n\t\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\t\tgl.blendEquationSeparate( utils.convert( blendEquation ), utils.convert( blendEquationAlpha ) );\n\n\t\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t\t}\n\n\t\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\t\tgl.blendFuncSeparate( utils.convert( blendSrc ), utils.convert( blendDst ), utils.convert( blendSrcAlpha ), utils.convert( blendDstAlpha ) );\n\n\t\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\t\tcurrentBlendDst = blendDst;\n\t\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( gl.CULL_FACE )\n\t\t\t: enable( gl.CULL_FACE );\n\n\t\tvar flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\tmaterial.transparent === true\n\t\t\t? setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha )\n\t\t\t: setBlending( NoBlending );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( gl.CCW );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( gl.CULL_FACE );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( gl.BACK );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT_AND_BACK );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.CULL_FACE );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( gl.POLYGON_OFFSET_FILL );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.POLYGON_OFFSET_FILL );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( gl.SCISSOR_TEST );\n\n\t\t} else {\n\n\t\t\tdisable( gl.SCISSOR_TEST );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture ) {\n\n\t\tif ( currentTextureSlot === null ) {\n\n\t\t\tactiveTexture();\n\n\t\t}\n\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] === 1 ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcapabilities = {};\n\n\t\tcompressedTextureFormats = null;\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlending = null;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tenableAttributeAndDivisor: enableAttributeAndDivisor,\n\t\tdisableUnusedAttributes: disableUnusedAttributes,\n\t\tenable: enable,\n\t\tdisable: disable,\n\t\tgetCompressedTextureFormats: getCompressedTextureFormats,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\ttexImage2D: texImage2D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\n\nexport { WebGLState };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { LinearFilter, NearestFilter, RGBFormat, RGBAFormat, DepthFormat, DepthStencilFormat, UnsignedShortType, UnsignedIntType, UnsignedInt248Type, FloatType, HalfFloatType, ClampToEdgeWrapping, NearestMipMapLinearFilter, NearestMipMapNearestFilter } from '../../constants.js';\nimport { _Math } from '../../math/Math.js';\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\n\n\tvar _isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && _gl instanceof WebGL2RenderingContext ); /* global WebGL2RenderingContext */\n\tvar _videoTextures = {};\n\tvar _canvas;\n\n\t//\n\n\tfunction clampToMaxSize( image, maxSize ) {\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\tif ( 'data' in image ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t// Warning: Scaling through the canvas will only work with images that use\n\t\t\t// premultiplied alpha.\n\n\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\n\n\t\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\tcanvas.width = Math.floor( image.width * scale );\n\t\t\tcanvas.height = Math.floor( image.height * scale );\n\n\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\n\n\t\t\treturn canvas;\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo( image ) {\n\n\t\treturn _Math.isPowerOfTwo( image.width ) && _Math.isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction makePowerOfTwo( image ) {\n\n\t\tif ( image instanceof HTMLImageElement || image instanceof HTMLCanvasElement || image instanceof ImageBitmap ) {\n\n\t\t\tif ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t\t\t_canvas.width = _Math.floorPowerOfTwo( image.width );\n\t\t\t_canvas.height = _Math.floorPowerOfTwo( image.height );\n\n\t\t\tvar context = _canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, _canvas.width, _canvas.height );\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is not power of two (' + image.width + 'x' + image.height + '). Resized to ' + _canvas.width + 'x' + _canvas.height, image );\n\n\t\t\treturn _canvas;\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, isPowerOfTwo ) {\n\n\t\treturn texture.generateMipmaps && isPowerOfTwo &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\tfunction generateMipmap( target, texture, width, height ) {\n\n\t\t_gl.generateMipmap( target );\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\t// Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11\n\t\ttextureProperties.__maxMipLevel = Math.log( Math.max( width, height ) ) * Math.LOG2E;\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipMapNearestFilter || f === NearestMipMapLinearFilter ) {\n\n\t\t\treturn _gl.NEAREST;\n\n\t\t}\n\n\t\treturn _gl.LINEAR;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tvar texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tif ( texture.isVideoTexture ) {\n\n\t\t\tdelete _videoTextures[ texture.id ];\n\n\t\t}\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tvar renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.image && textureProperties.__image__webglTextureCube ) {\n\n\t\t\t// cube texture\n\n\t\t\t_gl.deleteTexture( textureProperties.__image__webglTextureCube );\n\n\t\t} else {\n\n\t\t\t// 2D texture\n\n\t\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\t// remove all webgl properties\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\tif ( ! renderTarget ) return;\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLRenderTargetCube ) {\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\n\t\t}\n\n\t\tproperties.remove( renderTarget.texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tvar image = texture.image;\n\n\t\t\tif ( image === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined', texture );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete', texture );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.image.length === 6 ) {\n\n\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\t\tif ( ! textureProperties.__image__webglTextureCube ) {\n\n\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\ttextureProperties.__image__webglTextureCube = _gl.createTexture();\n\n\t\t\t\t\tinfo.memory.textures ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\n\n\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\n\t\t\t\tvar isCompressed = ( texture && texture.isCompressedTexture );\n\t\t\t\tvar isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\t\t\tvar cubeImage = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], capabilities.maxCubemapSize );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar image = cubeImage[ 0 ],\n\t\t\t\t\tisPowerOfTwoImage = isPowerOfTwo( image ),\n\t\t\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isPowerOfTwoImage );\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( ! isCompressed ) {\n\n\t\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! isCompressed ) {\n\n\t\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t\t}\n\n\t\t\t\tif ( textureNeedsGenerateMipmaps( texture, isPowerOfTwoImage ) ) {\n\n\t\t\t\t\t// We assume images for cube map have the same size.\n\t\t\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP, texture, image.width, image.height );\n\n\t\t\t\t}\n\n\t\t\t\ttextureProperties.__version = texture.version;\n\n\t\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t\t} else {\n\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setTextureCubeDynamic( texture, slot ) {\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\n\n\t}\n\n\tfunction setTextureParameters( textureType, texture, isPowerOfTwoImage ) {\n\n\t\tvar extension;\n\n\t\tif ( isPowerOfTwoImage ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, utils.convert( texture.wrapS ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, utils.convert( texture.wrapT ) );\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, utils.convert( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, utils.convert( texture.minFilter ) );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.', texture );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.', texture );\n\n\t\t\t}\n\n\t\t}\n\n\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension ) {\n\n\t\t\tif ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\n\t\t\tif ( texture.type === HalfFloatType && extensions.get( 'OES_texture_half_float_linear' ) === null ) return;\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\tinfo.memory.textures ++;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\n\t\tvar image = clampToMaxSize( texture.image, capabilities.maxTextureSize );\n\n\t\tif ( textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( image ) === false ) {\n\n\t\t\timage = makePowerOfTwo( image );\n\n\t\t}\n\n\t\tvar isPowerOfTwoImage = isPowerOfTwo( image ),\n\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\tglType = utils.convert( texture.type );\n\n\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isPowerOfTwoImage );\n\n\t\tvar mipmap, mipmaps = texture.mipmaps;\n\n\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t// populate depth texture with dummy data\n\n\t\t\tvar internalFormat = _gl.DEPTH_COMPONENT;\n\n\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\tif ( ! _isWebGL2 ) throw new Error( 'Float Depth Texture only supported in WebGL2.0' );\n\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t} else if ( _isWebGL2 ) {\n\n\t\t\t\t// WebGL 2.0 requires signed internalformat for glTexImage2D\n\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT16;\n\n\t\t\t}\n\n\t\t\tif ( texture.format === DepthFormat && internalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedShortType;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\tif ( texture.format === DepthStencilFormat ) {\n\n\t\t\t\tinternalFormat = _gl.DEPTH_STENCIL;\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, internalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\n\n\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t} else {\n\n\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, image );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, isPowerOfTwoImage ) ) {\n\n\t\t\tgenerateMipmap( _gl.TEXTURE_2D, texture, image.width, image.height );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\n\n\t\tvar glFormat = utils.convert( renderTarget.texture.format );\n\t\tvar glType = utils.convert( renderTarget.texture.type );\n\t\tstate.texImage2D( textureTarget, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget ) {\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else {\n\n\t\t\t// FIXME: We don't support !depth !stencil\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tvar isCube = ( renderTarget && renderTarget.isWebGLRenderTargetCube );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tvar webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\tvar isCube = ( renderTarget.isWebGLRenderTargetCube === true );\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\tinfo.memory.textures ++;\n\n\t\tvar isCube = ( renderTarget.isWebGLRenderTargetCube === true );\n\t\tvar isTargetPowerOfTwo = isPowerOfTwo( renderTarget );\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, isTargetPowerOfTwo );\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, isTargetPowerOfTwo ) ) {\n\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t} else {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget.texture, isTargetPowerOfTwo );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D );\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, isTargetPowerOfTwo ) ) {\n\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_2D, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tvar texture = renderTarget.texture;\n\t\tvar isTargetPowerOfTwo = isPowerOfTwo( renderTarget );\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, isTargetPowerOfTwo ) ) {\n\n\t\t\tvar target = renderTarget.isWebGLRenderTargetCube ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\n\t\t\tvar webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\tgenerateMipmap( target, texture, renderTarget.width, renderTarget.height );\n\t\t\tstate.bindTexture( target, null );\n\n\t\t}\n\n\t}\n\n\tfunction updateVideoTexture( texture ) {\n\n\t\tvar id = texture.id;\n\t\tvar frame = info.render.frame;\n\n\t\t// Check the last frame we updated the VideoTexture\n\n\t\tif ( _videoTextures[ id ] !== frame ) {\n\n\t\t\t_videoTextures[ id ] = frame;\n\t\t\ttexture.update();\n\n\t\t}\n\n\t}\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.setTextureCubeDynamic = setTextureCubeDynamic;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\n}\n\n\nexport { WebGLTextures };\n","/**\n * @author thespite / http://www.twitter.com/thespite\n */\n\nimport { MaxEquation, MinEquation, RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_10x10_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGB_ETC1_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT5_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT1_Format, RGB_S3TC_DXT1_Format, SrcAlphaSaturateFactor, OneMinusDstColorFactor, DstColorFactor, OneMinusDstAlphaFactor, DstAlphaFactor, OneMinusSrcAlphaFactor, SrcAlphaFactor, OneMinusSrcColorFactor, SrcColorFactor, OneFactor, ZeroFactor, ReverseSubtractEquation, SubtractEquation, AddEquation, DepthFormat, DepthStencilFormat, LuminanceAlphaFormat, LuminanceFormat, RGBAFormat, RGBFormat, AlphaFormat, HalfFloatType, FloatType, UnsignedIntType, IntType, UnsignedShortType, ShortType, ByteType, UnsignedInt248Type, UnsignedShort565Type, UnsignedShort5551Type, UnsignedShort4444Type, UnsignedByteType, LinearMipMapLinearFilter, LinearMipMapNearestFilter, LinearFilter, NearestMipMapLinearFilter, NearestMipMapNearestFilter, NearestFilter, MirroredRepeatWrapping, ClampToEdgeWrapping, RepeatWrapping } from '../../constants.js';\n\nfunction WebGLUtils( gl, extensions ) {\n\n\tfunction convert( p ) {\n\n\t\tvar extension;\n\n\t\tif ( p === RepeatWrapping ) return gl.REPEAT;\n\t\tif ( p === ClampToEdgeWrapping ) return gl.CLAMP_TO_EDGE;\n\t\tif ( p === MirroredRepeatWrapping ) return gl.MIRRORED_REPEAT;\n\n\t\tif ( p === NearestFilter ) return gl.NEAREST;\n\t\tif ( p === NearestMipMapNearestFilter ) return gl.NEAREST_MIPMAP_NEAREST;\n\t\tif ( p === NearestMipMapLinearFilter ) return gl.NEAREST_MIPMAP_LINEAR;\n\n\t\tif ( p === LinearFilter ) return gl.LINEAR;\n\t\tif ( p === LinearMipMapNearestFilter ) return gl.LINEAR_MIPMAP_NEAREST;\n\t\tif ( p === LinearMipMapLinearFilter ) return gl.LINEAR_MIPMAP_LINEAR;\n\n\t\tif ( p === UnsignedByteType ) return gl.UNSIGNED_BYTE;\n\t\tif ( p === UnsignedShort4444Type ) return gl.UNSIGNED_SHORT_4_4_4_4;\n\t\tif ( p === UnsignedShort5551Type ) return gl.UNSIGNED_SHORT_5_5_5_1;\n\t\tif ( p === UnsignedShort565Type ) return gl.UNSIGNED_SHORT_5_6_5;\n\n\t\tif ( p === ByteType ) return gl.BYTE;\n\t\tif ( p === ShortType ) return gl.SHORT;\n\t\tif ( p === UnsignedShortType ) return gl.UNSIGNED_SHORT;\n\t\tif ( p === IntType ) return gl.INT;\n\t\tif ( p === UnsignedIntType ) return gl.UNSIGNED_INT;\n\t\tif ( p === FloatType ) return gl.FLOAT;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) return extension.HALF_FLOAT_OES;\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return gl.ALPHA;\n\t\tif ( p === RGBFormat ) return gl.RGB;\n\t\tif ( p === RGBAFormat ) return gl.RGBA;\n\t\tif ( p === LuminanceFormat ) return gl.LUMINANCE;\n\t\tif ( p === LuminanceAlphaFormat ) return gl.LUMINANCE_ALPHA;\n\t\tif ( p === DepthFormat ) return gl.DEPTH_COMPONENT;\n\t\tif ( p === DepthStencilFormat ) return gl.DEPTH_STENCIL;\n\n\t\tif ( p === AddEquation ) return gl.FUNC_ADD;\n\t\tif ( p === SubtractEquation ) return gl.FUNC_SUBTRACT;\n\t\tif ( p === ReverseSubtractEquation ) return gl.FUNC_REVERSE_SUBTRACT;\n\n\t\tif ( p === ZeroFactor ) return gl.ZERO;\n\t\tif ( p === OneFactor ) return gl.ONE;\n\t\tif ( p === SrcColorFactor ) return gl.SRC_COLOR;\n\t\tif ( p === OneMinusSrcColorFactor ) return gl.ONE_MINUS_SRC_COLOR;\n\t\tif ( p === SrcAlphaFactor ) return gl.SRC_ALPHA;\n\t\tif ( p === OneMinusSrcAlphaFactor ) return gl.ONE_MINUS_SRC_ALPHA;\n\t\tif ( p === DstAlphaFactor ) return gl.DST_ALPHA;\n\t\tif ( p === OneMinusDstAlphaFactor ) return gl.ONE_MINUS_DST_ALPHA;\n\n\t\tif ( p === DstColorFactor ) return gl.DST_COLOR;\n\t\tif ( p === OneMinusDstColorFactor ) return gl.ONE_MINUS_DST_COLOR;\n\t\tif ( p === SrcAlphaSaturateFactor ) return gl.SRC_ALPHA_SATURATE;\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) return extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t}\n\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn p;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === MinEquation || p === MaxEquation ) {\n\n\t\t\textension = extensions.get( 'EXT_blend_minmax' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === MinEquation ) return extension.MIN_EXT;\n\t\t\t\tif ( p === MaxEquation ) return extension.MAX_EXT;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) return extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t}\n\n\t\treturn 0;\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\n\nexport { WebGLUtils };\n","import { Camera } from './Camera.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { _Math } from '../math/Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author greggman / http://games.greggman.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author tschw\n */\n\nfunction PerspectiveCamera( fov, aspect, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.fov = fov !== undefined ? fov : 50;\n\tthis.zoom = 1;\n\n\tthis.near = near !== undefined ? near : 0.1;\n\tthis.far = far !== undefined ? far : 2000;\n\tthis.focus = 10;\n\n\tthis.aspect = aspect !== undefined ? aspect : 1;\n\tthis.view = null;\n\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\tthis.updateProjectionMatrix();\n\n}\n\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: PerspectiveCamera,\n\n\tisPerspectiveCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength: function ( focalLength ) {\n\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\n\t\tvar vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = _Math.RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength: function () {\n\n\t\tvar vExtentSlope = Math.tan( _Math.DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t},\n\n\tgetEffectiveFOV: function () {\n\n\t\treturn _Math.RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( _Math.DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t},\n\n\tgetFilmWidth: function () {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t},\n\n\tgetFilmHeight: function () {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t},\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   var w = 1920;\n\t *   var h = 1080;\n\t *   var fullWidth = w * 3;\n\t *   var fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar near = this.near,\n\t\t\ttop = near * Math.tan(\n\t\t\t\t_Math.DEG2RAD * 0.5 * this.fov ) / this.zoom,\n\t\t\theight = 2 * top,\n\t\t\twidth = this.aspect * height,\n\t\t\tleft = - 0.5 * width,\n\t\t\tview = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tvar fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tvar skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { PerspectiveCamera };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { PerspectiveCamera } from './PerspectiveCamera.js';\n\nfunction ArrayCamera( array ) {\n\n\tPerspectiveCamera.call( this );\n\n\tthis.cameras = array || [];\n\n}\n\nArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\n\n\tconstructor: ArrayCamera,\n\n\tisArrayCamera: true\n\n} );\n\n\nexport { ArrayCamera };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Matrix4 } from '../../math/Matrix4.js';\nimport { Vector4 } from '../../math/Vector4.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { Quaternion } from '../../math/Quaternion.js';\nimport { ArrayCamera } from '../../cameras/ArrayCamera.js';\nimport { PerspectiveCamera } from '../../cameras/PerspectiveCamera.js';\n\nfunction WebVRManager( renderer ) {\n\n\tvar scope = this;\n\n\tvar device = null;\n\tvar frameData = null;\n\n\tvar poseTarget = null;\n\n\tvar standingMatrix = new Matrix4();\n\tvar standingMatrixInverse = new Matrix4();\n\n\tif ( typeof window !== 'undefined' && 'VRFrameData' in window ) {\n\n\t\tframeData = new window.VRFrameData();\n\t\twindow.addEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange, false );\n\n\t}\n\n\tvar matrixWorldInverse = new Matrix4();\n\tvar tempQuaternion = new Quaternion();\n\tvar tempPosition = new Vector3();\n\n\tvar cameraL = new PerspectiveCamera();\n\tcameraL.bounds = new Vector4( 0.0, 0.0, 0.5, 1.0 );\n\tcameraL.layers.enable( 1 );\n\n\tvar cameraR = new PerspectiveCamera();\n\tcameraR.bounds = new Vector4( 0.5, 0.0, 0.5, 1.0 );\n\tcameraR.layers.enable( 2 );\n\n\tvar cameraVR = new ArrayCamera( [ cameraL, cameraR ] );\n\tcameraVR.layers.enable( 1 );\n\tcameraVR.layers.enable( 2 );\n\n\t//\n\n\tfunction isPresenting() {\n\n\t\treturn device !== null && device.isPresenting === true;\n\n\t}\n\n\tvar currentSize, currentPixelRatio;\n\n\tfunction onVRDisplayPresentChange() {\n\n\t\tif ( isPresenting() ) {\n\n\t\t\tvar eyeParameters = device.getEyeParameters( 'left' );\n\t\t\tvar renderWidth = eyeParameters.renderWidth;\n\t\t\tvar renderHeight = eyeParameters.renderHeight;\n\n\t\t\tcurrentPixelRatio = renderer.getPixelRatio();\n\t\t\tcurrentSize = renderer.getSize();\n\n\t\t\trenderer.setDrawingBufferSize( renderWidth * 2, renderHeight, 1 );\n\n\t\t} else if ( scope.enabled ) {\n\n\t\t\trenderer.setDrawingBufferSize( currentSize.width, currentSize.height, currentPixelRatio );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tthis.enabled = false;\n\tthis.userHeight = 1.6;\n\n\tthis.getDevice = function () {\n\n\t\treturn device;\n\n\t};\n\n\tthis.setDevice = function ( value ) {\n\n\t\tif ( value !== undefined ) device = value;\n\n\t};\n\n\tthis.setPoseTarget = function ( object ) {\n\n\t\tif ( object !== undefined ) poseTarget = object;\n\n\t};\n\n\tthis.getCamera = function ( camera ) {\n\n\t\tif ( device === null ) return camera;\n\n\t\tdevice.depthNear = camera.near;\n\t\tdevice.depthFar = camera.far;\n\n\t\tdevice.getFrameData( frameData );\n\n\t\t//\n\n\t\tvar stageParameters = device.stageParameters;\n\n\t\tif ( stageParameters ) {\n\n\t\t\tstandingMatrix.fromArray( stageParameters.sittingToStandingTransform );\n\n\t\t} else {\n\n\t\t\tstandingMatrix.makeTranslation( 0, scope.userHeight, 0 );\n\n\t\t}\n\n\n\t\tvar pose = frameData.pose;\n\t\tvar poseObject = poseTarget !== null ? poseTarget : camera;\n\n\t\t// We want to manipulate poseObject by its position and quaternion components since users may rely on them.\n\t\tposeObject.matrix.copy( standingMatrix );\n\t\tposeObject.matrix.decompose( poseObject.position, poseObject.quaternion, poseObject.scale );\n\n\t\tif ( pose.orientation !== null ) {\n\n\t\t\ttempQuaternion.fromArray( pose.orientation );\n\t\t\tposeObject.quaternion.multiply( tempQuaternion );\n\n\t\t}\n\n\t\tif ( pose.position !== null ) {\n\n\t\t\ttempQuaternion.setFromRotationMatrix( standingMatrix );\n\t\t\ttempPosition.fromArray( pose.position );\n\t\t\ttempPosition.applyQuaternion( tempQuaternion );\n\t\t\tposeObject.position.add( tempPosition );\n\n\t\t}\n\n\t\tposeObject.updateMatrixWorld();\n\n\t\tif ( device.isPresenting === false ) return camera;\n\n\t\t//\n\n\t\tcameraL.near = camera.near;\n\t\tcameraR.near = camera.near;\n\n\t\tcameraL.far = camera.far;\n\t\tcameraR.far = camera.far;\n\n\t\tcameraVR.matrixWorld.copy( camera.matrixWorld );\n\t\tcameraVR.matrixWorldInverse.copy( camera.matrixWorldInverse );\n\n\t\tcameraL.matrixWorldInverse.fromArray( frameData.leftViewMatrix );\n\t\tcameraR.matrixWorldInverse.fromArray( frameData.rightViewMatrix );\n\n\t\t// TODO (mrdoob) Double check this code\n\n\t\tstandingMatrixInverse.getInverse( standingMatrix );\n\n\t\tcameraL.matrixWorldInverse.multiply( standingMatrixInverse );\n\t\tcameraR.matrixWorldInverse.multiply( standingMatrixInverse );\n\n\t\tvar parent = poseObject.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\n\n\t\t\tcameraL.matrixWorldInverse.multiply( matrixWorldInverse );\n\t\t\tcameraR.matrixWorldInverse.multiply( matrixWorldInverse );\n\n\t\t}\n\n\t\t// envMap and Mirror needs camera.matrixWorld\n\n\t\tcameraL.matrixWorld.getInverse( cameraL.matrixWorldInverse );\n\t\tcameraR.matrixWorld.getInverse( cameraR.matrixWorldInverse );\n\n\t\tcameraL.projectionMatrix.fromArray( frameData.leftProjectionMatrix );\n\t\tcameraR.projectionMatrix.fromArray( frameData.rightProjectionMatrix );\n\n\t\t// HACK (mrdoob)\n\t\t// https://github.com/w3c/webvr/issues/203\n\n\t\tcameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\n\n\t\t//\n\n\t\tvar layers = device.getLayers();\n\n\t\tif ( layers.length ) {\n\n\t\t\tvar layer = layers[ 0 ];\n\n\t\t\tif ( layer.leftBounds !== null && layer.leftBounds.length === 4 ) {\n\n\t\t\t\tcameraL.bounds.fromArray( layer.leftBounds );\n\n\t\t\t}\n\n\t\t\tif ( layer.rightBounds !== null && layer.rightBounds.length === 4 ) {\n\n\t\t\t\tcameraR.bounds.fromArray( layer.rightBounds );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn cameraVR;\n\n\t};\n\n\tthis.getStandingMatrix = function () {\n\n\t\treturn standingMatrix;\n\n\t};\n\n\tthis.submitFrame = function () {\n\n\t\tif ( isPresenting() ) device.submitFrame();\n\n\t};\n\n\tthis.dispose = function () {\n\n\t\tif ( typeof window !== 'undefined' ) {\n\n\t\t\twindow.removeEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange );\n\n\t\t}\n\n\t};\n\n}\n\nexport { WebVRManager };\n","import { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Scene() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Scene';\n\n\tthis.background = null;\n\tthis.fog = null;\n\tthis.overrideMaterial = null;\n\n\tthis.autoUpdate = true; // checked by the renderer\n\n}\n\nScene.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Scene,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\n\nexport { Scene };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\n\n// CylinderGeometry\n\nfunction CylinderGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'CylinderGeometry';\n\n\tthis.parameters = {\n\t\tradiusTop: radiusTop,\n\t\tradiusBottom: radiusBottom,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n}\n\nCylinderGeometry.prototype = Object.create( Geometry.prototype );\nCylinderGeometry.prototype.constructor = CylinderGeometry;\n\n// CylinderBufferGeometry\n\nfunction CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'CylinderBufferGeometry';\n\n\tthis.parameters = {\n\t\tradiusTop: radiusTop,\n\t\tradiusBottom: radiusBottom,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tvar scope = this;\n\n\tradiusTop = radiusTop !== undefined ? radiusTop : 1;\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 1;\n\theight = height || 1;\n\n\tradialSegments = Math.floor( radialSegments ) || 8;\n\theightSegments = Math.floor( heightSegments ) || 1;\n\n\topenEnded = openEnded !== undefined ? openEnded : false;\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0.0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar index = 0;\n\tvar indexArray = [];\n\tvar halfHeight = height / 2;\n\tvar groupStart = 0;\n\n\t// generate geometry\n\n\tgenerateTorso();\n\n\tif ( openEnded === false ) {\n\n\t\tif ( radiusTop > 0 ) generateCap( true );\n\t\tif ( radiusBottom > 0 ) generateCap( false );\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\tfunction generateTorso() {\n\n\t\tvar x, y;\n\t\tvar normal = new Vector3();\n\t\tvar vertex = new Vector3();\n\n\t\tvar groupCount = 0;\n\n\t\t// this will be used to calculate the normal\n\t\tvar slope = ( radiusBottom - radiusTop ) / height;\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( y = 0; y <= heightSegments; y ++ ) {\n\n\t\t\tvar indexRow = [];\n\n\t\t\tvar v = y / heightSegments;\n\n\t\t\t// calculate the radius of the current row\n\n\t\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n\t\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\tvar u = x / radialSegments;\n\n\t\t\t\tvar theta = u * thetaLength + thetaStart;\n\n\t\t\t\tvar sinTheta = Math.sin( theta );\n\t\t\t\tvar cosTheta = Math.cos( theta );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\tvertex.y = - v * height + halfHeight;\n\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.set( sinTheta, slope, cosTheta ).normalize();\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( u, 1 - v );\n\n\t\t\t\t// save index of vertex in respective row\n\n\t\t\t\tindexRow.push( index ++ );\n\n\t\t\t}\n\n\t\t\t// now save vertices of the row in our index array\n\n\t\t\tindexArray.push( indexRow );\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tfor ( y = 0; y < heightSegments; y ++ ) {\n\n\t\t\t\t// we use the index array to access the correct indices\n\n\t\t\t\tvar a = indexArray[ y ][ x ];\n\t\t\t\tvar b = indexArray[ y + 1 ][ x ];\n\t\t\t\tvar c = indexArray[ y + 1 ][ x + 1 ];\n\t\t\t\tvar d = indexArray[ y ][ x + 1 ];\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t// update group counter\n\n\t\t\t\tgroupCount += 6;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\tscope.addGroup( groupStart, groupCount, 0 );\n\n\t\t// calculate new start value for groups\n\n\t\tgroupStart += groupCount;\n\n\t}\n\n\tfunction generateCap( top ) {\n\n\t\tvar x, centerIndexStart, centerIndexEnd;\n\n\t\tvar uv = new Vector2();\n\t\tvar vertex = new Vector3();\n\n\t\tvar groupCount = 0;\n\n\t\tvar radius = ( top === true ) ? radiusTop : radiusBottom;\n\t\tvar sign = ( top === true ) ? 1 : - 1;\n\n\t\t// save the index of the first center vertex\n\t\tcenterIndexStart = index;\n\n\t\t// first we generate the center vertex data of the cap.\n\t\t// because the geometry needs one set of uvs per face,\n\t\t// we must generate a center vertex per face/segment\n\n\t\tfor ( x = 1; x <= radialSegments; x ++ ) {\n\n\t\t\t// vertex\n\n\t\t\tvertices.push( 0, halfHeight * sign, 0 );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( 0.5, 0.5 );\n\n\t\t\t// increase index\n\n\t\t\tindex ++;\n\n\t\t}\n\n\t\t// save the index of the last center vertex\n\n\t\tcenterIndexEnd = index;\n\n\t\t// now we generate the surrounding vertices, normals and uvs\n\n\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\tvar u = x / radialSegments;\n\t\t\tvar theta = u * thetaLength + thetaStart;\n\n\t\t\tvar cosTheta = Math.cos( theta );\n\t\t\tvar sinTheta = Math.sin( theta );\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = radius * sinTheta;\n\t\t\tvertex.y = halfHeight * sign;\n\t\t\tvertex.z = radius * cosTheta;\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t// uv\n\n\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\n\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t// increase index\n\n\t\t\tindex ++;\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tvar c = centerIndexStart + x;\n\t\t\tvar i = centerIndexEnd + x;\n\n\t\t\tif ( top === true ) {\n\n\t\t\t\t// face top\n\n\t\t\t\tindices.push( i, i + 1, c );\n\n\t\t\t} else {\n\n\t\t\t\t// face bottom\n\n\t\t\t\tindices.push( i + 1, i, c );\n\n\t\t\t}\n\n\t\t\tgroupCount += 3;\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\n\n\t\t// calculate new start value for groups\n\n\t\tgroupStart += groupCount;\n\n\t}\n\n}\n\nCylinderBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nCylinderBufferGeometry.prototype.constructor = CylinderBufferGeometry;\n\n\nexport { CylinderGeometry, CylinderBufferGeometry };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Clock( autoStart ) {\n\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\n\n\tthis.startTime = 0;\n\tthis.oldTime = 0;\n\tthis.elapsedTime = 0;\n\n\tthis.running = false;\n\n}\n\nObject.assign( Clock.prototype, {\n\n\tstart: function () {\n\n\t\tthis.startTime = ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\n\n\t\tthis.oldTime = this.startTime;\n\t\tthis.elapsedTime = 0;\n\t\tthis.running = true;\n\n\t},\n\n\tstop: function () {\n\n\t\tthis.getElapsedTime();\n\t\tthis.running = false;\n\t\tthis.autoStart = false;\n\n\t},\n\n\tgetElapsedTime: function () {\n\n\t\tthis.getDelta();\n\t\treturn this.elapsedTime;\n\n\t},\n\n\tgetDelta: function () {\n\n\t\tvar diff = 0;\n\n\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\tthis.start();\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tif ( this.running ) {\n\n\t\t\tvar newTime = ( typeof performance === 'undefined' ? Date : performance ).now();\n\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\n\t\t\tthis.oldTime = newTime;\n\n\t\t\tthis.elapsedTime += diff;\n\n\t\t}\n\n\t\treturn diff;\n\n\t}\n\n} );\n\n\nexport { Clock };\n","import { Ray } from '../math/Ray.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author bhouston / http://clara.io/\n * @author stephomi / http://stephaneginier.com/\n */\n\nfunction Raycaster( origin, direction, near, far ) {\n\n\tthis.ray = new Ray( origin, direction );\n\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\tthis.near = near || 0;\n\tthis.far = far || Infinity;\n\n\tthis.params = {\n\t\tMesh: {},\n\t\tLine: {},\n\t\tLOD: {},\n\t\tPoints: { threshold: 1 },\n\t\tSprite: {}\n\t};\n\n\tObject.defineProperties( this.params, {\n\t\tPointCloud: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\n\t\t\t\treturn this.Points;\n\n\t\t\t}\n\t\t}\n\t} );\n\n}\n\nfunction ascSort( a, b ) {\n\n\treturn a.distance - b.distance;\n\n}\n\nfunction intersectObject( object, raycaster, intersects, recursive ) {\n\n\tif ( object.visible === false ) return;\n\n\tobject.raycast( raycaster, intersects );\n\n\tif ( recursive === true ) {\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t}\n\n\t}\n\n}\n\nObject.assign( Raycaster.prototype, {\n\n\tlinePrecision: 1,\n\n\tset: function ( origin, direction ) {\n\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.ray.set( origin, direction );\n\n\t},\n\n\tsetFromCamera: function ( coords, camera ) {\n\n\t\tif ( ( camera && camera.isPerspectiveCamera ) ) {\n\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\n\n\t\t} else if ( ( camera && camera.isOrthographicCamera ) ) {\n\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\n\n\t\t}\n\n\t},\n\n\tintersectObject: function ( object, recursive, optionalTarget ) {\n\n\t\tvar intersects = optionalTarget || [];\n\n\t\tintersectObject( object, this, intersects, recursive );\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t},\n\n\tintersectObjects: function ( objects, recursive, optionalTarget ) {\n\n\t\tvar intersects = optionalTarget || [];\n\n\t\tif ( Array.isArray( objects ) === false ) {\n\n\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\n\t\t\treturn intersects;\n\n\t\t}\n\n\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t}\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n} );\n\n\nexport { Raycaster };\n","import { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *  linecap: \"round\",\n *  linejoin: \"round\"\n * }\n */\n\nfunction LineBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'LineBasicMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\tthis.linecap = 'round';\n\tthis.linejoin = 'round';\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nLineBasicMaterial.prototype = Object.create( Material.prototype );\nLineBasicMaterial.prototype.constructor = LineBasicMaterial;\n\nLineBasicMaterial.prototype.isLineBasicMaterial = true;\n\nLineBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.linewidth = source.linewidth;\n\tthis.linecap = source.linecap;\n\tthis.linejoin = source.linejoin;\n\n\treturn this;\n\n};\n\n\nexport { LineBasicMaterial };\n","import { Line } from './Line.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LineSegments( geometry, material ) {\n\n\tLine.call( this, geometry, material );\n\n\tthis.type = 'LineSegments';\n\n}\n\nLineSegments.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\tconstructor: LineSegments,\n\n\tisLineSegments: true,\n\n\tcomputeLineDistances: ( function () {\n\n\t\tvar start = new Vector3();\n\t\tvar end = new Vector3();\n\n\t\treturn function computeLineDistances() {\n\n\t\t\tvar geometry = this.geometry;\n\n\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\t// we assume non-indexed geometry\n\n\t\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\t\tvar positionAttribute = geometry.attributes.position;\n\t\t\t\t\tvar lineDistances = [];\n\n\t\t\t\t\tfor ( var i = 0, l = positionAttribute.count; i < l; i += 2 ) {\n\n\t\t\t\t\t\tstart.fromBufferAttribute( positionAttribute, i );\n\t\t\t\t\t\tend.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + start.distanceTo( end );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgeometry.addAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t\t}\n\n\t\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\tvar lineDistances = geometry.lineDistances;\n\n\t\t\t\tfor ( var i = 0, l = vertices.length; i < l; i += 2 ) {\n\n\t\t\t\t\tstart.copy( vertices[ i ] );\n\t\t\t\t\tend.copy( vertices[ i + 1 ] );\n\n\t\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + start.distanceTo( end );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}() )\n\n} );\n\n\nexport { LineSegments };\n","import { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  color: <hex>,\n *  roughness: <float>,\n *  metalness: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  roughnessMap: new THREE.Texture( <Image> ),\n *\n *  metalnessMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  envMapIntensity: <float>\n *\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshStandardMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.type = 'MeshStandardMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.roughness = 0.5;\n\tthis.metalness = 0.5;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.roughnessMap = null;\n\n\tthis.metalnessMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.envMapIntensity = 1.0;\n\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshStandardMaterial.prototype = Object.create( Material.prototype );\nMeshStandardMaterial.prototype.constructor = MeshStandardMaterial;\n\nMeshStandardMaterial.prototype.isMeshStandardMaterial = true;\n\nMeshStandardMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.color.copy( source.color );\n\tthis.roughness = source.roughness;\n\tthis.metalness = source.metalness;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.roughnessMap = source.roughnessMap;\n\n\tthis.metalnessMap = source.metalnessMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.envMapIntensity = source.envMapIntensity;\n\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshStandardMaterial };\n","import { MeshStandardMaterial } from './MeshStandardMaterial.js';\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  reflectivity: <float>\n * }\n */\n\nfunction MeshPhysicalMaterial( parameters ) {\n\n\tMeshStandardMaterial.call( this );\n\n\tthis.defines = { 'PHYSICAL': '' };\n\n\tthis.type = 'MeshPhysicalMaterial';\n\n\tthis.reflectivity = 0.5; // maps to F0 = 0.04\n\n\tthis.clearCoat = 0.0;\n\tthis.clearCoatRoughness = 0.0;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhysicalMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\nMeshPhysicalMaterial.prototype.constructor = MeshPhysicalMaterial;\n\nMeshPhysicalMaterial.prototype.isMeshPhysicalMaterial = true;\n\nMeshPhysicalMaterial.prototype.copy = function ( source ) {\n\n\tMeshStandardMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'PHYSICAL': '' };\n\n\tthis.reflectivity = source.reflectivity;\n\n\tthis.clearCoat = source.clearCoat;\n\tthis.clearCoatRoughness = source.clearCoatRoughness;\n\n\treturn this;\n\n};\n\n\nexport { MeshPhysicalMaterial };\n","/**\n * @author mrdoob / http://mrdoob.com/\n *\n * parameters = {\n *  color: <THREE.Color>\n * }\n */\n\nimport { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\nfunction ShadowMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShadowMaterial';\n\n\tthis.color = new Color( 0x000000 );\n\tthis.transparent = true;\n\n\tthis.setValues( parameters );\n\n}\n\nShadowMaterial.prototype = Object.create( Material.prototype );\nShadowMaterial.prototype.constructor = ShadowMaterial;\n\nShadowMaterial.prototype.isShadowMaterial = true;\n\nShadowMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\treturn this;\n\n};\n\n\nexport { ShadowMaterial };\n","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *\n *  scale: <float>,\n *  dashSize: <float>,\n *  gapSize: <float>\n * }\n */\n\nimport { LineBasicMaterial } from './LineBasicMaterial.js';\n\nfunction LineDashedMaterial( parameters ) {\n\n\tLineBasicMaterial.call( this );\n\n\tthis.type = 'LineDashedMaterial';\n\n\tthis.scale = 1;\n\tthis.dashSize = 3;\n\tthis.gapSize = 1;\n\n\tthis.setValues( parameters );\n\n}\n\nLineDashedMaterial.prototype = Object.create( LineBasicMaterial.prototype );\nLineDashedMaterial.prototype.constructor = LineDashedMaterial;\n\nLineDashedMaterial.prototype.isLineDashedMaterial = true;\n\nLineDashedMaterial.prototype.copy = function ( source ) {\n\n\tLineBasicMaterial.prototype.copy.call( this, source );\n\n\tthis.scale = source.scale;\n\tthis.dashSize = source.dashSize;\n\tthis.gapSize = source.gapSize;\n\n\treturn this;\n\n};\n\n\nexport { LineDashedMaterial };\n","import { Object3D } from '../core/Object3D.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Light( color, intensity ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Light';\n\n\tthis.color = new Color( color );\n\tthis.intensity = intensity !== undefined ? intensity : 1;\n\n\tthis.receiveShadow = undefined;\n\n}\n\nLight.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Light,\n\n\tisLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { Light };\n","import { Matrix4 } from '../math/Matrix4.js';\nimport { Vector2 } from '../math/Vector2.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LightShadow( camera ) {\n\n\tthis.camera = camera;\n\n\tthis.bias = 0;\n\tthis.normalOffset = 1;\n\tthis.radius = 1;\n\n\tthis.mapSize = new Vector2( 512, 512 );\n\n\tthis.map = null;\n\tthis.matrix = new Matrix4();\n\n}\n\nObject.assign( LightShadow.prototype, {\n\n\tcopy: function ( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n} );\n\n\nexport { LightShadow };\n","import { LightShadow } from './LightShadow.js';\nimport { OrthographicCamera } from '../cameras/OrthographicCamera.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction DirectionalLightShadow( ) {\n\n\tLightShadow.call( this, new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n}\n\nDirectionalLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: DirectionalLightShadow\n\n} );\n\n\nexport { DirectionalLightShadow };\n","import { Light } from './Light.js';\nimport { DirectionalLightShadow } from './DirectionalLightShadow.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction DirectionalLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'DirectionalLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tthis.shadow = new DirectionalLightShadow();\n\n}\n\nDirectionalLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: DirectionalLight,\n\n\tisDirectionalLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { DirectionalLight };\n","import { Light } from './Light.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction AmbientLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'AmbientLight';\n\n\tthis.castShadow = undefined;\n\n}\n\nAmbientLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: AmbientLight,\n\n\tisAmbientLight: true\n\n} );\n\n\nexport { AmbientLight };\n","import { Light } from './Light.js';\nimport { Color } from '../math/Color.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction HemisphereLight( skyColor, groundColor, intensity ) {\n\n\tLight.call( this, skyColor, intensity );\n\n\tthis.type = 'HemisphereLight';\n\n\tthis.castShadow = undefined;\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.groundColor = new Color( groundColor );\n\n}\n\nHemisphereLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: HemisphereLight,\n\n\tisHemisphereLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.groundColor.copy( source.groundColor );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { HemisphereLight };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\n\nexport { Cache };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LoadingManager( onLoad, onProgress, onError ) {\n\n\tvar scope = this;\n\n\tvar isLoading = false;\n\tvar itemsLoaded = 0;\n\tvar itemsTotal = 0;\n\tvar urlModifier = undefined;\n\n\tthis.onStart = undefined;\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\titemsTotal ++;\n\n\t\tif ( isLoading === false ) {\n\n\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tisLoading = true;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\titemsLoaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t}\n\n\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\tisLoading = false;\n\n\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\tscope.onLoad();\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.itemError = function ( url ) {\n\n\t\tif ( scope.onError !== undefined ) {\n\n\t\t\tscope.onError( url );\n\n\t\t}\n\n\t};\n\n\tthis.resolveURL = function ( url ) {\n\n\t\tif ( urlModifier ) {\n\n\t\t\treturn urlModifier( url );\n\n\t\t}\n\n\t\treturn url;\n\n\t};\n\n\tthis.setURLModifier = function ( transform ) {\n\n\t\turlModifier = transform;\n\t\treturn this;\n\n\t};\n\n}\n\nvar DefaultLoadingManager = new LoadingManager();\n\n\nexport { DefaultLoadingManager, LoadingManager };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Cache } from './Cache.js';\nimport { DefaultLoadingManager } from './LoadingManager.js';\n\n\nfunction ImageLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( ImageLoader.prototype, {\n\n\tcrossOrigin: 'Anonymous',\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tvar scope = this;\n\n\t\tvar cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tvar image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\timage.addEventListener( 'load', function () {\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}, false );\n\n\t\t/*\n\t\timage.addEventListener( 'progress', function ( event ) {\n\n\t\t\tif ( onProgress ) onProgress( event );\n\n\t\t}, false );\n\t\t*/\n\n\t\timage.addEventListener( 'error', function ( event ) {\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemEnd( url );\n\t\t\tscope.manager.itemError( url );\n\n\t\t}, false );\n\n\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { ImageLoader };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { RGBAFormat, RGBFormat } from '../constants.js';\nimport { ImageLoader } from './ImageLoader.js';\nimport { Texture } from '../textures/Texture.js';\nimport { DefaultLoadingManager } from './LoadingManager.js';\n\n\nfunction TextureLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( TextureLoader.prototype, {\n\n\tcrossOrigin: 'Anonymous',\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar texture = new Texture();\n\n\t\tvar loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\n\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\t\t\tvar isJPEG = url.search( /\\.(jpg|jpeg)$/ ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { TextureLoader };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { ImageLoader } from './ImageLoader.js';\nimport { CubeTexture } from '../textures/CubeTexture.js';\nimport { DefaultLoadingManager } from './LoadingManager.js';\n\n\nfunction CubeTextureLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( CubeTextureLoader.prototype, {\n\n\tcrossOrigin: 'Anonymous',\n\n\tload: function ( urls, onLoad, onProgress, onError ) {\n\n\t\tvar texture = new CubeTexture();\n\n\t\tvar loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tvar loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( urls[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded ++;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, undefined, onError );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < urls.length; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { CubeTextureLoader };\n","import { _Math } from '../../math/Math.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Extensible curve object\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\n/**************************************************************\n *\tAbstract Curve base class\n **************************************************************/\n\nfunction Curve() {\n\n\tthis.type = 'Curve';\n\n\tthis.arcLengthDivisions = 200;\n\n}\n\nObject.assign( Curve.prototype, {\n\n\t// Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint: function ( /* t, optionalTarget */ ) {\n\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\n\t\treturn null;\n\n\t},\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt: function ( u, optionalTarget ) {\n\n\t\tvar t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t, optionalTarget );\n\n\t},\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tvar points = [];\n\n\t\tfor ( var d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tvar points = [];\n\n\t\tfor ( var d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get total curve arc length\n\n\tgetLength: function () {\n\n\t\tvar lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t},\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = this.arcLengthDivisions;\n\n\t\tif ( this.cacheArcLengths &&\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\n\t\t\t! this.needsUpdate ) {\n\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tvar cache = [];\n\t\tvar current, last = this.getPoint( 0 );\n\t\tvar p, sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\n\n\t},\n\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t},\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping: function ( u, distance ) {\n\n\t\tvar arcLengths = this.getLengths();\n\n\t\tvar i = 0, il = arcLengths.length;\n\n\t\tvar targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tvar low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\treturn i / ( il - 1 );\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tvar lengthBefore = arcLengths[ i ];\n\t\tvar lengthAfter = arcLengths[ i + 1 ];\n\n\t\tvar segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tvar segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tvar t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t},\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent: function ( t ) {\n\n\t\tvar delta = 0.0001;\n\t\tvar t1 = t - delta;\n\t\tvar t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tvar pt1 = this.getPoint( t1 );\n\t\tvar pt2 = this.getPoint( t2 );\n\n\t\tvar vec = pt2.clone().sub( pt1 );\n\t\treturn vec.normalize();\n\n\t},\n\n\tgetTangentAt: function ( u ) {\n\n\t\tvar t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t );\n\n\t},\n\n\tcomputeFrenetFrames: function ( segments, closed ) {\n\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\tvar normal = new Vector3();\n\n\t\tvar tangents = [];\n\t\tvar normals = [];\n\t\tvar binormals = [];\n\n\t\tvar vec = new Vector3();\n\t\tvar mat = new Matrix4();\n\n\t\tvar i, u, theta;\n\n\t\t// compute the tangent vectors for each segment on the curve\n\n\t\tfor ( i = 0; i <= segments; i ++ ) {\n\n\t\t\tu = i / segments;\n\n\t\t\ttangents[ i ] = this.getTangentAt( u );\n\t\t\ttangents[ i ].normalize();\n\n\t\t}\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the minimum tangent xyz component\n\n\t\tnormals[ 0 ] = new Vector3();\n\t\tbinormals[ 0 ] = new Vector3();\n\t\tvar min = Number.MAX_VALUE;\n\t\tvar tx = Math.abs( tangents[ 0 ].x );\n\t\tvar ty = Math.abs( tangents[ 0 ].y );\n\t\tvar tz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= min ) {\n\n\t\t\tmin = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= min ) {\n\n\t\t\tmin = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= min ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\tvec.normalize();\n\n\t\t\t\ttheta = Math.acos( _Math.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t}\n\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\tif ( closed === true ) {\n\n\t\t\ttheta = Math.acos( _Math.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\ttheta /= segments;\n\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\ttheta = - theta;\n\n\t\t\t}\n\n\t\t\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t// twist a little...\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttangents: tangents,\n\t\t\tnormals: normals,\n\t\t\tbinormals: binormals\n\t\t};\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Curve',\n\t\t\t\tgenerator: 'Curve.toJSON'\n\t\t\t}\n\t\t};\n\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\n\t\tdata.type = this.type;\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Curve };\n","import { Curve } from '../core/Curve.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\n\nfunction EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'EllipseCurve';\n\n\tthis.aX = aX || 0;\n\tthis.aY = aY || 0;\n\n\tthis.xRadius = xRadius || 1;\n\tthis.yRadius = yRadius || 1;\n\n\tthis.aStartAngle = aStartAngle || 0;\n\tthis.aEndAngle = aEndAngle || 2 * Math.PI;\n\n\tthis.aClockwise = aClockwise || false;\n\n\tthis.aRotation = aRotation || 0;\n\n}\n\nEllipseCurve.prototype = Object.create( Curve.prototype );\nEllipseCurve.prototype.constructor = EllipseCurve;\n\nEllipseCurve.prototype.isEllipseCurve = true;\n\nEllipseCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar twoPi = Math.PI * 2;\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\n\tvar samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\n\n\t// ensures that deltaAngle is 0 .. 2 PI\n\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\n\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\n\n\tif ( deltaAngle < Number.EPSILON ) {\n\n\t\tif ( samePoints ) {\n\n\t\t\tdeltaAngle = 0;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = twoPi;\n\n\t\t}\n\n\t}\n\n\tif ( this.aClockwise === true && ! samePoints ) {\n\n\t\tif ( deltaAngle === twoPi ) {\n\n\t\t\tdeltaAngle = - twoPi;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = deltaAngle - twoPi;\n\n\t\t}\n\n\t}\n\n\tvar angle = this.aStartAngle + t * deltaAngle;\n\tvar x = this.aX + this.xRadius * Math.cos( angle );\n\tvar y = this.aY + this.yRadius * Math.sin( angle );\n\n\tif ( this.aRotation !== 0 ) {\n\n\t\tvar cos = Math.cos( this.aRotation );\n\t\tvar sin = Math.sin( this.aRotation );\n\n\t\tvar tx = x - this.aX;\n\t\tvar ty = y - this.aY;\n\n\t\t// Rotate the point about the center of the ellipse.\n\t\tx = tx * cos - ty * sin + this.aX;\n\t\ty = tx * sin + ty * cos + this.aY;\n\n\t}\n\n\treturn point.set( x, y );\n\n};\n\nEllipseCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.aX = source.aX;\n\tthis.aY = source.aY;\n\n\tthis.xRadius = source.xRadius;\n\tthis.yRadius = source.yRadius;\n\n\tthis.aStartAngle = source.aStartAngle;\n\tthis.aEndAngle = source.aEndAngle;\n\n\tthis.aClockwise = source.aClockwise;\n\n\tthis.aRotation = source.aRotation;\n\n\treturn this;\n\n};\n\n\nEllipseCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.aX = this.aX;\n\tdata.aY = this.aY;\n\n\tdata.xRadius = this.xRadius;\n\tdata.yRadius = this.yRadius;\n\n\tdata.aStartAngle = this.aStartAngle;\n\tdata.aEndAngle = this.aEndAngle;\n\n\tdata.aClockwise = this.aClockwise;\n\n\tdata.aRotation = this.aRotation;\n\n\treturn data;\n\n};\n\nEllipseCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.aX = json.aX;\n\tthis.aY = json.aY;\n\n\tthis.xRadius = json.xRadius;\n\tthis.yRadius = json.yRadius;\n\n\tthis.aStartAngle = json.aStartAngle;\n\tthis.aEndAngle = json.aEndAngle;\n\n\tthis.aClockwise = json.aClockwise;\n\n\tthis.aRotation = json.aRotation;\n\n\treturn this;\n\n};\n\n\nexport { EllipseCurve };\n","import { EllipseCurve } from './EllipseCurve.js';\n\n\nfunction ArcCurve( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\tEllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\tthis.type = 'ArcCurve';\n\n}\n\nArcCurve.prototype = Object.create( EllipseCurve.prototype );\nArcCurve.prototype.constructor = ArcCurve;\n\nArcCurve.prototype.isArcCurve = true;\n\n\nexport { ArcCurve };\n","import { Vector3 } from '../../math/Vector3.js';\nimport { Curve } from '../core/Curve.js';\n\n/**\n * @author zz85 https://github.com/zz85\n *\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n\n\tvar c0 = 0, c1 = 0, c2 = 0, c3 = 0;\n\n\t/*\n\t * Compute coefficients for a cubic polynomial\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t * such that\n\t *   p(0) = x0, p(1) = x1\n\t *  and\n\t *   p'(0) = t0, p'(1) = t1.\n\t */\n\tfunction init( x0, x1, t0, t1 ) {\n\n\t\tc0 = x0;\n\t\tc1 = t0;\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n\t}\n\n\treturn {\n\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\n\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\n\n\t\t},\n\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\n\n\t\t\t// compute tangents when parameterized in [t1,t2]\n\t\t\tvar t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\n\t\t\tvar t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\n\n\t\t\t// rescale tangents for parametrization in [0,1]\n\t\t\tt1 *= dt1;\n\t\t\tt2 *= dt1;\n\n\t\t\tinit( x1, x2, t1, t2 );\n\n\t\t},\n\n\t\tcalc: function ( t ) {\n\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t2 * t;\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\n\n\t\t}\n\n\t};\n\n}\n\n//\n\nvar tmp = new Vector3();\nvar px = new CubicPoly(), py = new CubicPoly(), pz = new CubicPoly();\n\nfunction CatmullRomCurve3( points, closed, curveType, tension ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CatmullRomCurve3';\n\n\tthis.points = points || [];\n\tthis.closed = closed || false;\n\tthis.curveType = curveType || 'centripetal';\n\tthis.tension = tension || 0.5;\n\n}\n\nCatmullRomCurve3.prototype = Object.create( Curve.prototype );\nCatmullRomCurve3.prototype.constructor = CatmullRomCurve3;\n\nCatmullRomCurve3.prototype.isCatmullRomCurve3 = true;\n\nCatmullRomCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tvar points = this.points;\n\tvar l = points.length;\n\n\tvar p = ( l - ( this.closed ? 0 : 1 ) ) * t;\n\tvar intPoint = Math.floor( p );\n\tvar weight = p - intPoint;\n\n\tif ( this.closed ) {\n\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\n\n\t} else if ( weight === 0 && intPoint === l - 1 ) {\n\n\t\tintPoint = l - 2;\n\t\tweight = 1;\n\n\t}\n\n\tvar p0, p1, p2, p3; // 4 points\n\n\tif ( this.closed || intPoint > 0 ) {\n\n\t\tp0 = points[ ( intPoint - 1 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate first point\n\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\n\t\tp0 = tmp;\n\n\t}\n\n\tp1 = points[ intPoint % l ];\n\tp2 = points[ ( intPoint + 1 ) % l ];\n\n\tif ( this.closed || intPoint + 2 < l ) {\n\n\t\tp3 = points[ ( intPoint + 2 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate last point\n\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\n\t\tp3 = tmp;\n\n\t}\n\n\tif ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\n\n\t\t// init Centripetal / Chordal Catmull-Rom\n\t\tvar pow = this.curveType === 'chordal' ? 0.5 : 0.25;\n\t\tvar dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\n\t\tvar dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\n\t\tvar dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\n\n\t\t// safety check for repeated points\n\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\n\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\n\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\n\n\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\n\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\n\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\n\n\t} else if ( this.curveType === 'catmullrom' ) {\n\n\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\n\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\n\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\n\n\t}\n\n\tpoint.set(\n\t\tpx.calc( weight ),\n\t\tpy.calc( weight ),\n\t\tpz.calc( weight )\n\t);\n\n\treturn point;\n\n};\n\nCatmullRomCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tvar point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\tthis.closed = source.closed;\n\tthis.curveType = source.curveType;\n\tthis.tension = source.tension;\n\n\treturn this;\n\n};\n\nCatmullRomCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( var i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tvar point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\tdata.closed = this.closed;\n\tdata.curveType = this.curveType;\n\tdata.tension = this.tension;\n\n\treturn data;\n\n};\n\nCatmullRomCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tvar point = json.points[ i ];\n\t\tthis.points.push( new Vector3().fromArray( point ) );\n\n\t}\n\n\tthis.closed = json.closed;\n\tthis.curveType = json.curveType;\n\tthis.tension = json.tension;\n\n\treturn this;\n\n};\n\n\nexport { CatmullRomCurve3 };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Bezier Curves formulas obtained from\n * http://en.wikipedia.org/wiki/Bézier_curve\n */\n\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\n\n\tvar v0 = ( p2 - p0 ) * 0.5;\n\tvar v1 = ( p3 - p1 ) * 0.5;\n\tvar t2 = t * t;\n\tvar t3 = t * t2;\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n}\n\n//\n\nfunction QuadraticBezierP0( t, p ) {\n\n\tvar k = 1 - t;\n\treturn k * k * p;\n\n}\n\nfunction QuadraticBezierP1( t, p ) {\n\n\treturn 2 * ( 1 - t ) * t * p;\n\n}\n\nfunction QuadraticBezierP2( t, p ) {\n\n\treturn t * t * p;\n\n}\n\nfunction QuadraticBezier( t, p0, p1, p2 ) {\n\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\n\t\tQuadraticBezierP2( t, p2 );\n\n}\n\n//\n\nfunction CubicBezierP0( t, p ) {\n\n\tvar k = 1 - t;\n\treturn k * k * k * p;\n\n}\n\nfunction CubicBezierP1( t, p ) {\n\n\tvar k = 1 - t;\n\treturn 3 * k * k * t * p;\n\n}\n\nfunction CubicBezierP2( t, p ) {\n\n\treturn 3 * ( 1 - t ) * t * t * p;\n\n}\n\nfunction CubicBezierP3( t, p ) {\n\n\treturn t * t * t * p;\n\n}\n\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\n\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\n\t\tCubicBezierP3( t, p3 );\n\n}\n\nexport { CatmullRom, QuadraticBezier, CubicBezier };\n","import { Curve } from '../core/Curve.js';\nimport { CubicBezier } from '../core/Interpolations.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\n\nfunction CubicBezierCurve( v0, v1, v2, v3 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve';\n\n\tthis.v0 = v0 || new Vector2();\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\tthis.v3 = v3 || new Vector2();\n\n}\n\nCubicBezierCurve.prototype = Object.create( Curve.prototype );\nCubicBezierCurve.prototype.constructor = CubicBezierCurve;\n\nCubicBezierCurve.prototype.isCubicBezierCurve = true;\n\nCubicBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\n\nexport { CubicBezierCurve };\n","import { Curve } from '../core/Curve.js';\nimport { CubicBezier } from '../core/Interpolations.js';\nimport { Vector3 } from '../../math/Vector3.js';\n\n\nfunction CubicBezierCurve3( v0, v1, v2, v3 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve3';\n\n\tthis.v0 = v0 || new Vector3();\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\tthis.v3 = v3 || new Vector3();\n\n}\n\nCubicBezierCurve3.prototype = Object.create( Curve.prototype );\nCubicBezierCurve3.prototype.constructor = CubicBezierCurve3;\n\nCubicBezierCurve3.prototype.isCubicBezierCurve3 = true;\n\nCubicBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\n\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\n\nexport { CubicBezierCurve3 };\n","import { Vector2 } from '../../math/Vector2.js';\nimport { Curve } from '../core/Curve.js';\n\n\nfunction LineCurve( v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve';\n\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\n}\n\nLineCurve.prototype = Object.create( Curve.prototype );\nLineCurve.prototype.constructor = LineCurve;\n\nLineCurve.prototype.isLineCurve = true;\n\nLineCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve.prototype.getTangent = function ( /* t */ ) {\n\n\tvar tangent = this.v2.clone().sub( this.v1 );\n\n\treturn tangent.normalize();\n\n};\n\nLineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { LineCurve };\n","import { Vector3 } from '../../math/Vector3.js';\nimport { Curve } from '../core/Curve.js';\n\n\nfunction LineCurve3( v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve3';\n\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\n}\n\nLineCurve3.prototype = Object.create( Curve.prototype );\nLineCurve3.prototype.constructor = LineCurve3;\n\nLineCurve3.prototype.isLineCurve3 = true;\n\nLineCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve3.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { LineCurve3 };\n","import { Curve } from '../core/Curve.js';\nimport { QuadraticBezier } from '../core/Interpolations.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\n\nfunction QuadraticBezierCurve( v0, v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve';\n\n\tthis.v0 = v0 || new Vector2();\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\n}\n\nQuadraticBezierCurve.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve.prototype.constructor = QuadraticBezierCurve;\n\nQuadraticBezierCurve.prototype.isQuadraticBezierCurve = true;\n\nQuadraticBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { QuadraticBezierCurve };\n","import { Curve } from '../core/Curve.js';\nimport { QuadraticBezier } from '../core/Interpolations.js';\nimport { Vector3 } from '../../math/Vector3.js';\n\n\nfunction QuadraticBezierCurve3( v0, v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve3';\n\n\tthis.v0 = v0 || new Vector3();\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\n}\n\nQuadraticBezierCurve3.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve3.prototype.constructor = QuadraticBezierCurve3;\n\nQuadraticBezierCurve3.prototype.isQuadraticBezierCurve3 = true;\n\nQuadraticBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\n\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { QuadraticBezierCurve3 };\n","import { Curve } from '../core/Curve.js';\nimport { CatmullRom } from '../core/Interpolations.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\n\nfunction SplineCurve( points /* array of Vector2 */ ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'SplineCurve';\n\n\tthis.points = points || [];\n\n}\n\nSplineCurve.prototype = Object.create( Curve.prototype );\nSplineCurve.prototype.constructor = SplineCurve;\n\nSplineCurve.prototype.isSplineCurve = true;\n\nSplineCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar points = this.points;\n\tvar p = ( points.length - 1 ) * t;\n\n\tvar intPoint = Math.floor( p );\n\tvar weight = p - intPoint;\n\n\tvar p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n\tvar p1 = points[ intPoint ];\n\tvar p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\tvar p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\tpoint.set(\n\t\tCatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\n\t\tCatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\n\t);\n\n\treturn point;\n\n};\n\nSplineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tvar point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\treturn this;\n\n};\n\nSplineCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( var i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tvar point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\treturn data;\n\n};\n\nSplineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tvar point = json.points[ i ];\n\t\tthis.points.push( new Vector2().fromArray( point ) );\n\n\t}\n\n\treturn this;\n\n};\n\n\nexport { SplineCurve };\n","import { Curve } from './Curve.js';\nimport * as Curves from '../curves/Curves.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n **/\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nfunction CurvePath() {\n\n\tCurve.call( this );\n\n\tthis.type = 'CurvePath';\n\n\tthis.curves = [];\n\tthis.autoClose = false; // Automatically closes the path\n\n}\n\nCurvePath.prototype = Object.assign( Object.create( Curve.prototype ), {\n\n\tconstructor: CurvePath,\n\n\tadd: function ( curve ) {\n\n\t\tthis.curves.push( curve );\n\n\t},\n\n\tclosePath: function () {\n\n\t\t// Add a line curve if start and end of lines are not connected\n\t\tvar startPoint = this.curves[ 0 ].getPoint( 0 );\n\t\tvar endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\n\n\t\tif ( ! startPoint.equals( endPoint ) ) {\n\n\t\t\tthis.curves.push( new Curves[ 'LineCurve' ]( endPoint, startPoint ) );\n\n\t\t}\n\n\t},\n\n\t// To get accurate point with reference to\n\t// entire path distance at time t,\n\t// following has to be done:\n\n\t// 1. Length of each sub path have to be known\n\t// 2. Locate and identify type of curve\n\t// 3. Get t for the curve\n\t// 4. Return curve.getPointAt(t')\n\n\tgetPoint: function ( t ) {\n\n\t\tvar d = t * this.getLength();\n\t\tvar curveLengths = this.getCurveLengths();\n\t\tvar i = 0;\n\n\t\t// To think about boundaries points.\n\n\t\twhile ( i < curveLengths.length ) {\n\n\t\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\t\tvar diff = curveLengths[ i ] - d;\n\t\t\t\tvar curve = this.curves[ i ];\n\n\t\t\t\tvar segmentLength = curve.getLength();\n\t\t\t\tvar u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n\t\t\t\treturn curve.getPointAt( u );\n\n\t\t\t}\n\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn null;\n\n\t\t// loop where sum != 0, sum > d , sum+1 <d\n\n\t},\n\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n\t// getPoint() depends on getLength\n\n\tgetLength: function () {\n\n\t\tvar lens = this.getCurveLengths();\n\t\treturn lens[ lens.length - 1 ];\n\n\t},\n\n\t// cacheLengths must be recalculated.\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.cacheLengths = null;\n\t\tthis.getCurveLengths();\n\n\t},\n\n\t// Compute lengths and cache them\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\n\n\tgetCurveLengths: function () {\n\n\t\t// We use cache values if curves and cache array are same length\n\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\n\n\t\t\treturn this.cacheLengths;\n\n\t\t}\n\n\t\t// Get length of sub-curve\n\t\t// Push sums into cached array\n\n\t\tvar lengths = [], sums = 0;\n\n\t\tfor ( var i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tsums += this.curves[ i ].getLength();\n\t\t\tlengths.push( sums );\n\n\t\t}\n\n\t\tthis.cacheLengths = lengths;\n\n\t\treturn lengths;\n\n\t},\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 40;\n\n\t\tvar points = [];\n\n\t\tfor ( var i = 0; i <= divisions; i ++ ) {\n\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t}\n\n\t\tif ( this.autoClose ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tgetPoints: function ( divisions ) {\n\n\t\tdivisions = divisions || 12;\n\n\t\tvar points = [], last;\n\n\t\tfor ( var i = 0, curves = this.curves; i < curves.length; i ++ ) {\n\n\t\t\tvar curve = curves[ i ];\n\t\t\tvar resolution = ( curve && curve.isEllipseCurve ) ? divisions * 2\n\t\t\t\t: ( curve && curve.isLineCurve ) ? 1\n\t\t\t\t\t: ( curve && curve.isSplineCurve ) ? divisions * curve.points.length\n\t\t\t\t\t\t: divisions;\n\n\t\t\tvar pts = curve.getPoints( resolution );\n\n\t\t\tfor ( var j = 0; j < pts.length; j ++ ) {\n\n\t\t\t\tvar point = pts[ j ];\n\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\n\n\t\t\t\tpoints.push( point );\n\t\t\t\tlast = point;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurve.prototype.copy.call( this, source );\n\n\t\tthis.curves = [];\n\n\t\tfor ( var i = 0, l = source.curves.length; i < l; i ++ ) {\n\n\t\t\tvar curve = source.curves[ i ];\n\n\t\t\tthis.curves.push( curve.clone() );\n\n\t\t}\n\n\t\tthis.autoClose = source.autoClose;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = Curve.prototype.toJSON.call( this );\n\n\t\tdata.autoClose = this.autoClose;\n\t\tdata.curves = [];\n\n\t\tfor ( var i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tvar curve = this.curves[ i ];\n\t\t\tdata.curves.push( curve.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurve.prototype.fromJSON.call( this, json );\n\n\t\tthis.autoClose = json.autoClose;\n\t\tthis.curves = [];\n\n\t\tfor ( var i = 0, l = json.curves.length; i < l; i ++ ) {\n\n\t\t\tvar curve = json.curves[ i ];\n\t\t\tthis.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { CurvePath };\n","import { Vector2 } from '../../math/Vector2.js';\nimport { CurvePath } from './CurvePath.js';\nimport { EllipseCurve } from '../curves/EllipseCurve.js';\nimport { SplineCurve } from '../curves/SplineCurve.js';\nimport { CubicBezierCurve } from '../curves/CubicBezierCurve.js';\nimport { QuadraticBezierCurve } from '../curves/QuadraticBezierCurve.js';\nimport { LineCurve } from '../curves/LineCurve.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Creates free form 2d path using series of points, lines or curves.\n **/\n\nfunction Path( points ) {\n\n\tCurvePath.call( this );\n\n\tthis.type = 'Path';\n\n\tthis.currentPoint = new Vector2();\n\n\tif ( points ) {\n\n\t\tthis.setFromPoints( points );\n\n\t}\n\n}\n\nPath.prototype = Object.assign( Object.create( CurvePath.prototype ), {\n\n\tconstructor: Path,\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.moveTo( points[ 0 ].x, points[ 0 ].y );\n\n\t\tfor ( var i = 1, l = points.length; i < l; i ++ ) {\n\n\t\t\tthis.lineTo( points[ i ].x, points[ i ].y );\n\n\t\t}\n\n\t},\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tvar curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( x, y );\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tvar curve = new QuadraticBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCPx, aCPy ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tvar curve = new CubicBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCP1x, aCP1y ),\n\t\t\tnew Vector2( aCP2x, aCP2y ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t},\n\n\tsplineThru: function ( pts /*Array of Vector*/ ) {\n\n\t\tvar npts = [ this.currentPoint.clone() ].concat( pts );\n\n\t\tvar curve = new SplineCurve( npts );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\n\n\t},\n\n\tarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tvar x0 = this.currentPoint.x;\n\t\tvar y0 = this.currentPoint.y;\n\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\n\t\t\taStartAngle, aEndAngle, aClockwise );\n\n\t},\n\n\tabsarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t},\n\n\tellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tvar x0 = this.currentPoint.x;\n\t\tvar y0 = this.currentPoint.y;\n\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t},\n\n\tabsellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tvar curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\tif ( this.curves.length > 0 ) {\n\n\t\t\t// if a previous curve is present, attempt to join\n\t\t\tvar firstPoint = curve.getPoint( 0 );\n\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\n\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.curves.push( curve );\n\n\t\tvar lastPoint = curve.getPoint( 1 );\n\t\tthis.currentPoint.copy( lastPoint );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurvePath.prototype.copy.call( this, source );\n\n\t\tthis.currentPoint.copy( source.currentPoint );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = CurvePath.prototype.toJSON.call( this );\n\n\t\tdata.currentPoint = this.currentPoint.toArray();\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurvePath.prototype.fromJSON.call( this, json );\n\n\t\tthis.currentPoint.fromArray( json.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Path };\n","import { Path } from './Path.js';\nimport { _Math } from '../../math/Math.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Defines a 2d shape plane using paths.\n **/\n\n// STEP 1 Create a path.\n// STEP 2 Turn path into shape.\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\n// STEP 3a - Extract points from each shape, turn to vertices\n// STEP 3b - Triangulate each shape, add faces.\n\nfunction Shape( points ) {\n\n\tPath.call( this, points );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.type = 'Shape';\n\n\tthis.holes = [];\n\n}\n\nShape.prototype = Object.assign( Object.create( Path.prototype ), {\n\n\tconstructor: Shape,\n\n\tgetPointsHoles: function ( divisions ) {\n\n\t\tvar holesPts = [];\n\n\t\tfor ( var i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\n\n\t\t}\n\n\t\treturn holesPts;\n\n\t},\n\n\t// get points of shape and holes (keypoints based on segments parameter)\n\n\textractPoints: function ( divisions ) {\n\n\t\treturn {\n\n\t\t\tshape: this.getPoints( divisions ),\n\t\t\tholes: this.getPointsHoles( divisions )\n\n\t\t};\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tPath.prototype.copy.call( this, source );\n\n\t\tthis.holes = [];\n\n\t\tfor ( var i = 0, l = source.holes.length; i < l; i ++ ) {\n\n\t\t\tvar hole = source.holes[ i ];\n\n\t\t\tthis.holes.push( hole.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = Path.prototype.toJSON.call( this );\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.holes = [];\n\n\t\tfor ( var i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tvar hole = this.holes[ i ];\n\t\t\tdata.holes.push( hole.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tPath.prototype.fromJSON.call( this, json );\n\n\t\tthis.uuid = json.uuid;\n\t\tthis.holes = [];\n\n\t\tfor ( var i = 0, l = json.holes.length; i < l; i ++ ) {\n\n\t\t\tvar hole = json.holes[ i ];\n\t\t\tthis.holes.push( new Path().fromJSON( hole ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Shape };\n","/**\n * @author Mugen87 / https://github.com/Mugen87\n * Port from https://github.com/mapbox/earcut (v2.1.2)\n */\n\nvar Earcut = {\n\n\ttriangulate: function ( data, holeIndices, dim ) {\n\n\t\tdim = dim || 2;\n\n\t\tvar hasHoles = holeIndices && holeIndices.length,\n\t\t\touterLen = hasHoles ? holeIndices[ 0 ] * dim : data.length,\n\t\t\touterNode = linkedList( data, 0, outerLen, dim, true ),\n\t\t\ttriangles = [];\n\n\t\tif ( ! outerNode ) return triangles;\n\n\t\tvar minX, minY, maxX, maxY, x, y, invSize;\n\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\n\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\n\t\tif ( data.length > 80 * dim ) {\n\n\t\t\tminX = maxX = data[ 0 ];\n\t\t\tminY = maxY = data[ 1 ];\n\n\t\t\tfor ( var i = dim; i < outerLen; i += dim ) {\n\n\t\t\t\tx = data[ i ];\n\t\t\t\ty = data[ i + 1 ];\n\t\t\t\tif ( x < minX ) minX = x;\n\t\t\t\tif ( y < minY ) minY = y;\n\t\t\t\tif ( x > maxX ) maxX = x;\n\t\t\t\tif ( y > maxY ) maxY = y;\n\n\t\t\t}\n\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\n\t\t\tinvSize = invSize !== 0 ? 1 / invSize : 0;\n\n\t\t}\n\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize );\n\n\t\treturn triangles;\n\n\t}\n\n};\n\n// create a circular doubly linked list from polygon points in the specified winding order\n\nfunction linkedList( data, start, end, dim, clockwise ) {\n\n\tvar i, last;\n\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\n\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t} else {\n\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t}\n\n\tif ( last && equals( last, last.next ) ) {\n\n\t\tremoveNode( last );\n\t\tlast = last.next;\n\n\t}\n\n\treturn last;\n\n}\n\n// eliminate colinear or duplicate points\n\nfunction filterPoints( start, end ) {\n\n\tif ( ! start ) return start;\n\tif ( ! end ) end = start;\n\n\tvar p = start, again;\n\n\tdo {\n\n\t\tagain = false;\n\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\n\n\t\t\tremoveNode( p );\n\t\t\tp = end = p.prev;\n\t\t\tif ( p === p.next ) break;\n\t\t\tagain = true;\n\n\t\t} else {\n\n\t\t\tp = p.next;\n\n\t\t}\n\n\t} while ( again || p !== end );\n\n\treturn end;\n\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\n\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\n\n\tif ( ! ear ) return;\n\n\t// interlink polygon nodes in z-order\n\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\n\n\tvar stop = ear, prev, next;\n\n\t// iterate through ears, slicing them one by one\n\n\twhile ( ear.prev !== ear.next ) {\n\n\t\tprev = ear.prev;\n\t\tnext = ear.next;\n\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\n\n\t\t\t// cut off the triangle\n\t\t\ttriangles.push( prev.i / dim );\n\t\t\ttriangles.push( ear.i / dim );\n\t\t\ttriangles.push( next.i / dim );\n\n\t\t\tremoveNode( ear );\n\n\t\t\t// skipping the next vertice leads to less sliver triangles\n\t\t\tear = next.next;\n\t\t\tstop = next.next;\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tear = next;\n\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\n\n\t\tif ( ear === stop ) {\n\n\t\t\t// try filtering points and slicing again\n\n\t\t\tif ( ! pass ) {\n\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\n\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\n\n\t\t\t} else if ( pass === 1 ) {\n\n\t\t\t\tear = cureLocalIntersections( ear, triangles, dim );\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\n\n\t\t\t// as a last resort, try splitting the remaining polygon into two\n\n\t\t\t} else if ( pass === 2 ) {\n\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\n\nfunction isEar( ear ) {\n\n\tvar a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// now make sure we don't have other points inside the potential ear\n\tvar p = ear.next.next;\n\n\twhile ( p !== ear.prev ) {\n\n\t\tif ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) && area( p.prev, p, p.next ) >= 0 ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction isEarHashed( ear, minX, minY, invSize ) {\n\n\tvar a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// triangle bbox; min & max are calculated like this for speed\n\n\tvar minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\n\t\tminTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\n\t\tmaxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\n\t\tmaxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\n\n\t// z-order range for the current triangle bbox;\n\n\tvar minZ = zOrder( minTX, minTY, minX, minY, invSize ),\n\t\tmaxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\n\n\t// first look for points inside the triangle in increasing z-order\n\n\tvar p = ear.nextZ;\n\n\twhile ( p && p.z <= maxZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.nextZ;\n\n\t}\n\n\t// then look for points in decreasing z-order\n\n\tp = ear.prevZ;\n\n\twhile ( p && p.z >= minZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\n\t\tp = p.prevZ;\n\n\t}\n\n\treturn true;\n\n}\n\n// go through all polygon nodes and cure small local self-intersections\n\nfunction cureLocalIntersections( start, triangles, dim ) {\n\n\tvar p = start;\n\n\tdo {\n\n\t\tvar a = p.prev, b = p.next.next;\n\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\n\n\t\t\ttriangles.push( a.i / dim );\n\t\t\ttriangles.push( p.i / dim );\n\t\t\ttriangles.push( b.i / dim );\n\n\t\t\t// remove two nodes involved\n\n\t\t\tremoveNode( p );\n\t\t\tremoveNode( p.next );\n\n\t\t\tp = start = b;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn p;\n\n}\n\n// try splitting polygon into two and triangulate them independently\n\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\n\n\t// look for a valid diagonal that divides the polygon into two\n\n\tvar a = start;\n\n\tdo {\n\n\t\tvar b = a.next.next;\n\n\t\twhile ( b !== a.prev ) {\n\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\n\n\t\t\t\t// split the polygon in two by the diagonal\n\n\t\t\t\tvar c = splitPolygon( a, b );\n\n\t\t\t\t// filter colinear points around the cuts\n\n\t\t\t\ta = filterPoints( a, a.next );\n\t\t\t\tc = filterPoints( c, c.next );\n\n\t\t\t\t// run earcut on each half\n\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize );\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tb = b.next;\n\n\t\t}\n\n\t\ta = a.next;\n\n\t} while ( a !== start );\n\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\n\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\n\n\tvar queue = [], i, len, start, end, list;\n\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\n\n\t\tstart = holeIndices[ i ] * dim;\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\n\t\tlist = linkedList( data, start, end, dim, false );\n\t\tif ( list === list.next ) list.steiner = true;\n\t\tqueue.push( getLeftmost( list ) );\n\n\t}\n\n\tqueue.sort( compareX );\n\n\t// process holes from left to right\n\n\tfor ( i = 0; i < queue.length; i ++ ) {\n\n\t\teliminateHole( queue[ i ], outerNode );\n\t\touterNode = filterPoints( outerNode, outerNode.next );\n\n\t}\n\n\treturn outerNode;\n\n}\n\nfunction compareX( a, b ) {\n\n\treturn a.x - b.x;\n\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\n\nfunction eliminateHole( hole, outerNode ) {\n\n\touterNode = findHoleBridge( hole, outerNode );\n\n\tif ( outerNode ) {\n\n\t\tvar b = splitPolygon( outerNode, hole );\n\n\t\tfilterPoints( b, b.next );\n\n\t}\n\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\n\nfunction findHoleBridge( hole, outerNode ) {\n\n\tvar p = outerNode,\n\t\thx = hole.x,\n\t\thy = hole.y,\n\t\tqx = - Infinity,\n\t\tm;\n\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\n\t// segment's endpoint with lesser x will be potential connection point\n\n\tdo {\n\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\n\n\t\t\tvar x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\n\n\t\t\tif ( x <= hx && x > qx ) {\n\n\t\t\t\tqx = x;\n\n\t\t\t\tif ( x === hx ) {\n\n\t\t\t\t\tif ( hy === p.y ) return p;\n\t\t\t\t\tif ( hy === p.next.y ) return p.next;\n\n\t\t\t\t}\n\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== outerNode );\n\n\tif ( ! m ) return null;\n\n\tif ( hx === qx ) return m.prev; // hole touches outer segment; pick lower endpoint\n\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\n\t// if there are no points found, we have a valid connection;\n\t// otherwise choose the point of the minimum angle with the ray as connection point\n\n\tvar stop = m,\n\t\tmx = m.x,\n\t\tmy = m.y,\n\t\ttanMin = Infinity,\n\t\ttan;\n\n\tp = m.next;\n\n\twhile ( p !== stop ) {\n\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\n\t\t\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\n\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\n\n\t\t\tif ( ( tan < tanMin || ( tan === tanMin && p.x > m.x ) ) && locallyInside( p, hole ) ) {\n\n\t\t\t\tm = p;\n\t\t\t\ttanMin = tan;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t}\n\n\treturn m;\n\n}\n\n// interlink polygon nodes in z-order\n\nfunction indexCurve( start, minX, minY, invSize ) {\n\n\tvar p = start;\n\n\tdo {\n\n\t\tif ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\n\t\tp.prevZ = p.prev;\n\t\tp.nextZ = p.next;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\tp.prevZ.nextZ = null;\n\tp.prevZ = null;\n\n\tsortLinked( p );\n\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\n\nfunction sortLinked( list ) {\n\n\tvar i, p, q, e, tail, numMerges, pSize, qSize, inSize = 1;\n\n\tdo {\n\n\t\tp = list;\n\t\tlist = null;\n\t\ttail = null;\n\t\tnumMerges = 0;\n\n\t\twhile ( p ) {\n\n\t\t\tnumMerges ++;\n\t\t\tq = p;\n\t\t\tpSize = 0;\n\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\n\n\t\t\t\tpSize ++;\n\t\t\t\tq = q.nextZ;\n\t\t\t\tif ( ! q ) break;\n\n\t\t\t}\n\n\t\t\tqSize = inSize;\n\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\n\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\n\n\t\t\t\t\te = p;\n\t\t\t\t\tp = p.nextZ;\n\t\t\t\t\tpSize --;\n\n\t\t\t\t} else {\n\n\t\t\t\t\te = q;\n\t\t\t\t\tq = q.nextZ;\n\t\t\t\t\tqSize --;\n\n\t\t\t\t}\n\n\t\t\t\tif ( tail ) tail.nextZ = e;\n\t\t\t\telse list = e;\n\n\t\t\t\te.prevZ = tail;\n\t\t\t\ttail = e;\n\n\t\t\t}\n\n\t\t\tp = q;\n\n\t\t}\n\n\t\ttail.nextZ = null;\n\t\tinSize *= 2;\n\n\t} while ( numMerges > 1 );\n\n\treturn list;\n\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\n\nfunction zOrder( x, y, minX, minY, invSize ) {\n\n\t// coords are transformed into non-negative 15-bit integer range\n\n\tx = 32767 * ( x - minX ) * invSize;\n\ty = 32767 * ( y - minY ) * invSize;\n\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\n\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\n\n\treturn x | ( y << 1 );\n\n}\n\n// find the leftmost node of a polygon ring\n\nfunction getLeftmost( start ) {\n\n\tvar p = start, leftmost = start;\n\n\tdo {\n\n\t\tif ( p.x < leftmost.x ) leftmost = p;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn leftmost;\n\n}\n\n// check if a point lies within a convex triangle\n\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\n\n\treturn ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\n\t ( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\n\t ( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\n\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\n\nfunction isValidDiagonal( a, b ) {\n\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) &&\n\t\tlocallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b );\n\n}\n\n// signed area of a triangle\n\nfunction area( p, q, r ) {\n\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\n\n}\n\n// check if two points are equal\n\nfunction equals( p1, p2 ) {\n\n\treturn p1.x === p2.x && p1.y === p2.y;\n\n}\n\n// check if two segments intersect\n\nfunction intersects( p1, q1, p2, q2 ) {\n\n\tif ( ( equals( p1, q1 ) && equals( p2, q2 ) ) ||\n\t\t\t( equals( p1, q2 ) && equals( p2, q1 ) ) ) return true;\n\n\treturn area( p1, q1, p2 ) > 0 !== area( p1, q1, q2 ) > 0 &&\n\t\t\t\t area( p2, q2, p1 ) > 0 !== area( p2, q2, q1 ) > 0;\n\n}\n\n// check if a polygon diagonal intersects any polygon segments\n\nfunction intersectsPolygon( a, b ) {\n\n\tvar p = a;\n\n\tdo {\n\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n\t\t\t\t\t\tintersects( p, p.next, a, b ) ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn false;\n\n}\n\n// check if a polygon diagonal is locally inside the polygon\n\nfunction locallyInside( a, b ) {\n\n\treturn area( a.prev, a, a.next ) < 0 ?\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\n\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\n\nfunction middleInside( a, b ) {\n\n\tvar p = a,\n\t\tinside = false,\n\t\tpx = ( a.x + b.x ) / 2,\n\t\tpy = ( a.y + b.y ) / 2;\n\n\tdo {\n\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\n\t\t\t\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) ) {\n\n\t\t\tinside = ! inside;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn inside;\n\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\n\nfunction splitPolygon( a, b ) {\n\n\tvar a2 = new Node( a.i, a.x, a.y ),\n\t\tb2 = new Node( b.i, b.x, b.y ),\n\t\tan = a.next,\n\t\tbp = b.prev;\n\n\ta.next = b;\n\tb.prev = a;\n\n\ta2.next = an;\n\tan.prev = a2;\n\n\tb2.next = a2;\n\ta2.prev = b2;\n\n\tbp.next = b2;\n\tb2.prev = bp;\n\n\treturn b2;\n\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\n\nfunction insertNode( i, x, y, last ) {\n\n\tvar p = new Node( i, x, y );\n\n\tif ( ! last ) {\n\n\t\tp.prev = p;\n\t\tp.next = p;\n\n\t} else {\n\n\t\tp.next = last.next;\n\t\tp.prev = last;\n\t\tlast.next.prev = p;\n\t\tlast.next = p;\n\n\t}\n\n\treturn p;\n\n}\n\nfunction removeNode( p ) {\n\n\tp.next.prev = p.prev;\n\tp.prev.next = p.next;\n\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\n\n}\n\nfunction Node( i, x, y ) {\n\n\t// vertice index in coordinates array\n\tthis.i = i;\n\n\t// vertex coordinates\n\tthis.x = x;\n\tthis.y = y;\n\n\t// previous and next vertice nodes in a polygon ring\n\tthis.prev = null;\n\tthis.next = null;\n\n\t// z-order curve value\n\tthis.z = null;\n\n\t// previous and next nodes in z-order\n\tthis.prevZ = null;\n\tthis.nextZ = null;\n\n\t// indicates whether this is a steiner point\n\tthis.steiner = false;\n\n}\n\nfunction signedArea( data, start, end, dim ) {\n\n\tvar sum = 0;\n\n\tfor ( var i = start, j = end - dim; i < end; i += dim ) {\n\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\n\t\tj = i;\n\n\t}\n\n\treturn sum;\n\n}\n\nexport { Earcut };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nimport { Earcut } from './Earcut.js';\n\nvar ShapeUtils = {\n\n\t// calculate area of the contour polygon\n\n\tarea: function ( contour ) {\n\n\t\tvar n = contour.length;\n\t\tvar a = 0.0;\n\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t},\n\n\tisClockWise: function ( pts ) {\n\n\t\treturn ShapeUtils.area( pts ) < 0;\n\n\t},\n\n\ttriangulateShape: function ( contour, holes ) {\n\n\t\tvar vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\n\t\tvar holeIndices = []; // array of hole indices\n\t\tvar faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\n\n\t\tremoveDupEndPts( contour );\n\t\taddContour( vertices, contour );\n\n\t\t//\n\n\t\tvar holeIndex = contour.length;\n\n\t\tholes.forEach( removeDupEndPts );\n\n\t\tfor ( var i = 0; i < holes.length; i ++ ) {\n\n\t\t\tholeIndices.push( holeIndex );\n\t\t\tholeIndex += holes[ i ].length;\n\t\t\taddContour( vertices, holes[ i ] );\n\n\t\t}\n\n\t\t//\n\n\t\tvar triangles = Earcut.triangulate( vertices, holeIndices );\n\n\t\t//\n\n\t\tfor ( var i = 0; i < triangles.length; i += 3 ) {\n\n\t\t\tfaces.push( triangles.slice( i, i + 3 ) );\n\n\t\t}\n\n\t\treturn faces;\n\n\t}\n\n};\n\nfunction removeDupEndPts( points ) {\n\n\tvar l = points.length;\n\n\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\n\n\t\tpoints.pop();\n\n\t}\n\n}\n\nfunction addContour( vertices, contour ) {\n\n\tfor ( var i = 0; i < contour.length; i ++ ) {\n\n\t\tvertices.push( contour[ i ].x );\n\t\tvertices.push( contour[ i ].y );\n\n\t}\n\n}\n\nexport { ShapeUtils };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * minimal class for proxing functions to Path. Replaces old \"extractSubpaths()\"\n **/\n\nimport { Color } from '../../math/Color.js';\nimport { Path } from './Path.js';\nimport { Shape } from './Shape.js';\nimport { ShapeUtils } from '../ShapeUtils.js';\n\nfunction ShapePath() {\n\n\tthis.type = 'ShapePath';\n\n\tthis.color = new Color();\n\n\tthis.subPaths = [];\n\tthis.currentPath = null;\n\n}\n\nObject.assign( ShapePath.prototype, {\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPath = new Path();\n\t\tthis.subPaths.push( this.currentPath );\n\t\tthis.currentPath.moveTo( x, y );\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tthis.currentPath.lineTo( x, y );\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\n\n\t},\n\n\tsplineThru: function ( pts ) {\n\n\t\tthis.currentPath.splineThru( pts );\n\n\t},\n\n\ttoShapes: function ( isCCW, noHoles ) {\n\n\t\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\t\tvar shapes = [];\n\n\t\t\tfor ( var i = 0, l = inSubpaths.length; i < l; i ++ ) {\n\n\t\t\t\tvar tmpPath = inSubpaths[ i ];\n\n\t\t\t\tvar tmpShape = new Shape();\n\t\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\t\tshapes.push( tmpShape );\n\n\t\t\t}\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\n\t\t\tvar polyLen = inPolygon.length;\n\n\t\t\t// inPt on polygon contour => immediate success    or\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t\t//  with the horizontal line through inPt, left of inPt\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\t\tvar inside = false;\n\t\t\tfor ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\n\t\t\t\tvar edgeLowPt = inPolygon[ p ];\n\t\t\t\tvar edgeHighPt = inPolygon[ q ];\n\n\t\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not parallel\n\t\t\t\t\tif ( edgeDy < 0 ) {\n\n\t\t\t\t\t\tedgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\n\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// parallel or collinear\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t\t// continue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn\tinside;\n\n\t\t}\n\n\t\tvar isClockWise = ShapeUtils.isClockWise;\n\n\t\tvar subPaths = this.subPaths;\n\t\tif ( subPaths.length === 0 ) return [];\n\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tvar solid, tmpPath, tmpShape, shapes = [];\n\n\t\tif ( subPaths.length === 1 ) {\n\n\t\t\ttmpPath = subPaths[ 0 ];\n\t\t\ttmpShape = new Shape();\n\t\t\ttmpShape.curves = tmpPath.curves;\n\t\t\tshapes.push( tmpShape );\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tvar holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t\t// console.log(\"Holes first\", holesFirst);\n\n\t\tvar betterShapeHoles = [];\n\t\tvar newShapes = [];\n\t\tvar newShapeHoles = [];\n\t\tvar mainIdx = 0;\n\t\tvar tmpPoints;\n\n\t\tnewShapes[ mainIdx ] = undefined;\n\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\tfor ( var i = 0, l = subPaths.length; i < l; i ++ ) {\n\n\t\t\ttmpPath = subPaths[ i ];\n\t\t\ttmpPoints = tmpPath.getPoints();\n\t\t\tsolid = isClockWise( tmpPoints );\n\t\t\tsolid = isCCW ? ! solid : solid;\n\n\t\t\tif ( solid ) {\n\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\n\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\n\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\t\t//console.log('cw', i);\n\n\t\t\t} else {\n\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\n\n\t\t\t\t//console.log('ccw', i);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// only Holes? -> probably all Shapes with wrong orientation\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tif ( newShapes.length > 1 ) {\n\n\t\t\tvar ambiguous = false;\n\t\t\tvar toChange = [];\n\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tvar sho = newShapeHoles[ sIdx ];\n\n\t\t\t\tfor ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\n\t\t\t\t\tvar ho = sho[ hIdx ];\n\t\t\t\t\tvar hole_unassigned = true;\n\n\t\t\t\t\tfor ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\n\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tambiguous = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\n\t\t\tif ( toChange.length > 0 ) {\n\n\t\t\t\t// console.log(\"to change: \", toChange);\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar tmpHoles;\n\n\t\tfor ( var i = 0, il = newShapes.length; i < il; i ++ ) {\n\n\t\t\ttmpShape = newShapes[ i ].s;\n\t\t\tshapes.push( tmpShape );\n\t\t\ttmpHoles = newShapeHoles[ i ];\n\n\t\t\tfor ( var j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\n\nexport { ShapePath };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { ShapePath } from './ShapePath.js';\n\n\nfunction Font( data ) {\n\n\tthis.type = 'Font';\n\n\tthis.data = data;\n\n}\n\nObject.assign( Font.prototype, {\n\n\tisFont: true,\n\n\tgenerateShapes: function ( text, size, divisions ) {\n\n\t\tif ( size === undefined ) size = 100;\n\t\tif ( divisions === undefined ) divisions = 4;\n\n\t\tvar shapes = [];\n\t\tvar paths = createPaths( text, size, divisions, this.data );\n\n\t\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\n\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\nfunction createPaths( text, size, divisions, data ) {\n\n\tvar chars = String( text ).split( '' );\n\tvar scale = size / data.resolution;\n\tvar line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\n\n\tvar paths = [];\n\n\tvar offsetX = 0, offsetY = 0;\n\n\tfor ( var i = 0; i < chars.length; i ++ ) {\n\n\t\tvar char = chars[ i ];\n\n\t\tif ( char === '\\n' ) {\n\n\t\t\toffsetX = 0;\n\t\t\toffsetY -= line_height;\n\n\t\t} else {\n\n\t\t\tvar ret = createPath( char, divisions, scale, offsetX, offsetY, data );\n\t\t\toffsetX += ret.offsetX;\n\t\t\tpaths.push( ret.path );\n\n\t\t}\n\n\t}\n\n\treturn paths;\n\n}\n\nfunction createPath( char, divisions, scale, offsetX, offsetY, data ) {\n\n\tvar glyph = data.glyphs[ char ] || data.glyphs[ '?' ];\n\n\tif ( ! glyph ) return;\n\n\tvar path = new ShapePath();\n\n\tvar x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\n\n\tif ( glyph.o ) {\n\n\t\tvar outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\n\n\t\tfor ( var i = 0, l = outline.length; i < l; ) {\n\n\t\t\tvar action = outline[ i ++ ];\n\n\t\t\tswitch ( action ) {\n\n\t\t\t\tcase 'm': // moveTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'l': // lineTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'q': // quadraticCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'b': // bezierCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy2 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { offsetX: glyph.ha * scale, path: path };\n\n}\n\nexport { Font };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Cache } from './Cache.js';\nimport { DefaultLoadingManager } from './LoadingManager.js';\n\nvar loading = {};\n\nfunction FileLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( FileLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tvar scope = this;\n\n\t\tvar cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\t// Check if request is duplicate\n\n\t\tif ( loading[ url ] !== undefined ) {\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Check for data: URI\n\t\tvar dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\n\t\tvar dataUriRegexResult = url.match( dataUriRegex );\n\n\t\t// Safari can not handle Data URIs through XMLHttpRequest so process manually\n\t\tif ( dataUriRegexResult ) {\n\n\t\t\tvar mimeType = dataUriRegexResult[ 1 ];\n\t\t\tvar isBase64 = !! dataUriRegexResult[ 2 ];\n\t\t\tvar data = dataUriRegexResult[ 3 ];\n\n\t\t\tdata = window.decodeURIComponent( data );\n\n\t\t\tif ( isBase64 ) data = window.atob( data );\n\n\t\t\ttry {\n\n\t\t\t\tvar response;\n\t\t\t\tvar responseType = ( this.responseType || '' ).toLowerCase();\n\n\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\tcase 'arraybuffer':\n\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t\tvar view = new Uint8Array( data.length );\n\n\t\t\t\t\t\tfor ( var i = 0; i < data.length; i ++ ) {\n\n\t\t\t\t\t\t\tview[ i ] = data.charCodeAt( i );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( responseType === 'blob' ) {\n\n\t\t\t\t\t\t\tresponse = new Blob( [ view.buffer ], { type: mimeType } );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tresponse = view.buffer;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\tvar parser = new DOMParser();\n\t\t\t\t\t\tresponse = parser.parseFromString( data, mimeType );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\tresponse = JSON.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault: // 'text' or other\n\n\t\t\t\t\t\tresponse = data;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\twindow.setTimeout( function () {\n\n\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\twindow.setTimeout( function () {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\t\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Initialise array for duplicate requests\n\n\t\t\tloading[ url ] = [];\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\tvar request = new XMLHttpRequest();\n\n\t\t\trequest.open( 'GET', url, true );\n\n\t\t\trequest.addEventListener( 'load', function ( event ) {\n\n\t\t\t\tvar response = this.response;\n\n\t\t\t\tCache.add( url, response );\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tif ( this.status === 200 ) {\n\n\t\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( response );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t} else if ( this.status === 0 ) {\n\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\tconsole.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( response );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\t\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemEnd( url );\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}, false );\n\n\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\n\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\n\n\t\t\tif ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\n\n\t\t\tfor ( var header in this.requestHeader ) {\n\n\t\t\t\trequest.setRequestHeader( header, this.requestHeader[ header ] );\n\n\t\t\t}\n\n\t\t\trequest.send( null );\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\treturn request;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t},\n\n\tsetResponseType: function ( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t},\n\n\tsetWithCredentials: function ( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t},\n\n\tsetMimeType: function ( value ) {\n\n\t\tthis.mimeType = value;\n\t\treturn this;\n\n\t},\n\n\tsetRequestHeader: function ( value ) {\n\n\t\tthis.requestHeader = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { FileLoader };\n","import { Font } from '../extras/core/Font.js';\nimport { FileLoader } from './FileLoader.js';\nimport { DefaultLoadingManager } from './LoadingManager.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction FontLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( FontLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tvar json;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\n\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\n\n\t\t\t}\n\n\t\t\tvar font = scope.parse( json );\n\n\t\t\tif ( onLoad ) onLoad( font );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\treturn new Font( json );\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { FontLoader };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  amount: <int>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline is bevel\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\n *\n *  UVGenerator: <Object> // object that provides UV generator functions\n *\n * }\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { ShapeUtils } from '../extras/ShapeUtils.js';\n\n// ExtrudeGeometry\n\nfunction ExtrudeGeometry( shapes, options ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'ExtrudeGeometry';\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\toptions: options\n\t};\n\n\tthis.fromBufferGeometry( new ExtrudeBufferGeometry( shapes, options ) );\n\tthis.mergeVertices();\n\n}\n\nExtrudeGeometry.prototype = Object.create( Geometry.prototype );\nExtrudeGeometry.prototype.constructor = ExtrudeGeometry;\n\n// ExtrudeBufferGeometry\n\nfunction ExtrudeBufferGeometry( shapes, options ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'ExtrudeBufferGeometry';\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\toptions: options\n\t};\n\n\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\n\n\tvar scope = this;\n\n\tvar verticesArray = [];\n\tvar uvArray = [];\n\n\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\tvar shape = shapes[ i ];\n\t\taddShape( shape, options );\n\n\t}\n\n\t// build geometry\n\n\tthis.addAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\n\n\tthis.computeVertexNormals();\n\n\t// functions\n\n\tfunction addShape( shape ) {\n\n\t\tvar placeholder = [];\n\n\t\t// options\n\n\t\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\t\tvar steps = options.steps !== undefined ? options.steps : 1;\n\t\tvar amount = options.amount !== undefined ? options.amount : 100;\n\n\t\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\n\t\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6;\n\t\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2;\n\t\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\t\tvar extrudePath = options.extrudePath;\n\n\t\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\n\n\t\t//\n\n\t\tvar extrudePts, extrudeByPath = false;\n\t\tvar splineTube, binormal, normal, position2;\n\n\t\tif ( extrudePath ) {\n\n\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\t\textrudeByPath = true;\n\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t\t// SETUP TNB variables\n\n\t\t\t// TODO1 - have a .isClosed in spline?\n\n\t\t\tsplineTube = extrudePath.computeFrenetFrames( steps, false );\n\n\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\t\tbinormal = new Vector3();\n\t\t\tnormal = new Vector3();\n\t\t\tposition2 = new Vector3();\n\n\t\t}\n\n\t\t// Safeguards if bevels are not enabled\n\n\t\tif ( ! bevelEnabled ) {\n\n\t\t\tbevelSegments = 0;\n\t\t\tbevelThickness = 0;\n\t\t\tbevelSize = 0;\n\n\t\t}\n\n\t\t// Variables initialization\n\n\t\tvar ahole, h, hl; // looping of holes\n\n\t\tvar shapePoints = shape.extractPoints( curveSegments );\n\n\t\tvar vertices = shapePoints.shape;\n\t\tvar holes = shapePoints.holes;\n\n\t\tvar reverse = ! ShapeUtils.isClockWise( vertices );\n\n\t\tif ( reverse ) {\n\n\t\t\tvertices = vertices.reverse();\n\n\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\n\t\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\n\n\t\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar faces = ShapeUtils.triangulateShape( vertices, holes );\n\n\t\t/* Vertices */\n\n\t\tvar contour = vertices; // vertices has all points but contour has only points of circumference\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\n\t\t\tvertices = vertices.concat( ahole );\n\n\t\t}\n\n\n\t\tfunction scalePt2( pt, vec, size ) {\n\n\t\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\n\n\t\t\treturn vec.clone().multiplyScalar( size ).add( pt );\n\n\t\t}\n\n\t\tvar b, bs, t, z,\n\t\t\tvert, vlen = vertices.length,\n\t\t\tface, flen = faces.length;\n\n\n\t\t// Find directions for point movement\n\n\n\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\n\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t\t//\n\t\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\n\t\t\tvar v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\n\n\t\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\t\tvar v_prev_x = inPt.x - inPrev.x,\n\t\t\t\tv_prev_y = inPt.y - inPrev.y;\n\t\t\tvar v_next_x = inNext.x - inPt.x,\n\t\t\t\tv_next_y = inNext.y - inPt.y;\n\n\t\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\n\t\t\t// check for collinear edges\n\t\t\tvar collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\n\n\t\t\t\t// not collinear\n\n\t\t\t\t// length of vectors for normalizing\n\n\t\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\n\t\t\t\t// shift adjacent points by unit vectors to the left\n\n\t\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\n\t\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\n\t\t\t\t// scaling factor for v_prev to intersection point\n\n\t\t\t\tvar sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\n\t\t\t\t\t( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\t// vector from inPt to intersection point\n\n\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\n\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t\t//  but prevent crazy spikes\n\t\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\n\t\t\t\tif ( v_trans_lensq <= 2 ) {\n\n\t\t\t\t\treturn new Vector2( v_trans_x, v_trans_y );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// handle special case of collinear edges\n\n\t\t\t\tvar direction_eq = false; // assumes: opposite\n\t\t\t\tif ( v_prev_x > Number.EPSILON ) {\n\n\t\t\t\t\tif ( v_next_x > Number.EPSILON ) {\n\n\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( direction_eq ) {\n\n\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\t\tv_trans_y = v_prev_x;\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t\t}\n\n\n\t\tvar contourMovements = [];\n\n\t\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\tif ( j === il ) j = 0;\n\t\t\tif ( k === il ) k = 0;\n\n\t\t\t//  (j)---(i)---(k)\n\t\t\t// console.log('i,j,k', i, j , k)\n\n\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t\t}\n\n\t\tvar holesMovements = [],\n\t\t\toneHoleMovements, verticesMovements = contourMovements.concat();\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\n\t\t\toneHoleMovements = [];\n\n\t\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t\t}\n\n\t\t\tholesMovements.push( oneHoleMovements );\n\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t\t}\n\n\n\t\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\t\tfor ( b = 0; b < bevelSegments; b ++ ) {\n\n\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\t\tt = b / bevelSegments;\n\t\t\tz = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\tbs = bevelSize * Math.sin( t * Math.PI / 2 );\n\n\t\t\t// contract shape\n\n\t\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t}\n\n\t\t\t// expand holes\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tbs = bevelSize;\n\n\t\t// Back facing vertices\n\n\t\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t\t} else {\n\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\n\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\n\n\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\n\n\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Add stepped vertices...\n\t\t// Including front facing vertices\n\n\t\tvar s;\n\n\t\tfor ( s = 1; s <= steps; s ++ ) {\n\n\t\t\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y, amount / steps * s );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\n\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// Add bevel segments planes\n\n\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\t\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\t\tt = b / bevelSegments;\n\t\t\tz = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\tbs = bevelSize * Math.sin( t * Math.PI / 2 );\n\n\t\t\t// contract shape\n\n\t\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\t\tv( vert.x, vert.y, amount + z );\n\n\t\t\t}\n\n\t\t\t// expand holes\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\tv( vert.x, vert.y, amount + z );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t/* Faces */\n\n\t\t// Top and bottom faces\n\n\t\tbuildLidFaces();\n\n\t\t// Sides faces\n\n\t\tbuildSideFaces();\n\n\n\t\t/////  Internal functions\n\n\t\tfunction buildLidFaces() {\n\n\t\t\tvar start = verticesArray.length / 3;\n\n\t\t\tif ( bevelEnabled ) {\n\n\t\t\t\tvar layer = 0; // steps + 1\n\t\t\t\tvar offset = vlen * layer;\n\n\t\t\t\t// Bottom faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\n\n\t\t\t\t}\n\n\t\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\t\toffset = vlen * layer;\n\n\t\t\t\t// Top faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Bottom faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t\t}\n\n\t\t\t\t// Top faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 0 );\n\n\t\t}\n\n\t\t// Create faces for the z-sides of the shape\n\n\t\tfunction buildSideFaces() {\n\n\t\t\tvar start = verticesArray.length / 3;\n\t\t\tvar layeroffset = 0;\n\t\t\tsidewalls( contour, layeroffset );\n\t\t\tlayeroffset += contour.length;\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\t\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t\t//, true\n\t\t\t\tlayeroffset += ahole.length;\n\n\t\t\t}\n\n\n\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 1 );\n\n\n\t\t}\n\n\t\tfunction sidewalls( contour, layeroffset ) {\n\n\t\t\tvar j, k;\n\t\t\ti = contour.length;\n\n\t\t\twhile ( -- i >= 0 ) {\n\n\t\t\t\tj = i;\n\t\t\t\tk = i - 1;\n\t\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\t\tvar s = 0,\n\t\t\t\t\tsl = steps + bevelSegments * 2;\n\n\t\t\t\tfor ( s = 0; s < sl; s ++ ) {\n\n\t\t\t\t\tvar slen1 = vlen * s;\n\t\t\t\t\tvar slen2 = vlen * ( s + 1 );\n\n\t\t\t\t\tvar a = layeroffset + j + slen1,\n\t\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\t\tf4( a, b, c, d );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction v( x, y, z ) {\n\n\t\t\tplaceholder.push( x );\n\t\t\tplaceholder.push( y );\n\t\t\tplaceholder.push( z );\n\n\t\t}\n\n\n\t\tfunction f3( a, b, c ) {\n\n\t\t\taddVertex( a );\n\t\t\taddVertex( b );\n\t\t\taddVertex( c );\n\n\t\t\tvar nextIndex = verticesArray.length / 3;\n\t\t\tvar uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\taddUV( uvs[ 0 ] );\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 2 ] );\n\n\t\t}\n\n\t\tfunction f4( a, b, c, d ) {\n\n\t\t\taddVertex( a );\n\t\t\taddVertex( b );\n\t\t\taddVertex( d );\n\n\t\t\taddVertex( b );\n\t\t\taddVertex( c );\n\t\t\taddVertex( d );\n\n\n\t\t\tvar nextIndex = verticesArray.length / 3;\n\t\t\tvar uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\taddUV( uvs[ 0 ] );\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 2 ] );\n\t\t\taddUV( uvs[ 3 ] );\n\n\t\t}\n\n\t\tfunction addVertex( index ) {\n\n\t\t\tverticesArray.push( placeholder[ index * 3 + 0 ] );\n\t\t\tverticesArray.push( placeholder[ index * 3 + 1 ] );\n\t\t\tverticesArray.push( placeholder[ index * 3 + 2 ] );\n\n\t\t}\n\n\n\t\tfunction addUV( vector2 ) {\n\n\t\t\tuvArray.push( vector2.x );\n\t\t\tuvArray.push( vector2.y );\n\n\t\t}\n\n\t}\n\n}\n\nExtrudeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nExtrudeBufferGeometry.prototype.constructor = ExtrudeBufferGeometry;\n\nvar WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\n\n\t\tvar a_x = vertices[ indexA * 3 ];\n\t\tvar a_y = vertices[ indexA * 3 + 1 ];\n\t\tvar b_x = vertices[ indexB * 3 ];\n\t\tvar b_y = vertices[ indexB * 3 + 1 ];\n\t\tvar c_x = vertices[ indexC * 3 ];\n\t\tvar c_y = vertices[ indexC * 3 + 1 ];\n\n\t\treturn [\n\t\t\tnew Vector2( a_x, a_y ),\n\t\t\tnew Vector2( b_x, b_y ),\n\t\t\tnew Vector2( c_x, c_y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\n\n\t\tvar a_x = vertices[ indexA * 3 ];\n\t\tvar a_y = vertices[ indexA * 3 + 1 ];\n\t\tvar a_z = vertices[ indexA * 3 + 2 ];\n\t\tvar b_x = vertices[ indexB * 3 ];\n\t\tvar b_y = vertices[ indexB * 3 + 1 ];\n\t\tvar b_z = vertices[ indexB * 3 + 2 ];\n\t\tvar c_x = vertices[ indexC * 3 ];\n\t\tvar c_y = vertices[ indexC * 3 + 1 ];\n\t\tvar c_z = vertices[ indexC * 3 + 2 ];\n\t\tvar d_x = vertices[ indexD * 3 ];\n\t\tvar d_y = vertices[ indexD * 3 + 1 ];\n\t\tvar d_z = vertices[ indexD * 3 + 2 ];\n\n\t\tif ( Math.abs( a_y - b_y ) < 0.01 ) {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_x, 1 - a_z ),\n\t\t\t\tnew Vector2( b_x, 1 - b_z ),\n\t\t\t\tnew Vector2( c_x, 1 - c_z ),\n\t\t\t\tnew Vector2( d_x, 1 - d_z )\n\t\t\t];\n\n\t\t} else {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_y, 1 - a_z ),\n\t\t\t\tnew Vector2( b_y, 1 - b_z ),\n\t\t\t\tnew Vector2( c_y, 1 - c_z ),\n\t\t\t\tnew Vector2( d_y, 1 - d_z )\n\t\t\t];\n\n\t\t}\n\n\t}\n};\n\n\nexport { ExtrudeGeometry, ExtrudeBufferGeometry };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author alteredq / http://alteredqualia.com/\n *\n * Text = 3D Text\n *\n * parameters = {\n *  font: <THREE.Font>, // font\n *\n *  size: <float>, // size of the text\n *  height: <float>, // thickness to extrude text\n *  curveSegments: <int>, // number of points on the curves\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into text bevel goes\n *  bevelSize: <float> // how far from text outline is bevel\n * }\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { ExtrudeBufferGeometry } from './ExtrudeGeometry.js';\n\n// TextGeometry\n\nfunction TextGeometry( text, parameters ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TextGeometry';\n\n\tthis.parameters = {\n\t\ttext: text,\n\t\tparameters: parameters\n\t};\n\n\tthis.fromBufferGeometry( new TextBufferGeometry( text, parameters ) );\n\tthis.mergeVertices();\n\n}\n\nTextGeometry.prototype = Object.create( Geometry.prototype );\nTextGeometry.prototype.constructor = TextGeometry;\n\n// TextBufferGeometry\n\nfunction TextBufferGeometry( text, parameters ) {\n\n\tparameters = parameters || {};\n\n\tvar font = parameters.font;\n\n\tif ( ! ( font && font.isFont ) ) {\n\n\t\tconsole.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\n\t\treturn new Geometry();\n\n\t}\n\n\tvar shapes = font.generateShapes( text, parameters.size, parameters.curveSegments );\n\n\t// translate parameters to ExtrudeGeometry API\n\n\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\n\n\t// defaults\n\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\n\n\tExtrudeBufferGeometry.call( this, shapes, parameters );\n\n\tthis.type = 'TextBufferGeometry';\n\n}\n\nTextBufferGeometry.prototype = Object.create( ExtrudeBufferGeometry.prototype );\nTextBufferGeometry.prototype.constructor = TextBufferGeometry;\n\n\nexport { TextGeometry, TextBufferGeometry };\n","import { Material } from './Material.js';\nimport { MultiplyOperation } from '../constants.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshPhongMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshPhongMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.specular = new Color( 0x111111 );\n\tthis.shininess = 30;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhongMaterial.prototype = Object.create( Material.prototype );\nMeshPhongMaterial.prototype.constructor = MeshPhongMaterial;\n\nMeshPhongMaterial.prototype.isMeshPhongMaterial = true;\n\nMeshPhongMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\tthis.specular.copy( source.specular );\n\tthis.shininess = source.shininess;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshPhongMaterial };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Uniform( value ) {\n\n\tif ( typeof value === 'string' ) {\n\n\t\tconsole.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\n\t\tvalue = arguments[ 1 ];\n\n\t}\n\n\tthis.value = value;\n\n}\n\nUniform.prototype.clone = function () {\n\n\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\n\n};\n\nexport { Uniform };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author benaadams / https://twitter.com/ben_a_adams\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// SphereGeometry\n\nfunction SphereGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'SphereGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n}\n\nSphereGeometry.prototype = Object.create( Geometry.prototype );\nSphereGeometry.prototype.constructor = SphereGeometry;\n\n// SphereBufferGeometry\n\nfunction SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'SphereBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradius = radius || 1;\n\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\n\n\tphiStart = phiStart !== undefined ? phiStart : 0;\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\n\n\tvar thetaEnd = thetaStart + thetaLength;\n\n\tvar ix, iy;\n\n\tvar index = 0;\n\tvar grid = [];\n\n\tvar vertex = new Vector3();\n\tvar normal = new Vector3();\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// generate vertices, normals and uvs\n\n\tfor ( iy = 0; iy <= heightSegments; iy ++ ) {\n\n\t\tvar verticesRow = [];\n\n\t\tvar v = iy / heightSegments;\n\n\t\tfor ( ix = 0; ix <= widthSegments; ix ++ ) {\n\n\t\t\tvar u = ix / widthSegments;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormal.set( vertex.x, vertex.y, vertex.z ).normalize();\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( u, 1 - v );\n\n\t\t\tverticesRow.push( index ++ );\n\n\t\t}\n\n\t\tgrid.push( verticesRow );\n\n\t}\n\n\t// indices\n\n\tfor ( iy = 0; iy < heightSegments; iy ++ ) {\n\n\t\tfor ( ix = 0; ix < widthSegments; ix ++ ) {\n\n\t\t\tvar a = grid[ iy ][ ix + 1 ];\n\t\t\tvar b = grid[ iy ][ ix ];\n\t\t\tvar c = grid[ iy + 1 ][ ix ];\n\t\t\tvar d = grid[ iy + 1 ][ ix + 1 ];\n\n\t\t\tif ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\n\t\t\tif ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nSphereBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nSphereBufferGeometry.prototype.constructor = SphereBufferGeometry;\n\n\nexport { SphereGeometry, SphereBufferGeometry };\n","import { LightShadow } from './LightShadow.js';\nimport { _Math } from '../math/Math.js';\nimport { PerspectiveCamera } from '../cameras/PerspectiveCamera.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction SpotLightShadow() {\n\n\tLightShadow.call( this, new PerspectiveCamera( 50, 1, 0.5, 500 ) );\n\n}\n\nSpotLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: SpotLightShadow,\n\n\tisSpotLightShadow: true,\n\n\tupdate: function ( light ) {\n\n\t\tvar camera = this.camera;\n\n\t\tvar fov = _Math.RAD2DEG * 2 * light.angle;\n\t\tvar aspect = this.mapSize.width / this.mapSize.height;\n\t\tvar far = light.distance || camera.far;\n\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\tcamera.fov = fov;\n\t\t\tcamera.aspect = aspect;\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { SpotLightShadow };\n","import { Light } from './Light.js';\nimport { SpotLightShadow } from './SpotLightShadow.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction SpotLight( color, intensity, distance, angle, penumbra, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'SpotLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\treturn this.intensity * Math.PI;\n\n\t\t},\n\t\tset: function ( power ) {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\tthis.intensity = power / Math.PI;\n\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\n\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new SpotLightShadow();\n\n}\n\nSpotLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: SpotLight,\n\n\tisSpotLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.angle = source.angle;\n\t\tthis.penumbra = source.penumbra;\n\t\tthis.decay = source.decay;\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { SpotLight };\n","import { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *\tuvOffset: new THREE.Vector2(),\n *\tuvScale: new THREE.Vector2()\n * }\n */\n\nfunction SpriteMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'SpriteMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\tthis.map = null;\n\n\tthis.rotation = 0;\n\n\tthis.fog = false;\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nSpriteMaterial.prototype = Object.create( Material.prototype );\nSpriteMaterial.prototype.constructor = SpriteMaterial;\nSpriteMaterial.prototype.isSpriteMaterial = true;\n\nSpriteMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\tthis.map = source.map;\n\n\tthis.rotation = source.rotation;\n\n\treturn this;\n\n};\n\n\nexport { SpriteMaterial };\n","import { ShaderMaterial } from './ShaderMaterial.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction RawShaderMaterial( parameters ) {\n\n\tShaderMaterial.call( this, parameters );\n\n\tthis.type = 'RawShaderMaterial';\n\n}\n\nRawShaderMaterial.prototype = Object.create( ShaderMaterial.prototype );\nRawShaderMaterial.prototype.constructor = RawShaderMaterial;\n\nRawShaderMaterial.prototype.isRawShaderMaterial = true;\n\n\nexport { RawShaderMaterial };\n","import { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  size: <float>,\n *  sizeAttenuation: <bool>\n * }\n */\n\nfunction PointsMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'PointsMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.size = 1;\n\tthis.sizeAttenuation = true;\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nPointsMaterial.prototype = Object.create( Material.prototype );\nPointsMaterial.prototype.constructor = PointsMaterial;\n\nPointsMaterial.prototype.isPointsMaterial = true;\n\nPointsMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.size = source.size;\n\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\treturn this;\n\n};\n\n\nexport { PointsMaterial };\n","import { MeshPhongMaterial } from './MeshPhongMaterial.js';\n\n/**\n * @author takahirox / http://github.com/takahirox\n *\n * parameters = {\n *  gradientMap: new THREE.Texture( <Image> )\n * }\n */\n\nfunction MeshToonMaterial( parameters ) {\n\n\tMeshPhongMaterial.call( this );\n\n\tthis.defines = { 'TOON': '' };\n\n\tthis.type = 'MeshToonMaterial';\n\n\tthis.gradientMap = null;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshToonMaterial.prototype = Object.create( MeshPhongMaterial.prototype );\nMeshToonMaterial.prototype.constructor = MeshToonMaterial;\n\nMeshToonMaterial.prototype.isMeshToonMaterial = true;\n\nMeshToonMaterial.prototype.copy = function ( source ) {\n\n\tMeshPhongMaterial.prototype.copy.call( this, source );\n\n\tthis.gradientMap = source.gradientMap;\n\n\treturn this;\n\n};\n\n\nexport { MeshToonMaterial };\n","import { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  opacity: <float>,\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshNormalMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshNormalMaterial';\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\tthis.lights = false;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshNormalMaterial.prototype = Object.create( Material.prototype );\nMeshNormalMaterial.prototype.constructor = MeshNormalMaterial;\n\nMeshNormalMaterial.prototype.isMeshNormalMaterial = true;\n\nMeshNormalMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshNormalMaterial };\n","import { Material } from './Material.js';\nimport { MultiplyOperation } from '../constants.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshLambertMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshLambertMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshLambertMaterial.prototype = Object.create( Material.prototype );\nMeshLambertMaterial.prototype.constructor = MeshLambertMaterial;\n\nMeshLambertMaterial.prototype.isMeshLambertMaterial = true;\n\nMeshLambertMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshLambertMaterial };\n","import {\n\tNoBlending,\n\tNormalBlending,\n\tAdditiveBlending,\n\tSubtractiveBlending,\n\tMultiplyBlending,\n\tCustomBlending,\n\n\tFaceColors,\n\tVertexColors,\n\n\tDoubleSide,\n\tBackSide,\n\n\tMirroredRepeatWrapping,\n\tRepeatWrapping\n} from '../constants.js';\nimport { _Math } from '../math/Math.js';\nimport { MaterialLoader } from './MaterialLoader.js';\nimport { TextureLoader } from './TextureLoader.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Loader() {}\n\nLoader.Handlers = {\n\n\thandlers: [],\n\n\tadd: function ( regex, loader ) {\n\n\t\tthis.handlers.push( regex, loader );\n\n\t},\n\n\tget: function ( file ) {\n\n\t\tvar handlers = this.handlers;\n\n\t\tfor ( var i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\tvar regex = handlers[ i ];\n\t\t\tvar loader = handlers[ i + 1 ];\n\n\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\treturn loader;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n};\n\nObject.assign( Loader.prototype, {\n\n\tcrossOrigin: undefined,\n\n\tonLoadStart: function () {},\n\n\tonLoadProgress: function () {},\n\n\tonLoadComplete: function () {},\n\n\tinitMaterials: function ( materials, texturePath, crossOrigin ) {\n\n\t\tvar array = [];\n\n\t\tfor ( var i = 0; i < materials.length; ++ i ) {\n\n\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath, crossOrigin );\n\n\t\t}\n\n\t\treturn array;\n\n\t},\n\n\tcreateMaterial: ( function () {\n\n\t\tvar BlendingMode = {\n\t\t\tNoBlending: NoBlending,\n\t\t\tNormalBlending: NormalBlending,\n\t\t\tAdditiveBlending: AdditiveBlending,\n\t\t\tSubtractiveBlending: SubtractiveBlending,\n\t\t\tMultiplyBlending: MultiplyBlending,\n\t\t\tCustomBlending: CustomBlending\n\t\t};\n\n\t\tvar color = new Color();\n\t\tvar textureLoader = new TextureLoader();\n\t\tvar materialLoader = new MaterialLoader();\n\n\t\treturn function createMaterial( m, texturePath, crossOrigin ) {\n\n\t\t\t// convert from old material format\n\n\t\t\tvar textures = {};\n\n\t\t\tfunction loadTexture( path, repeat, offset, wrap, anisotropy ) {\n\n\t\t\t\tvar fullPath = texturePath + path;\n\t\t\t\tvar loader = Loader.Handlers.get( fullPath );\n\n\t\t\t\tvar texture;\n\n\t\t\t\tif ( loader !== null ) {\n\n\t\t\t\t\ttexture = loader.load( fullPath );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttextureLoader.setCrossOrigin( crossOrigin );\n\t\t\t\t\ttexture = textureLoader.load( fullPath );\n\n\t\t\t\t}\n\n\t\t\t\tif ( repeat !== undefined ) {\n\n\t\t\t\t\ttexture.repeat.fromArray( repeat );\n\n\t\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = RepeatWrapping;\n\t\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = RepeatWrapping;\n\n\t\t\t\t}\n\n\t\t\t\tif ( offset !== undefined ) {\n\n\t\t\t\t\ttexture.offset.fromArray( offset );\n\n\t\t\t\t}\n\n\t\t\t\tif ( wrap !== undefined ) {\n\n\t\t\t\t\tif ( wrap[ 0 ] === 'repeat' ) texture.wrapS = RepeatWrapping;\n\t\t\t\t\tif ( wrap[ 0 ] === 'mirror' ) texture.wrapS = MirroredRepeatWrapping;\n\n\t\t\t\t\tif ( wrap[ 1 ] === 'repeat' ) texture.wrapT = RepeatWrapping;\n\t\t\t\t\tif ( wrap[ 1 ] === 'mirror' ) texture.wrapT = MirroredRepeatWrapping;\n\n\t\t\t\t}\n\n\t\t\t\tif ( anisotropy !== undefined ) {\n\n\t\t\t\t\ttexture.anisotropy = anisotropy;\n\n\t\t\t\t}\n\n\t\t\t\tvar uuid = _Math.generateUUID();\n\n\t\t\t\ttextures[ uuid ] = texture;\n\n\t\t\t\treturn uuid;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tvar json = {\n\t\t\t\tuuid: _Math.generateUUID(),\n\t\t\t\ttype: 'MeshLambertMaterial'\n\t\t\t};\n\n\t\t\tfor ( var name in m ) {\n\n\t\t\t\tvar value = m[ name ];\n\n\t\t\t\tswitch ( name ) {\n\n\t\t\t\t\tcase 'DbgColor':\n\t\t\t\t\tcase 'DbgIndex':\n\t\t\t\t\tcase 'opticalDensity':\n\t\t\t\t\tcase 'illumination':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'DbgName':\n\t\t\t\t\t\tjson.name = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'blending':\n\t\t\t\t\t\tjson.blending = BlendingMode[ value ];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'colorAmbient':\n\t\t\t\t\tcase 'mapAmbient':\n\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial:', name, 'is no longer supported.' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'colorDiffuse':\n\t\t\t\t\t\tjson.color = color.fromArray( value ).getHex();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'colorSpecular':\n\t\t\t\t\t\tjson.specular = color.fromArray( value ).getHex();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'colorEmissive':\n\t\t\t\t\t\tjson.emissive = color.fromArray( value ).getHex();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'specularCoef':\n\t\t\t\t\t\tjson.shininess = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'shading':\n\t\t\t\t\t\tif ( value.toLowerCase() === 'basic' ) json.type = 'MeshBasicMaterial';\n\t\t\t\t\t\tif ( value.toLowerCase() === 'phong' ) json.type = 'MeshPhongMaterial';\n\t\t\t\t\t\tif ( value.toLowerCase() === 'standard' ) json.type = 'MeshStandardMaterial';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapDiffuse':\n\t\t\t\t\t\tjson.map = loadTexture( value, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapDiffuseRepeat':\n\t\t\t\t\tcase 'mapDiffuseOffset':\n\t\t\t\t\tcase 'mapDiffuseWrap':\n\t\t\t\t\tcase 'mapDiffuseAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapEmissive':\n\t\t\t\t\t\tjson.emissiveMap = loadTexture( value, m.mapEmissiveRepeat, m.mapEmissiveOffset, m.mapEmissiveWrap, m.mapEmissiveAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapEmissiveRepeat':\n\t\t\t\t\tcase 'mapEmissiveOffset':\n\t\t\t\t\tcase 'mapEmissiveWrap':\n\t\t\t\t\tcase 'mapEmissiveAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapLight':\n\t\t\t\t\t\tjson.lightMap = loadTexture( value, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapLightRepeat':\n\t\t\t\t\tcase 'mapLightOffset':\n\t\t\t\t\tcase 'mapLightWrap':\n\t\t\t\t\tcase 'mapLightAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapAO':\n\t\t\t\t\t\tjson.aoMap = loadTexture( value, m.mapAORepeat, m.mapAOOffset, m.mapAOWrap, m.mapAOAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapAORepeat':\n\t\t\t\t\tcase 'mapAOOffset':\n\t\t\t\t\tcase 'mapAOWrap':\n\t\t\t\t\tcase 'mapAOAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapBump':\n\t\t\t\t\t\tjson.bumpMap = loadTexture( value, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapBumpScale':\n\t\t\t\t\t\tjson.bumpScale = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapBumpRepeat':\n\t\t\t\t\tcase 'mapBumpOffset':\n\t\t\t\t\tcase 'mapBumpWrap':\n\t\t\t\t\tcase 'mapBumpAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapNormal':\n\t\t\t\t\t\tjson.normalMap = loadTexture( value, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapNormalFactor':\n\t\t\t\t\t\tjson.normalScale = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapNormalRepeat':\n\t\t\t\t\tcase 'mapNormalOffset':\n\t\t\t\t\tcase 'mapNormalWrap':\n\t\t\t\t\tcase 'mapNormalAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapSpecular':\n\t\t\t\t\t\tjson.specularMap = loadTexture( value, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapSpecularRepeat':\n\t\t\t\t\tcase 'mapSpecularOffset':\n\t\t\t\t\tcase 'mapSpecularWrap':\n\t\t\t\t\tcase 'mapSpecularAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapMetalness':\n\t\t\t\t\t\tjson.metalnessMap = loadTexture( value, m.mapMetalnessRepeat, m.mapMetalnessOffset, m.mapMetalnessWrap, m.mapMetalnessAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapMetalnessRepeat':\n\t\t\t\t\tcase 'mapMetalnessOffset':\n\t\t\t\t\tcase 'mapMetalnessWrap':\n\t\t\t\t\tcase 'mapMetalnessAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapRoughness':\n\t\t\t\t\t\tjson.roughnessMap = loadTexture( value, m.mapRoughnessRepeat, m.mapRoughnessOffset, m.mapRoughnessWrap, m.mapRoughnessAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapRoughnessRepeat':\n\t\t\t\t\tcase 'mapRoughnessOffset':\n\t\t\t\t\tcase 'mapRoughnessWrap':\n\t\t\t\t\tcase 'mapRoughnessAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapAlpha':\n\t\t\t\t\t\tjson.alphaMap = loadTexture( value, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapAlphaRepeat':\n\t\t\t\t\tcase 'mapAlphaOffset':\n\t\t\t\t\tcase 'mapAlphaWrap':\n\t\t\t\t\tcase 'mapAlphaAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'flipSided':\n\t\t\t\t\t\tjson.side = BackSide;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'doubleSided':\n\t\t\t\t\t\tjson.side = DoubleSide;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'transparency':\n\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial: transparency has been renamed to opacity' );\n\t\t\t\t\t\tjson.opacity = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'depthTest':\n\t\t\t\t\tcase 'depthWrite':\n\t\t\t\t\tcase 'colorWrite':\n\t\t\t\t\tcase 'opacity':\n\t\t\t\t\tcase 'reflectivity':\n\t\t\t\t\tcase 'transparent':\n\t\t\t\t\tcase 'visible':\n\t\t\t\t\tcase 'wireframe':\n\t\t\t\t\t\tjson[ name ] = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'vertexColors':\n\t\t\t\t\t\tif ( value === true ) json.vertexColors = VertexColors;\n\t\t\t\t\t\tif ( value === 'face' ) json.vertexColors = FaceColors;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.error( 'THREE.Loader.createMaterial: Unsupported', name, value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( json.type === 'MeshBasicMaterial' ) delete json.emissive;\n\t\t\tif ( json.type !== 'MeshPhongMaterial' ) delete json.specular;\n\n\t\t\tif ( json.opacity < 1 ) json.transparent = true;\n\n\t\t\tmaterialLoader.setTextures( textures );\n\n\t\t\treturn materialLoader.parse( json );\n\n\t\t};\n\n\t} )()\n\n} );\n\nexport { Loader };\n","import { Vector2 } from '../math/Vector2.js';\nimport { FileLoader } from './FileLoader.js';\nimport { DefaultLoadingManager } from './LoadingManager.js';\nimport * as Materials from '../materials/Materials.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction MaterialLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\tthis.textures = {};\n\n}\n\nObject.assign( MaterialLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new FileLoader( scope.manager );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetTextures: function ( value ) {\n\n\t\tthis.textures = value;\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar textures = this.textures;\n\n\t\tfunction getTexture( name ) {\n\n\t\t\tif ( textures[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\n\n\t\t\t}\n\n\t\t\treturn textures[ name ];\n\n\t\t}\n\n\t\tvar material = new Materials[ json.type ]();\n\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\n\t\tif ( json.name !== undefined ) material.name = json.name;\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.clearCoat !== undefined ) material.clearCoat = json.clearCoat;\n\t\tif ( json.clearCoatRoughness !== undefined ) material.clearCoatRoughness = json.clearCoatRoughness;\n\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\n\t\tif ( json.fog !== undefined ) material.fog = json.fog;\n\t\tif ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\n\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\n\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\n\n\t\tif ( json.rotation !== undefined ) material.rotation = json.rotation;\n\n\t\tif ( json.linewidth !== 1 ) material.linewidth = json.linewidth;\n\t\tif ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\n\t\tif ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\n\t\tif ( json.scale !== undefined ) material.scale = json.scale;\n\n\t\tif ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\n\t\tif ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\n\t\tif ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\n\n\t\tif ( json.skinning !== undefined ) material.skinning = json.skinning;\n\t\tif ( json.morphTargets !== undefined ) material.morphTargets = json.morphTargets;\n\t\tif ( json.dithering !== undefined ) material.dithering = json.dithering;\n\n\t\tif ( json.visible !== undefined ) material.visible = json.visible;\n\t\tif ( json.userData !== undefined ) material.userData = json.userData;\n\n\t\t// Deprecated\n\n\t\tif ( json.shading !== undefined ) material.flatShading = json.shading === 1; // THREE.FlatShading\n\n\t\t// for PointsMaterial\n\n\t\tif ( json.size !== undefined ) material.size = json.size;\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\n\n\t\t// maps\n\n\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\n\n\t\tif ( json.alphaMap !== undefined ) {\n\n\t\t\tmaterial.alphaMap = getTexture( json.alphaMap );\n\t\t\tmaterial.transparent = true;\n\n\t\t}\n\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\n\n\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\n\t\tif ( json.normalScale !== undefined ) {\n\n\t\t\tvar normalScale = json.normalScale;\n\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\n\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\n\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\n\n\t\t\t}\n\n\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\n\n\t\t}\n\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\n\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\n\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\n\n\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\n\n\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\n\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\n\n\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\n\n\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\n\n\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\n\n\t\treturn material;\n\n\t}\n\n} );\n\n\nexport { MaterialLoader };\n","/**\n * @author Don McCurdy / https://www.donmccurdy.com\n */\n\nvar LoaderUtils = {\n\n\tdecodeText: function ( array ) {\n\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\n\n\t\t\treturn new TextDecoder().decode( array );\n\n\t\t}\n\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\n\n\t\tvar s = '';\n\n\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t// Implicitly assumes little-endian.\n\t\t\ts += String.fromCharCode( array[ i ] );\n\n\t\t}\n\n\t\t// Merges multi-byte utf-8 characters.\n\t\treturn decodeURIComponent( escape( s ) );\n\n\t},\n\n\textractUrlBase: function ( url ) {\n\n\t\tvar index = url.lastIndexOf( '/' );\n\n\t\tif ( index === - 1 ) return './';\n\n\t\treturn url.substr( 0, index + 1 );\n\n\t}\n\n};\n\nexport { LoaderUtils };\n","import { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Group() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Group';\n\n}\n\nGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Group,\n\n\tisGroup: true\n\n} );\n\n\nexport { Group };\n","/**\n *\n * A reference to a real property in the scene graph.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\n// Characters [].:/ are reserved for track binding syntax.\nvar RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\n\nfunction Composite( targetGroup, path, optionalParsedPath ) {\n\n\tvar parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\n\n\tthis._targetGroup = targetGroup;\n\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\n\n}\n\nObject.assign( Composite.prototype, {\n\n\tgetValue: function ( array, offset ) {\n\n\t\tthis.bind(); // bind all binding\n\n\t\tvar firstValidIndex = this._targetGroup.nCachedObjects_,\n\t\t\tbinding = this._bindings[ firstValidIndex ];\n\n\t\t// and only call .getValue on the first\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\n\n\t},\n\n\tsetValue: function ( array, offset ) {\n\n\t\tvar bindings = this._bindings;\n\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\n\t\t\t\t  n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].setValue( array, offset );\n\n\t\t}\n\n\t},\n\n\tbind: function () {\n\n\t\tvar bindings = this._bindings;\n\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\n\t\t\t\t  n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].bind();\n\n\t\t}\n\n\t},\n\n\tunbind: function () {\n\n\t\tvar bindings = this._bindings;\n\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\n\t\t\t\t  n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].unbind();\n\n\t\t}\n\n\t}\n\n} );\n\n\nfunction PropertyBinding( rootNode, path, parsedPath ) {\n\n\tthis.path = path;\n\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\n\n\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\n\n\tthis.rootNode = rootNode;\n\n}\n\nObject.assign( PropertyBinding, {\n\n\tComposite: Composite,\n\n\tcreate: function ( root, path, parsedPath ) {\n\n\t\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\n\n\t\t\treturn new PropertyBinding( root, path, parsedPath );\n\n\t\t} else {\n\n\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Replaces spaces with underscores and removes unsupported characters from\n\t * node names, to ensure compatibility with parseTrackName().\n\t *\n\t * @param  {string} name Node name to be sanitized.\n\t * @return {string}\n\t */\n\tsanitizeNodeName: ( function () {\n\n\t\tvar reservedRe = new RegExp( '[' + RESERVED_CHARS_RE + ']', 'g' );\n\n\t\treturn function sanitizeNodeName( name ) {\n\n\t\t\treturn name.replace( /\\s/g, '_' ).replace( reservedRe, '' );\n\n\t\t};\n\n\t}() ),\n\n\tparseTrackName: function () {\n\n\t\t// Attempts to allow node names from any language. ES5's `\\w` regexp matches\n\t\t// only latin characters, and the unicode \\p{L} is not yet supported. So\n\t\t// instead, we exclude reserved characters and match everything else.\n\t\tvar wordChar = '[^' + RESERVED_CHARS_RE + ']';\n\t\tvar wordCharOrDot = '[^' + RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\n\n\t\t// Parent directories, delimited by '/' or ':'. Currently unused, but must\n\t\t// be matched to parse the rest of the track name.\n\t\tvar directoryRe = /((?:WC+[\\/:])*)/.source.replace( 'WC', wordChar );\n\n\t\t// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\n\t\tvar nodeRe = /(WCOD+)?/.source.replace( 'WCOD', wordCharOrDot );\n\n\t\t// Object on target node, and accessor. May not contain reserved\n\t\t// characters. Accessor may contain any character except closing bracket.\n\t\tvar objectRe = /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', wordChar );\n\n\t\t// Property and accessor. May not contain reserved characters. Accessor may\n\t\t// contain any non-bracket characters.\n\t\tvar propertyRe = /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', wordChar );\n\n\t\tvar trackRe = new RegExp( ''\n\t\t\t+ '^'\n\t\t\t+ directoryRe\n\t\t\t+ nodeRe\n\t\t\t+ objectRe\n\t\t\t+ propertyRe\n\t\t\t+ '$'\n\t\t);\n\n\t\tvar supportedObjectNames = [ 'material', 'materials', 'bones' ];\n\n\t\treturn function parseTrackName( trackName ) {\n\n\t\t\tvar matches = trackRe.exec( trackName );\n\n\t\t\tif ( ! matches ) {\n\n\t\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\n\n\t\t\t}\n\n\t\t\tvar results = {\n\t\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\n\t\t\t\tnodeName: matches[ 2 ],\n\t\t\t\tobjectName: matches[ 3 ],\n\t\t\t\tobjectIndex: matches[ 4 ],\n\t\t\t\tpropertyName: matches[ 5 ], // required\n\t\t\t\tpropertyIndex: matches[ 6 ]\n\t\t\t};\n\n\t\t\tvar lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\n\n\t\t\tif ( lastDot !== undefined && lastDot !== - 1 ) {\n\n\t\t\t\tvar objectName = results.nodeName.substring( lastDot + 1 );\n\n\t\t\t\t// Object names must be checked against a whitelist. Otherwise, there\n\t\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\n\t\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\n\t\t\t\t// include '.' characters).\n\t\t\t\tif ( supportedObjectNames.indexOf( objectName ) !== - 1 ) {\n\n\t\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\n\t\t\t\t\tresults.objectName = objectName;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\n\n\t\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\n\n\t\t\t}\n\n\t\t\treturn results;\n\n\t\t};\n\n\t}(),\n\n\tfindNode: function ( root, nodeName ) {\n\n\t\tif ( ! nodeName || nodeName === \"\" || nodeName === \"root\" || nodeName === \".\" || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\n\n\t\t\treturn root;\n\n\t\t}\n\n\t\t// search into skeleton bones.\n\t\tif ( root.skeleton ) {\n\n\t\t\tvar bone = root.skeleton.getBoneByName( nodeName );\n\n\t\t\tif ( bone !== undefined ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// search into node subtree.\n\t\tif ( root.children ) {\n\n\t\t\tvar searchNodeSubtree = function ( children ) {\n\n\t\t\t\tfor ( var i = 0; i < children.length; i ++ ) {\n\n\t\t\t\t\tvar childNode = children[ i ];\n\n\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\n\n\t\t\t\t\t\treturn childNode;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar result = searchNodeSubtree( childNode.children );\n\n\t\t\t\t\tif ( result ) return result;\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t};\n\n\t\t\tvar subTreeNode = searchNodeSubtree( root.children );\n\n\t\t\tif ( subTreeNode ) {\n\n\t\t\t\treturn subTreeNode;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n} );\n\nObject.assign( PropertyBinding.prototype, { // prototype, continued\n\n\t// these are used to \"bind\" a nonexistent property\n\t_getValue_unavailable: function () {},\n\t_setValue_unavailable: function () {},\n\n\tBindingType: {\n\t\tDirect: 0,\n\t\tEntireArray: 1,\n\t\tArrayElement: 2,\n\t\tHasFromToArray: 3\n\t},\n\n\tVersioning: {\n\t\tNone: 0,\n\t\tNeedsUpdate: 1,\n\t\tMatrixWorldNeedsUpdate: 2\n\t},\n\n\tGetterByBindingType: [\n\n\t\tfunction getValue_direct( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\n\n\t\t},\n\n\t\tfunction getValue_array( buffer, offset ) {\n\n\t\t\tvar source = this.resolvedProperty;\n\n\t\t\tfor ( var i = 0, n = source.length; i !== n; ++ i ) {\n\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\n\n\t\t\t}\n\n\t\t},\n\n\t\tfunction getValue_arrayElement( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\n\n\t\t},\n\n\t\tfunction getValue_toArray( buffer, offset ) {\n\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\n\n\t\t}\n\n\t],\n\n\tSetterByBindingTypeAndVersioning: [\n\n\t\t[\n\t\t\t// Direct\n\n\t\t\tfunction setValue_direct( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// EntireArray\n\n\t\t\tfunction setValue_array( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// ArrayElement\n\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// HasToFromArray\n\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t]\n\n\t],\n\n\tgetValue: function getValue_unbound( targetArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.getValue( targetArray, offset );\n\n\t\t// Note: This class uses a State pattern on a per-method basis:\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n\t\t// prototype version of these methods with one that represents\n\t\t// the bound state. When the property is not found, the methods\n\t\t// become no-ops.\n\n\t},\n\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.setValue( sourceArray, offset );\n\n\t},\n\n\t// create getter / setter pair for a property in the scene graph\n\tbind: function () {\n\n\t\tvar targetObject = this.node,\n\t\t\tparsedPath = this.parsedPath,\n\n\t\t\tobjectName = parsedPath.objectName,\n\t\t\tpropertyName = parsedPath.propertyName,\n\t\t\tpropertyIndex = parsedPath.propertyIndex;\n\n\t\tif ( ! targetObject ) {\n\n\t\t\ttargetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName ) || this.rootNode;\n\n\t\t\tthis.node = targetObject;\n\n\t\t}\n\n\t\t// set fail state so we can just 'return' on error\n\t\tthis.getValue = this._getValue_unavailable;\n\t\tthis.setValue = this._setValue_unavailable;\n\n\t\t// ensure there is a value node\n\t\tif ( ! targetObject ) {\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( objectName ) {\n\n\t\t\tvar objectIndex = parsedPath.objectIndex;\n\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\n\t\t\tswitch ( objectName ) {\n\n\t\t\t\tcase 'materials':\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.materials;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bones':\n\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\n\t\t\t\t\t// and convert the integer string to a true integer.\n\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\n\n\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\tfor ( var i = 0; i < targetObject.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\n\n\t\t\t\t\t\t\tobjectIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\n\n\t\t\t}\n\n\n\t\t\tif ( objectIndex !== undefined ) {\n\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// resolve property\n\t\tvar nodeProperty = targetObject[ propertyName ];\n\n\t\tif ( nodeProperty === undefined ) {\n\n\t\t\tvar nodeName = parsedPath.nodeName;\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\n\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// determine versioning scheme\n\t\tvar versioning = this.Versioning.None;\n\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\n\n\t\t\tversioning = this.Versioning.NeedsUpdate;\n\t\t\tthis.targetObject = targetObject;\n\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\n\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\n\t\t\tthis.targetObject = targetObject;\n\n\t\t}\n\n\t\t// determine how the property gets bound\n\t\tvar bindingType = this.BindingType.Direct;\n\n\t\tif ( propertyIndex !== undefined ) {\n\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\n\n\t\t\tif ( propertyName === \"morphTargetInfluences\" ) {\n\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n\n\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\tif ( ! targetObject.geometry ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( targetObject.geometry.isBufferGeometry ) {\n\n\t\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0; i < this.node.geometry.morphAttributes.position.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject.geometry.morphAttributes.position[ i ].name === propertyIndex ) {\n\n\t\t\t\t\t\t\tpropertyIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( ! targetObject.geometry.morphTargets ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0; i < this.node.geometry.morphTargets.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject.geometry.morphTargets[ i ].name === propertyIndex ) {\n\n\t\t\t\t\t\t\tpropertyIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbindingType = this.BindingType.ArrayElement;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\t\t\tthis.propertyIndex = propertyIndex;\n\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\n\n\t\t\t// must use copy for Object3D.Euler/Quaternion\n\n\t\t\tbindingType = this.BindingType.HasFromToArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else if ( Array.isArray( nodeProperty ) ) {\n\n\t\t\tbindingType = this.BindingType.EntireArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else {\n\n\t\t\tthis.propertyName = propertyName;\n\n\t\t}\n\n\t\t// select getter / setter\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\n\n\t},\n\n\tunbind: function () {\n\n\t\tthis.node = null;\n\n\t\t// back to the prototype version of getValue / setValue\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n} );\n\n//!\\ DECLARE ALIAS AFTER assign prototype !\nObject.assign( PropertyBinding.prototype, {\n\n\t// initial state of these methods that calls 'bind'\n\t_getValue_unbound: PropertyBinding.prototype.getValue,\n\t_setValue_unbound: PropertyBinding.prototype.setValue,\n\n} );\n\nexport { PropertyBinding };\n","/**\n * @author tschw\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n */\n\nvar AnimationUtils = {\n\n\t// same as Array.prototype.slice, but also works on typed arrays\n\tarraySlice: function ( array, from, to ) {\n\n\t\tif ( AnimationUtils.isTypedArray( array ) ) {\n\n\t\t\t// in ios9 array.subarray(from, undefined) will return empty array\n\t\t\t// but array.subarray(from) or array.subarray(from, len) is correct\n\t\t\treturn new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\n\n\t\t}\n\n\t\treturn array.slice( from, to );\n\n\t},\n\n\t// converts an array to a specific type\n\tconvertArray: function ( array, type, forceClone ) {\n\n\t\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t\t\t! forceClone && array.constructor === type ) return array;\n\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\t\treturn new type( array ); // create typed array\n\n\t\t}\n\n\t\treturn Array.prototype.slice.call( array ); // create Array\n\n\t},\n\n\tisTypedArray: function ( object ) {\n\n\t\treturn ArrayBuffer.isView( object ) &&\n\t\t\t\t! ( object instanceof DataView );\n\n\t},\n\n\t// returns an array by which times and values can be sorted\n\tgetKeyframeOrder: function ( times ) {\n\n\t\tfunction compareTime( i, j ) {\n\n\t\t\treturn times[ i ] - times[ j ];\n\n\t\t}\n\n\t\tvar n = times.length;\n\t\tvar result = new Array( n );\n\t\tfor ( var i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\t\tresult.sort( compareTime );\n\n\t\treturn result;\n\n\t},\n\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\n\tsortedArray: function ( values, stride, order ) {\n\n\t\tvar nValues = values.length;\n\t\tvar result = new values.constructor( nValues );\n\n\t\tfor ( var i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\t\tvar srcOffset = order[ i ] * stride;\n\n\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// function for parsing AOS keyframe formats\n\tflattenJSON: function ( jsonKeys, times, values, valuePropertyName ) {\n\n\t\tvar i = 1, key = jsonKeys[ 0 ];\n\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t}\n\n\t\tif ( key === undefined ) return; // no data\n\n\t\tvar value = key[ valuePropertyName ];\n\t\tif ( value === undefined ) return; // no data\n\n\t\tif ( Array.isArray( value ) ) {\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else if ( value.toArray !== undefined ) {\n\n\t\t\t// ...assume THREE.Math-ish\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else {\n\n\t\t\t// otherwise push as-is\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push( value );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t}\n\n\t}\n\n};\n\n\nexport { AnimationUtils };\n","import { InterpolateDiscrete } from '../../constants.js';\nimport { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track that interpolates Strings\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction StringKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nStringKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: StringKeyframeTrack,\n\n\tValueTypeName: 'string',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\n\tInterpolantFactoryMethodSmooth: undefined\n\n} );\n\nexport { StringKeyframeTrack };\n","import { InterpolateDiscrete } from '../../constants.js';\nimport { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track of Boolean keyframe values.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction BooleanKeyframeTrack( name, times, values ) {\n\n\tKeyframeTrack.call( this, name, times, values );\n\n}\n\nBooleanKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: BooleanKeyframeTrack,\n\n\tValueTypeName: 'bool',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\tInterpolantFactoryMethodSmooth: undefined\n\n\t// Note: Actually this track could have a optimized / compressed\n\t// representation of a single value and a custom interpolant that\n\t// computes \"firstValue ^ isOdd( index )\".\n\n} );\n\nexport { BooleanKeyframeTrack };\n","/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n * @author tschw\n */\n\nfunction Interpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tthis.parameterPositions = parameterPositions;\n\tthis._cachedIndex = 0;\n\n\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\tthis.sampleValues = sampleValues;\n\tthis.valueSize = sampleSize;\n\n}\n\nObject.assign( Interpolant.prototype, {\n\n\tevaluate: function ( t ) {\n\n\t\tvar pp = this.parameterPositions,\n\t\t\ti1 = this._cachedIndex,\n\n\t\t\tt1 = pp[ i1 ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tvar right;\n\n\t\t\t\tlinear_scan: {\n\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( var giveUpAt = i1 + 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tvar t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( var giveUpAt = i1 - 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tvar mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[ i1 ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t},\n\n\tsettings: null, // optional, subclass-specific settings structure\n\t// Note: The indirection allows central control of many interpolants.\n\n\t// --- Protected interface\n\n\tDefaultSettings_: {},\n\n\tgetSettings_: function () {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t},\n\n\tcopySampleValue_: function ( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// Template methods for derived classes:\n\n\tinterpolate_: function ( /* i1, t0, t, t1 */ ) {\n\n\t\tthrow new Error( 'call to abstract method' );\n\t\t// implementations shall return this.resultBuffer\n\n\t},\n\n\tintervalChanged_: function ( /* i1, t0, t1 */ ) {\n\n\t\t// empty\n\n\t}\n\n} );\n\n//!\\ DECLARE ALIAS AFTER assign prototype !\nObject.assign( Interpolant.prototype, {\n\n\t//( 0, t, t0 ), returns this.resultBuffer\n\tbeforeStart_: Interpolant.prototype.copySampleValue_,\n\n\t//( N-1, tN-1, t ), returns this.resultBuffer\n\tafterEnd_: Interpolant.prototype.copySampleValue_,\n\n} );\n\n\nexport { Interpolant };\n","import { Interpolant } from '../Interpolant.js';\nimport { Quaternion } from '../Quaternion.js';\n\n/**\n * Spherical linear unit quaternion interpolant.\n *\n * @author tschw\n */\n\nfunction QuaternionLinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nQuaternionLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: QuaternionLinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset = i1 * stride,\n\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\n\n\t\tfor ( var end = offset + stride; offset !== end; offset += 4 ) {\n\n\t\t\tQuaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n\nexport { QuaternionLinearInterpolant };\n","import { InterpolateLinear } from '../../constants.js';\nimport { KeyframeTrack } from '../KeyframeTrack.js';\nimport { QuaternionLinearInterpolant } from '../../math/interpolants/QuaternionLinearInterpolant.js';\n\n/**\n *\n * A Track of quaternion keyframe values.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction QuaternionKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nQuaternionKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: QuaternionKeyframeTrack,\n\n\tValueTypeName: 'quaternion',\n\n\t// ValueBufferType is inherited\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\treturn new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\n\n} );\n\nexport { QuaternionKeyframeTrack };\n","import { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track of keyframe values that represent color.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction ColorKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nColorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: ColorKeyframeTrack,\n\n\tValueTypeName: 'color'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n\t// Note: Very basic implementation and nothing special yet.\n\t// However, this is the place for color space parameterization.\n\n} );\n\nexport { ColorKeyframeTrack };\n","import { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track of numeric keyframe values.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction NumberKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nNumberKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: NumberKeyframeTrack,\n\n\tValueTypeName: 'number'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\nexport { NumberKeyframeTrack };\n","import { ZeroCurvatureEnding } from '../../constants.js';\nimport { Interpolant } from '../Interpolant.js';\nimport { WrapAroundEnding, ZeroSlopeEnding } from '../../constants.js';\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n *\n * @author tschw\n */\n\nfunction CubicInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\tthis._weightPrev = - 0;\n\tthis._offsetPrev = - 0;\n\tthis._weightNext = - 0;\n\tthis._offsetNext = - 0;\n\n}\n\nCubicInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: CubicInterpolant,\n\n\tDefaultSettings_: {\n\n\t\tendingStart: ZeroCurvatureEnding,\n\t\tendingEnd: ZeroCurvatureEnding\n\n\t},\n\n\tintervalChanged_: function ( i1, t0, t1 ) {\n\n\t\tvar pp = this.parameterPositions,\n\t\t\tiPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t},\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tvar sP = - wP * ppp + 2 * wP * pp - wP * p;\n\t\tvar s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\n\t\tvar s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\n\t\tvar sN = wN * ppp - wN * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n\nexport { CubicInterpolant };\n","import { Interpolant } from '../Interpolant.js';\n\n/**\n * @author tschw\n */\n\nfunction LinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: LinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset1 = i1 * stride,\n\t\t\toffset0 = offset1 - stride,\n\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tweight0 = 1 - weight1;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n\nexport { LinearInterpolant };\n","import { Interpolant } from '../Interpolant.js';\n\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceeding\n * the parameter.\n *\n * @author tschw\n */\n\nfunction DiscreteInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nDiscreteInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: DiscreteInterpolant,\n\n\tinterpolate_: function ( i1 /*, t0, t, t1 */ ) {\n\n\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t}\n\n} );\n\n\nexport { DiscreteInterpolant };\n","import { StringKeyframeTrack } from './tracks/StringKeyframeTrack.js';\nimport { BooleanKeyframeTrack } from './tracks/BooleanKeyframeTrack.js';\nimport { QuaternionKeyframeTrack } from './tracks/QuaternionKeyframeTrack.js';\nimport { ColorKeyframeTrack } from './tracks/ColorKeyframeTrack.js';\nimport { VectorKeyframeTrack } from './tracks/VectorKeyframeTrack.js';\nimport { NumberKeyframeTrack } from './tracks/NumberKeyframeTrack.js';\nimport {\n\tInterpolateLinear,\n\tInterpolateSmooth,\n\tInterpolateDiscrete\n} from '../constants.js';\nimport { CubicInterpolant } from '../math/interpolants/CubicInterpolant.js';\nimport { LinearInterpolant } from '../math/interpolants/LinearInterpolant.js';\nimport { DiscreteInterpolant } from '../math/interpolants/DiscreteInterpolant.js';\nimport { AnimationUtils } from './AnimationUtils.js';\n\n/**\n *\n * A timed sequence of keyframes for a specific property.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction KeyframeTrack( name, times, values, interpolation ) {\n\n\tif ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\n\tif ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\n\n\tthis.name = name;\n\n\tthis.times = AnimationUtils.convertArray( times, this.TimeBufferType );\n\tthis.values = AnimationUtils.convertArray( values, this.ValueBufferType );\n\n\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\n\n\tthis.validate();\n\tthis.optimize();\n\n}\n\n// Static methods:\n\nObject.assign( KeyframeTrack, {\n\n\t// Serialization (in static context, because of constructor invocation\n\t// and automatic invocation of .toJSON):\n\n\tparse: function ( json ) {\n\n\t\tif ( json.type === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\n\n\t\t}\n\n\t\tvar trackType = KeyframeTrack._getTrackTypeForValueTypeName( json.type );\n\n\t\tif ( json.times === undefined ) {\n\n\t\t\tvar times = [], values = [];\n\n\t\t\tAnimationUtils.flattenJSON( json.keys, times, values, 'value' );\n\n\t\t\tjson.times = times;\n\t\t\tjson.values = values;\n\n\t\t}\n\n\t\t// derived classes can define a static parse method\n\t\tif ( trackType.parse !== undefined ) {\n\n\t\t\treturn trackType.parse( json );\n\n\t\t} else {\n\n\t\t\t// by default, we assume a constructor compatible with the base\n\t\t\treturn new trackType( json.name, json.times, json.values, json.interpolation );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( track ) {\n\n\t\tvar trackType = track.constructor;\n\n\t\tvar json;\n\n\t\t// derived classes can define a static toJSON method\n\t\tif ( trackType.toJSON !== undefined ) {\n\n\t\t\tjson = trackType.toJSON( track );\n\n\t\t} else {\n\n\t\t\t// by default, we assume the data can be serialized as-is\n\t\t\tjson = {\n\n\t\t\t\t'name': track.name,\n\t\t\t\t'times': AnimationUtils.convertArray( track.times, Array ),\n\t\t\t\t'values': AnimationUtils.convertArray( track.values, Array )\n\n\t\t\t};\n\n\t\t\tvar interpolation = track.getInterpolation();\n\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\n\n\t\t\t\tjson.interpolation = interpolation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tjson.type = track.ValueTypeName; // mandatory\n\n\t\treturn json;\n\n\t},\n\n\t_getTrackTypeForValueTypeName: function ( typeName ) {\n\n\t\tswitch ( typeName.toLowerCase() ) {\n\n\t\t\tcase 'scalar':\n\t\t\tcase 'double':\n\t\t\tcase 'float':\n\t\t\tcase 'number':\n\t\t\tcase 'integer':\n\n\t\t\t\treturn NumberKeyframeTrack;\n\n\t\t\tcase 'vector':\n\t\t\tcase 'vector2':\n\t\t\tcase 'vector3':\n\t\t\tcase 'vector4':\n\n\t\t\t\treturn VectorKeyframeTrack;\n\n\t\t\tcase 'color':\n\n\t\t\t\treturn ColorKeyframeTrack;\n\n\t\t\tcase 'quaternion':\n\n\t\t\t\treturn QuaternionKeyframeTrack;\n\n\t\t\tcase 'bool':\n\t\t\tcase 'boolean':\n\n\t\t\t\treturn BooleanKeyframeTrack;\n\n\t\t\tcase 'string':\n\n\t\t\t\treturn StringKeyframeTrack;\n\n\t\t}\n\n\t\tthrow new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\n\n\t}\n\n} );\n\nObject.assign( KeyframeTrack.prototype, {\n\n\tconstructor: KeyframeTrack,\n\n\tTimeBufferType: Float32Array,\n\n\tValueBufferType: Float32Array,\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodDiscrete: function ( result ) {\n\n\t\treturn new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\treturn new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: function ( result ) {\n\n\t\treturn new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tsetInterpolation: function ( interpolation ) {\n\n\t\tvar factoryMethod;\n\n\t\tswitch ( interpolation ) {\n\n\t\t\tcase InterpolateDiscrete:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateLinear:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateSmooth:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( factoryMethod === undefined ) {\n\n\t\t\tvar message = \"unsupported interpolation for \" +\n\t\t\t\tthis.ValueTypeName + \" keyframe track named \" + this.name;\n\n\t\t\tif ( this.createInterpolant === undefined ) {\n\n\t\t\t\t// fall back to default, unless the default itself is messed up\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\n\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconsole.warn( 'THREE.KeyframeTrack:', message );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.createInterpolant = factoryMethod;\n\n\t},\n\n\tgetInterpolation: function () {\n\n\t\tswitch ( this.createInterpolant ) {\n\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\n\n\t\t\t\treturn InterpolateDiscrete;\n\n\t\t\tcase this.InterpolantFactoryMethodLinear:\n\n\t\t\t\treturn InterpolateLinear;\n\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\n\n\t\t\t\treturn InterpolateSmooth;\n\n\t\t}\n\n\t},\n\n\tgetValueSize: function () {\n\n\t\treturn this.values.length / this.times.length;\n\n\t},\n\n\t// move all keyframes either forwards or backwards in time\n\tshift: function ( timeOffset ) {\n\n\t\tif ( timeOffset !== 0.0 ) {\n\n\t\t\tvar times = this.times;\n\n\t\t\tfor ( var i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] += timeOffset;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\tscale: function ( timeScale ) {\n\n\t\tif ( timeScale !== 1.0 ) {\n\n\t\t\tvar times = this.times;\n\n\t\t\tfor ( var i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] *= timeScale;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\ttrim: function ( startTime, endTime ) {\n\n\t\tvar times = this.times,\n\t\t\tnKeys = times.length,\n\t\t\tfrom = 0,\n\t\t\tto = nKeys - 1;\n\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) {\n\n\t\t\t++ from;\n\n\t\t}\n\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) {\n\n\t\t\t-- to;\n\n\t\t}\n\n\t\t++ to; // inclusive -> exclusive bound\n\n\t\tif ( from !== 0 || to !== nKeys ) {\n\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\n\t\t\tif ( from >= to ) to = Math.max( to, 1 ), from = to - 1;\n\n\t\t\tvar stride = this.getValueSize();\n\t\t\tthis.times = AnimationUtils.arraySlice( times, from, to );\n\t\t\tthis.values = AnimationUtils.arraySlice( this.values, from * stride, to * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\tvalidate: function () {\n\n\t\tvar valid = true;\n\n\t\tvar valueSize = this.getValueSize();\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tvar times = this.times,\n\t\t\tvalues = this.values,\n\n\t\t\tnKeys = times.length;\n\n\t\tif ( nKeys === 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Track is empty.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tvar prevTime = null;\n\n\t\tfor ( var i = 0; i !== nKeys; i ++ ) {\n\n\t\t\tvar currTime = times[ i ];\n\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tprevTime = currTime;\n\n\t\t}\n\n\t\tif ( values !== undefined ) {\n\n\t\t\tif ( AnimationUtils.isTypedArray( values ) ) {\n\n\t\t\t\tfor ( var i = 0, n = values.length; i !== n; ++ i ) {\n\n\t\t\t\t\tvar value = values[ i ];\n\n\t\t\t\t\tif ( isNaN( value ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn valid;\n\n\t},\n\n\t// removes equivalent sequential keys as common in morph target sequences\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\toptimize: function () {\n\n\t\tvar times = this.times,\n\t\t\tvalues = this.values,\n\t\t\tstride = this.getValueSize(),\n\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\n\n\t\t\twriteIndex = 1,\n\t\t\tlastIndex = times.length - 1;\n\n\t\tfor ( var i = 1; i < lastIndex; ++ i ) {\n\n\t\t\tvar keep = false;\n\n\t\t\tvar time = times[ i ];\n\t\t\tvar timeNext = times[ i + 1 ];\n\n\t\t\t// remove adjacent keyframes scheduled at the same time\n\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\n\n\t\t\t\tif ( ! smoothInterpolation ) {\n\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\n\n\t\t\t\t\tvar offset = i * stride,\n\t\t\t\t\t\toffsetP = offset - stride,\n\t\t\t\t\t\toffsetN = offset + stride;\n\n\t\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvar value = values[ offset + j ];\n\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\n\n\t\t\t\t\t\t\tkeep = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tkeep = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// in-place compaction\n\n\t\t\tif ( keep ) {\n\n\t\t\t\tif ( i !== writeIndex ) {\n\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\n\n\t\t\t\t\tvar readOffset = i * stride,\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\n\n\t\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t++ writeIndex;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// flush last keyframe (compaction looks ahead)\n\n\t\tif ( lastIndex > 0 ) {\n\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\n\n\t\t\tfor ( var readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t}\n\n\t\t\t++ writeIndex;\n\n\t\t}\n\n\t\tif ( writeIndex !== times.length ) {\n\n\t\t\tthis.times = AnimationUtils.arraySlice( times, 0, writeIndex );\n\t\t\tthis.values = AnimationUtils.arraySlice( values, 0, writeIndex * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nexport { KeyframeTrack };\n","import { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track of vectored keyframe values.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction VectorKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nVectorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: VectorKeyframeTrack,\n\n\tValueTypeName: 'vector'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\nexport { VectorKeyframeTrack };\n","import { VectorKeyframeTrack } from './tracks/VectorKeyframeTrack.js';\nimport { QuaternionKeyframeTrack } from './tracks/QuaternionKeyframeTrack.js';\nimport { NumberKeyframeTrack } from './tracks/NumberKeyframeTrack.js';\nimport { AnimationUtils } from './AnimationUtils.js';\nimport { KeyframeTrack } from './KeyframeTrack.js';\nimport { _Math } from '../math/Math.js';\n\n/**\n *\n * Reusable set of Tracks that represent an animation.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n */\n\nfunction AnimationClip( name, duration, tracks ) {\n\n\tthis.name = name;\n\tthis.tracks = tracks;\n\tthis.duration = ( duration !== undefined ) ? duration : - 1;\n\n\tthis.uuid = _Math.generateUUID();\n\n\t// this means it should figure out its duration by scanning the tracks\n\tif ( this.duration < 0 ) {\n\n\t\tthis.resetDuration();\n\n\t}\n\n\tthis.optimize();\n\n}\n\nObject.assign( AnimationClip, {\n\n\tparse: function ( json ) {\n\n\t\tvar tracks = [],\n\t\t\tjsonTracks = json.tracks,\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\n\n\t\tfor ( var i = 0, n = jsonTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( KeyframeTrack.parse( jsonTracks[ i ] ).scale( frameTime ) );\n\n\t\t}\n\n\t\treturn new AnimationClip( json.name, json.duration, tracks );\n\n\t},\n\n\ttoJSON: function ( clip ) {\n\n\t\tvar tracks = [],\n\t\t\tclipTracks = clip.tracks;\n\n\t\tvar json = {\n\n\t\t\t'name': clip.name,\n\t\t\t'duration': clip.duration,\n\t\t\t'tracks': tracks\n\n\t\t};\n\n\t\tfor ( var i = 0, n = clipTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\n\n\t\t}\n\n\t\treturn json;\n\n\t},\n\n\tCreateFromMorphTargetSequence: function ( name, morphTargetSequence, fps, noLoop ) {\n\n\t\tvar numMorphTargets = morphTargetSequence.length;\n\t\tvar tracks = [];\n\n\t\tfor ( var i = 0; i < numMorphTargets; i ++ ) {\n\n\t\t\tvar times = [];\n\t\t\tvar values = [];\n\n\t\t\ttimes.push(\n\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\n\t\t\t\ti,\n\t\t\t\t( i + 1 ) % numMorphTargets );\n\n\t\t\tvalues.push( 0, 1, 0 );\n\n\t\t\tvar order = AnimationUtils.getKeyframeOrder( times );\n\t\t\ttimes = AnimationUtils.sortedArray( times, 1, order );\n\t\t\tvalues = AnimationUtils.sortedArray( values, 1, order );\n\n\t\t\t// if there is a key at the first frame, duplicate it as the\n\t\t\t// last frame as well for perfect loop.\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\n\n\t\t\t\ttimes.push( numMorphTargets );\n\t\t\t\tvalues.push( values[ 0 ] );\n\n\t\t\t}\n\n\t\t\ttracks.push(\n\t\t\t\tnew NumberKeyframeTrack(\n\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\n\t\t\t\t\ttimes, values\n\t\t\t\t).scale( 1.0 / fps ) );\n\n\t\t}\n\n\t\treturn new AnimationClip( name, - 1, tracks );\n\n\t},\n\n\tfindByName: function ( objectOrClipArray, name ) {\n\n\t\tvar clipArray = objectOrClipArray;\n\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\n\n\t\t\tvar o = objectOrClipArray;\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\n\n\t\t}\n\n\t\tfor ( var i = 0; i < clipArray.length; i ++ ) {\n\n\t\t\tif ( clipArray[ i ].name === name ) {\n\n\t\t\t\treturn clipArray[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\tCreateClipsFromMorphTargetSequences: function ( morphTargets, fps, noLoop ) {\n\n\t\tvar animationToMorphTargets = {};\n\n\t\t// tested with https://regex101.com/ on trick sequences\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\n\t\tvar pattern = /^([\\w-]*?)([\\d]+)$/;\n\n\t\t// sort morph target names into animation groups based\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\n\t\tfor ( var i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tvar morphTarget = morphTargets[ i ];\n\t\t\tvar parts = morphTarget.name.match( pattern );\n\n\t\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\t\tvar name = parts[ 1 ];\n\n\t\t\t\tvar animationMorphTargets = animationToMorphTargets[ name ];\n\t\t\t\tif ( ! animationMorphTargets ) {\n\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\n\n\t\t\t\t}\n\n\t\t\t\tanimationMorphTargets.push( morphTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar clips = [];\n\n\t\tfor ( var name in animationToMorphTargets ) {\n\n\t\t\tclips.push( AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\n\n\t\t}\n\n\t\treturn clips;\n\n\t},\n\n\t// parse the animation.hierarchy format\n\tparseAnimation: function ( animation, bones ) {\n\n\t\tif ( ! animation ) {\n\n\t\t\tconsole.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\n\n\t\t\t// only return track if there are actually keys.\n\t\t\tif ( animationKeys.length !== 0 ) {\n\n\t\t\t\tvar times = [];\n\t\t\t\tvar values = [];\n\n\t\t\t\tAnimationUtils.flattenJSON( animationKeys, times, values, propertyName );\n\n\t\t\t\t// empty keys are filtered out, so check again\n\t\t\t\tif ( times.length !== 0 ) {\n\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar tracks = [];\n\n\t\tvar clipName = animation.name || 'default';\n\t\t// automatic length determination in AnimationClip.\n\t\tvar duration = animation.length || - 1;\n\t\tvar fps = animation.fps || 30;\n\n\t\tvar hierarchyTracks = animation.hierarchy || [];\n\n\t\tfor ( var h = 0; h < hierarchyTracks.length; h ++ ) {\n\n\t\t\tvar animationKeys = hierarchyTracks[ h ].keys;\n\n\t\t\t// skip empty tracks\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\n\n\t\t\t// process morph targets\n\t\t\tif ( animationKeys[ 0 ].morphTargets ) {\n\n\t\t\t\t// figure out all morph targets used in this track\n\t\t\t\tvar morphTargetNames = {};\n\n\t\t\t\tfor ( var k = 0; k < animationKeys.length; k ++ ) {\n\n\t\t\t\t\tif ( animationKeys[ k ].morphTargets ) {\n\n\t\t\t\t\t\tfor ( var m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// create a track for each morph target with all zero\n\t\t\t\t// morphTargetInfluences except for the keys in which\n\t\t\t\t// the morphTarget is named.\n\t\t\t\tfor ( var morphTargetName in morphTargetNames ) {\n\n\t\t\t\t\tvar times = [];\n\t\t\t\t\tvar values = [];\n\n\t\t\t\t\tfor ( var m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\n\n\t\t\t\t\t\tvar animationKey = animationKeys[ k ];\n\n\t\t\t\t\t\ttimes.push( animationKey.time );\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\n\n\t\t\t\t}\n\n\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\n\n\t\t\t} else {\n\n\t\t\t\t// ...assume skeletal animation\n\n\t\t\t\tvar boneName = '.bones[' + bones[ h ].name + ']';\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\n\t\t\t\t\tanimationKeys, 'pos', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\n\t\t\t\t\tanimationKeys, 'rot', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\n\t\t\t\t\tanimationKeys, 'scl', tracks );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tracks.length === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar clip = new AnimationClip( clipName, duration, tracks );\n\n\t\treturn clip;\n\n\t}\n\n} );\n\nObject.assign( AnimationClip.prototype, {\n\n\tresetDuration: function () {\n\n\t\tvar tracks = this.tracks, duration = 0;\n\n\t\tfor ( var i = 0, n = tracks.length; i !== n; ++ i ) {\n\n\t\t\tvar track = this.tracks[ i ];\n\n\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\n\n\t\t}\n\n\t\tthis.duration = duration;\n\n\t},\n\n\ttrim: function () {\n\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\toptimize: function () {\n\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].optimize();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { AnimationClip };\n","import { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Fog( color, near, far ) {\n\n\tthis.name = '';\n\n\tthis.color = new Color( color );\n\n\tthis.near = ( near !== undefined ) ? near : 1;\n\tthis.far = ( far !== undefined ) ? far : 1000;\n\n}\n\nFog.prototype.isFog = true;\n\nFog.prototype.clone = function () {\n\n\treturn new Fog( this.color.getHex(), this.near, this.far );\n\n};\n\nFog.prototype.toJSON = function ( /* meta */ ) {\n\n\treturn {\n\t\ttype: 'Fog',\n\t\tcolor: this.color.getHex(),\n\t\tnear: this.near,\n\t\tfar: this.far\n\t};\n\n};\n\nexport { Fog };\n","import { Light } from './Light.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author abelnation / http://github.com/abelnation\n */\n\nfunction RectAreaLight( color, intensity, width, height ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'RectAreaLight';\n\tthis.target = new Object3D();\n\n\tthis.width = ( width !== undefined ) ? width : 10;\n\tthis.height = ( height !== undefined ) ? height : 10;\n\n}\n\nRectAreaLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: RectAreaLight,\n\n\tisRectAreaLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Light.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.width = this.width;\n\t\tdata.object.height = this.height;\n\n\t\treturn data;\n\n\t}\n\n} );\n\nexport { RectAreaLight };\n","import {\n\tREVISION,\n\tRGBAFormat,\n\tHalfFloatType,\n\tFloatType,\n\tUnsignedByteType,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tTrianglesDrawMode,\n\tNoColors,\n\tLinearToneMapping\n} from '../constants.js';\nimport { _Math } from '../math/Math.js';\nimport { DataTexture } from '../textures/DataTexture.js';\nimport { Frustum } from '../math/Frustum.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { ShaderLib } from './shaders/ShaderLib.js';\nimport { UniformsLib } from './shaders/UniformsLib.js';\nimport { UniformsUtils } from './shaders/UniformsUtils.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\nimport { WebGLAttributes } from './webgl/WebGLAttributes.js';\nimport { WebGLBackground } from './webgl/WebGLBackground.js';\nimport { WebGLBufferRenderer } from './webgl/WebGLBufferRenderer.js';\nimport { WebGLCapabilities } from './webgl/WebGLCapabilities.js';\nimport { WebGLClipping } from './webgl/WebGLClipping.js';\nimport { WebGLExtensions } from './webgl/WebGLExtensions.js';\nimport { WebGLGeometries } from './webgl/WebGLGeometries.js';\nimport { WebGLIndexedBufferRenderer } from './webgl/WebGLIndexedBufferRenderer.js';\nimport { WebGLInfo } from './webgl/WebGLInfo.js';\nimport { WebGLMorphtargets } from './webgl/WebGLMorphtargets.js';\nimport { WebGLObjects } from './webgl/WebGLObjects.js';\nimport { WebGLPrograms } from './webgl/WebGLPrograms.js';\nimport { WebGLProperties } from './webgl/WebGLProperties.js';\nimport { WebGLRenderLists } from './webgl/WebGLRenderLists.js';\nimport { WebGLRenderStates } from './webgl/WebGLRenderStates.js';\nimport { WebGLShadowMap } from './webgl/WebGLShadowMap.js';\nimport { WebGLSpriteRenderer } from './webgl/WebGLSpriteRenderer.js';\nimport { WebGLState } from './webgl/WebGLState.js';\nimport { WebGLTextures } from './webgl/WebGLTextures.js';\nimport { WebGLUniforms } from './webgl/WebGLUniforms.js';\nimport { WebGLUtils } from './webgl/WebGLUtils.js';\nimport { WebVRManager } from './webvr/WebVRManager.js';\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n * @author tschw\n */\n\nfunction WebGLRenderer( parameters ) {\n\n\tconsole.log( 'THREE.WebGLRenderer', REVISION );\n\n\tparameters = parameters || {};\n\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default';\n\n\tvar currentRenderList = null;\n\tvar currentRenderState = null;\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\tthis.context = null;\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\n\tthis.gammaInput = false;\n\tthis.gammaOutput = false;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = LinearToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\tthis.toneMappingWhitePoint = 1.0;\n\n\t// External buffers\n\tthis.saoBuffer = null;\n\tthis.screenBufferSize = new THREE.Vector2( 0, 0 );\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// internal properties\n\n\tvar _this = this,\n\n\t\t_isContextLost = false,\n\n\t\t// internal state cache\n\n\t\t_currentRenderTarget = null,\n\t\t_currentFramebuffer = null,\n\t\t_currentMaterialId = - 1,\n\t\t_currentGeometryProgram = '',\n\n\t\t_currentCamera = null,\n\t\t_currentArrayCamera = null,\n\n\t\t_currentViewport = new Vector4(),\n\t\t_currentScissor = new Vector4(),\n\t\t_currentScissorTest = null,\n\n\t\t//\n\n\t\t_usedTextureUnits = 0,\n\n\t\t//\n\n\t\t_width = _canvas.width,\n\t\t_height = _canvas.height,\n\n\t\t_pixelRatio = 1,\n\n\t\t_viewport = new Vector4( 0, 0, _width, _height ),\n\t\t_scissor = new Vector4( 0, 0, _width, _height ),\n\t\t_scissorTest = false,\n\n\t\t// frustum\n\n\t\t_frustum = new Frustum(),\n\n\t\t// clipping\n\n\t\t_clipping = new WebGLClipping(),\n\t\t_clippingEnabled = false,\n\t\t_localClippingEnabled = false,\n\n\t\t// camera matrices cache\n\n\t\t_projScreenMatrix = new Matrix4(),\n\n\t\t_vector3 = new Vector3();\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\t// initialize\n\n\tvar _gl;\n\n\ttry {\n\n\t\tvar contextAttributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\n\t\t\tpowerPreference: _powerPreference\n\t\t};\n\n\t\t// event listeners must be registered before WebGL context is created, see #12753\n\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\t_gl = _context || _canvas.getContext( 'webgl', contextAttributes ) || _canvas.getContext( 'experimental-webgl', contextAttributes );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\n\n\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\n\t}\n\n\tvar extensions, capabilities, state, info;\n\tvar properties, textures, attributes, geometries, objects;\n\tvar programCache, renderLists, renderStates;\n\n\tvar background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\tvar spriteRenderer;\n\n\tvar utils;\n\n\tfunction initGLContext() {\n\n\t\textensions = new WebGLExtensions( _gl );\n\t\textensions.get( 'WEBGL_depth_texture' );\n\t\textensions.get( 'OES_texture_float' );\n\t\textensions.get( 'OES_texture_float_linear' );\n\t\textensions.get( 'OES_texture_half_float' );\n\t\textensions.get( 'OES_texture_half_float_linear' );\n\t\textensions.get( 'OES_standard_derivatives' );\n\t\textensions.get( 'OES_element_index_uint' );\n\t\textensions.get( 'ANGLE_instanced_arrays' );\n\n\t\tutils = new WebGLUtils( _gl, extensions );\n\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\tstate = new WebGLState( _gl, extensions, utils );\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\n\n\t\tinfo = new WebGLInfo( _gl );\n\t\tproperties = new WebGLProperties();\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\n\t\tattributes = new WebGLAttributes( _gl );\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info );\n\t\tobjects = new WebGLObjects( geometries, info );\n\t\tmorphtargets = new WebGLMorphtargets( _gl );\n\t\tprogramCache = new WebGLPrograms( _this, extensions, capabilities );\n\t\trenderLists = new WebGLRenderLists();\n\t\trenderStates = new WebGLRenderStates();\n\n\t\tbackground = new WebGLBackground( _this, state, geometries, _premultipliedAlpha );\n\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info );\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info );\n\n\t\tspriteRenderer = new WebGLSpriteRenderer( _this, _gl, state, textures, capabilities );\n\n\t\tinfo.programs = programCache.programs;\n\n\t\t_this.context = _gl;\n\t\t_this.capabilities = capabilities;\n\t\t_this.extensions = extensions;\n\t\t_this.properties = properties;\n\t\t_this.renderLists = renderLists;\n\t\t_this.state = state;\n\t\t_this.info = info;\n\n\t}\n\n\tinitGLContext();\n\n\t// vr\n\n\tvar vr = new WebVRManager( _this );\n\n\tthis.vr = vr;\n\n\t// shadow map\n\n\tvar shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\n\n\tthis.shadowMap = shadowMap;\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\tvar extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.loseContext();\n\n\t};\n\n\tthis.forceContextRestore = function () {\n\n\t\tvar extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.restoreContext();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _width, _height, false );\n\n\t};\n\n\tthis.getSize = function () {\n\n\t\treturn {\n\t\t\twidth: _width,\n\t\t\theight: _height\n\t\t};\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\tvar device = vr.getDevice();\n\n\t\tif ( device && device.isPresenting ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = width * _pixelRatio;\n\t\t_canvas.height = height * _pixelRatio;\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getDrawingBufferSize = function () {\n\n\t\treturn {\n\t\t\twidth: _width * _pixelRatio,\n\t\t\theight: _height * _pixelRatio\n\t\t};\n\n\t};\n\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_pixelRatio = pixelRatio;\n\n\t\t_canvas.width = width * pixelRatio;\n\t\t_canvas.height = height * pixelRatio;\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getCurrentViewport = function () {\n\n\t\treturn _currentViewport;\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\t_viewport.set( x, _height - y - height, width, height );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\t_scissor.set( x, _height - y - height, width, height );\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function () {\n\n\t\treturn background.getClearColor();\n\n\t};\n\n\tthis.setClearColor = function () {\n\n\t\tbackground.setClearColor.apply( background, arguments );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn background.getClearAlpha();\n\n\t};\n\n\tthis.setClearAlpha = function () {\n\n\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tvar bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\n\n\t\tthis.setRenderTarget( renderTarget );\n\t\tthis.clear( color, depth, stencil );\n\n\t};\n\n\t//\n\n\tthis.dispose = function () {\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\trenderLists.dispose();\n\t\trenderStates.dispose();\n\t\tproperties.dispose();\n\t\tobjects.dispose();\n\n\t\tvr.dispose();\n\n\t\tstopAnimation();\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t_isContextLost = true;\n\n\t}\n\n\tfunction onContextRestore( /* event */ ) {\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t_isContextLost = false;\n\n\t\tinitGLContext();\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tvar material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReference( material );\n\n\t\tproperties.remove( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReference( material ) {\n\n\t\tvar programInfo = properties.get( material ).program;\n\n\t\tmaterial.program = undefined;\n\n\t\tif ( programInfo !== undefined ) {\n\n\t\t\tprogramCache.releaseProgram( programInfo );\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tfunction renderObjectImmediate( object, program, material ) {\n\n\t\tobject.render( function ( object ) {\n\n\t\t\t_this.renderBufferImmediate( object, program, material );\n\n\t\t} );\n\n\t}\n\n\tthis.renderBufferImmediate = function ( object, program, material ) {\n\n\t\tstate.initAttributes();\n\n\t\tvar buffers = properties.get( object );\n\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.position );\n\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\n\n\t\t\tif ( ! material.isMeshPhongMaterial &&\n\t\t\t\t! material.isMeshStandardMaterial &&\n\t\t\t\t! material.isMeshNormalMaterial &&\n\t\t\t\tmaterial.flatShading === true ) {\n\n\t\t\t\tfor ( var i = 0, l = object.count * 3; i < l; i += 9 ) {\n\n\t\t\t\t\tvar array = object.normalArray;\n\n\t\t\t\t\tvar nx = ( array[ i + 0 ] + array[ i + 3 ] + array[ i + 6 ] ) / 3;\n\t\t\t\t\tvar ny = ( array[ i + 1 ] + array[ i + 4 ] + array[ i + 7 ] ) / 3;\n\t\t\t\t\tvar nz = ( array[ i + 2 ] + array[ i + 5 ] + array[ i + 8 ] ) / 3;\n\n\t\t\t\t\tarray[ i + 0 ] = nx;\n\t\t\t\t\tarray[ i + 1 ] = ny;\n\t\t\t\t\tarray[ i + 2 ] = nz;\n\n\t\t\t\t\tarray[ i + 3 ] = nx;\n\t\t\t\t\tarray[ i + 4 ] = ny;\n\t\t\t\t\tarray[ i + 5 ] = nz;\n\n\t\t\t\t\tarray[ i + 6 ] = nx;\n\t\t\t\t\tarray[ i + 7 ] = ny;\n\t\t\t\t\tarray[ i + 8 ] = nz;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.normal );\n\n\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs && material.map ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.uv );\n\n\t\t\t_gl.vertexAttribPointer( programAttributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors && material.vertexColors !== NoColors ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.color );\n\n\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tthis.renderBufferDirect = function ( camera, fog, geometry, material, object, group ) {\n\n\t\tvar frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\tvar program = setProgram( camera, fog, material, object );\n\t\tvar geometryProgram = geometry.id + '_' + program.id + '_' + ( material.wireframe === true );\n\n\t\tvar updateBuffers = false;\n\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\n\n\t\t\t_currentGeometryProgram = geometryProgram;\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( object.morphTargetInfluences ) {\n\n\t\t\tmorphtargets.update( object, geometry, material, program );\n\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\t//\n\n\t\tvar index = geometry.index;\n\t\tvar position = geometry.attributes.position;\n\t\tvar rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\tvar attribute;\n\t\tvar renderer = bufferRenderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattribute = attributes.get( index );\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( attribute );\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tsetupVertexAttributes( material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, attribute.buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar dataCount = Infinity;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdataCount = index.count;\n\n\t\t} else if ( position !== undefined ) {\n\n\t\t\tdataCount = position.count;\n\n\t\t}\n\n\t\tvar rangeStart = geometry.drawRange.start * rangeFactor;\n\t\tvar rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\tvar groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\tvar groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\tvar drawStart = Math.max( rangeStart, groupStart );\n\t\tvar drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tvar drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else {\n\n\t\t\t\tswitch ( object.drawMode ) {\n\n\t\t\t\t\tcase TrianglesDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLES );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TriangleStripDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_STRIP );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TriangleFanDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_FAN );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t} else if ( object.isLine ) {\n\n\t\t\tvar lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\trenderer.setMode( _gl.LINE_LOOP );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\n\n\t\t\t}\n\n\t\t} else if ( object.isPoints ) {\n\n\t\t\trenderer.setMode( _gl.POINTS );\n\n\t\t}\n\n\t\tif ( geometry && geometry.isInstancedBufferGeometry ) {\n\n\t\t\tif ( geometry.maxInstancedCount > 0 ) {\n\n\t\t\t\trenderer.renderInstances( geometry, drawStart, drawCount );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\tfunction setupVertexAttributes( material, program, geometry ) {\n\n\t\tif ( geometry && geometry.isInstancedBufferGeometry ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.initAttributes();\n\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( var name in programAttributes ) {\n\n\t\t\tvar programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tvar normalized = geometryAttribute.normalized;\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\n\n\t\t\t\t\tvar attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tvar buffer = attribute.buffer;\n\t\t\t\t\tvar type = attribute.type;\n\t\t\t\t\tvar bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tvar data = geometryAttribute.data;\n\t\t\t\t\t\tvar stride = data.stride;\n\t\t\t\t\t\tvar offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t}\n\n\t// Compile\n\n\tthis.compile = function ( scene, camera ) {\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.material ) {\n\n\t\t\t\tif ( Array.isArray( object.material ) ) {\n\n\t\t\t\t\tfor ( var i = 0; i < object.material.length; i ++ ) {\n\n\t\t\t\t\t\tinitMaterial( object.material[ i ], scene.fog, object );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinitMaterial( object.material, scene.fog, object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\t// Animation Loop\n\n\tvar isAnimating = false;\n\tvar onAnimationFrame = null;\n\n\tfunction startAnimation() {\n\n\t\tif ( isAnimating ) return;\n\n\t\trequestAnimationLoopFrame();\n\n\t\tisAnimating = true;\n\n\t}\n\n\tfunction stopAnimation() {\n\n\t\tisAnimating = false;\n\n\t}\n\n\tfunction requestAnimationLoopFrame() {\n\n\t\tvar device = vr.getDevice();\n\n\t\tif ( device && device.isPresenting ) {\n\n\t\t\tdevice.requestAnimationFrame( animationLoop );\n\n\t\t} else {\n\n\t\t\twindow.requestAnimationFrame( animationLoop );\n\n\t\t}\n\n\t}\n\n\tfunction animationLoop( time ) {\n\n\t\tif ( isAnimating === false ) return;\n\n\t\tonAnimationFrame( time );\n\n\t\trequestAnimationLoopFrame();\n\n\t}\n\n\tthis.animate = function ( callback ) {\n\n\t\tonAnimationFrame = callback;\n\t\tonAnimationFrame !== null ? startAnimation() : stopAnimation();\n\n\t};\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\n\n\t\tif ( ! ( camera && camera.isCamera ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( _isContextLost ) return;\n\n\t\t// reset caching for this frame\n\n\t\t_currentGeometryProgram = '';\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tif ( vr.enabled ) {\n\n\t\t\tcamera = vr.getCamera( camera );\n\n\t\t}\n\n\t\t//\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\tscene.onBeforeRender( _this, scene, camera, renderTarget );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = _clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tcurrentRenderList = renderLists.get( scene, camera );\n\t\tcurrentRenderList.init();\n\n\t\tprojectObject( scene, camera, _this.sortObjects );\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\tcurrentRenderList.sort();\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled ) _clipping.beginShadows();\n\n\t\tvar shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tif ( _clippingEnabled ) _clipping.endShadows();\n\n\t\t//\n\n\t\tif ( this.info.autoReset ) this.info.reset();\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\trenderTarget = null;\n\n\t\t}\n\n\t\tthis.setRenderTarget( renderTarget );\n\n\t\t//\n\n\t\tbackground.render( currentRenderList, scene, camera, forceClear );\n\n\t\t// render scene\n\n\t\tvar opaqueObjects = currentRenderList.opaque;\n\t\tvar transparentObjects = currentRenderList.transparent;\n\n\t\tif ( scene.overrideMaterial ) {\n\n\t\t\tvar overrideMaterial = scene.overrideMaterial;\n\n\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera, overrideMaterial );\n\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera, overrideMaterial );\n\n\t\t} else {\n\n\t\t\t// opaque pass (front-to-back order)\n\n\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera );\n\n\t\t\t// transparent pass (back-to-front order)\n\n\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera );\n\n\t\t}\n\n\t\t// custom renderers\n\n\t\tvar spritesArray = currentRenderState.state.spritesArray;\n\n\t\tspriteRenderer.render( spritesArray, scene, camera );\n\n\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\tif ( renderTarget ) {\n\n\t\t\ttextures.updateRenderTargetMipmap( renderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.buffers.depth.setTest( true );\n\t\tstate.buffers.depth.setMask( true );\n\t\tstate.buffers.color.setMask( true );\n\n\t\tstate.setPolygonOffset( false );\n\n\t\tscene.onAfterRender( _this, scene, camera );\n\n\t\tif ( vr.enabled ) {\n\n\t\t\tvr.submitFrame();\n\n\t\t}\n\n\t\t// _gl.finish();\n\n\t\tcurrentRenderList = null;\n\t\tcurrentRenderState = null;\n\n\t};\n\n\t/*\n\t// TODO Duplicated code (Frustum)\n\n\tvar _sphere = new Sphere();\n\n\tfunction isObjectViewable( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null )\n\t\t\tgeometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere ).\n\t\tapplyMatrix4( object.matrixWorld );\n\n\t\treturn isSphereViewable( _sphere );\n\n\t}\n\n\tfunction isSpriteViewable( sprite ) {\n\n\t\t_sphere.center.set( 0, 0, 0 );\n\t\t_sphere.radius = 0.7071067811865476;\n\t\t_sphere.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn isSphereViewable( _sphere );\n\n\t}\n\n\tfunction isSphereViewable( sphere ) {\n\n\t\tif ( ! _frustum.intersectsSphere( sphere ) ) return false;\n\n\t\tvar numPlanes = _clipping.numPlanes;\n\n\t\tif ( numPlanes === 0 ) return true;\n\n\t\tvar planes = _this.clippingPlanes,\n\n\t\t\tcenter = sphere.center,\n\t\t\tnegRad = - sphere.radius,\n\t\t\ti = 0;\n\n\t\tdo {\n\n\t\t\t// out when deeper than radius in the negative halfspace\n\t\t\tif ( planes[ i ].distanceToPoint( center ) < negRad ) return false;\n\n\t\t} while ( ++ i !== numPlanes );\n\n\t\treturn true;\n\n\t}\n\t*/\n\n\tfunction projectObject( object, camera, sortObjects ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tvar visible = object.layers.test( camera.layers );\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\tcurrentRenderState.pushSprite( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isImmediateRenderObject ) {\n\n\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tcurrentRenderList.push( object, null, object.material, _vector3.z, null );\n\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\tobject.skeleton.update();\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar geometry = objects.update( object );\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tvar group = groups[ i ];\n\t\t\t\t\t\t\tvar groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, _vector3.z, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, sortObjects );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera, overrideMaterial ) {\n\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tvar renderItem = renderList[ i ];\n\n\t\t\tvar object = renderItem.object;\n\t\t\tvar geometry = renderItem.geometry;\n\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\n\t\t\tvar group = renderItem.group;\n\n\t\t\tif ( camera.isArrayCamera ) {\n\n\t\t\t\t_currentArrayCamera = camera;\n\n\t\t\t\tvar cameras = camera.cameras;\n\n\t\t\t\tfor ( var j = 0, jl = cameras.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar camera2 = cameras[ j ];\n\n\t\t\t\t\tif ( object.layers.test( camera2.layers ) ) {\n\n\t\t\t\t\t\tvar bounds = camera2.bounds;\n\n\t\t\t\t\t\tvar x = bounds.x * _width;\n\t\t\t\t\t\tvar y = bounds.y * _height;\n\t\t\t\t\t\tvar width = bounds.z * _width;\n\t\t\t\t\t\tvar height = bounds.w * _height;\n\n\t\t\t\t\t\tstate.viewport( _currentViewport.set( x, y, width, height ).multiplyScalar( _pixelRatio ) );\n\n\t\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_currentArrayCamera = null;\n\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\tif ( object.isImmediateRenderObject ) {\n\n\t\t\tvar frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\t\tvar program = setProgram( camera, scene.fog, material, object );\n\n\t\t\t_currentGeometryProgram = '';\n\n\t\t\trenderObjectImmediate( object, program, material );\n\n\t\t} else {\n\n\t\t\t_this.renderBufferDirect( camera, scene.fog, geometry, material, object, group );\n\n\t\t}\n\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t}\n\n\tfunction initMaterial( material, fog, object ) {\n\n\t\tvar materialProperties = properties.get( material );\n\n\t\tvar lights = currentRenderState.state.lights;\n\t\tvar shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tvar parameters = programCache.getParameters(\n\t\t\tmaterial, lights.state, shadowsArray, fog, _clipping.numPlanes, _clipping.numIntersection, object );\n\n\t\tvar code = programCache.getProgramCode( material, parameters );\n\n\t\tvar program = materialProperties.program;\n\t\tvar programChange = true;\n\n\t\tif ( program === undefined ) {\n\n\t\t\t// new material\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t} else if ( program.code !== code ) {\n\n\t\t\t// changed glsl or parameters\n\t\t\treleaseMaterialProgramReference( material );\n\n\t\t} else if ( materialProperties.lightsHash !== lights.state.hash ) {\n\n\t\t\tproperties.update( material, 'lightsHash', lights.state.hash );\n\t\t\tprogramChange = false;\n\n\t\t} else if ( parameters.shaderID !== undefined ) {\n\n\t\t\t// same glsl and uniform list\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// only rebuild uniform list\n\t\t\tprogramChange = false;\n\n\t\t}\n\n\t\tif ( programChange ) {\n\n\t\t\tif ( parameters.shaderID ) {\n\n\t\t\t\tvar shader = ShaderLib[ parameters.shaderID ];\n\n\t\t\t\tmaterialProperties.shader = {\n\t\t\t\t\tname: material.type,\n\t\t\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\t\tfragmentShader: shader.fragmentShader\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tmaterialProperties.shader = {\n\t\t\t\t\tname: material.type,\n\t\t\t\t\tuniforms: material.uniforms,\n\t\t\t\t\tvertexShader: material.vertexShader,\n\t\t\t\t\tfragmentShader: material.fragmentShader\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tmaterial.onBeforeCompile( materialProperties.shader, _this );\n\n\t\t\tprogram = programCache.acquireProgram( material, materialProperties.shader, parameters, code );\n\n\t\t\tmaterialProperties.program = program;\n\t\t\tmaterial.program = program;\n\n\t\t}\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tif ( material.morphTargets ) {\n\n\t\t\tmaterial.numSupportedMorphTargets = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\n\n\t\t\t\tif ( programAttributes[ 'morphTarget' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.morphNormals ) {\n\n\t\t\tmaterial.numSupportedMorphNormals = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphNormals; i ++ ) {\n\n\t\t\t\tif ( programAttributes[ 'morphNormal' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar uniforms = materialProperties.shader.uniforms;\n\n\t\tif ( ! material.isShaderMaterial &&\n\t\t\t! material.isRawShaderMaterial ||\n\t\t\tmaterial.clipping === true ) {\n\n\t\t\tmaterialProperties.numClippingPlanes = _clipping.numPlanes;\n\t\t\tmaterialProperties.numIntersection = _clipping.numIntersection;\n\t\t\tuniforms.clippingPlanes = _clipping.uniform;\n\n\t\t}\n\n\t\tmaterialProperties.fog = fog;\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.lightsHash = lights.state.hash;\n\n\t\tif ( material.lights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\tuniforms.lightDirection.value = lights.state.lightDirection;\n\t\t\tuniforms.directionalNormalOffset.value = lights.state.directionalNormalOffset;\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\tuniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n\t\t\tuniforms.spotPosition.value = lights.state.spotPosition;\n\t\t\tuniforms.spotNormalOffset.value = lights.state.spotNormalOffset;\n\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\tuniforms.rectShadowMap.value = lights.state.rectShadowMap;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tvar progUniforms = materialProperties.program.getUniforms(),\n\t\t\tuniformsList =\n\t\t\t\tWebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t}\n\n\tfunction setProgram( camera, fog, material, object ) {\n\n\t\t_usedTextureUnits = 0;\n\n\t\tvar materialProperties = properties.get( material );\n\t\tvar lights = currentRenderState.state.lights;\n\n\t\tvar useAO = (material.transparent || material.alphaTest > 0.) ? false : true;\n\n\t\tif ( _clippingEnabled ) {\n\n\t\t\tif ( _localClippingEnabled || camera !== _currentCamera ) {\n\n\t\t\t\tvar useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\t_clipping.setState(\n\t\t\t\t\tmaterial.clippingPlanes, material.clipIntersection, material.clipShadows,\n\t\t\t\t\tcamera, materialProperties, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.needsUpdate === false ) {\n\n\t\t\tif ( materialProperties.program === undefined ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( material.fog && materialProperties.fog !== fog ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( material.lights && materialProperties.lightsHash !== lights.state.hash ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== _clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection !== _clipping.numIntersection ) ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.needsUpdate ) {\n\n\t\t\tinitMaterial( material, fog, object );\n\t\t\tmaterial.needsUpdate = false;\n\n\t\t}\n\n\t\tvar refreshProgram = false;\n\t\tvar refreshMaterial = false;\n\t\tvar refreshLights = false;\n\n\t\tvar program = materialProperties.program,\n\t\t\tp_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.shader.uniforms;\n\n\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || camera !== _currentCamera ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\t\t\t// Avoid unneeded uniform updates per ArrayCamera's sub-camera\n\n\t\t\tif ( _currentCamera !== ( _currentArrayCamera || camera ) ) {\n\n\t\t\t\t_currentCamera = ( _currentArrayCamera || camera );\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\tvar uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\tmaterial.skinning ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// not sure why, but otherwise weird things happen\n\n\t\tif ( material.skinning ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tvar skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tvar bones = skeleton.bones;\n\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\tif ( skeleton.boneTexture === undefined ) {\n\n\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\n\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n\t\t\t\t\t\tvar size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\t\t\t\t\tsize = _Math.ceilPowerOfTwo( size );\n\t\t\t\t\t\tsize = Math.max( size, 4 );\n\n\t\t\t\t\t\tvar boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\n\n\t\t\t\t\t\tvar boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\t\t\t\t\t\tboneTexture.needsUpdate = true;\n\n\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\n\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\n\t\t\t\t\t\tskeleton.boneTextureSize = size;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture );\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingWhitePoint', _this.toneMappingWhitePoint );\n\t\t\tp_uniforms.setValue( _gl, 'screenBufferSize', _this.screenBufferSize );\n\t\t\tp_uniforms.setValue( _gl, 'useAO', useAO );\n\n\t\t\tp_uniforms.setValue( _gl, 'saoBuffer', _this.saoBuffer );\n\n\t\t\tif ( material.lights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t\tif ( material.isMeshToonMaterial ) {\n\n\t\t\t\t\trefreshUniformsToon( m_uniforms, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trefreshUniformsPhong( m_uniforms, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\t\trefreshUniformsPhysical( m_uniforms, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trefreshUniformsStandard( m_uniforms, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsDepth( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshDistanceMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsDistance( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsNormal( m_uniforms, material );\n\n\t\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\n\t\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\t\trefreshUniformsDash( m_uniforms, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\t\trefreshUniformsPoints( m_uniforms, material );\n\n\t\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\t\tm_uniforms.color.value = material.color;\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\n\n\t\t\t}\n\n\t\t\t// RectAreaLight Texture\n\t\t\t// TODO (mrdoob): Find a nicer implementation\n\n\t\t\tif ( m_uniforms.ltc_1 !== undefined ) m_uniforms.ltc_1.value = UniformsLib.LTC_1;\n\t\t\tif ( m_uniforms.ltc_2 !== undefined ) m_uniforms.ltc_2.value = UniformsLib.LTC_2;\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, _this );\n\n\t\t}\n\n\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, _this );\n\t\t\tmaterial.uniformsNeedUpdate = false;\n\n\t\t}\n\n\t\t// common matrices\n\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\treturn program;\n\n\t}\n\n\t// Uniforms (refresh uniforms objects)\n\n\tfunction refreshUniformsCommon( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value = material.color;\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t}\n\n\t\tif ( material.envMap ) {\n\n\t\t\tuniforms.envMap.value = material.envMap;\n\n\t\t\t// don't flip CubeTexture envMaps, flip everything else:\n\t\t\t//  WebGLRenderTargetCube will be flipped for backwards compatibility\n\t\t\t//  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\n\t\t\t// this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\n\t\t\tuniforms.flipEnvMap.value = ( ! ( material.envMap && material.envMap.isCubeTexture ) ) ? 1 : - 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t\tuniforms.maxMipLevel.value = properties.get( material.envMap ).__maxMipLevel;\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. normal map\n\t\t// 4. bump map\n\t\t// 5. alpha map\n\t\t// 6. emissive map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material ) {\n\n\t\tuniforms.diffuse.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * _pixelRatio;\n\t\tuniforms.scale.value = _height * 0.5;\n\n\t\tuniforms.map.value = material.map;\n\n\t\tif ( material.map !== null ) {\n\n\t\t\tif ( material.map.matrixAutoUpdate === true ) {\n\n\t\t\t\tmaterial.map.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( material.map.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsFog( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value = fog.color;\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert( uniforms, material ) {\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value = material.specular;\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\trefreshUniformsPhong( uniforms, material );\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tif ( material.envMap ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material ) {\n\n\t\tuniforms.clearCoat.value = material.clearCoat;\n\t\tuniforms.clearCoatRoughness.value = material.clearCoatRoughness;\n\n\t\trefreshUniformsStandard( uniforms, material );\n\n\t}\n\n\tfunction refreshUniformsDepth( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\n\t\tuniforms.nearDistance.value = material.nearDistance;\n\t\tuniforms.farDistance.value = material.farDistance;\n\n\t}\n\n\tfunction refreshUniformsNormal( uniforms, material ) {\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\t// Textures\n\n\tfunction allocTextureUnit() {\n\n\t\tvar textureUnit = _usedTextureUnits;\n\n\t\tif ( textureUnit >= capabilities.maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\n\n\t\t}\n\n\t\t_usedTextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\tthis.allocTextureUnit = allocTextureUnit;\n\n\t// this.setTexture2D = setTexture2D;\n\tthis.setTexture2D = ( function () {\n\n\t\tvar warned = false;\n\n\t\t// backwards compatibility: peel texture.texture\n\t\treturn function setTexture2D( texture, slot ) {\n\n\t\t\tif ( texture && texture.isWebGLRenderTarget ) {\n\n\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\t\t\twarned = true;\n\n\t\t\t\t}\n\n\t\t\t\ttexture = texture.texture;\n\n\t\t\t}\n\n\t\t\ttextures.setTexture2D( texture, slot );\n\n\t\t};\n\n\t}() );\n\n\tthis.setTexture = ( function () {\n\n\t\tvar warned = false;\n\n\t\treturn function setTexture( texture, slot ) {\n\n\t\t\tif ( ! warned ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\" );\n\t\t\t\twarned = true;\n\n\t\t\t}\n\n\t\t\ttextures.setTexture2D( texture, slot );\n\n\t\t};\n\n\t}() );\n\n\tthis.setTextureCube = ( function () {\n\n\t\tvar warned = false;\n\n\t\treturn function setTextureCube( texture, slot ) {\n\n\t\t\t// backwards compatibility: peel texture.texture\n\t\t\tif ( texture && texture.isWebGLRenderTargetCube ) {\n\n\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\n\t\t\t\t\twarned = true;\n\n\t\t\t\t}\n\n\t\t\t\ttexture = texture.texture;\n\n\t\t\t}\n\n\t\t\t// currently relying on the fact that WebGLRenderTargetCube.texture is a Texture and NOT a CubeTexture\n\t\t\t// TODO: unify these code paths\n\t\t\tif ( ( texture && texture.isCubeTexture ) ||\n\t\t\t\t( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\n\n\t\t\t\t// CompressedTexture can have Array in image :/\n\n\t\t\t\t// this function alone should take care of cube textures\n\t\t\t\ttextures.setTextureCube( texture, slot );\n\n\t\t\t} else {\n\n\t\t\t\t// assumed: texture property of THREE.WebGLRenderTargetCube\n\n\t\t\t\ttextures.setTextureCubeDynamic( texture, slot );\n\n\t\t\t}\n\n\t\t};\n\n\t}() );\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\n\n\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tvar framebuffer = null;\n\t\tvar isCube = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tvar __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLRenderTargetCube ) {\n\n\t\t\t\tframebuffer = __webglFramebuffer[ renderTarget.activeCubeFace ];\n\t\t\t\tisCube = true;\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t} else {\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio );\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio );\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t}\n\n\t\tif ( _currentFramebuffer !== framebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport );\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tif ( isCube ) {\n\n\t\t\tvar textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + renderTarget.activeCubeFace, textureProperties.__webglTexture, renderTarget.activeMipMapLevel );\n\n\t\t}\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer ) {\n\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( framebuffer ) {\n\n\t\t\tvar restore = false;\n\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\t\trestore = true;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tvar texture = renderTarget.texture;\n\t\t\t\tvar textureFormat = texture.format;\n\t\t\t\tvar textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) && // IE11, Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! ( textureType === HalfFloatType && extensions.get( 'EXT_color_buffer_half_float' ) ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\tif ( restore ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.copyFramebufferToTexture = function ( position, texture, level ) {\n\n\t\tvar width = texture.image.width;\n\t\tvar height = texture.image.height;\n\t\tvar glFormat = utils.convert( texture.format );\n\n\t\tthis.setTexture2D( texture, 0 );\n\n\t\t_gl.copyTexImage2D( _gl.TEXTURE_2D, level || 0, glFormat, position.x, position.y, width, height, 0 );\n\n\t};\n\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level ) {\n\n\t\tvar width = srcTexture.image.width;\n\t\tvar height = srcTexture.image.height;\n\t\tvar glFormat = utils.convert( dstTexture.format );\n\t\tvar glType = utils.convert( dstTexture.type );\n\t\tvar pixels = srcTexture.isDataTexture ? srcTexture.image.data : srcTexture.image;\n\n\t\tthis.setTexture2D( dstTexture, 0 );\n\n\t\t_gl.texSubImage2D( _gl.TEXTURE_2D, level || 0, position.x, position.y, width, height, glFormat, glType, pixels );\n\n\t};\n\n}\n\n\nexport { WebGLRenderer };\n"],"names":["min","max","vector","matrix","x","y","z","v1","quaternion","CullFaceNone","CullFaceBack","CullFaceFront","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","DoubleSide","NoColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","DepthFormat","DepthStencilFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","TrianglesDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","_Math","DEG2RAD","Math","PI","RAD2DEG","generateUUID","lut","i","toString","d0","random","d1","d2","d3","toUpperCase","clamp","value","euclideanModulo","n","m","mapLinear","a1","a2","b1","b2","lerp","t","smoothstep","smootherstep","randInt","low","high","floor","randFloat","randFloatSpread","range","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","pow","ceil","log","LN2","floorPowerOfTwo","EventDispatcher","Vector2","this","Matrix4","elements","arguments","length","console","error","Quaternion","w","_x","_y","_z","_w","undefined","Vector3","Matrix3","Object","assign","prototype","addEventListener","type","listener","_listeners","listeners","indexOf","push","hasEventListener","removeEventListener","listenerArray","index","splice","dispatchEvent","event","target","array","slice","l","call","defineProperties","width","get","set","height","isVector2","setScalar","scalar","setX","setY","setComponent","Error","getComponent","clone","constructor","copy","v","add","warn","addVectors","addScalar","s","a","b","addScaledVector","sub","subVectors","subScalar","multiply","multiplyScalar","divide","divideScalar","applyMatrix3","e","clampScalar","minVal","maxVal","clampLength","round","roundToZero","negate","dot","lengthSq","sqrt","manhattanLength","abs","normalize","angle","atan2","distanceTo","distanceToSquared","dx","dy","manhattanDistanceTo","setLength","alpha","lerpVectors","v2","equals","fromArray","offset","toArray","fromBufferAttribute","attribute","getX","getY","rotateAround","center","c","cos","sin","isMatrix4","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","te","identity","me","copyPosition","extractBasis","xAxis","yAxis","zAxis","setFromMatrixColumn","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","euler","isEuler","d","f","order","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","q","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","lookAt","eye","up","crossVectors","multiplyMatrices","premultiply","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","applyToBufferAttribute","count","getZ","applyMatrix4","setXYZ","determinant","transpose","tmp","setPosition","getInverse","throwOnDegenerate","t11","t12","t13","t14","det","msg","detInv","scale","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","theta","makeRotationY","makeRotationZ","makeRotationAxis","axis","tx","ty","makeScale","makeShear","compose","position","decompose","sx","sy","sz","invSX","invSY","invSZ","setFromRotationMatrix","makePerspective","left","right","top","bottom","near","far","makeOrthographic","h","p","slerp","qa","qb","qm","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","Number","EPSILON","len","tDir","onChangeCallback","setFromEuler","update","c1","c2","c3","s1","s2","s3","setFromAxisAngle","halfAngle","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","r","vFrom","vTo","inverse","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","onChange","callback","isVector3","setZ","multiplyVectors","applyEuler","applyQuaternion","applyAxisAngle","qx","qy","qz","qw","ix","iy","iz","iw","project","camera","projectionMatrix","matrixWorld","unproject","transformDirection","cross","ax","ay","az","bx","by","bz","projectOnVector","projectOnPlane","planeNormal","reflect","normal","angleTo","acos","dz","setFromSpherical","sinPhiRadius","phi","radius","setFromCylindrical","setFromMatrixPosition","setFromMatrixScale","isMatrix3","setFromMatrix4","g","getNormalMatrix","matrix4","transposeIntoArray","setUvTransform","rotation","cx","cy","rotate","translate","points","closestPoint","box","p1","p2","sphere","textureId","Texture","image","mapping","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","defineProperty","uuid","name","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","version","onUpdate","DataTexture","data","Box3","Sphere","Plane","constant","Frustum","p0","p3","p4","p5","planes","create","isTexture","updateMatrix","source","toJSON","meta","isRootObject","textures","output","metadata","generator","wrap","images","url","canvas","HTMLCanvasElement","document","createElementNS","context","getContext","ImageData","putImageData","drawImage","toDataURL","getDataURL","dispose","transformUv","uv","isDataTexture","isBox3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromBufferAttribute","setFromPoints","makeEmpty","il","expandByPoint","setFromCenterAndSize","size","halfSize","setFromObject","object","expandByObject","isEmpty","getCenter","getSize","point","expandByVector","expandByScalar","scope","traverse","node","geometry","isGeometry","vertices","isBufferGeometry","attributes","updateMatrixWorld","containsPoint","containsBox","getParameter","intersectsBox","intersectsSphere","clampPoint","intersectsPlane","plane","intersectsTriangle","v0","f0","f1","f2","testAxis","extents","triangleNormal","satForAxes","axes","j","triangle","distanceToPoint","getBoundingSphere","intersect","union","optionalCenter","maxRadiusSq","empty","radiusSum","deltaLengthSq","getBoundingBox","setComponents","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","intersectLine","line","direction","delta","denominator","start","intersectsLine","startSign","endSign","end","coplanarPoint","m1","optionalNormalMatrix","normalMatrix","referencePoint","frustum","setFromMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","intersectsObject","boundingSphere","computeBoundingSphere","intersectsSprite","sprite","negRadius","hsl","ShaderChunk","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","apply_accumulative_buffers_fragment","apply_accumulative_buffers_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","lights_pars_maps","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","UniformsUtils","merge","uniforms","merged","u","uniforms_src","uniforms_dst","parameter_src","isColor","isVector4","Array","isArray","ColorKeywords","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","Color","setRGB","setHex","setStyle","hex","setHSL","hue2rgb","style","handleAlpha","string","parseFloat","exec","color","components","parseInt","charAt","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","getHex","getHexString","getHSL","hue","saturation","lightness","getStyle","offsetHSL","addColors","color1","color2","UniformsLib","diffuse","opacity","map","uvTransform","alphaMap","specularmap","specularMap","envmap","envMap","flipEnvMap","reflectivity","refractionRatio","maxMipLevel","aomap","aoMap","aoMapIntensity","lightmap","lightMap","lightMapIntensity","emissivemap","emissiveMap","bumpmap","bumpMap","bumpScale","normalmap","normalMap","normalScale","displacementmap","displacementMap","displacementScale","displacementBias","roughnessmap","roughnessMap","metalnessmap","metalnessMap","gradientmap","gradientMap","fog","fogDensity","fogNear","fogFar","fogColor","lights","ambientLightColor","directionalLights","properties","shadow","shadowBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","lightDirection","directionalNormalOffset","spotLights","distance","coneCos","penumbraCos","decay","spotShadowMap","spotShadowMatrix","spotPosition","spotNormalOffset","pointLights","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","rectShadowMap","ShaderLib","basic","vertexShader","fragmentShader","lambert","emissive","phong","specular","shininess","standard","roughness","metalness","envMapIntensity","dashed","dashSize","totalSize","depth","cube","tCube","tFlip","equirect","tEquirect","distanceRGBA","referencePosition","nearDistance","farDistance","Vector4","WebGLAttributes","gl","buffers","WeakMap","isInterleavedBufferAttribute","remove","deleteBuffer","buffer","delete","bufferType","usage","dynamic","DYNAMIC_DRAW","STATIC_DRAW","createBuffer","bindBuffer","bufferData","onUploadCallback","FLOAT","Float32Array","Float64Array","Uint16Array","UNSIGNED_SHORT","Int16Array","SHORT","Uint32Array","UNSIGNED_INT","Int32Array","INT","Int8Array","BYTE","Uint8Array","UNSIGNED_BYTE","bytesPerElement","BYTES_PER_ELEMENT","updateRange","bufferSubData","subarray","updateBuffer","Euler","_order","DefaultOrder","Layers","mask","physical","clearCoat","clearCoatRoughness","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","getW","RotationOrders","asin","setFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","channel","enable","toggle","disable","test","layers","q1","object3DId","Object3D","parent","children","DefaultUp","enumerable","modelViewMatrix","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","renderOrder","userData","Camera","matrixWorldInverse","OrthographicCamera","zoom","view","updateProjectionMatrix","Face3","materialIndex","vertexNormals","vertexColors","isObject3D","onBeforeRender","onAfterRender","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","isCamera","getObjectById","id","getObjectByProperty","getObjectByName","getWorldPosition","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverseVisible","traverseAncestors","force","geometries","materials","shapes","serialize","library","element","JSON","stringify","parameters","shape","material","uuids","extractFromCache","cache","values","key","recursive","parse","child","isOrthographicCamera","setViewOffset","fullWidth","fullHeight","enabled","offsetX","offsetY","clearViewOffset","zoomW","zoomH","scaleW","scaleH","obj","geometryId","Geometry","colors","faces","faceVertexUvs","morphTargets","morphNormals","skinWeights","skinIndices","lineDistances","boundingBox","elementsNeedUpdate","verticesNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","BufferAttribute","itemSize","normalized","TypeError","Int8BufferAttribute","Uint8BufferAttribute","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Uint16BufferAttribute","Int32BufferAttribute","Uint32BufferAttribute","Float32BufferAttribute","Float64BufferAttribute","DirectGeometry","normals","uvs","uvs2","groups","arrayMax","face","jl","computeBoundingBox","fromBufferGeometry","indices","positions","uv2","tempNormals","tempUVs","tempUVs2","addFace","group","computeFaceNormals","cb","ab","fl","vA","vB","vC","computeVertexNormals","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","colors1","colors2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeMesh","mesh","isMesh","mergeVertices","verticesMap","unique","changes","precision","faceIndicesToRemove","idx","diff","sortFacesByMaterialIndex","_id","sort","newUvs1","newUvs2","vertex","normalsHash","colorsHash","uvsHash","hasFaceVertexUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","hash","k","kl","uvsCopy","morphTarget","morphNormal","srcVertexNormal","destVertexNormal","isBufferAttribute","setArray","setDynamic","copyAt","index1","index2","copyArray","copyColorsArray","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","setXY","setXYZW","onUpload","computeGroups","fromGeometry","morphTargetsPosition","hasFaceVertexUv2","morphTargetsLength","morphTargetsNormal","morphNormalsLength","hasSkinIndices","hasSkinWeights","vertexUvs","bufferGeometryId","BufferGeometry","morphAttributes","drawRange","Infinity","BoxGeometry","widthSegments","heightSegments","depthSegments","BoxBufferGeometry","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","addGroup","setIndex","addAttribute","PlaneGeometry","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","getIndex","getAttribute","removeAttribute","clearGroups","setDrawRange","needsUpdate","isPoints","isLine","updateFromObject","direct","__directGeometry","lineDistance","fromDirectGeometry","isNaN","pA","pB","pC","normalizeNormals","attributeArray1","attribute2","attributeArray2","toNonIndexed","geometry2","array2","morphAttribute","segCenter","segDir","startP","startEnd","materialId","Material","blending","side","flatShading","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","premultipliedAlpha","overdraw","MeshBasicMaterial","combine","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","skinning","setValues","ShaderMaterial","defines","linewidth","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","Ray","origin","Line3","Triangle","Mesh","drawMode","updateMorphTargets","WebGLBackground","renderer","state","planeCamera","planeMesh","boxMesh","clearColor","clearAlpha","setClear","getClearColor","setClearColor","getClearAlpha","setClearAlpha","render","renderList","scene","forceClear","background","autoClear","clear","autoClearColor","autoClearDepth","autoClearStencil","isCubeTexture","renderBufferDirect","WebGLBufferRenderer","info","mode","setMode","drawArrays","renderInstances","extension","drawArraysInstancedANGLE","maxInstancedCount","WebGLCapabilities","maxAnisotropy","getMaxPrecision","getShaderPrecisionFormat","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","maxPrecision","logarithmicDepthBuffer","maxTextures","MAX_TEXTURE_IMAGE_UNITS","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","maxTextureSize","MAX_TEXTURE_SIZE","maxCubemapSize","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","MAX_VERTEX_ATTRIBS","maxVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","vertexTextures","floatFragmentTextures","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","floatVertexTextures","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","uniform","resetGlobalState","numPlanes","numIntersection","projectPlanes","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","i4","init","enableLocalClipping","beginShadows","endShadows","setState","fromCache","nGlobal","lGlobal","clippingState","WebGLExtensions","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","buffergeometry","memory","_bufferGeometry","geometryAttributes","ELEMENT_ARRAY_BUFFER","ARRAY_BUFFER","getWireframeAttribute","geometryIndex","WebGLIndexedBufferRenderer","drawElements","drawElementsInstancedANGLE","WebGLInfo","frame","calls","triangles","lines","programs","autoReset","reset","instanceCount","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","LINES","LINE_STRIP","LINE_LOOP","POINTS","absNumericalSort","WebGLMorphtargets","influencesList","morphInfluences","program","objectInfluences","morphTargetInfluences","influences","influence","getUniforms","setValue","WebGLObjects","updateList","CubeTexture","isMaterial","onBeforeCompile","newValue","currentValue","isRoot","emissiveIntensity","sizeAttenuation","gapSize","srcPlanes","dstPlanes","isMeshBasicMaterial","isShaderMaterial","ray","at","recast","closestPointToPoint","directionDistance","distanceSqToPoint","distanceSqToSegment","optionalPointOnRay","optionalPointOnSegment","s0","sqrDist","extDet","segExtent","a01","b0","invDet","intersectSphere","tca","radius2","thc","t0","t1","distanceToPlane","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","edge1","edge2","backfaceCulling","sign","DdN","DdQxE2","DdE1xQ","QdN","distanceSq","closestPointToPointParameter","clampToLine","startEnd2","getNormal","targetLengthSq","getBarycoord","dot00","dot01","dot02","dot11","dot12","denom","invDenom","setFromPointsAndIndices","i0","i1","i2","getArea","getMidpoint","getPlane","edgeList","projectedPoint","minDistance","setDrawMode","morphTargetDictionary","ml","keys","String","inverseMatrix","tempA","tempB","tempC","uvA","uvB","uvC","barycoord","intersectionPoint","intersectionPointWorld","uvIntersection","uv1","uv3","checkIntersection","raycaster","checkBufferGeometryIntersection","intersection","faceIndex","intersects","fvA","fvB","fvC","isMultiMaterial","faceMaterial","tl","targets","uvs_f","emptyTexture","emptyCubeTexture","UniformContainer","seq","arrayCacheF32","arrayCacheI32","mat4array","mat3array","flatten","nBlocks","blockSize","firstElem","allocTexUnits","allocTextureUnit","setValue1f","uniform1f","addr","setValue1i","uniform1i","setValue2fv","uniform2fv","uniform2f","setValue3fv","uniform3f","uniform3fv","setValue4fv","uniform4fv","uniform4f","setValue2fm","uniformMatrix2fv","setValue3fm","uniformMatrix3fv","setValue4fm","uniformMatrix4fv","setValueT1","unit","setTexture2D","setValueT6","setTextureCube","setValue2iv","uniform2iv","setValue3iv","uniform3iv","setValue4iv","uniform4iv","setValue1fv","uniform1fv","setValue1iv","uniform1iv","setValueV2a","setValueV3a","setValueV4a","setValueM2a","setValueM3a","setValueM4a","setValueT1a","units","setValueT6a","SingleUniform","activeInfo","getSingularSetter","PureArrayUniform","getPureArraySetter","StructuredUniform","RePathPart","addUniform","container","uniformObject","parseUniform","path","pathLength","lastIndex","match","matchEnd","idIsIndex","subscript","next","WebGLUniforms","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","WebGLShader","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","split","join","addLineNumbers","setOptional","upload","seqWithValue","programIdCount","getEncodingComponents","getTexelDecodingFunction","functionName","filterEmptyLine","replaceLightNums","replace","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","parseIncludes","include","unrollLoops","snippet","unroll","WebGLProgram","code","shadowMapTypeDefine","shadowMapType","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","prefixVertex","prefixFragment","gammaFactorDefine","customExtensions","rendererExtensions","envMapCubeUV","filter","generateExtensions","customDefines","chunks","generateDefines","createProgram","isRawShaderMaterial","supportsVertexTextures","maxBones","useFog","fogExp","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","physicallyCorrectLights","toneMapping","toneMappingName","getToneMappingFunction","outputEncoding","mapEncoding","envMapEncoding","emissiveMapEncoding","depthPacking","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","cachedUniforms","cachedAttributes","programLog","getProgramInfoLog","trim","vertexLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","getError","VALIDATE_STATUS","diagnostics","prefix","deleteShader","getAttributes","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","fetchAttributeLocations","destroy","deleteProgram","usedTimes","WebGLPrograms","capabilities","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","parameterNames","getTextureEncodingFromMap","gammaOverrideLinear","isWebGLRenderTarget","texture","getParameters","shadows","nClipPlanes","nClipIntersection","shaderID","isSkinnedMesh","bones","skeleton","nVertexUniforms","nVertexMatrices","allocateBones","currentRenderTarget","getRenderTarget","gammaOutput","gammaInput","envMapMode","isFogExp2","maxMorphTargets","maxMorphNormals","directional","spot","rectArea","hemi","shadowMap","getProgramCode","acquireProgram","pl","programInfo","releaseProgram","pop","WebGLProperties","painterSortStable","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","renderItem","WebGLRenderLists","lists","list","UniformsCache","light","halfWidth","halfHeight","lineGeometry","coneGeometry","WebGLLights","ambient","vector3","matrix42","setup","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","intensity","isAmbientLight","isDirectionalLight","bias","mapSize","normalOffset","isSpotLight","penumbra","isRectAreaLight","isPointLight","isHemisphereLight","WebGLRenderState","lightsArray","shadowsArray","spritesArray","setupLights","pushLight","pushShadow","shadowLight","pushSprite","WebGLRenderStates","renderStates","renderState","WebGLRenderTarget","options","scissor","scissorTest","viewport","depthBuffer","stencilBuffer","depthTexture","WebGLShadowMap","_renderer","_objects","_frustum","_projScreenMatrix","_shadowMapSize","_maxShadowMapSize","_lookTarget","_lightPositionWorld","_MorphingFlag","_SkinningFlag","_NumberOfMaterialVariants","_depthMaterials","_distanceMaterials","_materialCache","0","1","2","cubeDirections","cubeUps","cube2DViewPorts","useMorphing","useSkinning","depthMaterial","distanceMaterial","getDepthMaterial","lightPositionWorld","result","materialVariants","customMaterial","customDepthMaterial","customDistanceMaterial","variantIndex","keyA","keyB","materialsForVariant","cachedMaterial","isMeshDistanceMaterial","renderObject","shadowCamera","groupMaterial","autoUpdate","faceCount","_gl","_state","BLEND","setTest","setScissorTest","vpWidth","vpHeight","pars","isSpotLightShadow","shadowMatrix","setRenderTarget","vpDimensions","CanvasTexture","WebGLSpriteRenderer","vertexBuffer","elementBuffer","spritePosition","spriteRotation","spriteScale","sprites","uvOffset","uvScale","fogType","fogDepth","fillStyle","fillRect","useProgram","initAttributes","enableAttribute","disableUnusedAttributes","CULL_FACE","vertexAttribPointer","activeTexture","TEXTURE0","oldFogType","sceneFogType","isFog","density","setBlending","setMask","WebGLState","utils","colorBuffer","locked","currentColorMask","currentColorClear","colorMask","setLocked","lock","currentDepthMask","currentDepthFunc","currentDepthClear","DEPTH_TEST","depthMask","setFunc","NEVER","ALWAYS","LESS","LEQUAL","EQUAL","GEQUAL","GREATER","NOTEQUAL","clearDepth","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","STENCIL_TEST","stencilMask","stencilFunc","stencilRef","setOp","stencilFail","stencilZFail","stencilZPass","stencilOp","stencil","clearStencil","maxVertexAttributes","newAttributes","enabledAttributes","attributeDivisors","compressedTextureFormats","currentProgram","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","MAX_COMBINED_TEXTURE_IMAGE_UNITS","lineWidthAvailable","glVersion","VERSION","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","emptyTextures","blendEquationSeparate","FUNC_ADD","blendFuncSeparate","ONE","blendFunc","SRC_ALPHA","ZERO","ONE_MINUS_SRC_COLOR","ONE_MINUS_SRC_ALPHA","SRC_COLOR","convert","setFlipSided","frontFace","CW","CCW","setCullFace","cullFace","BACK","FRONT","FRONT_AND_BACK","setPolygonOffset","factor","POLYGON_OFFSET_FILL","webglSlot","TEXTURE_2D","TEXTURE_CUBE_MAP","TEXTURE_CUBE_MAP_POSITIVE_X","enableVertexAttribArray","vertexAttribDivisorANGLE","enableAttributeAndDivisor","meshPerAttribute","disableVertexAttribArray","getCompressedTextureFormats","formats","COMPRESSED_TEXTURE_FORMATS","setMaterial","frontFaceCW","setLineWidth","lineWidth","SCISSOR_TEST","webglType","webglTexture","boundTexture","compressedTexImage2D","apply","WebGLTextures","_canvas","_isWebGL2","WebGL2RenderingContext","_videoTextures","clampToMaxSize","maxSize","textureNeedsGenerateMipmaps","generateMipmap","__maxMipLevel","LOG2E","filterFallback","LINEAR","onTextureDispose","textureProperties","__image__webglTextureCube","deleteTexture","__webglInit","__webglTexture","deallocateTexture","isVideoTexture","onRenderTargetDispose","renderTarget","renderTargetProperties","isWebGLRenderTargetCube","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","deallocateRenderTarget","slot","updateVideoTexture","__version","complete","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","textureNeedsPowerOfTwo","HTMLImageElement","ImageBitmap","makePowerOfTwo","isPowerOfTwoImage","glFormat","glType","setTextureParameters","mipmap","isDepthTexture","internalFormat","DEPTH_COMPONENT","DEPTH_COMPONENT32F","DEPTH_COMPONENT16","DEPTH_STENCIL","isCompressedTexture","uploadTexture","textureType","TEXTURE_WRAP_S","TEXTURE_WRAP_T","CLAMP_TO_EDGE","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","RGBA4","isCompressed","cubeImage","setTextureCubeDynamic","setupRenderTarget","isCube","isTargetPowerOfTwo","createFramebuffer","COLOR_ATTACHMENT0","webglDepthTexture","setupDepthTexture","createRenderbuffer","setupDepthRenderbuffer","updateRenderTargetMipmap","WebGLUtils","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","HALF_FLOAT_OES","ALPHA","RGB","LUMINANCE","LUMINANCE_ALPHA","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","MIN_EXT","MAX_EXT","UNSIGNED_INT_24_8_WEBGL","PerspectiveCamera","fov","aspect","focus","filmGauge","filmOffset","ArrayCamera","cameras","WebVRManager","device","frameData","poseTarget","standingMatrix","standingMatrixInverse","window","VRFrameData","onVRDisplayPresentChange","tempQuaternion","tempPosition","cameraL","bounds","cameraR","currentSize","currentPixelRatio","cameraVR","isPresenting","eyeParameters","getEyeParameters","renderWidth","renderHeight","getPixelRatio","setDrawingBufferSize","userHeight","getDevice","setDevice","setPoseTarget","getCamera","depthNear","depthFar","getFrameData","stageParameters","sittingToStandingTransform","pose","poseObject","orientation","leftViewMatrix","rightViewMatrix","leftProjectionMatrix","rightProjectionMatrix","getLayers","layer","leftBounds","rightBounds","getStandingMatrix","submitFrame","Scene","overrideMaterial","CylinderGeometry","radiusTop","radiusBottom","radialSegments","openEnded","thetaStart","thetaLength","CylinderBufferGeometry","indexArray","generateCap","centerIndexStart","centerIndexEnd","cosTheta","sinTheta","slope","indexRow","generateTorso","Clock","autoStart","startTime","oldTime","elapsedTime","running","Raycaster","params","Line","LOD","Points","threshold","Sprite","PointCloud","ascSort","intersectObject","linecap","linejoin","LineSegments","STANDARD","PHYSICAL","ArrowHelper","headLength","headWidth","cone","setDirection","Light","LightShadow","DirectionalLightShadow","DirectionalLight","AmbientLight","HemisphereLight","setSize","isMeshDepthMaterial","isPerspectiveCamera","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","getEffectiveFOV","getFilmWidth","skew","isArrayCamera","performance","Date","now","stop","getElapsedTime","getDelta","newTime","linePrecision","setFromCamera","coords","optionalTarget","intersectObjects","objects","isLineBasicMaterial","computeLineDistances","positionAttribute","precisionSq","vStart","vEnd","interSegment","interRay","step","isLineSegments","nbVertices","isMeshStandardMaterial","isMeshPhysicalMaterial","isShadowMaterial","isLineDashedMaterial","setColor","isLight","Cache","files","file","DefaultLoadingManager","onLoad","onProgress","onError","isLoading","itemsLoaded","itemsTotal","urlModifier","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","transform","ImageLoader","manager","TextureLoader","CubeTextureLoader","Curve","arcLengthDivisions","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","ArcCurve","aRadius","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","t2","calc","crossOrigin","load","cached","setTimeout","substr","src","setCrossOrigin","setPath","loader","isJPEG","search","urls","loaded","loadTexture","getPoint","getPointAt","getUtoTmapping","getPoints","divisions","getSpacedPoints","getLength","lengths","getLengths","cacheArcLengths","current","last","sum","updateArcLengths","targetArcLength","arcLengths","comparison","lengthBefore","getTangent","pt1","getTangentAt","computeFrenetFrames","segments","closed","tangents","binormals","vec","mat","MAX_VALUE","tz","fromJSON","json","isEllipseCurve","twoPi","deltaAngle","samePoints","isArcCurve","px","py","pz","CatmullRomCurve3","curveType","CatmullRom","QuadraticBezier","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","CubicBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","CubicBezierCurve","v3","CubicBezierCurve3","LineCurve","LineCurve3","QuadraticBezierCurve","QuadraticBezierCurve3","SplineCurve","isCatmullRomCurve3","intPoint","weight","isCubicBezierCurve","isCubicBezierCurve3","isLineCurve","isLineCurve3","isQuadraticBezierCurve","isQuadraticBezierCurve3","isSplineCurve","CurvePath","curves","autoClose","Path","currentPoint","Shape","holes","linkedList","dim","clockwise","signedArea","insertNode","removeNode","filterPoints","again","steiner","area","prev","earcutLinked","ear","invSize","pass","zOrder","prevZ","nextZ","tail","numMerges","pSize","qSize","inSize","sortLinked","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","locallyInside","isValidDiagonal","splitPolygon","compareX","eliminateHole","hole","outerNode","hx","hy","mx","my","tanMin","findHoleBridge","getLeftmost","leftmost","intersectsPolygon","inside","middleInside","q2","Node","an","bp","curve","closePath","startPoint","endPoint","Curves[ 'LineCurve' ]","curveLengths","getCurveLengths","segmentLength","lens","cacheLengths","sums","resolution","pts","Curves","moveTo","lineTo","quadraticCurveTo","aCPx","aCPy","bezierCurveTo","aCP1x","aCP1y","aCP2x","aCP2y","splineThru","concat","arc","absarc","absellipse","ellipse","firstPoint","lastPoint","getPointsHoles","holesPts","extractPoints","ShapeUtils","contour","isClockWise","triangulateShape","holeIndices","removeDupEndPts","addContour","holeIndex","forEach","hasHoles","outerLen","queue","eliminateHoles","Earcut","ShapePath","subPaths","currentPath","Font","createPath","char","glyph","glyphs","cpx","cpy","cpx1","cpy1","cpx2","cpy2","o","outline","_cachedOutline","ha","toShapes","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPt","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","tmpPoints","tmpHoles","betterShapeHoles","newShapes","newShapeHoles","mainIdx","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","isFont","generateShapes","text","paths","chars","line_height","yMax","yMin","underlineThickness","ret","createPaths","loading","FileLoader","FontLoader","ExtrudeGeometry","ExtrudeBufferGeometry","verticesArray","uvArray","addShape","extrudePts","splineTube","binormal","position2","ahole","hl","placeholder","curveSegments","steps","amount","bevelEnabled","bevelThickness","bevelSize","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","extrudeByPath","shapePoints","reverse","scalePt2","pt","bs","vert","vlen","flen","getBevelVec","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","sf","v_trans_lensq","direction_eq","contourMovements","oneHoleMovements","holesMovements","verticesMovements","sidewalls","layeroffset","sl","slen1","slen2","f4","f3","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","buildLidFaces","buildSideFaces","dataUriRegexResult","mimeType","isBase64","decodeURIComponent","atob","response","responseType","toLowerCase","charCodeAt","Blob","parser","DOMParser","parseFromString","request","XMLHttpRequest","header","open","callbacks","status","withCredentials","overrideMimeType","requestHeader","setRequestHeader","send","setResponseType","setWithCredentials","setMimeType","substring","font","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","TextGeometry","TextBufferGeometry","Uniform","SphereGeometry","phiStart","phiLength","SphereBufferGeometry","thetaEnd","grid","verticesRow","SpotLightShadow","SpotLight","power","SpriteMaterial","RawShaderMaterial","TOON","isMeshPhongMaterial","isSpriteMaterial","isPointsMaterial","isMeshToonMaterial","isMeshNormalMaterial","isMeshLambertMaterial","BlendingMode","textureLoader","materialLoader","MaterialLoader","Loader","setTextures","getTexture","Materials","shading","Handlers","handlers","regex","onLoadStart","onLoadProgress","onLoadComplete","initMaterials","texturePath","createMaterial","fullPath","mapDiffuseRepeat","mapDiffuseOffset","mapDiffuseWrap","mapDiffuseAnisotropy","mapEmissiveRepeat","mapEmissiveOffset","mapEmissiveWrap","mapEmissiveAnisotropy","mapLightRepeat","mapLightOffset","mapLightWrap","mapLightAnisotropy","mapAORepeat","mapAOOffset","mapAOWrap","mapAOAnisotropy","mapBumpRepeat","mapBumpOffset","mapBumpWrap","mapBumpAnisotropy","mapNormalRepeat","mapNormalOffset","mapNormalWrap","mapNormalAnisotropy","mapSpecularRepeat","mapSpecularOffset","mapSpecularWrap","mapSpecularAnisotropy","mapMetalnessRepeat","mapMetalnessOffset","mapMetalnessWrap","mapMetalnessAnisotropy","mapRoughnessRepeat","mapRoughnessOffset","mapRoughnessWrap","mapRoughnessAnisotropy","mapAlphaRepeat","mapAlphaOffset","mapAlphaWrap","mapAlphaAnisotropy","LoaderUtils","decodeText","TextDecoder","decode","fromCharCode","escape","extractUrlBase","lastIndexOf","Group","isGroup","wordChar","wordCharOrDot","directoryRe","nodeRe","objectRe","propertyRe","trackRe","supportedObjectNames","reservedRe","AnimationUtils","arraySlice","from","to","isTypedArray","convertArray","forceClone","ArrayBuffer","isView","DataView","getKeyframeOrder","times","sortedArray","stride","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","time","StringKeyframeTrack","interpolation","KeyframeTrack","BooleanKeyframeTrack","Interpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","_cachedIndex","valueSize","QuaternionLinearInterpolant","QuaternionKeyframeTrack","ColorKeyframeTrack","NumberKeyframeTrack","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","LinearInterpolant","DiscreteInterpolant","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","validate","optimize","VectorKeyframeTrack","AnimationClip","duration","tracks","resetDuration","Composite","targetGroup","optionalParsedPath","parsedPath","PropertyBinding","parseTrackName","_targetGroup","_bindings","subscribe_","rootNode","findNode","nodeName","Fog","RectAreaLight","ValueTypeName","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","evaluate","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","getValueSize","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o1","o0","oP","oN","wP","wN","ppp","sP","sN","offset1","offset0","weight1","weight0","trackType","_getTrackTypeForValueTypeName","track","getInterpolation","typeName","InterpolantFactoryMethodDiscrete","factoryMethod","createInterpolant","message","shift","timeOffset","timeScale","endTime","nKeys","valid","prevTime","currTime","smoothInterpolation","writeIndex","keep","offsetP","offsetN","readOffset","writeOffset","jsonTracks","frameTime","fps","clip","clipTracks","CreateFromMorphTargetSequence","morphTargetSequence","noLoop","numMorphTargets","findByName","objectOrClipArray","clipArray","animations","CreateClipsFromMorphTargetSequences","animationToMorphTargets","pattern","parts","animationMorphTargets","clips","parseAnimation","animation","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","boneName","getValue","bind","firstValidIndex","nCachedObjects_","binding","bindings","unbind","root","isAnimationObjectGroup","sanitizeNodeName","RegExp","matches","results","objectName","objectIndex","propertyIndex","lastDot","bone","getBoneByName","searchNodeSubtree","childNode","subTreeNode","_getValue_unavailable","_setValue_unavailable","BindingType","Direct","EntireArray","ArrayElement","HasFromToArray","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","GetterByBindingType","resolvedProperty","SetterByBindingTypeAndVersioning","targetObject","dest","targetArray","sourceArray","nodeProperty","versioning","bindingType","_getValue_unbound","_setValue_unbound","_context","_alpha","_depth","_stencil","_antialias","antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","currentRenderList","currentRenderState","domElement","sortObjects","toneMappingExposure","toneMappingWhitePoint","saoBuffer","screenBufferSize","THREE","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","spriteRenderer","_this","_isContextLost","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentGeometryProgram","_currentCamera","_currentArrayCamera","_currentViewport","_currentScissor","_currentScissorTest","_usedTextureUnits","_width","_height","_pixelRatio","_viewport","_scissor","_scissorTest","_clipping","_clippingEnabled","_localClippingEnabled","_vector3","getTargetPixelRatio","contextAttributes","onContextLost","onContextRestore","rangeMin","rangeMax","initGLContext","vr","preventDefault","onMaterialDispose","releaseMaterialProgramReference","deallocateMaterial","getContextAttributes","forceContextLoss","loseContext","forceContextRestore","restoreContext","setPixelRatio","updateStyle","setViewport","getDrawingBufferSize","pixelRatio","getCurrentViewport","setScissor","boolean","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearTarget","stopAnimation","renderBufferImmediate","hasPositions","hasNormals","hasUvs","hasColors","programAttributes","positionArray","normalArray","nx","ny","nz","colorArray","setProgram","geometryProgram","updateBuffers","rangeFactor","isInstancedBufferGeometry","materialDefaultAttributeValues","programAttribute","geometryAttribute","isInstancedInterleavedBuffer","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","setupVertexAttributes","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineLoop","compile","initMaterial","warned","isAnimating","onAnimationFrame","requestAnimationLoopFrame","requestAnimationFrame","animationLoop","renderObjects","camera2","isImmediateRenderObject","renderObjectImmediate","materialProperties","programChange","lightsHash","numSupportedMorphTargets","numSupportedMorphNormals","progUniforms","uniformsList","useAO","useCache","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","boneTexture","boneMatrices","boneTextureSize","refreshUniformsFog","refreshUniformsCommon","refreshUniformsLambert","refreshUniformsPhong","refreshUniformsToon","refreshUniformsStandard","refreshUniformsPhysical","refreshUniformsDepth","refreshUniformsDistance","refreshUniformsNormal","refreshUniformsLine","refreshUniformsDash","refreshUniformsPoints","ltc_1","LTC_1","ltc_2","LTC_2","uvScaleMap","animate","projectObject","isSprite","opaqueObjects","transparentObjects","textureUnit","setTexture","activeCubeFace","activeMipMapLevel","readRenderTargetPixels","restore","textureFormat","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","copyFramebufferToTexture","level","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","pixels","texSubImage2D","LEFT","MIDDLE","RIGHT"],"mappings":"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AAIK,EAChD8iB,GAAG7iB,EAAI2pB,EAAMxI,OAAOnhB,EAAI,EAAI4iB,EAAIljB,IAAIM,EAAI4iB,EAAIjjB,IAAIK,EAChD8iB,GAAG9iB,EAAI2pB,EAAMxI,OAAOnhB,EAAI,EAAI4iB,EAAIjjB,IAAIK,EAAI4iB,EAAIljB,IAAIM,EAEhD,IAAIkI,EAAKyhB,EAAMa,gBAAiB3H,IAC5B1a,EAAKwhB,EAAMa,gBAAiB1H,IAIhC,GAAK5a,EAAK,GAAKC,EAAK,EAEnB,OAAO,EAMT,OAAO,IAMTihB,cAAe,SAAWZ,GAIzB,IAFA,IAAIpD,EAAS5a,KAAK4a,OAERtd,EAAI,EAAGA,EAAI,EAAGA,IAEvB,GAAKsd,EAAQtd,GAAI0iB,gBAAiBhC,GAAU,EAE3C,OAAO,EAMT,OAAO,SGsNHuF,GClSKC,GAAc,CACxBC,qGACAC,sFACAC,8FACAC,4bACAC,4GACAC,iPACAC,+HACAC,wDACAC,6DACAC,27LACAC,m7BACAC,olBACAC,2NACAC,kJACAC,mJACAC,yEACAC,yEACAC,qEACAC,mEACAC,msEACAC,inIACAC,sJACAC,gLACAC,2LACAC,oOACAC,+FACAC,6EACAC,wwFACAC,irDACAC,oqBACAC,oPACAC,qhBACAC,iEACAC,sEACAC,4TACAC,8NACAC,oaACAC,iJACAC,wHACAC,+vEACAC,yrHACAC,o6GACAC,8NACAC,w8CACAC,ukBACAC,6wJACAC,8lGACAC,g0BACAC,kRACAC,+JACAC,oKACAC,gKACAC,2QACAC,mKACAC,uEACAC,gOACAC,6GACAC,+LACAC,gGACAC,mWACAC,mMACAC,6rBACAC,ubACAC,kNACAC,o1BACAC,6yCACAC,2GACAC,+HACAC,6GACAC,6WACAC,+LACAC,gGACAC,soNACAC,6tBACAC,8vCACAC,8pDACAC,kPACAC,iiCACAC,iZACAC,gYACAC,+MACAC,6FACAC,oHACAC,08BACAC,kRACAC,+SACAC,mSACAC,sGACAC,2HACAC,wFACAC,0KAEAC,kQACAC,2OACAC,kwBACAC,+qBACAC,itBACAC,suBACAC,kYACAC,6MACAC,qzBACAC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"}