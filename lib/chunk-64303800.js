import{g as PREVIEW_MATERIAL_COLOR,i as PREVIEW_MATERIAL_OPACITY,E as PREVIEW_MATERIAL_ROUGHNESS}from"./chunk-36924942.js";import{h as MeshGenerator}from"./chunk-200be00d.js";class ConfiguratorMeshGenerator extends MeshGenerator{constructor(e){super(e),this._geometryComponentMaterialCache=new Map,this._configuratorPreviewMaterial=new THREE.MeshStandardMaterial({color:PREVIEW_MATERIAL_COLOR,transparent:!0,opacity:PREVIEW_MATERIAL_OPACITY,roughness:PREVIEW_MATERIAL_ROUGHNESS,envMap:null}),this._environmentLoader.setEnvMap(this._configuratorPreviewMaterial)}generateMesh(e=0,t=null,a,r,s,o,n,i=!1){let h;h=i?this._generateGeometry(t,r,s,o,n).clone():this._generateGeometry(t,r,s,o,n);const _=this._createMesh(e,t,h);return _.layers.set(3),a&&this.materialQueue.push(this._assignMaterial(_,a).then(()=>{e&&t&&this._geometryComponentMaterialCache.set(this._getComponentMeshId(e,t),a),this._materialLoaded&&this._materialLoaded()})),_}_createMesh(e,t,a){if(e&&t){const r=this._getComponentMeshId(e,t);if(this._geometryComponentMaterialCache.has(r)){const e=this._geometryComponentMaterialCache.get(r);if(this._cacheHolder.materialCache.has(e)){const t=this._cacheHolder.materialCache.get(e);return new THREE.Mesh(a,t)}}}return new THREE.Mesh(a,this._configuratorPreviewMaterial.clone())}_getComponentMeshId(e,t){return e+"_"+t}setMaterial(e,t,a){this._assignMaterial(e,t).then(()=>{this._materialLoaded&&this._materialLoaded()})}loadMaterial(e,t,a){return super._loadMaterial(e,t,a)}loadTextures(e,t,a,r){return super._loadTextures(e,t,a,r)}}export{ConfiguratorMeshGenerator as a};
//# sourceMappingURL=chunk-64303800.js.map
