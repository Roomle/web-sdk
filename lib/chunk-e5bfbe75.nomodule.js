System.register([],function(e,t){return{execute:function(){const t=e("c",function(e){return e*(Math.PI/180)}),a=(e("w",function(e,a,n,r,o,i){e=Math.sqrt(e*e+n*n);const s=o/i,l=2*Math.atan(Math.tan(r*Math.PI/180/2)*s)*180/Math.PI,c=t(r),p=a/2/Math.tan(c/2),E=e/(2*Math.atan(Math.PI*l/360));return Math.max(p,E)}),function(e){return Math.round(1e3*e)/1e3}),n=(e("P",function(e,t){return Math.abs(e.y-t.y)+Math.abs(e.x-t.x)}),e("y",function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}),e("x",function(e){let t=function(e){return e*(180/Math.PI)}(e);return t<0&&(t=180+(180+t)),t}),e("t",.4),e("g","#DDDDDD"),e("E",1),e("F",0),e("i",1),e("r","#DDDDDD"),e("p",1),e("q",0),e("o",.6),e("s",.9),e("a",(e,t,a,n)=>{if(!e||!t||0===a||0===n)return new THREE.Vector3;let r=e.clone(),o=a/2,i=n/2;return r.project(t),r.x=Math.floor(r.x*o+o),r.y=Math.floor(-r.y*i+i),r.z=e.distanceTo(t.position),r}),e("e",(e,t)=>{t||(t=new THREE.Vector3(0,0,0));let a=new THREE.Vector3(e.size.x/1e3,e.size.z/1e3,e.size.y/1e3),n=new THREE.Vector3(e.origin.x/1e3,e.origin.z/1e3,e.origin.y/-1e3),r=new THREE.Vector3(0,0,-a.z).add(n).sub(t),o=new THREE.Vector3(a.x,a.y,0).add(n).add(t);return new THREE.Box3(r,o)}),e("f",e=>(e.from=e.from/1e3,e.to=e.to/1e3,1===e.type.value?(e.type={value:2},e.from*=-1,e.to*=-1):2===e.type.value&&(e.type={value:1}),e)),e("z",(e,t,a)=>{e.castShadow=a,e.receiveShadow=t,e.children.forEach(e=>{n(e,t,a)})}));e("u",(e,t)=>{let n=a(e.x),r=a(e.y),o=a(e.z),i=a(t.x),s=a(t.y),l=a(t.z);return n===i&&r===s&&o===l}),e("O",(e,t)=>{let n=a(e.w),r=a(e.x),o=a(e.y),i=a(e.z),s=a(t.w),l=a(t.x),c=a(t.y),p=a(t.z);return n===s&&r===l&&o===c&&i===p}),e("v",(e,t)=>{let n=a(e.x),r=a(e.y),o=a(t.x),i=a(t.y);return n===o&&r===i});let r=null;const o=()=>{if(r)return r;const e=new Uint8Array(4);for(let t=0;t<1;t++){const a=4*t;e[a]=255,e[a+1]=255,e[a+2]=255,e[a+3]=255}const t=new THREE.DataTexture(e,1,1,THREE.RGBAFormat);return t.needsUpdate=!0,t},i=(e,t,a,n)=>{const r=new Uint8Array(4),o=Math.floor(255*e),i=Math.floor(255*t),s=Math.floor(255*a),l=Math.floor(255*n);for(let e=0;e<4;e++){const t=4*e;r[t]=o,r[t+1]=i,r[t+2]=s,r[t+3]=l}const c=new THREE.DataTexture(r,1,1,THREE.RGBAFormat);return c.needsUpdate=!0,c};e("h",(e,t,a,n)=>{const r=new THREE.CubeTexture;r.format=THREE.RGBAFormat,r.generateMipmaps=!1;for(let o=0;o<6;++o){const s=i(e,t,a,n);s.format=r.format,s.type=r.type,s.minFilter=r.minFilter,s.magFilter=r.magFilter,s.generateMipmaps=r.generateMipmaps,s.needsUpdate=!0,r.images[o]=s}return r.needsUpdate=!0,r}),e("C",(e,t)=>{let a=new THREE.MeshPhysicalMaterial({metalness:1===e.shading.metallic?1:.5,reflectivity:e.shading.metallic||.5,roughness:e.shading.roughness||.5,transparent:e.shading.alpha<1,opacity:e.shading.alpha,depthWrite:e.shading.alpha>=1,aoMapIntensity:e.shading.occlusion||1});if(e.shading.basecolor){const t=new THREE.Color(e.shading.basecolor.r,e.shading.basecolor.g,e.shading.basecolor.b);a.color.copy(t.copyGammaToLinear(t))}return t&&t.setEnvMap(a),e.shading.doubleSided?a.side=THREE.DoubleSide:a.side=THREE.FrontSide,e.shading.alphaCutoff?a.alphaTest=e.shading.alphaCutoff:a.alphaTest=0,r||(r=o()),a.map=r,a}),e("Q",e=>{let t=e.color.clone().copyLinearToGamma(e.color),a={alpha:e.opacity,metallic:e.reflectivity,basecolor:{r:t.r,g:t.g,b:t.b},roughness:e.roughness,doubleSided:e.side===THREE.DoubleSide,alphaCutoff:e.alphaTest};return 1===e.metalness?a.metallic=1:a.metallic=e.reflectivity,a});let s=null;e("D",(e,t,a,n,r,i)=>(s||((s=new THREE.TextureLoader).crossOrigin=""),new Promise((l,c)=>{s.load(e,e=>{e.anisotropy=n,e.wrapS=THREE.RepeatWrapping,e.wrapT=THREE.RepeatWrapping,e.repeat.set(r,i),"XYZ"===t.mapping?(a.normalMap=e,a.map===o()&&(a.map=null)):"ORM"===t.mapping?(a.aoMap=e,a.roughnessMap=e,a.metalnessMap=e):a.map=e,"RGBA"===t.mapping&&(a.transparent=!0),a.needsUpdate=!0,l()},c)}))),e("b",(e=!0)=>(window.__RML_GUI__||(window.__RML_GUI__=new dat.GUI({autoPlace:e})),window.__RML_GUI__)),e("M",(e,t,a=!0)=>{let n=e.getWorldDirection(new THREE.Vector3),r=Math.abs(n.y);r<.5&&!t.transparent&&l(t,!0,a),r>.5&&t.transparent&&l(t,!1,a)});const l=e("N",(e,t,a=!0)=>{if(!e.userData.tween)if(t)if(e.transparent=!0,a){let t={opacity:1};e.userData.tween=!0,new TWEEN.Tween(t).to({opacity:.2},400).easing(TWEEN.Easing.Sinusoidal.In).onUpdate(()=>{e.opacity=t.opacity}).onComplete(()=>{e.userData.tween=!1}).start()}else e.opacity=.2;else if(a){let t={opacity:.2};e.userData.tween=!0,new TWEEN.Tween(t).to({opacity:1},400).easing(TWEEN.Easing.Sinusoidal.In).onUpdate(()=>{e.opacity=t.opacity}).onComplete(()=>{e.transparent=!1,e.userData.tween=!1}).start()}else e.opacity=1,e.transparent=!1}),c=(e("J",e=>{let t=new THREE.Color;return t.setRGB((e>>16)/255,(e>>8&255)/255,(e>>0&255)/255),t}),e("B",e=>{e.traverse(e=>{if(e instanceof THREE.Mesh&&TWEEN){let t=e.material;if(0===t.opacity)return;let a={opacity:0,transparent:!0},n={opacity:t.opacity,transparent:t.transparent};t.transparent=a.transparent,t.opacity=a.opacity,new TWEEN.Tween(a).to(n,500).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{t.opacity=a.opacity}).onComplete(()=>{t.transparent=n.transparent}).start()}})}),e("L",(e,t)=>{let a=(new THREE.Box3).setFromObject(e),n=a.getSize(new THREE.Vector3),r=Math.min(n.x,n.y,n.z),o=!0;return r>5&&(console.warn("GLB seems to be too big ("+r+")",t),o=!1),a.min.y<-.01&&(console.warn("GLB seems to be under the floor ("+a.min.y+"): ",t),o=!1),o}),e("d",e=>{"Mesh"===e.type?p(e):c(e)}),e("k",e=>{e&&e.children&&0!==e.children.length&&e.children.forEach(e=>{p(e)})})),p=e("n",e=>{e&&(e.material&&h(e.material),e.geometry&&E(e.geometry),e.children&&e.children.length>0&&c(e))}),E=e("m",e=>{e&&e.dispose()}),h=e("l",e=>{e&&(e.map&&e.map.dispose(),e.normalMap&&e.normalMap.dispose(),e.dispose())});let u;e("I",()=>(u||((u=new THREE.MeshBasicMaterial).visible=!1),u)),e("K",(e,t)=>{let a=t.x/2,n=t.z/2,r=new THREE.Vector3(-a,.01,n),o=[r,new THREE.Vector3(r.x,r.y,r.z+.2),new THREE.Vector3(r.x-.2,r.y,r.z+.2),new THREE.Vector3(r.x-.2,r.y,r.z)],i=[new THREE.Face3(3,2,0),new THREE.Face3(2,1,0)],s=new THREE.Geometry;return s.vertices.push(...o),s.faces.push(...i),s.computeFaceNormals(),s.computeVertexNormals(),s}),e("G",e=>0===e.x&&0===e.y&&0===e.z),e("H",(e,t)=>{let a="";return e.materialId&&""!==e.materialId?a=e.materialId:e.catalogItemId&&""!==e.catalogItemId?a=e.catalogItemId:e.rgbValue>0?a="rbg"+JSON.stringify(e.rgbValue):e.length>0?a=e:t&&1===t.value?a="default_wall_material_"+e.getSourceType().value:t&&7===t.value&&(a="default_ceiling_material_"+e.getSourceType().value),a}),e("A",(e,t,a=.01)=>!(!e||!t)&&Math.abs(e.x-t.x)<=a&&Math.abs(e.y-t.y)<=a&&Math.abs(e.z-t.z)<=a),e("j",class{constructor(e){this.info=e,this._init()}_init(){this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}resolve(e){e&&this._resolve(e),this._resolve()}reject(e){this._reject(e)}wait(){return this._promise}reset(){this._init()}})}}});
//# sourceMappingURL=chunk-e5bfbe75.nomodule.js.map
